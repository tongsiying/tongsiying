<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/hedgehog.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/hedgehog.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"tongsiying.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"hide","b2t":true,"scrollpercent":true,"padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="article">
<meta property="og:title" content="第35篇：MySQL基础">
<meta property="og:url" content="https://tongsiying.github.io/2022/01/18/python/python_%E5%9F%BA%E7%A1%80%E7%AF%87/%E7%AC%AC35%E7%AF%87%EF%BC%9AMySQL%E5%9F%BA%E7%A1%80/index.html">
<meta property="og:site_name" content="tongsiying">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://tongsiying.github.io/2022/01/18/python/python_%E5%9F%BA%E7%A1%80%E7%AF%87/%E7%AC%AC35%E7%AF%87%EF%BC%9AMySQL%E5%9F%BA%E7%A1%80/697611-20181128162350281-970223551.png">
<meta property="og:image" content="https://tongsiying.github.io/2022/01/18/python/python_%E5%9F%BA%E7%A1%80%E7%AF%87/%E7%AC%AC35%E7%AF%87%EF%BC%9AMySQL%E5%9F%BA%E7%A1%80/1565456-20200612003006015-406492025.png">
<meta property="og:image" content="https://tongsiying.github.io/2022/01/18/python/python_%E5%9F%BA%E7%A1%80%E7%AF%87/%E7%AC%AC35%E7%AF%87%EF%BC%9AMySQL%E5%9F%BA%E7%A1%80/1565456-20200612004340482-297415950.png">
<meta property="og:image" content="https://tongsiying.github.io/2022/01/18/python/python_%E5%9F%BA%E7%A1%80%E7%AF%87/%E7%AC%AC35%E7%AF%87%EF%BC%9AMySQL%E5%9F%BA%E7%A1%80/1476293-20180914215251810-1439123742.png">
<meta property="og:image" content="https://tongsiying.github.io/2022/01/18/python/python_%E5%9F%BA%E7%A1%80%E7%AF%87/%E7%AC%AC35%E7%AF%87%EF%BC%9AMySQL%E5%9F%BA%E7%A1%80/1476293-20180914215347433-310633610.png">
<meta property="og:image" content="https://tongsiying.github.io/2022/01/18/python/python_%E5%9F%BA%E7%A1%80%E7%AF%87/%E7%AC%AC35%E7%AF%87%EF%BC%9AMySQL%E5%9F%BA%E7%A1%80/1476293-20180914215411590-1997526098.png">
<meta property="og:image" content="https://tongsiying.github.io/2022/01/18/python/python_%E5%9F%BA%E7%A1%80%E7%AF%87/%E7%AC%AC35%E7%AF%87%EF%BC%9AMySQL%E5%9F%BA%E7%A1%80/1476293-20181230152107047-1597741975.png">
<meta property="article:published_time" content="2022-01-18T12:47:53.770Z">
<meta property="article:modified_time" content="2022-01-25T13:18:14.756Z">
<meta property="article:author" content="tongsiying">
<meta property="article:tag" content="python">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://tongsiying.github.io/2022/01/18/python/python_%E5%9F%BA%E7%A1%80%E7%AF%87/%E7%AC%AC35%E7%AF%87%EF%BC%9AMySQL%E5%9F%BA%E7%A1%80/697611-20181128162350281-970223551.png">

<link rel="canonical" href="https://tongsiying.github.io/2022/01/18/python/python_%E5%9F%BA%E7%A1%80%E7%AF%87/%E7%AC%AC35%E7%AF%87%EF%BC%9AMySQL%E5%9F%BA%E7%A1%80/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>第35篇：MySQL基础 | tongsiying</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
<!-- 加入APlayer音乐播放器 -->
<link rel="stylesheet" href="/dist/APlayer.min.css">
<div id="aplayer"></div>
<script type="text/javascript" src="/dist/APlayer.min.js"></script>
<script type="text/javascript" src="/dist/music.js"></script>
  <div class="container use-motion">
    <div class="headband"></div>
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">tongsiying</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">阅读|运动|自律</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/catalog/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-目录">

    <a href="/catalog/" rel="section"><i class="fa fa fa-th fa-fw"></i>目录</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-读书清单">

    <a href="/read" rel="section"><i class="fa fa-book fa-fw"></i>读书清单</a>

  </li>
        <li class="menu-item menu-item-读书笔记">

    <a href="/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" rel="section"><i class="fa fa-book fa-fw"></i>读书笔记</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://tongsiying.github.io/2022/01/18/python/python_%E5%9F%BA%E7%A1%80%E7%AF%87/%E7%AC%AC35%E7%AF%87%EF%BC%9AMySQL%E5%9F%BA%E7%A1%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/gutianle.gif">
      <meta itemprop="name" content="tongsiying">
      <meta itemprop="description" content="问渠那得清如许？为有源头活水来。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tongsiying">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          第35篇：MySQL基础
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-01-18 20:47:53" itemprop="dateCreated datePublished" datetime="2022-01-18T20:47:53+08:00">2022-01-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-01-25 21:18:14" itemprop="dateModified" datetime="2022-01-25T21:18:14+08:00">2022-01-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>45k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>41 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p class="description"></p>
<a id="more"></a>  

<h1 id="一、数据库简介"><a href="#一、数据库简介" class="headerlink" title="一、数据库简介"></a>一、数据库简介</h1><p>数据库：存放数据的仓库</p>
<h2 id="1-sql及其规范"><a href="#1-sql及其规范" class="headerlink" title="1. sql及其规范"></a>1. sql及其规范</h2><p>sql是Structured Query Language(结构化查询语言)的缩写。SQL是专为数据库而建立的操作命令集，是一种功能齐全的数据库语言。<br>在使用它时，只需要发出“做什么”的命令，“怎么做”是不用使用者考虑的。SQL功能强大、简单易学、使用方便，已经成为了数据库操作的基础，并且现在几乎所有的数据库均支持sql。</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">（<span class="number">1</span>）在数据库系统中，<span class="keyword">SQL</span>语句不区分大小写(建议用大写) 。但字符串常量区分大小写。建议命令大写，表名库名小写；</span><br><span class="line"></span><br><span class="line">（<span class="number">2</span>）<span class="keyword">SQL</span>语句可单行或多行书写，以“;”结尾。关键词不能跨多行或简写。</span><br><span class="line"></span><br><span class="line">（<span class="number">3</span>） 用空格和缩进来提高语句的可读性。子句通常位于独立行，便于编辑，提高可读性。</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> tb_table</span><br><span class="line"><span class="keyword">WHERE</span> <span class="type">NAME</span>="YUAN";</span><br><span class="line"></span><br><span class="line">（<span class="number">4</span>）注释：单行注释：<span class="comment">--</span></span><br><span class="line">多行注释：<span class="comment">/*......*/</span></span><br><span class="line"></span><br><span class="line">（<span class="number">5</span>）<span class="keyword">sql</span>语句可以折行操作</span><br><span class="line"></span><br><span class="line">（<span class="number">6</span>）DDL,DML和DCL</span><br></pre></td></tr></table></figure>



<h2 id="2-MYSQL常用命令"><a href="#2-MYSQL常用命令" class="headerlink" title="2. MYSQL常用命令"></a>2. MYSQL常用命令</h2><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">-- </span><br><span class="line">-- <span class="comment">启动mysql服务与停止mysql服务命令：</span></span><br><span class="line"><span class="comment"></span>-- </span><br><span class="line">-- <span class="comment">net</span> <span class="comment">start</span> <span class="comment">mysql</span></span><br><span class="line"><span class="comment"></span>-- <span class="comment">net</span> <span class="comment">stop</span>  <span class="comment">mysql</span></span><br><span class="line"><span class="comment"></span>-- </span><br><span class="line">-- </span><br><span class="line">-- <span class="comment">登陆与退出命令：</span></span><br><span class="line"><span class="comment"></span>-- </span><br><span class="line">--    <span class="comment">mysql</span> <span class="comment">－h</span> <span class="comment">服务器IP</span> <span class="literal">-</span><span class="comment">P</span> <span class="comment">端口号</span> <span class="literal">-</span><span class="comment">u</span>  <span class="comment">用户名</span> <span class="literal">-</span><span class="comment">p</span> <span class="comment">密码</span> <span class="comment">－－prompt</span> <span class="comment">命令提示符</span>  <span class="comment">－－delimiter</span> <span class="comment">指定分隔符</span></span><br><span class="line"><span class="comment"></span>--    <span class="comment">mysql</span> <span class="comment">－h</span> <span class="comment">127</span><span class="string">.</span><span class="comment">0</span><span class="string">.</span><span class="comment">0</span><span class="string">.</span><span class="comment">1</span> <span class="literal">-</span><span class="comment">P</span> <span class="comment">3306</span> <span class="literal">-</span><span class="comment">uroot</span> <span class="literal">-</span><span class="comment">p123</span></span><br><span class="line"><span class="comment"></span>--    <span class="comment">quit</span>--<span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="comment">exit</span>--<span class="literal">-</span><span class="literal">-</span><span class="comment">\q;</span></span><br><span class="line"><span class="comment"></span>-- </span><br><span class="line">-- </span><br><span class="line">-- <span class="comment">\s;</span>   --<span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="comment">my</span><span class="string">.</span><span class="comment">ini文件：</span><span class="title">[</span><span class="comment">mysql</span><span class="title">]</span> <span class="comment">default</span><span class="literal">-</span><span class="comment">character</span><span class="literal">-</span><span class="comment">set=gbk</span> <span class="title">[</span><span class="comment">mysqld</span><span class="title">]</span> <span class="comment">character</span><span class="literal">-</span><span class="comment">set</span><span class="literal">-</span><span class="comment">server=gbk</span></span><br><span class="line"><span class="comment"></span>-- </span><br><span class="line">-- <span class="comment">prompt</span> <span class="comment">命令提示符（\D:当前日期</span> <span class="comment">\d:当前数据库</span>  <span class="comment">\u:当前用户）</span></span><br><span class="line"><span class="comment"></span>-- </span><br><span class="line">-- <span class="comment">\T(开始日志)</span> <span class="comment">\t(结束日志)</span></span><br><span class="line"><span class="comment"></span>-- </span><br><span class="line">-- <span class="comment">show</span> <span class="comment">warnings;</span></span><br><span class="line"><span class="comment"></span>-- </span><br><span class="line">-- <span class="comment">help()</span> <span class="comment">?</span> <span class="comment">\h</span></span><br><span class="line"><span class="comment"></span>-- </span><br><span class="line">-- <span class="comment">\G；</span></span><br><span class="line"><span class="comment"></span>-- </span><br><span class="line">-- <span class="comment">select</span> <span class="comment">now();</span></span><br><span class="line"><span class="comment"></span>-- <span class="comment">select</span> <span class="comment">version();</span></span><br><span class="line"><span class="comment"></span>-- <span class="comment">select</span> <span class="comment">user;</span></span><br><span class="line"><span class="comment"></span>-- </span><br><span class="line">-- <span class="comment">\c</span> <span class="comment">取消命令</span></span><br><span class="line"><span class="comment"></span>-- </span><br><span class="line">-- <span class="comment">delimiter</span> <span class="comment">指定分隔符</span></span><br></pre></td></tr></table></figure>



<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">1.windows启动mysql服务与停止mysql服务命令：</span><br><span class="line">net start mysql</span><br><span class="line">net stop  mysql</span><br><span class="line"></span><br><span class="line">2.登陆与退出命令：</span><br><span class="line">登录：</span><br><span class="line">	mysql -h 服务器IP -P 端口号 -u 用户名 -p 密码 --prompt 命令提示符 --delimiter 指定分隔符</span><br><span class="line">	mysql -h 127.0.0.1 -P 3306 -uroot -p123</span><br><span class="line">退出：</span><br><span class="line">    quit;</span><br><span class="line">    exit;</span><br><span class="line">    \q;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">\s;  </span><br><span class="line">------my.ini文件：</span><br><span class="line">[mysql] <span class="attribute">default-character-set</span>=gbk [mysqld] <span class="attribute">character-set-server</span>=gbk</span><br><span class="line"></span><br><span class="line">prompt 修改命令提示符：</span><br><span class="line">\D完整日期</span><br><span class="line">\d当前的数据库</span><br><span class="line">\h当前的服务器</span><br><span class="line">\u当前的用户</span><br><span class="line">\c可以取消命令（注意是小写的c）</span><br><span class="line">\t结束输出日志</span><br><span class="line">\T 地址 输出日志</span><br><span class="line"><span class="comment">#注意\T之后要加一个空格，地址的命名不能出现特殊符号</span></span><br><span class="line"></span><br><span class="line">DELMIITER可以修改命令分割符</span><br><span class="line">在登录的时候可以用 --delimiter去修改命令分割符</span><br><span class="line">也可以登录之后使用DELIMITER去修改</span><br><span class="line">下斜杠是不能作为命令分割符的</span><br><span class="line">可以使用↑↓键调用之前的命令</span><br><span class="line"></span><br><span class="line"><span class="comment">#在执行mysql查询语句的时候，可能会遇到返回值有 warnings  提示的时候，关于查看warnings</span></span><br><span class="line">show warnings;</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看帮助，查看mysql的管理命令</span></span><br><span class="line">help ? \h</span><br><span class="line"></span><br><span class="line"><span class="comment">#结束当前的sql语句</span></span><br><span class="line">\c</span><br><span class="line"></span><br><span class="line"><span class="comment">#用于显示系统时间（注：日期+时间）</span></span><br><span class="line">select now();</span><br><span class="line"></span><br><span class="line"><span class="comment">#查询mysql和postgresql服务器端版本语句</span></span><br><span class="line">select version();</span><br><span class="line"></span><br><span class="line"><span class="comment">#这个函数, 是取得当前登陆的用户.</span></span><br><span class="line">select user;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mysql&gt; help</span><br><span class="line">List of all MySQL commands:</span><br><span class="line">Note that all text commands must be first on line <span class="keyword">and</span> end with <span class="string">';'</span></span><br><span class="line">?         (\?) Synonym <span class="keyword">for</span> `help<span class="string">'.</span></span><br><span class="line"><span class="string">clear     (\c) Clear the current input statement.</span></span><br><span class="line"><span class="string">connect   (\r) Reconnect to the server. Optional arguments are db and host.</span></span><br><span class="line"><span class="string">delimiter (\d) Set statement delimiter.</span></span><br><span class="line"><span class="string">edit      (\e) Edit command with $EDITOR.</span></span><br><span class="line"><span class="string">ego       (\G) Send command to mysql server, display result vertically.</span></span><br><span class="line"><span class="string">exit      (\q) Exit mysql. Same as quit.</span></span><br><span class="line"><span class="string">go        (\g) Send command to mysql server.</span></span><br><span class="line"><span class="string">help      (\h) Display this help.</span></span><br><span class="line"><span class="string">nopager   (\n) Disable pager, print to stdout.</span></span><br><span class="line"><span class="string">notee     (\t) Don'</span>t write into outfile.</span><br><span class="line">pager     (\P) <span class="builtin-name">Set</span> PAGER [to_pager]. <span class="builtin-name">Print</span> the query results via PAGER.</span><br><span class="line"><span class="builtin-name">print</span>     (\p) <span class="builtin-name">Print</span> current command.</span><br><span class="line">prompt    (\R) Change your mysql prompt.</span><br><span class="line">quit      (\q) Quit mysql.</span><br><span class="line">rehash    (\#) Rebuild completion hash.</span><br><span class="line">source    (\.) Execute an SQL<span class="built_in"> script </span>file. Takes a file name as an argument.</span><br><span class="line">status    (\s) <span class="builtin-name">Get</span> status information <span class="keyword">from</span> the server.</span><br><span class="line">system    (\!) Execute a<span class="built_in"> system </span>shell command.</span><br><span class="line">tee       (\T) <span class="builtin-name">Set</span> outfile [to_outfile]. Append everything into given</span><br><span class="line">               outfile.</span><br><span class="line">use       (\u) Use another database. Takes database name as argument.</span><br><span class="line">charset   (\C) Switch <span class="keyword">to</span> another charset. Might be needed <span class="keyword">for</span> processing</span><br><span class="line">               binlog with multi-byte charsets.</span><br><span class="line">warnings  (\W) Show warnings after every statement.</span><br><span class="line">nowarning (\w) Don<span class="string">'t show warnings after every statement.</span></span><br><span class="line"><span class="string">resetconnection(\x) Clean session context.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">For server side help, type '</span>help contents<span class="string">'</span></span><br></pre></td></tr></table></figure>



<p>\G;        #\G 的作用是将查到的结构旋转90度变成纵向</p>
<p><img src="/2022/01/18/python/python_%E5%9F%BA%E7%A1%80%E7%AF%87/%E7%AC%AC35%E7%AF%87%EF%BC%9AMySQL%E5%9F%BA%E7%A1%80/697611-20181128162350281-970223551.png" alt="img"></p>
<p>delimiter 指定分隔符</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELIMITER</span> 用于更改MySQL 命令行使用程序语句的分隔符.</span><br><span class="line">MySQL 中默认的语句分隔符为 ； 用于一段<span class="keyword">sql</span> 语句结尾，回车后执行该语句，使用场景，一般是在创建<span class="keyword">sql</span> 存储过程是使用，因为存储过程中保存了多条<span class="keyword">sql</span> 语句，像一个<span class="keyword">SQL</span>语句集合，下一个介绍，</span><br><span class="line"></span><br><span class="line">主要方式 ： <span class="keyword">delimiter</span> 空格 需要指定的语句分隔符</span><br><span class="line">如下：</span><br><span class="line"><span class="comment">-- 更改为 // 作为语句分隔符</span></span><br><span class="line">mysql&gt; <span class="keyword">delimiter</span>  //</span><br></pre></td></tr></table></figure>

<p><img src="/2022/01/18/python/python_%E5%9F%BA%E7%A1%80%E7%AF%87/%E7%AC%AC35%E7%AF%87%EF%BC%9AMySQL%E5%9F%BA%E7%A1%80/1565456-20200612003006015-406492025.png" alt="img"></p>
<p>上述中，delimiter // 告诉命令行实用程序使用 // 作为新的语句结束分隔符，这样我们在使用存储过程的时候就不会出现编写不了的情况，就可以将存储过程中的内容正确传送给数据库引擎，最后在使用 delimiter ; 恢复为原来的语句分隔符。</p>
<p> <strong>注意：使用delimiter 声明的时候中间要有空格，</strong></p>
<p><img src="/2022/01/18/python/python_%E5%9F%BA%E7%A1%80%E7%AF%87/%E7%AC%AC35%E7%AF%87%EF%BC%9AMySQL%E5%9F%BA%E7%A1%80/1565456-20200612004340482-297415950.png" alt="img"></p>
<p>不然很难受。</p>
<p><strong>最后注意：语句分隔符除了 \ 符号外，任何字符都可以用做语句分隔符</strong></p>
<h1 id="二、数据库操作（DDL）"><a href="#二、数据库操作（DDL）" class="headerlink" title="二、数据库操作（DDL）"></a><strong>二、数据库操作（DDL）</strong></h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">1.查看：</span><br><span class="line">(1)查看所有数据库：<span class="keyword">show</span> <span class="keyword">databases</span>;</span><br><span class="line">(2)查看某一数据库创建编码：<span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">database</span> <span class="keyword">num</span>;</span><br><span class="line"></span><br><span class="line">2.创建：</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">database</span> <span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exists</span> sxmu; （如果不存在则创建，若存在不创建也不报错，但会warning.查看warning：<span class="keyword">show</span> <span class="keyword">warnings</span>;)</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">database</span> <span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exists</span> <span class="keyword">num</span> <span class="built_in">character</span> <span class="keyword">set</span> gbk;</span><br><span class="line"></span><br><span class="line">3.删除：<span class="keyword">drop</span> <span class="keyword">database</span> <span class="keyword">if</span> <span class="keyword">exists</span> kokusho;</span><br><span class="line"></span><br><span class="line">4.修改：<span class="keyword">alter</span> <span class="keyword">database</span> <span class="keyword">num</span> <span class="built_in">character</span> <span class="keyword">set</span> gbk;</span><br><span class="line"></span><br><span class="line">5 使用：切换：<span class="keyword">use</span> sxmu;</span><br><span class="line">检测当前数据库：<span class="keyword">select</span> <span class="keyword">database</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">注：数据库文件默认存放路径（C:\ProgramData\MySQL\MySQL Server 5.7\Data）</span><br><span class="line">默认创建的所有数据库都是一个文件夹，每一张表都是该文件夹下的一个文件。</span><br><span class="line">故如果要迁移数据库文件，可直接复制数据库文件夹</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">user</span>();</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">now</span>();</span><br></pre></td></tr></table></figure>



<h1 id="三、数据表操作"><a href="#三、数据表操作" class="headerlink" title="三、数据表操作"></a><strong>三、数据表操作</strong></h1><p>主键：非空且唯一(not null,unique)</p>
<p>数据类型：</p>
<h2 id="1-数值类型"><a href="#1-数值类型" class="headerlink" title="1. 数值类型"></a>1. 数值类型</h2><p><img src="/2022/01/18/python/python_%E5%9F%BA%E7%A1%80%E7%AF%87/%E7%AC%AC35%E7%AF%87%EF%BC%9AMySQL%E5%9F%BA%E7%A1%80/1476293-20180914215251810-1439123742.png" alt="img"></p>
<h2 id="2-日期和时间类型"><a href="#2-日期和时间类型" class="headerlink" title="2. 日期和时间类型"></a>2. 日期和时间类型</h2><p><img src="/2022/01/18/python/python_%E5%9F%BA%E7%A1%80%E7%AF%87/%E7%AC%AC35%E7%AF%87%EF%BC%9AMySQL%E5%9F%BA%E7%A1%80/1476293-20180914215347433-310633610.png" alt="img"></p>
<h2 id="3-字符串类型"><a href="#3-字符串类型" class="headerlink" title="3. 字符串类型"></a>3. 字符串类型</h2><p><img src="/2022/01/18/python/python_%E5%9F%BA%E7%A1%80%E7%AF%87/%E7%AC%AC35%E7%AF%87%EF%BC%9AMySQL%E5%9F%BA%E7%A1%80/1476293-20180914215411590-1997526098.png" alt="img"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">创建表： <span class="keyword">create</span> <span class="keyword">table</span> tab_name(</span><br><span class="line">　　field1 <span class="keyword">type</span>[完整性约束条件],</span><br><span class="line">　　field2 <span class="keyword">type</span>,</span><br><span class="line">　　...</span><br><span class="line">　　fieldn <span class="keyword">type</span></span><br><span class="line">　　)[<span class="built_in">character</span> <span class="keyword">set</span> xxx];</span><br><span class="line"></span><br><span class="line">创建员工表：</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> employee(</span><br><span class="line">　　<span class="keyword">id</span> <span class="built_in">TINYINT</span> PRIMARY <span class="keyword">KEY</span> AUTO_INCREMENT,</span><br><span class="line">　　<span class="keyword">name</span> <span class="built_in">VARCHAR</span>(<span class="number">25</span>),</span><br><span class="line">　　gender <span class="built_in">BOOLEAN</span>,</span><br><span class="line">　　age <span class="built_in">INT</span>,</span><br><span class="line">　　department <span class="built_in">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">　　salary <span class="keyword">DOUBLE</span>(<span class="number">7</span>,<span class="number">2</span>)</span><br><span class="line">　　)</span><br><span class="line">　　</span><br><span class="line">表结构：</span><br><span class="line"><span class="number">1.</span>查看</span><br><span class="line">查看表结构：</span><br><span class="line"><span class="keyword">desc</span> employee;</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">columns</span> <span class="keyword">from</span> employee;</span><br><span class="line">查看创建表语句：</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">table</span> employee;</span><br><span class="line">查看当前数据库所有表：</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">tables</span>;</span><br><span class="line"></span><br><span class="line">2.增加字段：</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> employee <span class="keyword">add</span> is_married <span class="built_in">tinyint</span>(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> employee <span class="keyword">add</span> entry_date <span class="built_in">date</span> <span class="keyword">not</span> <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> employee <span class="keyword">add</span> A <span class="built_in">int</span>,<span class="keyword">add</span> b <span class="built_in">varchar</span>(<span class="number">20</span>);</span><br><span class="line">　　　　　　</span><br><span class="line">3.删除字段：</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> employee <span class="keyword">drop</span> A;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> employee <span class="keyword">drop</span> b,<span class="keyword">drop</span> entry_date;</span><br><span class="line">删除表：</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> emp;</span><br><span class="line"></span><br><span class="line">4.修改字段信息：</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> employee <span class="keyword">modify</span> age <span class="built_in">smallint</span> <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">default</span> <span class="number">18</span> <span class="keyword">after</span> <span class="keyword">name</span>;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> employee <span class="keyword">change</span> department depart <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">after</span> salary;</span><br><span class="line">修改表名：</span><br><span class="line"><span class="keyword">rename</span> <span class="keyword">table</span> employee <span class="keyword">to</span> emp;</span><br><span class="line">修改表所用字符集：</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="built_in">character</span> <span class="keyword">set</span> utf8;</span><br></pre></td></tr></table></figure>



<h1 id="四、表记录操作"><a href="#四、表记录操作" class="headerlink" title="四、表记录操作"></a><strong>四、表记录操作</strong></h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">准备表数据</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> ExamResult(</span><br><span class="line"><span class="keyword">id</span> <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span> auto_increment,</span><br><span class="line"><span class="keyword">name</span> <span class="built_in">VARCHAR</span> (<span class="number">20</span>),</span><br><span class="line">JS <span class="keyword">DOUBLE</span> ,</span><br><span class="line">Django <span class="keyword">DOUBLE</span> ,</span><br><span class="line">OpenStack <span class="keyword">DOUBLE</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">插入：<span class="keyword">insert</span> ［<span class="keyword">into</span>］ tab_name (field1,filed2,.......) <span class="keyword">values</span> (value1,value2,.......)</span><br><span class="line">删除：<span class="keyword">DELETE</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> <span class="keyword">id</span>=<span class="number">11</span> <span class="keyword">OR</span> <span class="keyword">id</span>=<span class="number">2</span>;</span><br><span class="line">修改：<span class="keyword">UPDATE</span> emp <span class="keyword">SET</span> salary=salary+<span class="number">20000</span> <span class="keyword">WHERE</span> <span class="keyword">name</span>=<span class="string">'yuan'</span>;</span><br><span class="line"></span><br><span class="line">查询：<span class="keyword">select</span> [<span class="keyword">distinct</span>] *|filed1,field2| [<span class="keyword">as</span> 别名]|[别名] <span class="keyword">from</span> tab_name;</span><br></pre></td></tr></table></figure>

<p>mysql中五种查询字句:</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">where</span>子句（条件查询）：按照“条件表达式”指定的条件进行查询。</span><br><span class="line"></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span>子句（分组）：按照“属性名”指定的字段进行分组。<span class="keyword">group</span> <span class="keyword">by</span>子句通常和count()、sum()等聚合函数一起使用。</span><br><span class="line"></span><br><span class="line"><span class="keyword">having</span>子句（筛选）：有<span class="keyword">group</span> <span class="keyword">by</span>才能<span class="keyword">having</span>子句，只有满足“条件表达式”中指定的条件的才能够输出。</span><br><span class="line"></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span>子句（排序）：按照“属性名”指定的字段进行排序。排序方式由“<span class="keyword">asc</span>”和“<span class="keyword">desc</span>”两个参数指出，默认是按照“<span class="keyword">asc</span>”来排序，即升序</span><br><span class="line"></span><br><span class="line"><span class="keyword">limit</span>（限制结果集）。</span><br></pre></td></tr></table></figure>



<p><strong>mysql查询执行顺序</strong></p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">(7)  <span class="keyword">SELECT</span> </span><br><span class="line">(<span class="number">8</span>)  <span class="keyword">DISTINCT</span> &lt;select_list&gt;</span><br><span class="line">(<span class="number">1</span>)  <span class="keyword">FROM</span> &lt;left_table&gt;</span><br><span class="line">(<span class="number">3</span>)  &lt;join_type&gt; <span class="keyword">JOIN</span> &lt;right_table&gt;</span><br><span class="line">(<span class="number">2</span>)  <span class="keyword">ON</span> &lt;join_condition&gt;</span><br><span class="line">(<span class="number">4</span>)  <span class="keyword">WHERE</span> &lt;where_condition&gt;</span><br><span class="line">(<span class="number">5</span>)  <span class="keyword">GROUP</span> <span class="keyword">BY</span> &lt;group_by_list&gt;</span><br><span class="line">(<span class="number">6</span>)  <span class="keyword">HAVING</span> &lt;having_condition&gt;</span><br><span class="line">(<span class="number">9</span>)  <span class="keyword">ORDER</span> <span class="keyword">BY</span> &lt;order_by_condition&gt;</span><br><span class="line">(<span class="number">10</span>) <span class="keyword">LIMIT</span> &lt;limit_number&gt;</span><br></pre></td></tr></table></figure>



<p> <strong>增删改查示例</strong></p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line">（1）增删改查</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp (id,age,name,gender,salary,depart,is_married) <span class="keyword">values</span>(<span class="number">1</span>,<span class="number">18</span>,<span class="string">'alex'</span>,<span class="number">0</span>,<span class="number">1700</span>,<span class="string">'技术部'</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp(name,salary,depart) <span class="keyword">VALUES</span> (<span class="string">'瞎驴'</span>,<span class="number">30000</span>,<span class="string">'python'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp(name,salary,depart) <span class="keyword">VALUES</span> (<span class="string">'xialv'</span>,<span class="number">30000</span>,<span class="string">'python'</span>),</span><br><span class="line">(<span class="string">'小雨'</span>,<span class="number">5000</span>,<span class="string">'销售部'</span>),</span><br><span class="line">(<span class="string">'冰冰'</span>,<span class="number">9000</span>,<span class="string">'销售部'</span>);</span><br><span class="line"><span class="keyword">insert</span> emp <span class="keyword">set</span> name=<span class="string">'珊珊'</span>;</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="number">10</span>,<span class="string">'丹丹'</span>,<span class="number">29</span>,<span class="number">0</span>,<span class="number">3000</span>,<span class="string">'销售部'</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp(name,salary,depart) <span class="keyword">VALUES</span> (<span class="string">'yuan'</span>,<span class="number">30000</span>,<span class="string">'python'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> emp <span class="keyword">SET</span> salary=salary+<span class="number">20000</span>,depart=<span class="string">'保安部'</span> <span class="keyword">WHERE</span> name=<span class="string">'xialv'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> emp; (删除表内容)</span><br><span class="line">truncate table emp; (先直接删除整个表,在创建一个相同表结构的空表。大量数据时使用，直接删除表速度快。)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> examresult(name) <span class="keyword">value</span>(<span class="string">'周守成'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> ExamResult <span class="keyword">VALUES</span> (<span class="number">1</span>,<span class="string">"yuan"</span>,<span class="number">98</span>,<span class="number">98</span>,<span class="number">98</span>),</span><br><span class="line">(<span class="number">2</span>,<span class="string">"xialv"</span>,<span class="number">35</span>,<span class="number">98</span>,<span class="number">67</span>),</span><br><span class="line">(<span class="number">3</span>,<span class="string">"alex"</span>,<span class="number">59</span>,<span class="number">59</span>,<span class="number">62</span>),</span><br><span class="line">(<span class="number">4</span>,<span class="string">"wusir"</span>,<span class="number">88</span>,<span class="number">89</span>,<span class="number">82</span>),</span><br><span class="line">(<span class="number">5</span>,<span class="string">"alvin"</span>,<span class="number">88</span>,<span class="number">98</span>,<span class="number">67</span>),</span><br><span class="line">(<span class="number">6</span>,<span class="string">"yuan"</span>,<span class="number">86</span>,<span class="number">100</span>,<span class="number">55</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">练习：<span class="keyword">select</span> * <span class="keyword">from</span> examresult;</span><br><span class="line"><span class="keyword">select</span> name,JS,Django,flask <span class="keyword">from</span> examresult;</span><br><span class="line"><span class="keyword">select</span> name 姓名,JS+<span class="number">10</span> <span class="keyword">as</span> JS,Django+<span class="number">10</span> <span class="keyword">as</span> Django,flask+<span class="number">10</span> <span class="keyword">as</span> flask <span class="keyword">from</span> examresult;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> name <span class="keyword">from</span> examresult; //去重</span><br><span class="line">(1)where:where字句中可使用[比较运算符：&lt; &gt; &lt;= &gt;= &lt;&gt; !=,between and,in,like,逻辑运算符：and or not]</span><br><span class="line"></span><br><span class="line">练习：<span class="keyword">select</span> name,JS+Django+flask <span class="keyword">as</span> 总成绩 <span class="keyword">from</span> examresult <span class="keyword">where</span> JS+flask+Django&gt;<span class="number">200</span>;</span><br><span class="line"><span class="keyword">select</span> name,JS <span class="keyword">from</span> examresult <span class="keyword">where</span> JS!=<span class="number">80</span>;</span><br><span class="line"><span class="keyword">select</span> name,JS <span class="keyword">from</span> examresult <span class="keyword">where</span> JS <span class="keyword">between</span> <span class="number">90</span> <span class="keyword">and</span> <span class="number">100</span>;</span><br><span class="line"><span class="keyword">select</span> name,JS <span class="keyword">from</span> examresult <span class="keyword">where</span> JS <span class="keyword">in</span>(<span class="number">88</span>,<span class="number">99</span>,<span class="number">77</span>);</span><br><span class="line"><span class="keyword">select</span> name,JS <span class="keyword">from</span> examresult <span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">'y%'</span>; // %： 任意多个字符</span><br><span class="line"><span class="keyword">select</span> name,JS <span class="keyword">from</span> examresult <span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">'y_'</span>; // _：一个字符</span><br><span class="line"><span class="keyword">select</span> name,JS <span class="keyword">from</span> examresult <span class="keyword">where</span> name=<span class="string">'yuan'</span> <span class="keyword">and</span> JS&gt;<span class="number">80</span>;</span><br><span class="line"><span class="keyword">select</span> name <span class="keyword">from</span> examresult <span class="keyword">where</span> JS <span class="keyword">is</span> <span class="literal">null</span>; //空考的学生</span><br><span class="line"></span><br><span class="line">(2)order by 指定排序的列(排序的列可以使表中的列名，也可以是<span class="keyword">select</span>语句中的别名)</span><br><span class="line">--<span class="keyword">asc</span>为升序，<span class="keyword">desc</span>为降序，默认为<span class="keyword">asc</span>,<span class="keyword">order</span> <span class="keyword">by</span>应为于<span class="keyword">select</span>语句的结尾</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> name,JS <span class="keyword">from</span> examresult <span class="keyword">order</span> <span class="keyword">by</span> JS;</span><br><span class="line"><span class="keyword">select</span> name,JS <span class="keyword">from</span> examresult <span class="keyword">where</span> JS <span class="keyword">between</span> <span class="number">70</span> <span class="keyword">and</span> <span class="number">100</span> <span class="keyword">order</span> <span class="keyword">by</span> JS; //默认升序</span><br><span class="line"><span class="keyword">select</span> name,JS <span class="keyword">from</span> examresult <span class="keyword">where</span> JS <span class="keyword">between</span> <span class="number">70</span> <span class="keyword">and</span> <span class="number">100</span> <span class="keyword">order</span> <span class="keyword">by</span> JS <span class="keyword">desc</span>; //降序</span><br><span class="line"><span class="keyword">select</span> name,JS+Django+flask <span class="keyword">as</span> 总成绩 <span class="keyword">from</span> examresult <span class="keyword">order</span> <span class="keyword">by</span> 总成绩 <span class="keyword">desc</span>;</span><br><span class="line"><span class="keyword">select</span> name,JS+Django+flask <span class="keyword">as</span> 总成绩 <span class="keyword">from</span> examresult <span class="keyword">where</span> name=<span class="string">'yuan'</span> <span class="keyword">order</span> <span class="keyword">by</span> 总成绩 <span class="keyword">desc</span>;</span><br><span class="line">注：<span class="keyword">select</span> JS <span class="keyword">as</span> JS总成绩 <span class="keyword">from</span> examresult <span class="keyword">where</span> JS总成绩&gt;<span class="number">70</span>; 这条语句不能正确执行</span><br><span class="line"><span class="keyword">select</span>语句的执行顺序：<span class="keyword">from</span> 表名 -&gt; <span class="keyword">where</span> -&gt; <span class="keyword">select</span> -&gt;......-&gt;<span class="keyword">order</span> <span class="keyword">by</span></span><br><span class="line">(<span class="number">3</span>)<span class="keyword">group</span> <span class="keyword">by</span>:分组查询 --常和聚合函数配合使用</span><br><span class="line">注：-- 按分组条件分组后每一组只会显示第一条记录</span><br><span class="line">-- <span class="keyword">group</span> <span class="keyword">by</span>字句，其后可以接多个列名，也可以跟<span class="keyword">having</span>子句,对<span class="keyword">group</span> <span class="keyword">by</span> 的结果进行筛选。</span><br><span class="line"></span><br><span class="line">按列名分组</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> examresult <span class="keyword">group</span> <span class="keyword">by</span> name;</span><br><span class="line">按位置字段分组</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> examresult <span class="keyword">group</span> <span class="keyword">by</span> <span class="number">2</span>;</span><br><span class="line">将成绩表按名字分组后，显示每一组JS成绩的分数总和</span><br><span class="line"><span class="keyword">select</span> name,<span class="built_in">sum</span>(JS) <span class="keyword">from</span> examresult <span class="keyword">group</span> <span class="keyword">by</span> name;</span><br><span class="line">将成绩表按照名字分组后，显示每一类名字的Django的分数总和&gt;150的类名字和Django总分</span><br><span class="line"><span class="keyword">select</span> name,<span class="built_in">sum</span>(Django) <span class="keyword">from</span> examresult <span class="keyword">group</span> <span class="keyword">by</span> name <span class="keyword">having</span> <span class="built_in">sum</span>(Django)&gt;<span class="number">150</span>;</span><br><span class="line">查询每个部门中男性和女性的人数</span><br><span class="line"><span class="keyword">select</span> depart,gender,<span class="built_in">count</span>(id) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> depart,gender;</span><br><span class="line"></span><br><span class="line">having 和 where两者都可以对查询结果进行进一步的过滤，差别有：</span><br><span class="line">&lt;1&gt;where语句只能用在分组之前的筛选，having可以用在分组之后的筛选；</span><br><span class="line">&lt;2&gt;使用where语句的地方都可以用having进行替换</span><br><span class="line">&lt;3&gt;having中可以用聚合函数，where中就不行。</span><br><span class="line">(4)聚合函数：[count,sum,avg,max,min]--常和分组函数配合使用</span><br><span class="line"></span><br><span class="line">--统计JS&gt;70的人数</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(id) <span class="keyword">from</span> examresult <span class="keyword">where</span> JS&gt;<span class="number">70</span>;</span><br><span class="line">--统计JS的平均分</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">sum</span>(JS)/<span class="built_in">count</span>(name) <span class="keyword">from</span> examresult; //算上了JS为null的情况</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(JS) <span class="keyword">from</span> examresult; //不算JS为null</span><br><span class="line">-- 统计总分大于280的人数有多少？</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(name) <span class="keyword">from</span> ExamResult</span><br><span class="line"><span class="keyword">where</span> (<span class="built_in">ifnull</span>(JS,<span class="number">0</span>)+<span class="built_in">ifnull</span>(Django,<span class="number">0</span>)+<span class="built_in">ifnull</span>(OpenStack,<span class="number">0</span>))&gt;<span class="number">280</span>;</span><br><span class="line">--查询JS总分中最小值</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">min</span>(JS) <span class="keyword">from</span> examresult;</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">min</span>(<span class="built_in">ifnull</span>(JS,<span class="number">0</span>)) <span class="keyword">from</span> examresult;</span><br><span class="line">--查询JS+Django+flask总分中最大的</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(JS+Django+flask) <span class="keyword">from</span> examresult;</span><br><span class="line">(5)limit:</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> examresult <span class="keyword">limit</span> <span class="number">3</span>;显示前3条</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> examresult <span class="keyword">limit</span> <span class="number">2</span>,<span class="number">3</span>; //跳过前两条显示接下来的3条</span><br><span class="line"></span><br><span class="line">(6)重点：</span><br><span class="line">--sql语句书写顺序：<span class="keyword">select</span> <span class="keyword">from</span> <span class="keyword">where</span> <span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">having</span> <span class="keyword">order</span> <span class="keyword">by</span></span><br><span class="line">--sql语句执行顺序：<span class="keyword">from</span> <span class="keyword">where</span> <span class="keyword">select</span> <span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">having</span> <span class="keyword">order</span> <span class="keyword">by</span></span><br><span class="line">例子：</span><br><span class="line"><span class="keyword">select</span> JS <span class="keyword">as</span> JS成绩 <span class="keyword">from</span> examresult <span class="keyword">where</span> JS成绩&gt;<span class="number">70</span>; //执行不成功</span><br><span class="line"><span class="keyword">select</span> JS <span class="keyword">as</span> JS成绩 <span class="keyword">from</span> examresult <span class="keyword">where</span> JS成绩&gt;<span class="number">70</span>; //成功执行</span><br><span class="line"></span><br><span class="line">(7)使用正则表达式查询</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> employee <span class="keyword">WHERE</span> name REGEXP <span class="string">'^yu'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> employee <span class="keyword">WHERE</span> name REGEXP <span class="string">'yun$'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> employee <span class="keyword">WHERE</span> name REGEXP <span class="string">'m&#123;2&#125;'</span>;</span><br><span class="line"></span><br><span class="line">增删改查示例</span><br></pre></td></tr></table></figure>



<h1 id="五、外键约束"><a href="#五、外键约束" class="headerlink" title="五、外键约束"></a><strong>五、外键约束</strong></h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line">创建外键</span><br><span class="line"><span class="comment">--- 每一个班主任会对应多个学生 , 而每个学生只能对应一个班主任</span></span><br><span class="line"><span class="comment">--1.数据准备：</span></span><br><span class="line"><span class="comment">----主表</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> ClassCharger(</span><br><span class="line"></span><br><span class="line"><span class="keyword">id</span> <span class="built_in">TINYINT</span> PRIMARY <span class="keyword">KEY</span> auto_increment,</span><br><span class="line"><span class="keyword">name</span> <span class="built_in">VARCHAR</span> (<span class="number">20</span>),</span><br><span class="line">age <span class="built_in">INT</span> ,</span><br><span class="line">is_marriged <span class="built_in">boolean</span> <span class="comment">-- show create table ClassCharger: tinyint(1)</span></span><br><span class="line"></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> ClassCharger (<span class="keyword">name</span>,age,is_marriged) <span class="keyword">VALUES</span> (<span class="string">"冰冰"</span>,<span class="number">12</span>,<span class="number">0</span>),</span><br><span class="line">(<span class="string">"丹丹"</span>,<span class="number">14</span>,<span class="number">0</span>),</span><br><span class="line">(<span class="string">"歪歪"</span>,<span class="number">22</span>,<span class="number">0</span>),</span><br><span class="line">(<span class="string">"姗姗"</span>,<span class="number">20</span>,<span class="number">0</span>),</span><br><span class="line">(<span class="string">"小雨"</span>,<span class="number">21</span>,<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">----子表</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Student(</span><br><span class="line"></span><br><span class="line"><span class="keyword">id</span> <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span> auto_increment,</span><br><span class="line"><span class="keyword">name</span> <span class="built_in">VARCHAR</span> (<span class="number">20</span>),</span><br><span class="line">charger_id <span class="built_in">TINYINT</span>,</span><br><span class="line"><span class="keyword">foreign</span> <span class="keyword">key</span> (charger_id) <span class="keyword">references</span> classcharger(<span class="keyword">id</span>) <span class="keyword">on</span> <span class="keyword">delete</span> <span class="keyword">cascade</span></span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">INNODB</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--切记:作为外键一定要和关联主键的数据类型保持一致</span></span><br><span class="line"><span class="comment">-- [ADD CONSTRAINT charger_fk_stu]FOREIGN KEY (charger_id) REFERENCES ClassCharger(id)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Student2(<span class="keyword">name</span>,charger_id) <span class="keyword">VALUES</span> (<span class="string">"alvin1"</span>,<span class="number">2</span>),</span><br><span class="line">(<span class="string">"alvin2"</span>,<span class="number">4</span>),</span><br><span class="line">(<span class="string">"alvin3"</span>,<span class="number">1</span>),</span><br><span class="line">(<span class="string">"alvin4"</span>,<span class="number">3</span>),</span><br><span class="line">(<span class="string">"alvin5"</span>,<span class="number">5</span>),</span><br><span class="line">(<span class="string">"alvin6"</span>,<span class="number">3</span>),</span><br><span class="line">(<span class="string">"alvin7"</span>,<span class="number">3</span>);</span><br><span class="line"><span class="comment">--2.外键约束练习</span></span><br><span class="line">删除班主任丹丹</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> classcharger <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">2</span>; <span class="comment">--会报错</span></span><br><span class="line">先删除班主任丹丹关联的学生</span><br><span class="line"><span class="keyword">update</span> student <span class="keyword">set</span> charger_id=<span class="number">4</span> <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">1</span> <span class="keyword">or</span> <span class="keyword">id</span>=<span class="number">7</span>;</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> classcharger <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">2</span>; <span class="comment">--成功执行</span></span><br><span class="line">添加一个学生，班主任选择丹丹</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(<span class="keyword">name</span>,charger_id) <span class="keyword">values</span>(<span class="string">'sasa'</span>,<span class="number">2</span>); <span class="comment">--添加失败</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-----------增加外键和删除外键---------</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> student <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> abc</span><br><span class="line"><span class="keyword">FOREIGN</span> <span class="keyword">KEY</span>(charger_id)</span><br><span class="line"><span class="keyword">REFERENCES</span> classcharger(<span class="keyword">id</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> student <span class="keyword">DROP</span> <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> abc;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student3 <span class="keyword">drop</span> <span class="keyword">foreign</span> <span class="keyword">key</span> student3_ibfk_1;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student3 <span class="keyword">add</span> <span class="keyword">constraint</span> s3_fk_c <span class="keyword">foreign</span> <span class="keyword">key</span>(charger_id) <span class="keyword">references</span> C(<span class="keyword">id</span>) <span class="keyword">on</span> <span class="keyword">delete</span> <span class="keyword">set</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">3.INNODB支持的on语句</span><br><span class="line"><span class="comment">--外键约束对子表的含义: 如果在父表中找不到候选键,则不允许在子表上进行insert/update</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--外键约束对父表的含义: 在父表上进行update/delete以更新或删除在子表中有一条或多条对</span></span><br><span class="line"><span class="comment">-- 应匹配行的候选键时,父表的行为取决于：在定义子表的外键时指定的</span></span><br><span class="line"><span class="comment">-- on update/on delete子句</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-----------------innodb支持的四种方式---------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-----cascade方式 在父表上update/delete记录时，同步update/delete掉子表的匹配记录</span></span><br><span class="line"><span class="comment">-----外键的级联删除：如果父表中的记录被删除，则子表中对应的记录自动被删除--------</span></span><br><span class="line"></span><br><span class="line">FOREIGN KEY (charger_id) REFERENCES ClassCharger(id)</span><br><span class="line">ON <span class="keyword">DELETE</span> <span class="keyword">CASCADE</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">------set null方式 在父表上update/delete记录时，将子表上匹配记录的列设为null</span></span><br><span class="line"><span class="comment">-- 要注意子表的外键列不能为not null</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (charger_id) <span class="keyword">REFERENCES</span> ClassCharger(<span class="keyword">id</span>)</span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">DELETE</span> <span class="keyword">SET</span> <span class="literal">NULL</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">------Restrict方式 :拒绝对父表进行删除更新操作(了解)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">------No action方式 在mysql中同Restrict,如果子表中有匹配的记录,则不允许对父表对应候选键</span></span><br><span class="line"><span class="comment">-- 进行update/delete操作（了解）</span></span><br></pre></td></tr></table></figure>



<h1 id="六、连表查询"><a href="#六、连表查询" class="headerlink" title="六、连表查询"></a><strong>六、连表查询</strong></h1><p><strong>1、内联接</strong>（典型的联接运算，使用像 = 或 &lt;&gt; 之类的比较运算符）。包括相等联接和自然联接。   </p>
<ul>
<li>inner join(等值连接) 只返回两个表中联结字段相等的行</li>
</ul>
<p><strong>2、外联接。</strong>外联接可以是左向外联接、右向外联接或完整外部联接。   </p>
<ul>
<li>left join(左联接) 返回包括左表中的所有记录和右表中联结字段相等的记录 </li>
<li>right join(右联接) 返回包括右表中的所有记录和左表中联结字段相等的记录</li>
<li>full join(全联接) 返回包括右表中的所有记录和左表中所有的记录</li>
</ul>
<p><strong>3、交叉联接</strong><br>        交叉联接返回左表中的所有行，左表中的每一行与右表中的所有行组合。交叉联接也称作笛卡尔积。<br>　　FROM 子句中的表或视图可通过内联接或完整外部联接按任意顺序指定；但是，用左或右向外联接指定表或视图时，表或视图的顺序很重要。有关使用左或右向外联接排列表的更多信息，请参见使用外联接。</p>
<p><strong>内外连接查询示例</strong></p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; use flask_code</span><br><span class="line">Database changed</span><br><span class="line">mysql&gt; show tables;</span><br><span class="line">+----------------------+</span><br><span class="line">|<span class="string"> Tables_in_flask_code </span>|</span><br><span class="line">+----------------------+</span><br><span class="line">|<span class="string"> record               </span>|</span><br><span class="line">|<span class="string"> userinfo             </span>|</span><br><span class="line">+----------------------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br><span class="line">　mysql&gt; select <span class="symbol">*</span> from record;</span><br><span class="line">+----+------+------------+---------+</span><br><span class="line">|<span class="string"> id </span>|<span class="string"> line </span>|<span class="string"> ctime </span>|<span class="string"> user_id </span>|</span><br><span class="line">+----+------+------------+---------+</span><br><span class="line">|<span class="string"> 1 </span>|<span class="string"> 1000 </span>|<span class="string"> 2018-12-19 </span>|<span class="string"> 1 </span>|</span><br><span class="line">|<span class="string"> 2 </span>|<span class="string"> 5000 </span>|<span class="string"> 2018-12-17 </span>|<span class="string"> 3 </span>|</span><br><span class="line">|<span class="string"> 3 </span>|<span class="string"> 3000 </span>|<span class="string"> 2018-12-21 </span>|<span class="string"> 3 </span>|</span><br><span class="line">|<span class="string"> 5 </span>|<span class="string"> 269 </span>|<span class="string"> 2018-12-26 </span>|<span class="string"> 3 </span>|</span><br><span class="line">|<span class="string"> 6 </span>|<span class="string"> 269 </span>|<span class="string"> 2018-12-27 </span>|<span class="string"> 3 </span>|</span><br><span class="line">+----+------+------------+---------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line"> mysql&gt; select <span class="symbol">*</span> from userinfo;</span><br><span class="line">+----+------------+----------------------------------+--------------+</span><br><span class="line">|<span class="string"> id </span>|<span class="string"> username </span>|<span class="string"> password </span>|<span class="string"> nickname </span>|</span><br><span class="line">+----+------------+----------------------------------+--------------+</span><br><span class="line">|<span class="string"> 1 </span>|<span class="string"> zhangsan </span>|<span class="string"> 317bc264bfd3d562fa415dbb905e2d8a </span>|<span class="string"> 就是这么牛逼 </span>|</span><br><span class="line">|<span class="string"> 2 </span>|<span class="string"> lisi </span>|<span class="string"> 317bc264bfd3d562fa415dbb905e2d8a </span>|<span class="string"> 看把你牛逼的 </span>|</span><br><span class="line">|<span class="string"> 3 </span>|<span class="string"> zhangyafei </span>|<span class="string"> 317bc264bfd3d562fa415dbb905e2d8a </span>|<span class="string"> 张亚飞 </span>|</span><br><span class="line">+----+------------+----------------------------------+--------------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mysql&gt; select userinfo.nickname,record.line from record,userinfo where record.us</span><br><span class="line">er_id = userinfo.id;</span><br><span class="line">+--------------+------+</span><br><span class="line">|<span class="string"> nickname     </span>|<span class="string"> line </span>|</span><br><span class="line">+--------------+------+</span><br><span class="line">|<span class="string"> 就是这么牛逼 </span>|<span class="string"> 1000 </span>|</span><br><span class="line">|<span class="string"> 张亚飞       </span>|<span class="string"> 5000 </span>|</span><br><span class="line">|<span class="string"> 张亚飞       </span>|<span class="string"> 3000 </span>|</span><br><span class="line">|<span class="string"> 张亚飞       </span>|<span class="string">  269 </span>|</span><br><span class="line">|<span class="string"> 张亚飞       </span>|<span class="string">  269 </span>|</span><br><span class="line">+--------------+------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br><span class="line">mysql&gt; select userinfo.nickname,record.line from record inner join userinfo on u</span><br><span class="line">serinfo.id = record.user_id;</span><br><span class="line">+--------------+------+</span><br><span class="line">|<span class="string"> nickname </span>|<span class="string"> line </span>|</span><br><span class="line">+--------------+------+</span><br><span class="line">|<span class="string"> 就是这么牛逼 </span>|<span class="string"> 1000 </span>|</span><br><span class="line">|<span class="string"> 张亚飞 </span>|<span class="string"> 5000 </span>|</span><br><span class="line">|<span class="string"> 张亚飞 </span>|<span class="string"> 3000 </span>|</span><br><span class="line">|<span class="string"> 张亚飞 </span>|<span class="string"> 269 </span>|</span><br><span class="line">|<span class="string"> 张亚飞 </span>|<span class="string"> 269 </span>|</span><br><span class="line">+--------------+------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select userinfo.nickname,record.line from record left join userinfo on us</span><br><span class="line">erinfo.id = record.user_id;</span><br><span class="line">+--------------+------+</span><br><span class="line">|<span class="string"> nickname </span>|<span class="string"> line </span>|</span><br><span class="line">+--------------+------+</span><br><span class="line">|<span class="string"> 就是这么牛逼 </span>|<span class="string"> 1000 </span>|</span><br><span class="line">|<span class="string"> 张亚飞 </span>|<span class="string"> 5000 </span>|</span><br><span class="line">|<span class="string"> 张亚飞 </span>|<span class="string"> 3000 </span>|</span><br><span class="line">|<span class="string"> 张亚飞 </span>|<span class="string"> 269 </span>|</span><br><span class="line">|<span class="string"> 张亚飞 </span>|<span class="string"> 269 </span>|</span><br><span class="line">+--------------+------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select userinfo.nickname,record.line from record right join userinfo on u</span><br><span class="line">serinfo.id = record.user_id;</span><br><span class="line">+--------------+------+</span><br><span class="line">|<span class="string"> nickname </span>|<span class="string"> line </span>|</span><br><span class="line">+--------------+------+</span><br><span class="line">|<span class="string"> 就是这么牛逼 </span>|<span class="string"> 1000 </span>|</span><br><span class="line">|<span class="string"> 张亚飞 </span>|<span class="string"> 5000 </span>|</span><br><span class="line">|<span class="string"> 张亚飞 </span>|<span class="string"> 3000 </span>|</span><br><span class="line">|<span class="string"> 张亚飞 </span>|<span class="string"> 269 </span>|</span><br><span class="line">|<span class="string"> 张亚飞 </span>|<span class="string"> 269 </span>|</span><br><span class="line">|<span class="string"> 看把你牛逼的 </span>|<span class="string"> NULL </span>|</span><br><span class="line">+--------------+------+</span><br><span class="line">6 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select <span class="symbol">*</span> from record right join userinfo on userinfo.id = record.user_id;</span><br><span class="line"></span><br><span class="line">+------+------+------------+---------+----+------------+------------------------</span><br><span class="line">----------+--------------+</span><br><span class="line">|<span class="string"> id </span>|<span class="string"> line </span>|<span class="string"> ctime </span>|<span class="string"> user_id </span>|<span class="string"> id </span>|<span class="string"> username </span>|<span class="string"> password</span></span><br><span class="line">|<span class="string"> nickname </span>|</span><br><span class="line">+------+------+------------+---------+----+------------+------------------------</span><br><span class="line">----------+--------------+</span><br><span class="line">|<span class="string"> 1 </span>|<span class="string"> 1000 </span>|<span class="string"> 2018-12-19 </span>|<span class="string"> 1 </span>|<span class="string"> 1 </span>|<span class="string"> zhangsan </span>|<span class="string"> 317bc264bfd3d562fa415db</span></span><br><span class="line"><span class="string">b905e2d8a </span>|<span class="string"> 就是这么牛逼 </span>|</span><br><span class="line">|<span class="string"> 2 </span>|<span class="string"> 5000 </span>|<span class="string"> 2018-12-17 </span>|<span class="string"> 3 </span>|<span class="string"> 3 </span>|<span class="string"> zhangyafei </span>|<span class="string"> 317bc264bfd3d562fa415db</span></span><br><span class="line"><span class="string">b905e2d8a </span>|<span class="string"> 张亚飞 </span>|</span><br><span class="line">|<span class="string"> 3 </span>|<span class="string"> 3000 </span>|<span class="string"> 2018-12-21 </span>|<span class="string"> 3 </span>|<span class="string"> 3 </span>|<span class="string"> zhangyafei </span>|<span class="string"> 317bc264bfd3d562fa415db</span></span><br><span class="line"><span class="string">b905e2d8a </span>|<span class="string"> 张亚飞 </span>|</span><br><span class="line">|<span class="string"> 5 </span>|<span class="string"> 269 </span>|<span class="string"> 2018-12-26 </span>|<span class="string"> 3 </span>|<span class="string"> 3 </span>|<span class="string"> zhangyafei </span>|<span class="string"> 317bc264bfd3d562fa415db</span></span><br><span class="line"><span class="string">b905e2d8a </span>|<span class="string"> 张亚飞 </span>|</span><br><span class="line">|<span class="string"> 6 </span>|<span class="string"> 269 </span>|<span class="string"> 2018-12-27 </span>|<span class="string"> 3 </span>|<span class="string"> 3 </span>|<span class="string"> zhangyafei </span>|<span class="string"> 317bc264bfd3d562fa415db</span></span><br><span class="line"><span class="string">b905e2d8a </span>|<span class="string"> 张亚飞 </span>|</span><br><span class="line">|<span class="string"> NULL </span>|<span class="string"> NULL </span>|<span class="string"> NULL </span>|<span class="string"> NULL </span>|<span class="string"> 2 </span>|<span class="string"> lisi </span>|<span class="string"> 317bc264bfd3d562fa415db</span></span><br><span class="line"><span class="string">b905e2d8a </span>|<span class="string"> 看把你牛逼的 </span>|</span><br><span class="line">+------+------+------------+---------+----+------------+------------------------</span><br><span class="line">----------+--------------+</span><br><span class="line">6 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select userinfo.id,nickname,ifnull(sum(line),0) as line from record right</span><br><span class="line">join userinfo on userinfo.id=record.user_id group by userinfo.id order by line</span><br><span class="line">desc;</span><br><span class="line">+----+--------------+------+</span><br><span class="line">|<span class="string"> id </span>|<span class="string"> nickname </span>|<span class="string"> line </span>|</span><br><span class="line">+----+--------------+------+</span><br><span class="line">|<span class="string"> 3 </span>|<span class="string"> 张亚飞 </span>|<span class="string"> 8538 </span>|</span><br><span class="line">|<span class="string"> 1 </span>|<span class="string"> 就是这么牛逼 </span>|<span class="string"> 1000 </span>|</span><br><span class="line">|<span class="string"> 2 </span>|<span class="string"> 看把你牛逼的 </span>|<span class="string"> 0 </span>|</span><br><span class="line">+----+--------------+------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">内外连接查询示例</span><br></pre></td></tr></table></figure>



<p> <strong>交叉连接示例</strong></p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select <span class="symbol">*</span> from record;</span><br><span class="line">+----+------+------------+---------+</span><br><span class="line">|<span class="string"> id </span>|<span class="string"> line </span>|<span class="string"> ctime      </span>|<span class="string"> user_id </span>|</span><br><span class="line">+----+------+------------+---------+</span><br><span class="line">|<span class="string">  1 </span>|<span class="string"> 1000 </span>|<span class="string"> 2018-12-19 </span>|<span class="string">       1 </span>|</span><br><span class="line">|<span class="string">  2 </span>|<span class="string"> 5000 </span>|<span class="string"> 2018-12-17 </span>|<span class="string">       3 </span>|</span><br><span class="line">|<span class="string">  3 </span>|<span class="string"> 3000 </span>|<span class="string"> 2018-12-21 </span>|<span class="string">       3 </span>|</span><br><span class="line">|<span class="string">  5 </span>|<span class="string">  269 </span>|<span class="string"> 2018-12-26 </span>|<span class="string">       3 </span>|</span><br><span class="line">|<span class="string">  6 </span>|<span class="string">  269 </span>|<span class="string"> 2018-12-27 </span>|<span class="string">       3 </span>|</span><br><span class="line">+----+------+------------+---------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select <span class="symbol">*</span> from userinfo;</span><br><span class="line">+----+------------+----------------------------------+--------------+</span><br><span class="line">|<span class="string"> id </span>|<span class="string"> username   </span>|<span class="string"> password                         </span>|<span class="string"> nickname     </span>|</span><br><span class="line">+----+------------+----------------------------------+--------------+</span><br><span class="line">|<span class="string">  1 </span>|<span class="string"> zhangsan   </span>|<span class="string"> 317bc264bfd3d562fa415dbb905e2d8a </span>|<span class="string"> 就是这么牛逼 </span>|</span><br><span class="line">|<span class="string">  2 </span>|<span class="string"> lisi       </span>|<span class="string"> 317bc264bfd3d562fa415dbb905e2d8a </span>|<span class="string"> 看把你牛逼的 </span>|</span><br><span class="line">|<span class="string">  3 </span>|<span class="string"> zhangyafei </span>|<span class="string"> 317bc264bfd3d562fa415dbb905e2d8a </span>|<span class="string"> 张亚飞       </span>|</span><br><span class="line">|<span class="string">  4 </span>|<span class="string"> yaoming    </span>|<span class="string"> 317bc264bfd3d562fa415dbb905e2d8a </span>|<span class="string"> 姚明         </span>|</span><br><span class="line">+----+------------+----------------------------------+--------------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select <span class="symbol">*</span> from record cross join userinfo;</span><br><span class="line">+----+------+------------+---------+----+------------+--------------------------</span><br><span class="line">--------+--------------+</span><br><span class="line">|<span class="string"> id </span>|<span class="string"> line </span>|<span class="string"> ctime      </span>|<span class="string"> user_id </span>|<span class="string"> id </span>|<span class="string"> username   </span>|<span class="string"> password</span></span><br><span class="line"><span class="string">        </span>|<span class="string"> nickname     </span>|</span><br><span class="line">+----+------+------------+---------+----+------------+--------------------------</span><br><span class="line">--------+--------------+</span><br><span class="line">|<span class="string">  1 </span>|<span class="string"> 1000 </span>|<span class="string"> 2018-12-19 </span>|<span class="string">       1 </span>|<span class="string">  1 </span>|<span class="string"> zhangsan   </span>|<span class="string"> 317bc264bfd3d562fa415dbb9</span></span><br><span class="line"><span class="string">05e2d8a </span>|<span class="string"> 就是这么牛逼 </span>|</span><br><span class="line">|<span class="string">  1 </span>|<span class="string"> 1000 </span>|<span class="string"> 2018-12-19 </span>|<span class="string">       1 </span>|<span class="string">  2 </span>|<span class="string"> lisi       </span>|<span class="string"> 317bc264bfd3d562fa415dbb9</span></span><br><span class="line"><span class="string">05e2d8a </span>|<span class="string"> 看把你牛逼的 </span>|</span><br><span class="line">|<span class="string">  1 </span>|<span class="string"> 1000 </span>|<span class="string"> 2018-12-19 </span>|<span class="string">       1 </span>|<span class="string">  3 </span>|<span class="string"> zhangyafei </span>|<span class="string"> 317bc264bfd3d562fa415dbb9</span></span><br><span class="line"><span class="string">05e2d8a </span>|<span class="string"> 张亚飞       </span>|</span><br><span class="line">|<span class="string">  1 </span>|<span class="string"> 1000 </span>|<span class="string"> 2018-12-19 </span>|<span class="string">       1 </span>|<span class="string">  4 </span>|<span class="string"> yaoming    </span>|<span class="string"> 317bc264bfd3d562fa415dbb9</span></span><br><span class="line"><span class="string">05e2d8a </span>|<span class="string"> 姚明         </span>|</span><br><span class="line">|<span class="string">  2 </span>|<span class="string"> 5000 </span>|<span class="string"> 2018-12-17 </span>|<span class="string">       3 </span>|<span class="string">  1 </span>|<span class="string"> zhangsan   </span>|<span class="string"> 317bc264bfd3d562fa415dbb9</span></span><br><span class="line"><span class="string">05e2d8a </span>|<span class="string"> 就是这么牛逼 </span>|</span><br><span class="line">|<span class="string">  2 </span>|<span class="string"> 5000 </span>|<span class="string"> 2018-12-17 </span>|<span class="string">       3 </span>|<span class="string">  2 </span>|<span class="string"> lisi       </span>|<span class="string"> 317bc264bfd3d562fa415dbb9</span></span><br><span class="line"><span class="string">05e2d8a </span>|<span class="string"> 看把你牛逼的 </span>|</span><br><span class="line">|<span class="string">  2 </span>|<span class="string"> 5000 </span>|<span class="string"> 2018-12-17 </span>|<span class="string">       3 </span>|<span class="string">  3 </span>|<span class="string"> zhangyafei </span>|<span class="string"> 317bc264bfd3d562fa415dbb9</span></span><br><span class="line"><span class="string">05e2d8a </span>|<span class="string"> 张亚飞       </span>|</span><br><span class="line">|<span class="string">  2 </span>|<span class="string"> 5000 </span>|<span class="string"> 2018-12-17 </span>|<span class="string">       3 </span>|<span class="string">  4 </span>|<span class="string"> yaoming    </span>|<span class="string"> 317bc264bfd3d562fa415dbb9</span></span><br><span class="line"><span class="string">05e2d8a </span>|<span class="string"> 姚明         </span>|</span><br><span class="line">|<span class="string">  3 </span>|<span class="string"> 3000 </span>|<span class="string"> 2018-12-21 </span>|<span class="string">       3 </span>|<span class="string">  1 </span>|<span class="string"> zhangsan   </span>|<span class="string"> 317bc264bfd3d562fa415dbb9</span></span><br><span class="line"><span class="string">05e2d8a </span>|<span class="string"> 就是这么牛逼 </span>|</span><br><span class="line">|<span class="string">  3 </span>|<span class="string"> 3000 </span>|<span class="string"> 2018-12-21 </span>|<span class="string">       3 </span>|<span class="string">  2 </span>|<span class="string"> lisi       </span>|<span class="string"> 317bc264bfd3d562fa415dbb9</span></span><br><span class="line"><span class="string">05e2d8a </span>|<span class="string"> 看把你牛逼的 </span>|</span><br><span class="line">|<span class="string">  3 </span>|<span class="string"> 3000 </span>|<span class="string"> 2018-12-21 </span>|<span class="string">       3 </span>|<span class="string">  3 </span>|<span class="string"> zhangyafei </span>|<span class="string"> 317bc264bfd3d562fa415dbb9</span></span><br><span class="line"><span class="string">05e2d8a </span>|<span class="string"> 张亚飞       </span>|</span><br><span class="line">|<span class="string">  3 </span>|<span class="string"> 3000 </span>|<span class="string"> 2018-12-21 </span>|<span class="string">       3 </span>|<span class="string">  4 </span>|<span class="string"> yaoming    </span>|<span class="string"> 317bc264bfd3d562fa415dbb9</span></span><br><span class="line"><span class="string">05e2d8a </span>|<span class="string"> 姚明         </span>|</span><br><span class="line">|<span class="string">  5 </span>|<span class="string">  269 </span>|<span class="string"> 2018-12-26 </span>|<span class="string">       3 </span>|<span class="string">  1 </span>|<span class="string"> zhangsan   </span>|<span class="string"> 317bc264bfd3d562fa415dbb9</span></span><br><span class="line"><span class="string">05e2d8a </span>|<span class="string"> 就是这么牛逼 </span>|</span><br><span class="line">|<span class="string">  5 </span>|<span class="string">  269 </span>|<span class="string"> 2018-12-26 </span>|<span class="string">       3 </span>|<span class="string">  2 </span>|<span class="string"> lisi       </span>|<span class="string"> 317bc264bfd3d562fa415dbb9</span></span><br><span class="line"><span class="string">05e2d8a </span>|<span class="string"> 看把你牛逼的 </span>|</span><br><span class="line">|<span class="string">  5 </span>|<span class="string">  269 </span>|<span class="string"> 2018-12-26 </span>|<span class="string">       3 </span>|<span class="string">  3 </span>|<span class="string"> zhangyafei </span>|<span class="string"> 317bc264bfd3d562fa415dbb9</span></span><br><span class="line"><span class="string">05e2d8a </span>|<span class="string"> 张亚飞       </span>|</span><br><span class="line">|<span class="string">  5 </span>|<span class="string">  269 </span>|<span class="string"> 2018-12-26 </span>|<span class="string">       3 </span>|<span class="string">  4 </span>|<span class="string"> yaoming    </span>|<span class="string"> 317bc264bfd3d562fa415dbb9</span></span><br><span class="line"><span class="string">05e2d8a </span>|<span class="string"> 姚明         </span>|</span><br><span class="line">|<span class="string">  6 </span>|<span class="string">  269 </span>|<span class="string"> 2018-12-27 </span>|<span class="string">       3 </span>|<span class="string">  1 </span>|<span class="string"> zhangsan   </span>|<span class="string"> 317bc264bfd3d562fa415dbb9</span></span><br><span class="line"><span class="string">05e2d8a </span>|<span class="string"> 就是这么牛逼 </span>|</span><br><span class="line">|<span class="string">  6 </span>|<span class="string">  269 </span>|<span class="string"> 2018-12-27 </span>|<span class="string">       3 </span>|<span class="string">  2 </span>|<span class="string"> lisi       </span>|<span class="string"> 317bc264bfd3d562fa415dbb9</span></span><br><span class="line"><span class="string">05e2d8a </span>|<span class="string"> 看把你牛逼的 </span>|</span><br><span class="line">|<span class="string">  6 </span>|<span class="string">  269 </span>|<span class="string"> 2018-12-27 </span>|<span class="string">       3 </span>|<span class="string">  3 </span>|<span class="string"> zhangyafei </span>|<span class="string"> 317bc264bfd3d562fa415dbb9</span></span><br><span class="line"><span class="string">05e2d8a </span>|<span class="string"> 张亚飞       </span>|</span><br><span class="line">|<span class="string">  6 </span>|<span class="string">  269 </span>|<span class="string"> 2018-12-27 </span>|<span class="string">       3 </span>|<span class="string">  4 </span>|<span class="string"> yaoming    </span>|<span class="string"> 317bc264bfd3d562fa415dbb9</span></span><br><span class="line"><span class="string">05e2d8a </span>|<span class="string"> 姚明         </span>|</span><br><span class="line">+----+------+------------+---------+----+------------+--------------------------</span><br><span class="line">--------+--------------+</span><br><span class="line">20 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select <span class="symbol">*</span> from record,userinfo;</span><br><span class="line">+----+------+------------+---------+----+------------+--------------------------</span><br><span class="line">--------+--------------+</span><br><span class="line">|<span class="string"> id </span>|<span class="string"> line </span>|<span class="string"> ctime      </span>|<span class="string"> user_id </span>|<span class="string"> id </span>|<span class="string"> username   </span>|<span class="string"> password</span></span><br><span class="line"><span class="string">        </span>|<span class="string"> nickname     </span>|</span><br><span class="line">+----+------+------------+---------+----+------------+--------------------------</span><br><span class="line">--------+--------------+</span><br><span class="line">|<span class="string">  1 </span>|<span class="string"> 1000 </span>|<span class="string"> 2018-12-19 </span>|<span class="string">       1 </span>|<span class="string">  1 </span>|<span class="string"> zhangsan   </span>|<span class="string"> 317bc264bfd3d562fa415dbb9</span></span><br><span class="line"><span class="string">05e2d8a </span>|<span class="string"> 就是这么牛逼 </span>|</span><br><span class="line">|<span class="string">  1 </span>|<span class="string"> 1000 </span>|<span class="string"> 2018-12-19 </span>|<span class="string">       1 </span>|<span class="string">  2 </span>|<span class="string"> lisi       </span>|<span class="string"> 317bc264bfd3d562fa415dbb9</span></span><br><span class="line"><span class="string">05e2d8a </span>|<span class="string"> 看把你牛逼的 </span>|</span><br><span class="line">|<span class="string">  1 </span>|<span class="string"> 1000 </span>|<span class="string"> 2018-12-19 </span>|<span class="string">       1 </span>|<span class="string">  3 </span>|<span class="string"> zhangyafei </span>|<span class="string"> 317bc264bfd3d562fa415dbb9</span></span><br><span class="line"><span class="string">05e2d8a </span>|<span class="string"> 张亚飞       </span>|</span><br><span class="line">|<span class="string">  1 </span>|<span class="string"> 1000 </span>|<span class="string"> 2018-12-19 </span>|<span class="string">       1 </span>|<span class="string">  4 </span>|<span class="string"> yaoming    </span>|<span class="string"> 317bc264bfd3d562fa415dbb9</span></span><br><span class="line"><span class="string">05e2d8a </span>|<span class="string"> 姚明         </span>|</span><br><span class="line">|<span class="string">  2 </span>|<span class="string"> 5000 </span>|<span class="string"> 2018-12-17 </span>|<span class="string">       3 </span>|<span class="string">  1 </span>|<span class="string"> zhangsan   </span>|<span class="string"> 317bc264bfd3d562fa415dbb9</span></span><br><span class="line"><span class="string">05e2d8a </span>|<span class="string"> 就是这么牛逼 </span>|</span><br><span class="line">|<span class="string">  2 </span>|<span class="string"> 5000 </span>|<span class="string"> 2018-12-17 </span>|<span class="string">       3 </span>|<span class="string">  2 </span>|<span class="string"> lisi       </span>|<span class="string"> 317bc264bfd3d562fa415dbb9</span></span><br><span class="line"><span class="string">05e2d8a </span>|<span class="string"> 看把你牛逼的 </span>|</span><br><span class="line">|<span class="string">  2 </span>|<span class="string"> 5000 </span>|<span class="string"> 2018-12-17 </span>|<span class="string">       3 </span>|<span class="string">  3 </span>|<span class="string"> zhangyafei </span>|<span class="string"> 317bc264bfd3d562fa415dbb9</span></span><br><span class="line"><span class="string">05e2d8a </span>|<span class="string"> 张亚飞       </span>|</span><br><span class="line">|<span class="string">  2 </span>|<span class="string"> 5000 </span>|<span class="string"> 2018-12-17 </span>|<span class="string">       3 </span>|<span class="string">  4 </span>|<span class="string"> yaoming    </span>|<span class="string"> 317bc264bfd3d562fa415dbb9</span></span><br><span class="line"><span class="string">05e2d8a </span>|<span class="string"> 姚明         </span>|</span><br><span class="line">|<span class="string">  3 </span>|<span class="string"> 3000 </span>|<span class="string"> 2018-12-21 </span>|<span class="string">       3 </span>|<span class="string">  1 </span>|<span class="string"> zhangsan   </span>|<span class="string"> 317bc264bfd3d562fa415dbb9</span></span><br><span class="line"><span class="string">05e2d8a </span>|<span class="string"> 就是这么牛逼 </span>|</span><br><span class="line">|<span class="string">  3 </span>|<span class="string"> 3000 </span>|<span class="string"> 2018-12-21 </span>|<span class="string">       3 </span>|<span class="string">  2 </span>|<span class="string"> lisi       </span>|<span class="string"> 317bc264bfd3d562fa415dbb9</span></span><br><span class="line"><span class="string">05e2d8a </span>|<span class="string"> 看把你牛逼的 </span>|</span><br><span class="line">|<span class="string">  3 </span>|<span class="string"> 3000 </span>|<span class="string"> 2018-12-21 </span>|<span class="string">       3 </span>|<span class="string">  3 </span>|<span class="string"> zhangyafei </span>|<span class="string"> 317bc264bfd3d562fa415dbb9</span></span><br><span class="line"><span class="string">05e2d8a </span>|<span class="string"> 张亚飞       </span>|</span><br><span class="line">|<span class="string">  3 </span>|<span class="string"> 3000 </span>|<span class="string"> 2018-12-21 </span>|<span class="string">       3 </span>|<span class="string">  4 </span>|<span class="string"> yaoming    </span>|<span class="string"> 317bc264bfd3d562fa415dbb9</span></span><br><span class="line"><span class="string">05e2d8a </span>|<span class="string"> 姚明         </span>|</span><br><span class="line">|<span class="string">  5 </span>|<span class="string">  269 </span>|<span class="string"> 2018-12-26 </span>|<span class="string">       3 </span>|<span class="string">  1 </span>|<span class="string"> zhangsan   </span>|<span class="string"> 317bc264bfd3d562fa415dbb9</span></span><br><span class="line"><span class="string">05e2d8a </span>|<span class="string"> 就是这么牛逼 </span>|</span><br><span class="line">|<span class="string">  5 </span>|<span class="string">  269 </span>|<span class="string"> 2018-12-26 </span>|<span class="string">       3 </span>|<span class="string">  2 </span>|<span class="string"> lisi       </span>|<span class="string"> 317bc264bfd3d562fa415dbb9</span></span><br><span class="line"><span class="string">05e2d8a </span>|<span class="string"> 看把你牛逼的 </span>|</span><br><span class="line">|<span class="string">  5 </span>|<span class="string">  269 </span>|<span class="string"> 2018-12-26 </span>|<span class="string">       3 </span>|<span class="string">  3 </span>|<span class="string"> zhangyafei </span>|<span class="string"> 317bc264bfd3d562fa415dbb9</span></span><br><span class="line"><span class="string">05e2d8a </span>|<span class="string"> 张亚飞       </span>|</span><br><span class="line">|<span class="string">  5 </span>|<span class="string">  269 </span>|<span class="string"> 2018-12-26 </span>|<span class="string">       3 </span>|<span class="string">  4 </span>|<span class="string"> yaoming    </span>|<span class="string"> 317bc264bfd3d562fa415dbb9</span></span><br><span class="line"><span class="string">05e2d8a </span>|<span class="string"> 姚明         </span>|</span><br><span class="line">|<span class="string">  6 </span>|<span class="string">  269 </span>|<span class="string"> 2018-12-27 </span>|<span class="string">       3 </span>|<span class="string">  1 </span>|<span class="string"> zhangsan   </span>|<span class="string"> 317bc264bfd3d562fa415dbb9</span></span><br><span class="line"><span class="string">05e2d8a </span>|<span class="string"> 就是这么牛逼 </span>|</span><br><span class="line">|<span class="string">  6 </span>|<span class="string">  269 </span>|<span class="string"> 2018-12-27 </span>|<span class="string">       3 </span>|<span class="string">  2 </span>|<span class="string"> lisi       </span>|<span class="string"> 317bc264bfd3d562fa415dbb9</span></span><br><span class="line"><span class="string">05e2d8a </span>|<span class="string"> 看把你牛逼的 </span>|</span><br><span class="line">|<span class="string">  6 </span>|<span class="string">  269 </span>|<span class="string"> 2018-12-27 </span>|<span class="string">       3 </span>|<span class="string">  3 </span>|<span class="string"> zhangyafei </span>|<span class="string"> 317bc264bfd3d562fa415dbb9</span></span><br><span class="line"><span class="string">05e2d8a </span>|<span class="string"> 张亚飞       </span>|</span><br><span class="line">|<span class="string">  6 </span>|<span class="string">  269 </span>|<span class="string"> 2018-12-27 </span>|<span class="string">       3 </span>|<span class="string">  4 </span>|<span class="string"> yaoming    </span>|<span class="string"> 317bc264bfd3d562fa415dbb9</span></span><br><span class="line"><span class="string">05e2d8a </span>|<span class="string"> 姚明         </span>|</span><br><span class="line">+----+------+------------+---------+----+------------+--------------------------</span><br><span class="line">--------+--------------+</span><br><span class="line">20 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">交叉连接示例</span><br></pre></td></tr></table></figure>

<p>　</p>
<h1 id="七、联合查询"><a href="#七、联合查询" class="headerlink" title="七、联合查询"></a><strong>七、联合查询</strong></h1><p><strong><img src="/2022/01/18/python/python_%E5%9F%BA%E7%A1%80%E7%AF%87/%E7%AC%AC35%E7%AF%87%EF%BC%9AMySQL%E5%9F%BA%E7%A1%80/1476293-20181230152107047-1597741975.png" alt="img"></strong></p>
<h2 id="1-UNION和UNION-ALL的作用和语法"><a href="#1-UNION和UNION-ALL的作用和语法" class="headerlink" title="1. UNION和UNION ALL的作用和语法"></a><strong>1. UNION和UNION ALL的作用和语法</strong></h2><p>UNION 用于合并两个或多个 SELECT 语句的结果集，并消去表中任何重复行。<br>UNION 内部的 SELECT 语句必须拥有相同数量的列，列也必须拥有相似的数据类型。<br>同时，每条 SELECT 语句中的列的顺序必须相同.<br>SQL UNION 语法：<br>sql脚本代码如下:</p>
<figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">1 </span>SELECT column_name FROM table1</span><br><span class="line"><span class="symbol">2 </span>UNION</span><br><span class="line"><span class="symbol">3 </span>SELECT column_name FROM table2</span><br></pre></td></tr></table></figure>

<p>注释：默认地，UNION 操作符选取不同的值。如果允许重复的值，请使用 UNION ALL。<br>当 ALL 随 UNION 一起使用时（即 UNION ALL），不消除重复行<br>SQL UNION ALL 语法<br>sql脚本代码如下:</p>
<figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">1 </span>SELECT column_name FROM table1</span><br><span class="line"><span class="symbol">2 </span>UNION ALL</span><br><span class="line"><span class="symbol">3 </span>SELECT column_name FROM table2</span><br></pre></td></tr></table></figure>

<p>注释：另外，UNION 结果集中的列名总是等于 UNION 中第一个 SELECT 语句中的列名。<br>注意：1、UNION 结果集中的列名总是等于第一个 SELECT 语句中的列名<br>2、UNION 内部的 SELECT 语句必须拥有相同数量的列。列也必须拥有相似的数据类型。同时，每条 SELECT 语句中的列的顺序必须相同</p>
<h2 id="2-union的用法及注意事项"><a href="#2-union的用法及注意事项" class="headerlink" title="2. union的用法及注意事项"></a><strong>2. union的用法及注意事项</strong></h2><p>union:联合的意思，即把两次或多次查询结果合并起来。<br>要求：两次查询的列数必须一致<br>推荐：列的类型可以不一样，但推荐查询的每一列，想对应的类型以一样<br>可以来自多张表的数据：多次sql语句取出的列名可以不一致，此时以第一个sql语句的列名为准。<br>如果不同的语句中取出的行，有完全相同(这里表示的是每个列的值都相同)，那么union会将相同的行合并，最终只保留一行。也可以这样理解，union会去掉重复的行。<br>如果不想去掉重复的行，可以使用union all。<br>如果子句中有<a href="http://www.itxm.net/" target="_blank" rel="noopener external nofollow noreferrer">order by</a>,limit，需用括号()包起来。推荐放到所有子句之后，即对最终合并的结果来排序或筛选。<br>如：sql脚本代码如下:</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> (<span class="keyword">select</span> * from a order by id) <span class="class"><span class="keyword">union</span> (<span class="title">select</span> * <span class="title">from</span> <span class="title">b</span> <span class="title">order</span> <span class="title">id</span>);</span></span><br></pre></td></tr></table></figure>

<p>在子句中，order by 需要配合limit使用才有意义。如果不配合limit使用，会被语法分析器优化分析时去除。</p>
<h2 id="3-学习例子"><a href="#3-学习例子" class="headerlink" title="3. 学习例子"></a><strong>3. 学习例子</strong></h2><p> 联合查询示例</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 选择数据库</span></span><br><span class="line">mysql&gt; use flask_code</span><br><span class="line">Database changed</span><br><span class="line"><span class="comment"># 查看表</span></span><br><span class="line">mysql&gt; show tables;</span><br><span class="line">+----------------------+</span><br><span class="line">|<span class="string"> Tables_in_flask_code </span>|</span><br><span class="line">+----------------------+</span><br><span class="line">|<span class="string"> record               </span>|</span><br><span class="line">|<span class="string"> userinfo             </span>|</span><br><span class="line">+----------------------+</span><br><span class="line">2 rows in set (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select <span class="symbol">*</span> from userinfo;</span><br><span class="line">+----+------------+----------------------------------+--------------+</span><br><span class="line">|<span class="string"> id </span>|<span class="string"> username   </span>|<span class="string"> password                         </span>|<span class="string"> nickname     </span>|</span><br><span class="line">+----+------------+----------------------------------+--------------+</span><br><span class="line">|<span class="string">  1 </span>|<span class="string"> zhangsan   </span>|<span class="string"> 317bc264bfd3d562fa415dbb905e2d8a </span>|<span class="string"> 就是这么牛逼 </span>|</span><br><span class="line">|<span class="string">  2 </span>|<span class="string"> lisi       </span>|<span class="string"> 317bc264bfd3d562fa415dbb905e2d8a </span>|<span class="string"> 看把你牛逼的 </span>|</span><br><span class="line">|<span class="string">  3 </span>|<span class="string"> zhangyafei </span>|<span class="string"> 317bc264bfd3d562fa415dbb905e2d8a </span>|<span class="string"> 张亚飞       </span>|</span><br><span class="line">|<span class="string">  4 </span>|<span class="string"> yaoming    </span>|<span class="string"> 317bc264bfd3d562fa415dbb905e2d8a </span>|<span class="string"> 姚明         </span>|</span><br><span class="line">+----+------------+----------------------------------+--------------+</span><br><span class="line">4 rows in set (0.08 sec)</span><br><span class="line"><span class="comment"># 创建和已有表结构相同的额表</span></span><br><span class="line">mysql&gt; create table userinfo2 like userinfo;</span><br><span class="line">Query OK, 0 rows affected (0.48 sec)</span><br><span class="line"><span class="comment"># 插入和另一个结构相同的表的数据</span></span><br><span class="line">mysql&gt; insert into userinfo2 select <span class="symbol">*</span> from userinfo limit 1,3;</span><br><span class="line">Query OK, 3 rows affected (0.12 sec)</span><br><span class="line">Records: 3  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mysql&gt; insert into userinfo2(username,password,nickname) values('kobe',  '317b</span><br><span class="line">64bfd3d562fa415dbb905e2d8a', '科比');</span><br><span class="line">Query OK, 1 row affected (0.05 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select <span class="symbol">*</span> from userinfo2;</span><br><span class="line">+----+------------+----------------------------------+--------------+</span><br><span class="line">|<span class="string"> id </span>|<span class="string"> username   </span>|<span class="string"> password                         </span>|<span class="string"> nickname     </span>|</span><br><span class="line">+----+------------+----------------------------------+--------------+</span><br><span class="line">|<span class="string">  2 </span>|<span class="string"> lisi       </span>|<span class="string"> 317bc264bfd3d562fa415dbb905e2d8a </span>|<span class="string"> 看把你牛逼的 </span>|</span><br><span class="line">|<span class="string">  3 </span>|<span class="string"> zhangyafei </span>|<span class="string"> 317bc264bfd3d562fa415dbb905e2d8a </span>|<span class="string"> 张亚飞       </span>|</span><br><span class="line">|<span class="string">  4 </span>|<span class="string"> yaoming    </span>|<span class="string"> 317bc264bfd3d562fa415dbb905e2d8a </span>|<span class="string"> 姚明         </span>|</span><br><span class="line">|<span class="string">  5 </span>|<span class="string"> kobe       </span>|<span class="string"> 317bc264bfd3d562fa415dbb905e2d8a </span>|<span class="string"> 科比         </span>|</span><br><span class="line">+----+------------+----------------------------------+--------------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br><span class="line"><span class="comment"># union:上下连接两张表，且去重重复的行</span></span><br><span class="line">mysql&gt; select <span class="symbol">*</span> from userinfo </span><br><span class="line">　　 -&gt; union </span><br><span class="line">　　 -&gt; select <span class="symbol">*</span> from userinfo2;</span><br><span class="line">+----+------------+----------------------------------+--------------+</span><br><span class="line">|<span class="string"> id </span>|<span class="string"> username   </span>|<span class="string"> password                         </span>|<span class="string"> nickname     </span>|</span><br><span class="line">+----+------------+----------------------------------+--------------+</span><br><span class="line">|<span class="string">  1 </span>|<span class="string"> zhangsan   </span>|<span class="string"> 317bc264bfd3d562fa415dbb905e2d8a </span>|<span class="string"> 就是这么牛逼 </span>|</span><br><span class="line">|<span class="string">  2 </span>|<span class="string"> lisi       </span>|<span class="string"> 317bc264bfd3d562fa415dbb905e2d8a </span>|<span class="string"> 看把你牛逼的 </span>|</span><br><span class="line">|<span class="string">  3 </span>|<span class="string"> zhangyafei </span>|<span class="string"> 317bc264bfd3d562fa415dbb905e2d8a </span>|<span class="string"> 张亚飞       </span>|</span><br><span class="line">|<span class="string">  4 </span>|<span class="string"> yaoming    </span>|<span class="string"> 317bc264bfd3d562fa415dbb905e2d8a </span>|<span class="string"> 姚明         </span>|</span><br><span class="line">|<span class="string">  5 </span>|<span class="string"> kobe       </span>|<span class="string"> 317bc264bfd3d562fa415dbb905e2d8a </span>|<span class="string"> 科比         </span>|</span><br><span class="line">+----+------------+----------------------------------+--------------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br><span class="line"><span class="comment"># union all：上下连接两张表，不去除重复的行</span></span><br><span class="line">mysql&gt; select <span class="symbol">*</span> from userinfo union all select <span class="symbol">*</span> from userinfo2;</span><br><span class="line">+----+------------+----------------------------------+--------------+</span><br><span class="line">|<span class="string"> id </span>|<span class="string"> username   </span>|<span class="string"> password                         </span>|<span class="string"> nickname     </span>|</span><br><span class="line">+----+------------+----------------------------------+--------------+</span><br><span class="line">|<span class="string">  1 </span>|<span class="string"> zhangsan   </span>|<span class="string"> 317bc264bfd3d562fa415dbb905e2d8a </span>|<span class="string"> 就是这么牛逼 </span>|</span><br><span class="line">|<span class="string">  2 </span>|<span class="string"> lisi       </span>|<span class="string"> 317bc264bfd3d562fa415dbb905e2d8a </span>|<span class="string"> 看把你牛逼的 </span>|</span><br><span class="line">|<span class="string">  3 </span>|<span class="string"> zhangyafei </span>|<span class="string"> 317bc264bfd3d562fa415dbb905e2d8a </span>|<span class="string"> 张亚飞       </span>|</span><br><span class="line">|<span class="string">  4 </span>|<span class="string"> yaoming    </span>|<span class="string"> 317bc264bfd3d562fa415dbb905e2d8a </span>|<span class="string"> 姚明         </span>|</span><br><span class="line">|<span class="string">  2 </span>|<span class="string"> lisi       </span>|<span class="string"> 317bc264bfd3d562fa415dbb905e2d8a </span>|<span class="string"> 看把你牛逼的 </span>|</span><br><span class="line">|<span class="string">  3 </span>|<span class="string"> zhangyafei </span>|<span class="string"> 317bc264bfd3d562fa415dbb905e2d8a </span>|<span class="string"> 张亚飞       </span>|</span><br><span class="line">|<span class="string">  4 </span>|<span class="string"> yaoming    </span>|<span class="string"> 317bc264bfd3d562fa415dbb905e2d8a </span>|<span class="string"> 姚明         </span>|</span><br><span class="line">|<span class="string">  5 </span>|<span class="string"> kobe       </span>|<span class="string"> 317bc264bfd3d562fa415dbb905e2d8a </span>|<span class="string"> 科比         </span>|</span><br><span class="line">+----+------------+----------------------------------+--------------+</span><br><span class="line">8 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">联合查询示例</span><br></pre></td></tr></table></figure>



<h1 id="八、limit分页"><a href="#八、limit分页" class="headerlink" title="八、limit分页"></a>八、limit分页</h1><p>​        Limit子句可以被用于强制 SELECT 语句返回指定的记录数。Limit接受一个或两个数字参数。参数必须是一个整数常量。如果给定两个参数，第一个参数指定第一个返回记录行的偏移量，第二个参数指定返回记录行的最大数目。</p>
<figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//初始记录行的偏移量是 0(而不是 1)：</span></span><br><span class="line">mysql&gt; SELECT * FROM <span class="keyword">table</span> LIMIT <span class="comment">5,10</span>; //检索记录行<span class="comment">6-15</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//如果只给定一个参数，它表示返回最大的记录行数目。换句话说，LIMIT n 等价于 LIMIT 0,n：</span></span><br><span class="line">mysql&gt; SELECT * FROM <span class="keyword">table</span> LIMIT <span class="comment">5</span>;   //检索前<span class="comment"> 5</span> 个记录行</span><br></pre></td></tr></table></figure>



<p><strong>Limit的效率高？</strong></p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">常说的Limit的执行效率高，是对于一种特定条件下来说的：即数据库的数量很大，但是只需要查询一部分数据的情况。</span><br><span class="line">高效率的原理是：避免全表扫描，提高查询效率。</span><br><span class="line">比如：每个用户的<span class="section">email</span>是唯一的，如果用户使用<span class="section">email</span>作为用户名登陆的话，就需要查询出<span class="section">email</span>对应的一条记录。</span><br><span class="line">SELECT * FROM t_user WHERE <span class="section">email</span>=?;</span><br><span class="line">上面的语句实现了查询<span class="section">email</span>对应的一条用户信息，但是由于<span class="section">email</span>这一列没有加索引，会导致全表扫描，效率会很低。</span><br><span class="line">SELECT * FROM t_user WHERE <span class="section">email</span>=? LIMIT <span class="number">1</span>;</span><br><span class="line">加上LIMIT <span class="number">1</span>，只要找到了对应的一条记录，就不会继续向下扫描了，效率会大大提高。</span><br></pre></td></tr></table></figure>



<p><strong>Limit的效率低？</strong></p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">在一种情况下，使用limit效率低，那就是：只使用limit来查询语句，并且偏移量特别大的情况</span><br><span class="line">做以下实验：</span><br><span class="line">语句<span class="number">1</span>：</span><br><span class="line">     　　select * <span class="keyword">from</span> table limit <span class="number">150000</span>,<span class="number">1000</span>;</span><br><span class="line">语句<span class="number">2</span>:</span><br><span class="line">     　　select * <span class="keyword">from</span> table <span class="keyword">while</span> id&gt;=<span class="number">150000</span> limit <span class="number">1000</span>;</span><br><span class="line">语句<span class="number">1</span>为<span class="number">0.2077</span>秒；语句<span class="number">2</span>为<span class="number">0.0063</span>秒</span><br><span class="line">两条语句的时间比是：语句<span class="number">1</span>/语句<span class="number">2</span>＝<span class="number">32.968</span></span><br><span class="line"> </span><br><span class="line">比较以上的数据时，我们可以发现采用where...limit....性能基本稳定，受偏移量和行数的影响不大，而单纯采用limit的话，受偏移量的影响很大，当偏移量大到一定后性能开始大幅下降。不过在数据量不大的情况下，两者的区别不大。</span><br><span class="line"></span><br><span class="line">所以应当先使用where等查询语句，配合limit使用，效率才高</span><br><span class="line"></span><br><span class="line">ps：在sql语句中，limt关键字是最后才用到的。以下条件的出现顺序一般是：where-&gt;group by-&gt;having-order by-&gt;limit</span><br></pre></td></tr></table></figure>

<p>　　</p>
<p><strong>附录：OFFSET</strong></p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">为了与 PostgreSQL 兼容，MySQL 也支持句法： <span class="keyword">LIMIT</span> # <span class="keyword">OFFSET</span> #。</span><br><span class="line">经常用到在数据库中查询中间几条数据的需求</span><br><span class="line">比如下面的<span class="keyword">sql</span>语句：</span><br><span class="line">① selete * <span class="keyword">from</span> testtable <span class="keyword">limit</span> <span class="number">2</span>,<span class="number">1</span>;</span><br><span class="line">② selete * <span class="keyword">from</span> testtable <span class="keyword">limit</span> <span class="number">2</span> <span class="keyword">offset</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">注意：</span><br><span class="line"><span class="number">1.</span>数据库数据计算是从<span class="number">0</span>开始的</span><br><span class="line"><span class="number">2.</span><span class="keyword">offset</span> X是跳过X个数据，<span class="keyword">limit</span> Y是选取Y个数据</span><br><span class="line"><span class="number">3.</span><span class="keyword">limit</span> X,Y 中X表示跳过X个数据，读取Y个数据</span><br><span class="line"></span><br><span class="line">这两个都是能完成需要，但是他们之间是有区别的：</span><br><span class="line">①是从数据库中第三条开始查询，取一条数据，即第三条数据读取，一二条跳过</span><br><span class="line">②是从数据库中的第二条数据开始查询两条数据，即第二条和第三条。</span><br></pre></td></tr></table></figure>



<p> <strong>limit查询实例</strong></p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * <span class="keyword">from</span> proxy limit <span class="number">5</span>;</span><br><span class="line">+----+-----------------+-------+----------+-------+-------+-----------+---------</span><br><span class="line">--------+</span><br><span class="line">| ID | IP              | PORT  | POSITION | TYPE  | SPEED | LIVE_TIME | LAST_CHE</span><br><span class="line">CK_TIME |</span><br><span class="line">+----+-----------------+-------+----------+-------+-------+-----------+---------</span><br><span class="line">--------+</span><br><span class="line">|  <span class="number">1</span> | <span class="number">111.72</span><span class="number">.154</span><span class="number">.107</span>  | <span class="number">53128</span> | 江西宜春 | HTTPS | <span class="number">1.221</span> | <span class="number">17</span>分钟    | <span class="number">18</span><span class="number">-07</span><span class="number">-17</span></span><br><span class="line"> <span class="number">09</span>:<span class="number">01</span>  |</span><br><span class="line">|  <span class="number">2</span> | <span class="number">125.121</span><span class="number">.120</span><span class="number">.14</span>  | <span class="number">6666</span>  | 浙江杭州 | HTTPS | <span class="number">1.542</span> | <span class="number">1</span>分钟     | <span class="number">18</span><span class="number">-07</span><span class="number">-17</span></span><br><span class="line"> <span class="number">21</span>:<span class="number">01</span>  |</span><br><span class="line">|  <span class="number">3</span> | <span class="number">1.197</span><span class="number">.59</span><span class="number">.174</span>    | <span class="number">41869</span> | 河南漯河 | HTTPS | <span class="number">3.032</span> | <span class="number">292</span>天     | <span class="number">18</span><span class="number">-07</span><span class="number">-17</span></span><br><span class="line"> <span class="number">08</span>:<span class="number">55</span>  |</span><br><span class="line">|  <span class="number">4</span> | <span class="number">125.118</span><span class="number">.247</span><span class="number">.32</span>  | <span class="number">6666</span>  | 浙江杭州 | HTTPS | <span class="number">0.19</span>  | <span class="number">33</span>天      | <span class="number">18</span><span class="number">-07</span><span class="number">-18</span></span><br><span class="line"> <span class="number">09</span>:<span class="number">22</span>  |</span><br><span class="line">|  <span class="number">5</span> | <span class="number">125.121</span><span class="number">.117</span><span class="number">.139</span> | <span class="number">6666</span>  | 浙江杭州 | HTTP  | <span class="number">0.161</span> | <span class="number">4</span>分钟     | <span class="number">18</span><span class="number">-07</span><span class="number">-18</span></span><br><span class="line"> <span class="number">05</span>:<span class="number">20</span>  |</span><br><span class="line">+----+-----------------+-------+----------+-------+-------+-----------+---------</span><br><span class="line">--------+</span><br><span class="line"><span class="number">5</span> rows <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * <span class="keyword">from</span> proxy limit <span class="number">5</span>,<span class="number">10</span>;</span><br><span class="line">+----+----------------+-------+----------+-------+-------+-----------+----------</span><br><span class="line">-------+</span><br><span class="line">| ID | IP             | PORT  | POSITION | TYPE  | SPEED | LIVE_TIME | LAST_CHEC</span><br><span class="line">K_TIME |</span><br><span class="line">+----+----------------+-------+----------+-------+-------+-----------+----------</span><br><span class="line">-------+</span><br><span class="line">|  <span class="number">6</span> | <span class="number">117.86</span><span class="number">.19</span><span class="number">.111</span>  | <span class="number">18118</span> | 江苏南通 | HTTPS | <span class="number">4.954</span> | <span class="number">1</span>分钟     | <span class="number">18</span><span class="number">-07</span><span class="number">-17</span></span><br><span class="line"><span class="number">21</span>:<span class="number">01</span>  |</span><br><span class="line">|  <span class="number">7</span> | <span class="number">110.73</span><span class="number">.41</span><span class="number">.238</span>  | <span class="number">8123</span>  | 广西南宁 | HTTP  | <span class="number">3.16</span>  | <span class="number">609</span>天     | <span class="number">18</span><span class="number">-07</span><span class="number">-17</span></span><br><span class="line"><span class="number">12</span>:<span class="number">30</span>  |</span><br><span class="line">|  <span class="number">8</span> | <span class="number">182.86</span><span class="number">.189</span><span class="number">.123</span> | <span class="number">48148</span> | 江西     | HTTPS | <span class="number">0.224</span> | <span class="number">1</span>分钟     | <span class="number">18</span><span class="number">-07</span><span class="number">-17</span></span><br><span class="line"><span class="number">16</span>:<span class="number">22</span>  |</span><br><span class="line">|  <span class="number">9</span> | <span class="number">221.228</span><span class="number">.17</span><span class="number">.172</span> | <span class="number">8181</span>  | 江苏无锡 | HTTPS | <span class="number">6.462</span> | <span class="number">73</span>天      | <span class="number">18</span><span class="number">-07</span><span class="number">-18</span></span><br><span class="line"><span class="number">17</span>:<span class="number">41</span>  |</span><br><span class="line">| <span class="number">10</span> | <span class="number">115.223</span><span class="number">.65</span><span class="number">.147</span> | <span class="number">8010</span>  | 浙江温州 | HTTPS | <span class="number">0.785</span> | <span class="number">1</span>分钟     | <span class="number">18</span><span class="number">-07</span><span class="number">-17</span></span><br><span class="line"><span class="number">08</span>:<span class="number">46</span>  |</span><br><span class="line">| <span class="number">11</span> | <span class="number">49.87</span><span class="number">.135</span><span class="number">.30</span>   | <span class="number">53128</span> | 江苏淮安 | HTTPS | <span class="number">0.3</span>   | <span class="number">1</span>分钟     | <span class="number">18</span><span class="number">-07</span><span class="number">-18</span></span><br><span class="line"><span class="number">09</span>:<span class="number">22</span>  |</span><br><span class="line">| <span class="number">12</span> | <span class="number">183.15</span><span class="number">.121</span><span class="number">.130</span> | <span class="number">28094</span> | 广东深圳 | HTTP  | <span class="number">0.481</span> | <span class="number">1</span>分钟     | <span class="number">18</span><span class="number">-07</span><span class="number">-17</span></span><br><span class="line"><span class="number">06</span>:<span class="number">30</span>  |</span><br><span class="line">| <span class="number">13</span> | <span class="number">183.128</span><span class="number">.241</span><span class="number">.77</span> | <span class="number">6666</span>  | 浙江杭州 | HTTPS | <span class="number">3.093</span> | <span class="number">25</span>天      | <span class="number">18</span><span class="number">-07</span><span class="number">-18</span></span><br><span class="line"><span class="number">01</span>:<span class="number">40</span>  |</span><br><span class="line">| <span class="number">14</span> | <span class="number">49.74</span><span class="number">.91</span><span class="number">.98</span>    | <span class="number">53281</span> | 江苏南京 | HTTP  | <span class="number">7.233</span> | <span class="number">14</span>天      | <span class="number">18</span><span class="number">-07</span><span class="number">-18</span></span><br><span class="line"><span class="number">05</span>:<span class="number">20</span>  |</span><br><span class="line">| <span class="number">15</span> | <span class="number">114.231</span><span class="number">.68</span><span class="number">.16</span>  | <span class="number">18118</span> | 江苏南通 | HTTPS | <span class="number">6.159</span> | <span class="number">5</span>分钟     | <span class="number">18</span><span class="number">-07</span><span class="number">-17</span></span><br><span class="line"><span class="number">21</span>:<span class="number">01</span>  |</span><br><span class="line">+----+----------------+-------+----------+-------+-------+-----------+----------</span><br><span class="line">-------+</span><br><span class="line"><span class="number">10</span> rows <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select count(*) <span class="keyword">from</span> proxy;</span><br><span class="line">+----------+</span><br><span class="line">| count(*) |</span><br><span class="line">+----------+</span><br><span class="line">|     <span class="number">1800</span> |</span><br><span class="line">+----------+</span><br><span class="line"><span class="number">1</span> row <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * <span class="keyword">from</span> proxy limit <span class="number">1795</span>,<span class="number">-1</span>;</span><br><span class="line">ERROR <span class="number">1064</span> (<span class="number">42000</span>): You have an error <span class="keyword">in</span> your SQL syntax; check the manual that</span><br><span class="line">corresponds to your MySQL server version <span class="keyword">for</span> the right syntax to use near <span class="string">'-1'</span> a</span><br><span class="line">t line <span class="number">1</span></span><br><span class="line">mysql&gt; select * <span class="keyword">from</span> proxy limit <span class="number">795</span>,<span class="number">-1</span>;</span><br><span class="line">ERROR <span class="number">1064</span> (<span class="number">42000</span>): You have an error <span class="keyword">in</span> your SQL syntax; check the manual that</span><br><span class="line">corresponds to your MySQL server version <span class="keyword">for</span> the right syntax to use near <span class="string">'-1'</span> a</span><br><span class="line">t line <span class="number">1</span></span><br><span class="line">mysql&gt; select * <span class="keyword">from</span> proxy limit <span class="number">2</span> offset <span class="number">1</span>;</span><br><span class="line">+----+----------------+-------+----------+-------+-------+-----------+----------</span><br><span class="line">-------+</span><br><span class="line">| ID | IP             | PORT  | POSITION | TYPE  | SPEED | LIVE_TIME | LAST_CHEC</span><br><span class="line">K_TIME |</span><br><span class="line">+----+----------------+-------+----------+-------+-------+-----------+----------</span><br><span class="line">-------+</span><br><span class="line">|  <span class="number">2</span> | <span class="number">125.121</span><span class="number">.120</span><span class="number">.14</span> | <span class="number">6666</span>  | 浙江杭州 | HTTPS | <span class="number">1.542</span> | <span class="number">1</span>分钟     | <span class="number">18</span><span class="number">-07</span><span class="number">-17</span></span><br><span class="line"><span class="number">21</span>:<span class="number">01</span>  |</span><br><span class="line">|  <span class="number">3</span> | <span class="number">1.197</span><span class="number">.59</span><span class="number">.174</span>   | <span class="number">41869</span> | 河南漯河 | HTTPS | <span class="number">3.032</span> | <span class="number">292</span>天     | <span class="number">18</span><span class="number">-07</span><span class="number">-17</span></span><br><span class="line"><span class="number">08</span>:<span class="number">55</span>  |</span><br><span class="line">+----+----------------+-------+----------+-------+-------+-----------+----------</span><br><span class="line">-------+</span><br><span class="line"><span class="number">2</span> rows <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">limit查询实例</span><br></pre></td></tr></table></figure>



<h1 id="九、数据库引擎"><a href="#九、数据库引擎" class="headerlink" title="九、数据库引擎"></a><strong>九、数据库引擎</strong></h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Mysql引擎种类：innodb，mysaim</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>innodb:支持事务，锁（支持行锁和表锁）</strong></li>
<li><strong>mysaim：不支持事务。锁（支持表锁），优势速度快</strong>　</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Innodb引擎</span><br><span class="line">　　Innodb引擎提供了对数据库ACID事务的支持，并且实现了SQL标准的四种隔离级别，关于数据库事务与其隔离级别的内容请见数据库事务与其隔 离级别这篇文章。该引擎还提供了行级锁和外键约束，它的设计目标是处理大容量数据库系统，它本身其实就是基于MySQL后台的完整数据库系统，MySQL 运行时Innodb会在内存中建立缓冲池，用于缓冲数据和索引。但是该引擎不支持FULLTEXT类型的索引，而且它没有保存表的行数，当<span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(*) <span class="keyword">FROM</span> <span class="keyword">TABLE</span>时需要扫描全表。当需要使用数据库事务时，该引擎当然是首选。由于锁的粒度更小，写操作不会锁定全表，所以在并发较高时，使用<span class="keyword">Innodb</span>引擎 会提升效率。但是使用行级锁也不是绝对的，如果在执行一个<span class="keyword">SQL</span>语句时MySQL不能确定要扫描的范围，<span class="keyword">InnoDB</span>表同样会锁全表。</span><br><span class="line"></span><br><span class="line">MyIASM引擎</span><br><span class="line">　　MyIASM是MySQL默认的引擎，但是它没有提供对数据库事务的支持，也不支持行级锁和外键，因此当<span class="keyword">INSERT</span>(插入)或<span class="keyword">UPDATE</span>(更 新)数据时即写操作需要锁定整个表，效率便会低一些。不过和<span class="keyword">Innodb</span>不同，MyIASM中存储了表的行数，于是<span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(*) <span class="keyword">FROM</span> <span class="keyword">TABLE</span>时只需要直接读取已经保存好的值而不需要进行全表扫描。如果表的读操作远远多于写操作且不需要数据库事务的支持，那么MyIASM也是很好的选 择。</span><br><span class="line"></span><br><span class="line">两种引擎的选择</span><br><span class="line">大尺寸的数据集趋向于选择<span class="keyword">InnoDB</span>引擎，因为它支持事务处理和故障恢复。数据库的大小决定了故障恢复的时间长短，<span class="keyword">InnoDB</span>可以利用事务日志 进行数据恢复，这会比较快。主键查询在<span class="keyword">InnoDB</span>引擎下也会相当快，不过需要注意的是如果主键太长也会导致性能问题，关于这个问题我会在下文中讲到。大 批的<span class="keyword">INSERT</span>语句(在每个<span class="keyword">INSERT</span>语句中写入多行，批量插入)在MyISAM下会快一些，但是<span class="keyword">UPDATE</span>语句在<span class="keyword">InnoDB</span>下则会更快一些，尤 其是在并发量大的时候。</span><br><span class="line"></span><br><span class="line"><span class="keyword">Index</span>——索引</span><br><span class="line">索引（<span class="keyword">Index</span>）是帮助MySQL高效获取数据的数据结构。MyIASM和<span class="keyword">Innodb</span>都使用了树这种数据结构做为索引，关于树我也曾经写过一篇文章树是一种伟大的数据结构，只是自己的理解，有兴趣的朋友可以去阅读。下面我接着讲这两种引擎使用的索引结构，讲到这里，首先应该谈一下B-Tree和B+Tree。</span><br><span class="line"></span><br><span class="line">B-Tree和B+Tree</span><br><span class="line">B+Tree是B-Tree的变种，那么我就先讲B-Tree吧，相信大家都知道红黑树，这是我前段时间学《算法》一书时，实现的一颗红黑树，大家 可以参考。其实红黑树类似<span class="number">2</span>,<span class="number">3</span>-查找树，这种树既有<span class="number">2</span>叉结点又有<span class="number">3</span>叉结点。B-Tree也与之类似，它的每个结点做多可以有d个分支（叉），d称为B- Tree的度，如下图所示，它的每个结点可以有<span class="number">4</span>个元素，<span class="number">5</span>个分支，于是它的度为<span class="number">5</span>。B-Tree中的元素是有序的，比如图中元素<span class="number">7</span>左边的指针指向的结点 中的元素都小于<span class="number">7</span>，而元素<span class="number">7</span>和<span class="number">16</span>之间的指针指向的结点中的元素都处于<span class="number">7</span>和<span class="number">16</span>之间，正是满足这样的关系，才能高效的查找：首先从根节点进行二分查找，找 到就返回对应的值，否则就进入相应的区间结点递归的查找，直到找到对应的元素或找到<span class="literal">null</span>指针，找到<span class="literal">null</span>指针则表示查找失败。这个查找是十分高效 的，其时间复杂度为O(logN)（以d为底，当d很大时，树的高度就很低），因为每次检索最多只需要检索树高h个结点。mysql什么时候需要加锁：计数- 应用场景- 商品数量　　</span><br><span class="line">mysql如何加锁：</span><br></pre></td></tr></table></figure>



<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">终端1：</span><br><span class="line">    <span class="keyword">begin</span>;</span><br><span class="line">    <span class="keyword">select</span> * <span class="keyword">from</span> tb <span class="keyword">for</span> <span class="keyword">update</span>;</span><br><span class="line">    <span class="keyword">commit</span>;</span><br><span class="line"></span><br><span class="line">终端2：</span><br><span class="line">    <span class="keyword">begin</span>;</span><br><span class="line">    <span class="keyword">select</span> * <span class="keyword">from</span> tb <span class="keyword">for</span> <span class="keyword">update</span>;</span><br><span class="line">    <span class="keyword">commit</span>;</span><br></pre></td></tr></table></figure>



<p> 加锁示例</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; begin;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from record where id=2 for update;</span><br><span class="line"><span class="code">+----+</span>------<span class="code">+------------+</span>---------+</span><br><span class="line">| id | line | ctime      | user<span class="emphasis">_id |</span></span><br><span class="line"><span class="emphasis">+----+------+------------+---------+</span></span><br><span class="line"><span class="emphasis">|  2 | 5000 | 2018-12-17 |       3 |</span></span><br><span class="line"><span class="emphasis">+----+------+------------+---------+</span></span><br><span class="line"><span class="emphasis">row in set (0.00 sec)</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">mysql&gt; select * from record for update;</span></span><br><span class="line"><span class="emphasis">+----+------+------------+---------+</span></span><br><span class="line"><span class="emphasis">| id | line | ctime      | user_</span>id |</span><br><span class="line"><span class="code">+----+</span>------<span class="code">+------------+</span>---------+</span><br><span class="line">|  1 | 1000 | 2018-12-19 |       1 |</span><br><span class="line">|  2 | 5000 | 2018-12-17 |       3 |</span><br><span class="line">|  3 | 3000 | 2018-12-21 |       3 |</span><br><span class="line">|  5 |  269 | 2018-12-26 |       3 |</span><br><span class="line">|  6 |  269 | 2018-12-27 |       3 |</span><br><span class="line"><span class="code">+----+</span>------<span class="code">+------------+</span>---------+</span><br><span class="line">rows in set (0.00 sec)</span><br><span class="line">mysql&gt; commit;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql加锁（行锁和表锁）示例</span><br><span class="line"></span><br><span class="line">加锁示例</span><br></pre></td></tr></table></figure>



<p><strong>一般情况下，mysql会默认提供多种存储引擎,你可以通过下面的查看:</strong>　</p>
<p>mysql查看存储引擎</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show engines;</span><br><span class="line"><span class="code">+--------------------+</span>---------+------------------------------------------------</span><br><span class="line">----------------<span class="code">+--------------+</span>------<span class="code">+------------+</span></span><br><span class="line">| Engine             | Support | Comment</span><br><span class="line"><span class="code">                | Transactions | XA   | Savepoints |</span></span><br><span class="line"><span class="code">+--------------------+</span>---------+------------------------------------------------</span><br><span class="line">----------------<span class="code">+--------------+</span>------<span class="code">+------------+</span></span><br><span class="line">| InnoDB             | DEFAULT | Supports transactions, row-level locking, and f</span><br><span class="line">oreign keys     | YES          | YES  | YES        |</span><br><span class="line">| MRG<span class="emphasis">_MYISAM         | YES     | Collection of identical MyISAM tables</span></span><br><span class="line"><span class="emphasis">                | NO           | NO   | NO         |</span></span><br><span class="line"><span class="emphasis">| MEMORY             | YES     | Hash based, stored in memory, useful for tempor</span></span><br><span class="line"><span class="emphasis">ary tables      | NO           | NO   | NO         |</span></span><br><span class="line"><span class="emphasis">| BLACKHOLE          | YES     | /dev/null storage engine (anything you write to</span></span><br><span class="line"><span class="emphasis"> it disappears) | NO           | NO   | NO         |</span></span><br><span class="line"><span class="emphasis">| MyISAM             | YES     | MyISAM storage engine</span></span><br><span class="line"><span class="emphasis">                | NO           | NO   | NO         |</span></span><br><span class="line"><span class="emphasis">| CSV                | YES     | CSV storage engine</span></span><br><span class="line"><span class="emphasis">                | NO           | NO   | NO         |</span></span><br><span class="line"><span class="emphasis">| ARCHIVE            | YES     | Archive storage engine</span></span><br><span class="line"><span class="emphasis">                | NO           | NO   | NO         |</span></span><br><span class="line"><span class="emphasis">| PERFORMANCE_</span>SCHEMA | YES     | Performance Schema</span><br><span class="line"><span class="code">                | NO           | NO   | NO         |</span></span><br><span class="line">| FEDERATED          | NO      | Federated MySQL storage engine</span><br><span class="line"><span class="code">                | NULL         | NULL | NULL       |</span></span><br><span class="line"><span class="code">+--------------------+</span>---------+------------------------------------------------</span><br><span class="line">----------------<span class="code">+--------------+</span>------<span class="code">+------------+</span></span><br><span class="line">9 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show variables like <span class="emphasis">'%storage_engine%'</span>;</span><br><span class="line"><span class="code">+----------------------------------+</span>--------+</span><br><span class="line">| Variable<span class="emphasis">_name                    | Value  |</span></span><br><span class="line"><span class="emphasis">+----------------------------------+--------+</span></span><br><span class="line"><span class="emphasis">| default_</span>storage<span class="emphasis">_engine           | InnoDB |</span></span><br><span class="line"><span class="emphasis">| default_</span>tmp<span class="emphasis">_storage_</span>engine       | InnoDB |</span><br><span class="line">| disabled<span class="emphasis">_storage_</span>engines         |        |</span><br><span class="line">| internal<span class="emphasis">_tmp_</span>disk<span class="emphasis">_storage_</span>engine | InnoDB |</span><br><span class="line"><span class="code">+----------------------------------+</span>--------+</span><br><span class="line">4 rows in set, 1 warning (0.11 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show create table record;</span><br><span class="line"><span class="code">+--------+</span>----------------------------------------------------------------------</span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">------------------------------------+</span><br><span class="line">| Table  | Create Table</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="code">                                    |</span></span><br><span class="line"><span class="code">+--------+</span>----------------------------------------------------------------------</span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">------------------------------------+</span><br><span class="line">| record | CREATE TABLE <span class="code">`record`</span> (</span><br><span class="line"><span class="code">  `id` int(11) NOT NULL AUTO_INCREMENT,</span></span><br><span class="line"><span class="code">  `line` int(11) DEFAULT NULL,</span></span><br><span class="line"><span class="code">  `ctime` date DEFAULT NULL,</span></span><br><span class="line"><span class="code">  `user_id` int(11) DEFAULT NULL,</span></span><br><span class="line"><span class="code">  PRIMARY KEY (`id`),</span></span><br><span class="line"><span class="code">  KEY `user_id` (`user_id`),</span></span><br><span class="line"><span class="code">  CONSTRAINT `record_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `userinfo` (`id`</span></span><br><span class="line">)</span><br><span class="line">) ENGINE=InnoDB AUTO<span class="emphasis">_INCREMENT=7 DEFAULT CHARSET=utf8 |</span></span><br><span class="line"><span class="emphasis">+--------+----------------------------------------------------------------------</span></span><br><span class="line"><span class="emphasis">--------------------------------------------------------------------------------</span></span><br><span class="line"><span class="emphasis">--------------------------------------------------------------------------------</span></span><br><span class="line"><span class="emphasis">--------------------------------------------------------------------------------</span></span><br><span class="line"><span class="emphasis">------------------------------------+</span></span><br><span class="line"><span class="emphasis">1 row in set (0.00 sec)</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">mysql查看存储引擎</span></span><br></pre></td></tr></table></figure>



<p>mysql加锁（行锁和表锁）示例</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; begin;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from record where id=2 for update;</span><br><span class="line"><span class="code">+----+</span>------<span class="code">+------------+</span>---------+</span><br><span class="line">| id | line | ctime      | user<span class="emphasis">_id |</span></span><br><span class="line"><span class="emphasis">+----+------+------------+---------+</span></span><br><span class="line"><span class="emphasis">|  2 | 5000 | 2018-12-17 |       3 |</span></span><br><span class="line"><span class="emphasis">+----+------+------------+---------+</span></span><br><span class="line"><span class="emphasis">1 row in set (0.00 sec)</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">mysql&gt; select * from record for update;</span></span><br><span class="line"><span class="emphasis">+----+------+------------+---------+</span></span><br><span class="line"><span class="emphasis">| id | line | ctime      | user_</span>id |</span><br><span class="line"><span class="code">+----+</span>------<span class="code">+------------+</span>---------+</span><br><span class="line">|  1 | 1000 | 2018-12-19 |       1 |</span><br><span class="line">|  2 | 5000 | 2018-12-17 |       3 |</span><br><span class="line">|  3 | 3000 | 2018-12-21 |       3 |</span><br><span class="line">|  5 |  269 | 2018-12-26 |       3 |</span><br><span class="line">|  6 |  269 | 2018-12-27 |       3 |</span><br><span class="line"><span class="code">+----+</span>------<span class="code">+------------+</span>---------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br><span class="line">mysql&gt; commit;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql加锁（行锁和表锁）示例</span><br></pre></td></tr></table></figure>



<p><strong>补充：</strong></p>
<p>执行计划</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb; </span><br><span class="line"> id</span><br><span class="line">    查询顺序标识</span><br><span class="line">        如：mysql&gt; <span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> (<span class="keyword">select</span> nid,name <span class="keyword">from</span> tb1 <span class="keyword">where</span> nid &lt; <span class="number">10</span>) <span class="keyword">as</span> B;</span><br><span class="line">        +----+-------------+------------+-------+---------------+---------+---------+------+------+-------------+</span><br><span class="line">        | id | select_type | table      | type  | possible_keys | key     | key_len | ref  | rows | Extra       |</span><br><span class="line">        +----+-------------+------------+-------+---------------+---------+---------+------+------+-------------+</span><br><span class="line">        |  1 | PRIMARY     | &lt;derived2&gt; | ALL   | NULL          | NULL    | NULL    | NULL |    9 | NULL        |</span><br><span class="line">        |  2 | DERIVED     | tb1        | range | PRIMARY       | PRIMARY | 8       | NULL |    9 | Using where |</span><br><span class="line">        +----+-------------+------------+-------+---------------+---------+---------+------+------+-------------+</span><br><span class="line">    特别的：如果使用union连接气值可能为null</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">select_type</span><br><span class="line">    查询类型</span><br><span class="line">        SIMPLE          简单查询</span><br><span class="line">        PRIMARY         最外层查询</span><br><span class="line">        SUBQUERY        映射为子查询</span><br><span class="line">        DERIVED         子查询</span><br><span class="line">        UNION           联合</span><br><span class="line">        UNION RESULT    使用联合的结果</span><br><span class="line">        ...</span><br><span class="line">table</span><br><span class="line">    正在访问的表名</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">type</span><br><span class="line">    查询时的访问方式，性能：all &lt; <span class="keyword">index</span> &lt; range &lt; index_merge &lt; ref_or_null &lt; ref &lt; eq_ref &lt; <span class="keyword">system</span>/const</span><br><span class="line">        <span class="keyword">ALL</span>             全表扫描，对于数据表从头到尾找一遍</span><br><span class="line">                        <span class="keyword">select</span> * <span class="keyword">from</span> tb1;</span><br><span class="line">                        特别的：如果有limit限制，则找到之后就不在继续向下扫描</span><br><span class="line">                               <span class="keyword">select</span> * <span class="keyword">from</span> tb1 <span class="keyword">where</span> email = <span class="string">'seven@live.com'</span></span><br><span class="line">                               <span class="keyword">select</span> * <span class="keyword">from</span> tb1 <span class="keyword">where</span> email = <span class="string">'seven@live.com'</span> <span class="keyword">limit</span> <span class="number">1</span>;</span><br><span class="line">                               虽然上述两个语句都会进行全表扫描，第二句使用了limit，则找到一个后就不再继续扫描。</span><br><span class="line"></span><br><span class="line">        <span class="keyword">INDEX</span>           全索引扫描，对索引从头到尾找一遍</span><br><span class="line">                        <span class="keyword">select</span> nid <span class="keyword">from</span> tb1;</span><br><span class="line"></span><br><span class="line">        RANGE          对索引列进行范围查找</span><br><span class="line">                        <span class="keyword">select</span> *  <span class="keyword">from</span> tb1 <span class="keyword">where</span> name &lt; <span class="string">'alex'</span>;</span><br><span class="line">                        PS:</span><br><span class="line">                            between and</span><br><span class="line">                            in</span><br><span class="line">                            &gt;   &gt;=  &lt;   &lt;=  操作</span><br><span class="line">                            注意：!= 和 &gt; 符号</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        INDEX_MERGE     合并索引，使用多个单列索引搜索</span><br><span class="line">                        <span class="keyword">select</span> *  <span class="keyword">from</span> tb1 <span class="keyword">where</span> name = <span class="string">'alex'</span> <span class="keyword">or</span> nid <span class="keyword">in</span> (<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>);</span><br><span class="line"></span><br><span class="line">        REF             根据索引查找一个或多个值</span><br><span class="line">                        <span class="keyword">select</span> *  <span class="keyword">from</span> tb1 <span class="keyword">where</span> name = <span class="string">'seven'</span>;</span><br><span class="line"></span><br><span class="line">        EQ_REF          连接时使用primary key 或 unique类型</span><br><span class="line">                        <span class="keyword">select</span> tb2.nid,tb1.name <span class="keyword">from</span> tb2 <span class="keyword">left</span> <span class="keyword">join</span> tb1 <span class="keyword">on</span> tb2.nid = tb1.nid;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        CONST           常量</span><br><span class="line">                        表最多有一个匹配行,因为仅有一行,在这行的列值可被优化器剩余部分认为是常数,const表很快,因为它们只读取一次。</span><br><span class="line">                        <span class="keyword">select</span> nid <span class="keyword">from</span> tb1 <span class="keyword">where</span> nid = <span class="number">2</span> ;</span><br><span class="line"></span><br><span class="line">        SYSTEM          系统</span><br><span class="line">                        表仅有一行(=系统表)。这是const联接类型的一个特例。</span><br><span class="line">                        <span class="keyword">select</span> * <span class="keyword">from</span> (<span class="keyword">select</span> nid <span class="keyword">from</span> tb1 <span class="keyword">where</span> nid = <span class="number">1</span>) <span class="keyword">as</span> A;</span><br><span class="line">possible_keys</span><br><span class="line">    可能使用的索引</span><br><span class="line"></span><br><span class="line">key</span><br><span class="line">    真实使用的</span><br><span class="line"></span><br><span class="line">key_len</span><br><span class="line">    MySQL中使用索引字节长度</span><br><span class="line"></span><br><span class="line">rows</span><br><span class="line">    mysql估计为了找到所需的行而要读取的行数 ------ 只是预估值</span><br><span class="line"></span><br><span class="line">extra</span><br><span class="line">    该列包含MySQL解决查询的详细信息</span><br><span class="line">    “Using <span class="keyword">index</span>”</span><br><span class="line">        此值表示mysql将使用覆盖索引，以避免访问表。不要把覆盖索引和<span class="keyword">index</span>访问类型弄混了。</span><br><span class="line">    “<span class="keyword">Using</span> <span class="keyword">where</span>”</span><br><span class="line">        这意味着mysql服务器将在存储引擎检索行后再进行过滤，许多<span class="keyword">where</span>条件里涉及索引中的列，当（并且如果）它读取索引时，就能被存储引擎检验，因此不是所有带<span class="keyword">where</span>子句的查询都会显示“<span class="keyword">Using</span> <span class="keyword">where</span>”。有时“<span class="keyword">Using</span> <span class="keyword">where</span>”的出现就是一个暗示：查询可受益于不同的索引。</span><br><span class="line">    “<span class="keyword">Using</span> temporary”</span><br><span class="line">        这意味着mysql在对查询结果排序时会使用一个临时表。</span><br><span class="line">    “<span class="keyword">Using</span> filesort”</span><br><span class="line">        这意味着mysql会对结果使用一个外部索引排序，而不是按索引次序从表里读取行。mysql有两种文件排序算法，这两种排序方式都可以在内存或者磁盘上完成，<span class="keyword">explain</span>不会告诉你mysql将使用哪一种文件排序，也不会告诉你排序会在内存里还是磁盘上完成。</span><br><span class="line">    “Range checked <span class="keyword">for</span> <span class="keyword">each</span> record(<span class="keyword">index</span> <span class="keyword">map</span>: N)”</span><br><span class="line">        这个意味着没有好用的索引，新的索引将在联接的每一行上重新估算，N是显示在possible_keys列中索引的位图，并且是冗余的。</span><br><span class="line"></span><br><span class="line">执行计划</span><br></pre></td></tr></table></figure>

<p>mysql常用语法命令及函数</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br></pre></td><td class="code"><pre><span class="line">#创建数据库# <span class="keyword">create</span>  <span class="keyword">database</span> 数据库名;</span><br><span class="line"></span><br><span class="line">#查看数据库#   show databases;</span><br><span class="line">  </span><br><span class="line">#选择数据库#  use 数据库名;</span><br><span class="line">  </span><br><span class="line">#删除数据库#  <span class="keyword">drop</span> <span class="keyword">database</span> 数据库名;</span><br><span class="line">  </span><br><span class="line">#创建表#  <span class="keyword">create</span> table 表名(属性名<span class="number">1</span>  数据类型 ,属性名<span class="number">2</span>  数据类型。。。。);</span><br><span class="line">  </span><br><span class="line">#查看表结构# desc 表名;</span><br><span class="line">  </span><br><span class="line">#查看建表语言#  show <span class="keyword">create</span> table 表名;</span><br><span class="line">  </span><br><span class="line">#表中新增字段#  alter table 表名 add( 属性名1 数据类型,属性名2 数据类型.....);</span><br><span class="line">  </span><br><span class="line">#在表的第一个位置增加字段#  alter table 表名 add 属性名 数据类型 first;</span><br><span class="line">  </span><br><span class="line">#在指定字段后面增加字段# alter table  表名 add  新增属性名  数据类型  after  属性名;</span><br><span class="line">  </span><br><span class="line">#删除表中字段#  alter table 表名 <span class="keyword">drop</span>  属性名;</span><br><span class="line">  </span><br><span class="line">#删除表# <span class="keyword">drop</span> table 表名;</span><br><span class="line"></span><br><span class="line">#修改表名# alter table 旧表名 rename  新表名; 或alter table 旧表名 rename to 新表名;</span><br><span class="line">  </span><br><span class="line">#修改表中字段的数据类型#  alter table 表名 modify  需要修改的属性名 想要修改成的数据类型;</span><br><span class="line">  </span><br><span class="line">#修改表中字段名称 alter  table 表名 change 旧属性名  新属性名 旧数据类型;</span><br><span class="line">  </span><br><span class="line">#修改表中字段名称和数据类型  alter  table 表名 change 旧属性名 新属性名 新数据类型;</span><br><span class="line">  </span><br><span class="line">#修改表中字段为头字段#  alter  table  表名 modify  属性名 数据类型 first; </span><br><span class="line">  </span><br><span class="line">#修改字段1为顺序,在字段2后面# alter table 表名 modify  属性名1  数据类型 after 属性名2;</span><br><span class="line"></span><br><span class="line">#插入数据记录#  <span class="keyword">insert</span> <span class="keyword">into</span> 表名(字段<span class="number">1</span>,字段<span class="number">2</span>,.....或不写) <span class="keyword">values</span>(一条数据),(一条数据);</span><br><span class="line">  </span><br><span class="line">#插入查询结果# <span class="keyword">insert</span>  <span class="keyword">into</span>  要插入表表名 (插入表中字段<span class="number">1</span>,插入表中字段<span class="number">2</span>,.....) <span class="keyword">select</span> (查询表中字段<span class="number">1</span>,查询表中字段<span class="number">2.</span>.....)  <span class="keyword">from</span> 要查询表表名  查询语句;</span><br><span class="line">  </span><br><span class="line">#更新数据记录#  <span class="keyword">update</span> 表名  <span class="keyword">set</span> 字段<span class="number">1</span>=新值, 字段<span class="number">2</span>=新值.........<span class="keyword">where</span>  查询语句;</span><br><span class="line">  </span><br><span class="line">#删除数据记录# <span class="keyword">delete</span> <span class="keyword">from</span>表名 <span class="keyword">where</span>  查询语句;</span><br><span class="line">  </span><br><span class="line">#查询部分数据记录#  <span class="keyword">select</span>  字段<span class="number">1</span>,字段<span class="number">2</span>。。。。 <span class="keyword">from</span> 要查询的表;</span><br><span class="line">  </span><br><span class="line">#避免重复查询#  <span class="keyword">select</span> <span class="keyword">distinct</span>  字段<span class="number">1</span>,字段<span class="number">2</span>。。。。 <span class="keyword">from</span> 要查询的表;</span><br><span class="line">  </span><br><span class="line">#为查询结果起别名# <span class="keyword">select</span>  字段<span class="number">1</span>  <span class="keyword">as</span>或不写  别名<span class="number">1</span>,字段<span class="number">2</span>  <span class="keyword">as</span>或不写  别名<span class="number">2</span>。。。。 <span class="keyword">from</span> 要查询的表;</span><br><span class="line">  </span><br><span class="line">#设置显示格式数据查询#  <span class="keyword">select</span> concat(字段<span class="number">1</span>,‘提示语句’,字段<span class="number">2</span>。。。。) <span class="keyword">from</span>  要查询的表;</span><br><span class="line">  </span><br><span class="line">#where条件查询#  <span class="keyword">select</span>  * <span class="keyword">from</span> 表名  <span class="keyword">where</span> 字段=值;</span><br><span class="line">  </span><br><span class="line">#between and 关键字范围查询# <span class="keyword">select</span> *  <span class="keyword">from</span>  表名  <span class="keyword">where</span>  字段 <span class="keyword">between</span>  值<span class="number">1</span>  <span class="keyword">and</span>  值<span class="number">2</span>;</span><br><span class="line">  </span><br><span class="line">#between and  关键字不再范围内查询#  <span class="keyword">select</span>  *  <span class="keyword">from</span> 表名 <span class="keyword">where</span> 字段 <span class="keyword">not</span>  <span class="keyword">between</span> 值<span class="number">1</span>  <span class="keyword">and</span>  值<span class="number">2</span> ;</span><br><span class="line">  </span><br><span class="line">#带null关键字空查询#  <span class="keyword">select</span>  *  <span class="keyword">from</span> 表名 <span class="keyword">where</span>  字段  <span class="keyword">is</span>  <span class="keyword">not</span> <span class="literal">null</span>;  或 <span class="keyword">select</span>  *  <span class="keyword">from</span> 表名 <span class="keyword">where</span>  字段  <span class="keyword">is</span>  <span class="keyword">not</span> <span class="literal">null</span>;</span><br><span class="line">  </span><br><span class="line">#带in关键字的集合查询# <span class="keyword">select</span>  字段<span class="number">1</span>,字段<span class="number">2.</span>。。。。。<span class="keyword">from</span>  表名  <span class="keyword">where</span>  字段n   <span class="keyword">in</span>(值<span class="number">1</span>,指<span class="number">2</span>。。。。。);</span><br><span class="line">  </span><br><span class="line">#带like关键字的模糊查询# <span class="keyword">select</span> *  <span class="keyword">from</span> 表名  <span class="keyword">where</span> 字段 <span class="keyword">like</span>  ‘字段串%’ ;   或<span class="keyword">select</span> *  <span class="keyword">from</span> 表名  <span class="keyword">where</span> 字段 <span class="keyword">like</span>  ‘字段串_’ ; 或  <span class="keyword">select</span> *  <span class="keyword">from</span> 表名  <span class="keyword">where</span>  <span class="keyword">not</span>  字段 <span class="keyword">like</span>  ‘字段串_’ ;</span><br><span class="line">  </span><br><span class="line">#排序数据查询# <span class="keyword">select</span> *  <span class="keyword">from</span> 表名 <span class="keyword">order</span>  <span class="keyword">by</span>  依照排序的字段名 <span class="keyword">asc</span>(升序)  或 <span class="keyword">desc</span> (降序);</span><br><span class="line">  </span><br><span class="line">#多字段排序# <span class="keyword">select</span> *  <span class="keyword">from</span> 表名 <span class="keyword">order</span> <span class="keyword">by</span>  字段<span class="number">1</span> <span class="keyword">asc</span> ,字段<span class="number">2</span>  <span class="keyword">desc</span> 。。。。;</span><br><span class="line">  </span><br><span class="line">#带limit关键字的限制查询数量#  <span class="keyword">select</span> *  <span class="keyword">from</span> 表名  <span class="keyword">where</span>   <span class="keyword">limit</span>  开始条数位置 ,显示条数;</span><br><span class="line">  </span><br><span class="line">#分组数据查询# <span class="keyword">select</span> * <span class="keyword">from</span>  表名  <span class="keyword">group</span>  <span class="keyword">by</span>  字段; #随机显示出每个分组的一条数据,一般讲分组与统计合起来使用才有意义#</span><br><span class="line">  </span><br><span class="line">#带having的分组限定查询# <span class="keyword">select</span> *  <span class="keyword">from</span> 表名 <span class="keyword">group</span> <span class="keyword">by</span> 字段  <span class="keyword">having</span> 条件;</span><br><span class="line">  </span><br><span class="line">#inner  join  on内连接#  <span class="keyword">select</span> * <span class="keyword">from</span> 表<span class="number">1</span> <span class="keyword">inner</span> <span class="keyword">join</span> 表<span class="number">2</span> <span class="keyword">on</span> 条件;</span><br><span class="line">  </span><br><span class="line">#自连接# <span class="keyword">select</span>  <span class="built_in">e</span>.字段 <span class="keyword">as</span>  别名<span class="number">1</span>,f.字段 <span class="keyword">as</span> 别名<span class="number">2.</span>。。。。<span class="keyword">from</span>   表名  <span class="keyword">as</span> <span class="built_in">e</span>  <span class="keyword">inner</span> <span class="keyword">join</span> 表  <span class="keyword">as</span> f <span class="keyword">on</span>  条件;</span><br><span class="line">  </span><br><span class="line">#from多表连接#  <span class="keyword">select</span> *  <span class="keyword">from</span> 表<span class="number">1</span> ,  表 <span class="number">2</span> 。。。  <span class="keyword">where</span> 条件;</span><br><span class="line">  </span><br><span class="line">#左外连接# <span class="keyword">select</span> *  <span class="keyword">from</span> 表<span class="number">1</span> <span class="keyword">left</span>  <span class="keyword">join</span>  表<span class="number">2</span> <span class="keyword">on</span> 条件;</span><br><span class="line">  </span><br><span class="line">#右外连接# <span class="keyword">select</span> *  <span class="keyword">from</span>  表<span class="number">1</span>  <span class="keyword">right</span>  <span class="keyword">join</span>  表<span class="number">2</span>  <span class="keyword">on</span>  条件;</span><br><span class="line">  </span><br><span class="line">#允许重复值的合并查询#  <span class="keyword">select</span> * <span class="keyword">from</span>  表<span class="number">1</span> <span class="keyword">union</span> <span class="keyword">all</span>  表<span class="number">2</span>  <span class="keyword">on</span> 条件;</span><br><span class="line">  </span><br><span class="line">#不含重复值的合并查询#  <span class="keyword">select</span> *  <span class="keyword">from</span>  表<span class="number">1</span> <span class="keyword">union</span>  表<span class="number">2</span>  <span class="keyword">on</span>  条件;</span><br><span class="line">  </span><br><span class="line">#where型子查询# <span class="keyword">select</span> *  <span class="keyword">from</span> 表名 <span class="keyword">where</span> (字段<span class="number">1</span>,字段<span class="number">2</span>)=(<span class="keyword">select</span> 字段<span class="number">1</span>,  字段<span class="number">2</span>  <span class="keyword">from</span>  表名  <span class="keyword">where</span> 。。。。);</span><br><span class="line">  </span><br><span class="line">#in关键字的子查询# <span class="keyword">select</span>  *  <span class="keyword">from</span>  表名  <span class="keyword">where</span>  字段  <span class="keyword">in</span> (<span class="keyword">select</span> 。。。。查询语句);</span><br><span class="line">  </span><br><span class="line">#any关键字的子查询# <span class="keyword">select</span>  *  <span class="keyword">from</span>  表名  <span class="keyword">where</span>  字段  &gt;=<span class="keyword">any</span> (<span class="keyword">select</span> 。。。。查询语句);</span><br><span class="line">  </span><br><span class="line">#all关键字的子查询# <span class="keyword">select</span>  *  <span class="keyword">from</span>  表名  <span class="keyword">where</span>  字段 &lt;=  <span class="keyword">all</span>(<span class="keyword">select</span> 。。。。查询语句);</span><br><span class="line">  </span><br><span class="line">#exists关键字的子查询# <span class="keyword">select</span>  *  <span class="keyword">from</span>  表名  <span class="keyword">where</span> <span class="keyword">not</span> <span class="keyword">exists</span> (<span class="keyword">select</span> 。。。。查询语句);</span><br><span class="line">  </span><br><span class="line">#regexp正则表达式运算符#  <span class="keyword">select</span>  ‘chshs’ rehexp  ‘c.’  ;</span><br><span class="line">  </span><br><span class="line">#计数函数#  count();</span><br><span class="line">  </span><br><span class="line">#求平均函数#  avg();</span><br><span class="line">  </span><br><span class="line">#求和函数# sum();</span><br><span class="line">  </span><br><span class="line">#取最大函数# max();</span><br><span class="line">  </span><br><span class="line">#取最小函数# min();</span><br><span class="line">  </span><br><span class="line">#取绝对值# abs();</span><br><span class="line">  </span><br><span class="line">#取大于x的最大整数# cell(x);</span><br><span class="line">  </span><br><span class="line">#取小于x的最大整数# floor(x);</span><br><span class="line">  </span><br><span class="line">#取数值x的四舍五入后有y为小数# round(x,y);</span><br><span class="line">  </span><br><span class="line">#直接截取x为有y位的小数# truncate(x,y);</span><br><span class="line">  </span><br><span class="line">#返回0~1之间的一个随机数#rand();</span><br><span class="line">  </span><br><span class="line">#获取第n组返回相同值得随机数#  rand(n);</span><br><span class="line"></span><br><span class="line">#对字符串进行加密# password();</span><br><span class="line">  </span><br><span class="line">#字符串连接函数#  concat(字符串1,字符串2.。。);</span><br><span class="line">  </span><br><span class="line">#带分隔符字符串合并# concat(分隔符,字符串1,字符串2.。。。);</span><br><span class="line">  </span><br><span class="line">#返回在字符串str2。。。中与str1相匹配的字符串位置# find_in_set(‘str1’,‘str2,str3.。。。。’);</span><br><span class="line">  </span><br><span class="line">#返回字符串str1第一次出现位置# field(‘str1’,‘str2’,‘str3’。。。。);</span><br><span class="line">  </span><br><span class="line">#返回子字符串str在字符串str1中匹配开始的位置#  locate(str,str1);或 position(str  in str1);  或 instr(str1  ,str);</span><br><span class="line">  </span><br><span class="line">#返回第n'个字符串#  elt(n,str1,str2.。。strn);</span><br><span class="line"></span><br><span class="line">#截取指定位置和长度的字符串#  substring(str,num,length);  或  mid(str,num,length);</span><br><span class="line"></span><br><span class="line">#将字符串str从第x位置开始,y个字符长的字串替换为字符串str2#   <span class="keyword">insert</span>(str , x ,y,str2);</span><br><span class="line"></span><br><span class="line">#将字符变为小写#  lower(str);或    lcase(str)</span><br><span class="line"></span><br><span class="line">#将字符变为大写# upper(str);或   ucase(str)</span><br><span class="line"></span><br><span class="line">#获取字符串长度# length(str);</span><br><span class="line"></span><br><span class="line">#获取字符数函数# char_length(str);</span><br><span class="line"></span><br><span class="line">#返回字符串str中最左边的x个字符# left(str,x);</span><br><span class="line"></span><br><span class="line">#返回字符串str中最右边的x个字符#  right(str,x);</span><br><span class="line"></span><br><span class="line">#使用字符串pad对字符串str最左边进行填充,知道长度为n个字符长度#  lpad(str,n,pad);</span><br><span class="line"></span><br><span class="line">#使用字符串pad对字符串str最右边进行填充,知道长度为n个字符长度#  rpad(str,n,pad);</span><br><span class="line"></span><br><span class="line">#去掉字符串str左边的空格# ltrim(str);</span><br><span class="line"></span><br><span class="line">#去掉字符串str右边的空格# rtrim(str);</span><br><span class="line"></span><br><span class="line">#返回字符串str重复x次的结果# repeat(str,x);</span><br><span class="line"></span><br><span class="line">#使用字符串b代替字符串str中的所有字符串a#  replace(str,a,b);</span><br><span class="line"></span><br><span class="line">#比较字符串str1和str2#  strcmp(str1,str2);</span><br><span class="line"></span><br><span class="line">#去掉字符串str行头和行尾的空格# trim(str);</span><br><span class="line"></span><br><span class="line">#返回字符串str中从x位置起y个长度的字符串# substring(str,x,y);</span><br><span class="line"></span><br><span class="line">#获取当前日期# curdate(); 或  current_date();</span><br><span class="line"></span><br><span class="line">#获取当前时间# curtime(); 或  current_time();</span><br><span class="line"></span><br><span class="line">#获取当前日期和时间# now();或 current_timestamp()  或  localtime()  或  systemdate();</span><br><span class="line"></span><br><span class="line">#获取日期date的UNIX时间戳# unix_timestamp(date);</span><br><span class="line"></span><br><span class="line">#获取unix时间戳的日期值# from_unixtime();</span><br><span class="line"></span><br><span class="line">#返回日期date为一年中的第几周#  week(date); 或 weekofyear(time);</span><br><span class="line"></span><br><span class="line">#返回日期的英文周几#  dayname(time);</span><br><span class="line"></span><br><span class="line">#返回日期和时间中周几(1：周日,2：周一)#  dayofweek();</span><br><span class="line"></span><br><span class="line">#返回日期和时间中周几(0：周一,1：周二)#  weekday();</span><br><span class="line"></span><br><span class="line">#返回年中第几天# dayofyear(time);</span><br><span class="line"></span><br><span class="line">#返回月中第几天# dayofmonth(time);</span><br><span class="line"></span><br><span class="line">#返回日期date的年份#  year(date);</span><br><span class="line"></span><br><span class="line">#返回时间time的小时值# hour(time);</span><br><span class="line"></span><br><span class="line">#返回时间time的分钟值#  minute(time);</span><br><span class="line"></span><br><span class="line">#返回时间time的月份值#  monthname(date); 或 month(time)</span><br><span class="line"></span><br><span class="line">#截取日期中的各部分值# extrcat(年或月或日或时或分或秒  from  time);</span><br><span class="line"></span><br><span class="line">#计算date1与date2之间相隔天数# datediff(date1,date2);</span><br><span class="line"></span><br><span class="line">#计算date加上n天后的日期#  adddate(date,n);</span><br><span class="line"></span><br><span class="line">#计算date减去n天后的日期# subdate(date,n);</span><br><span class="line"></span><br><span class="line">#计算time加上n秒后的时间#  adddate(time,n);</span><br><span class="line"></span><br><span class="line">#计算time减去n秒后的时间#  subdate(time,n);</span><br><span class="line">#返回数据库版本号#  version();</span><br><span class="line"></span><br><span class="line">#返回当前数据库名#  database();</span><br><span class="line"></span><br><span class="line">#返回当前用户#  user();</span><br><span class="line"></span><br><span class="line">#将IP地址转化为数字#  inet_aton(ip);</span><br><span class="line"></span><br><span class="line">#将数字转化为IP地址# inet_ntoa(x);</span><br><span class="line"></span><br><span class="line">#创建一个持续时间为time的名为name的锁#   cet_loct(name,time);</span><br><span class="line"></span><br><span class="line">#为名为name的锁解锁# release_loct(name);</span><br><span class="line"></span><br><span class="line">#将表达式重复执行count次#  benchmark(count,表达式);</span><br><span class="line"></span><br><span class="line">#将x变为type形式#  convert(x,type);</span><br><span class="line"></span><br><span class="line">#设置字段的非空约束# <span class="keyword">create</span> table 表名 (属性名 数据类型  <span class="keyword">not</span> <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">#设置字段的默认值#  <span class="keyword">create</span> table 表名 (属性名  数据类型  default  默认值);</span><br><span class="line"></span><br><span class="line">#设置字段的唯一约束# <span class="keyword">create</span> table 表名(属性名  数据类型  <span class="keyword">unique</span> );</span><br><span class="line"></span><br><span class="line">#设置字段的唯一约束并未约束命名#  <span class="keyword">create</span>  table 表名(属性名<span class="number">1</span> 数据类型 , 属性名<span class="number">2</span>   数据类型  ..........    constraint 约束名  <span class="keyword">unique</span> (属性名<span class="number">1</span>,属性名<span class="number">2.</span>.....));</span><br><span class="line"></span><br><span class="line">#设置单字段为主键约束#  <span class="keyword">create</span>  table 表名(属性名<span class="number">1</span>  数据类型 <span class="keyword">primary</span>  <span class="keyword">key</span>....);</span><br><span class="line"></span><br><span class="line">#设置多字段为主键约束# <span class="keyword">create</span>  table  表名(属性名<span class="number">1</span> 数据类型  ,  属性名<span class="number">2</span>  数据类型........constraint 约束名  <span class="keyword">primary</span>  <span class="keyword">key</span> (属性名<span class="number">1</span>,属性名<span class="number">2.</span>.....));</span><br><span class="line"></span><br><span class="line">#设置字段自动增加值#  <span class="keyword">create</span> table 表名 (属性名 数据类型  auto_increment.........);</span><br><span class="line"></span><br><span class="line">#设置外键约束#  <span class="keyword">create</span> table 表名 (属性名<span class="number">1</span>  数据类型  , 属性名<span class="number">2</span> 数据类型........  constraint 外键约束名  foreing  <span class="keyword">key</span> (外键属性名<span class="number">1</span>)  references  表名 (主键属性名<span class="number">2</span>));</span><br><span class="line"></span><br><span class="line">#创建普通索引#  <span class="keyword">create</span> table 表名(属性名  数据类型 ,属性名  数据类型..... <span class="keyword">index</span>或 <span class="keyword">key</span> 索引名(可省略)(属性名  (长度(可省略))  <span class="keyword">asc</span>或<span class="keyword">desc</span>);</span><br><span class="line"></span><br><span class="line">#在已存在表创建普通索引# <span class="keyword">create</span> <span class="keyword">index</span> 索引名  <span class="keyword">on</span> 表名  ( 属性名 (长度或不写) <span class="keyword">asc</span>或<span class="keyword">desc</span>或不写);  或 alter table  表名  add  <span class="keyword">index</span>或<span class="keyword">key</span> 索引名(属性名 (长度或不写) <span class="keyword">asc</span>或<span class="keyword">desc</span>或不写); </span><br><span class="line"></span><br><span class="line">#创建唯一索引#   <span class="keyword">create</span> table 表名(属性名  数据类型 ,属性名  数据类型..... <span class="keyword">unique</span>  <span class="keyword">index</span>或 <span class="keyword">key</span> 索引名(可省略)(属性名  (长度(可省略))  <span class="keyword">asc</span>或<span class="keyword">desc</span>);</span><br><span class="line"></span><br><span class="line">#在已存在表创建唯一索引# <span class="keyword">create</span>  <span class="keyword">unique</span> <span class="keyword">index</span> 索引名  <span class="keyword">on</span> 表名  ( 属性名 (长度或不写) <span class="keyword">asc</span>或<span class="keyword">desc</span>或不写);  或 alter table  表名  add  unique  <span class="keyword">index</span>或<span class="keyword">key</span> 索引名(属性名 (长度或不写) <span class="keyword">asc</span>或<span class="keyword">desc</span>或不写);</span><br><span class="line"></span><br><span class="line">#创建全文索引#  <span class="keyword">create</span> table 表名(属性名  数据类型 ,属性名  数据类型..... fulltext  <span class="keyword">index</span>或 <span class="keyword">key</span> 索引名(可省略)(属性名  (长度(可省略))  <span class="keyword">asc</span>或<span class="keyword">desc</span>);</span><br><span class="line"></span><br><span class="line">#在已存在表创建全文索引# <span class="keyword">create</span>  fulltext <span class="keyword">index</span> 索引名  <span class="keyword">on</span> 表名  ( 属性名 (长度或不写) <span class="keyword">asc</span>或<span class="keyword">desc</span>或不写);  或 alter table  表名  add  fulltext  <span class="keyword">index</span>或<span class="keyword">key</span> 索引名(属性名 (长度或不写) <span class="keyword">asc</span>或<span class="keyword">desc</span>或不写);</span><br><span class="line"></span><br><span class="line">#创建多列索引#  <span class="keyword">create</span> table 表名(属性名  数据类型 ,属性名  数据类型..... <span class="keyword">index</span>或 <span class="keyword">key</span> 索引名(可省略)(属性名<span class="number">1</span>  (长度(可省略))  <span class="keyword">asc</span>或<span class="keyword">desc</span> ,属性名<span class="number">2</span>  (长度(可省略))  <span class="keyword">asc</span>或<span class="keyword">desc</span>.........);</span><br><span class="line"></span><br><span class="line">#在已存在表创建多列索引# <span class="keyword">create</span> <span class="keyword">index</span> 索引名  <span class="keyword">on</span> 表名 (属性名<span class="number">1</span>  (长度(可省略))  <span class="keyword">asc</span>或<span class="keyword">desc</span> ,属性名<span class="number">2</span>  (长度(可省略))  <span class="keyword">asc</span>或<span class="keyword">desc</span>.........);  或 alter table  表名  add   <span class="keyword">index</span>或<span class="keyword">key</span> 索引名(属性名<span class="number">1</span>  (长度(可省略))  <span class="keyword">asc</span>或<span class="keyword">desc</span> ,属性名<span class="number">2</span>  (长度(可省略))  <span class="keyword">asc</span>或<span class="keyword">desc</span>.........);</span><br><span class="line"></span><br><span class="line">#查看索引是否用到#  <span class="keyword">explain</span>  <span class="keyword">select</span> * <span class="keyword">from</span> 表名  <span class="keyword">where</span>  .......;</span><br><span class="line"></span><br><span class="line">#删除索引# <span class="keyword">drop</span> <span class="keyword">index</span> 索引名 <span class="keyword">on</span> 表名;</span><br><span class="line"></span><br><span class="line">#创建视图#  <span class="keyword">create</span> <span class="keyword">view</span>  视图名 <span class="keyword">as</span> 查询语句;</span><br><span class="line"></span><br><span class="line">#查看视图详细信息#  show  table status from  数据库名  like '视图名';   或  show  table status</span><br><span class="line"></span><br><span class="line">#查看视图定义信息# show  <span class="keyword">create</span>  <span class="keyword">view</span>  视图名;</span><br><span class="line"></span><br><span class="line">#查看视图设计信息# desc  视图名;</span><br><span class="line"></span><br><span class="line">#通过系统表查看视图信息# use  information_schema;  <span class="keyword">select</span> * <span class="keyword">from</span> views <span class="keyword">where</span> table_name=<span class="string">'视图名'</span>\G;</span><br><span class="line"></span><br><span class="line">#删除视图#  <span class="keyword">drop</span> <span class="keyword">view</span>  视图名;</span><br><span class="line"></span><br><span class="line">#修改视图#  <span class="keyword">create</span> <span class="keyword">or</span> <span class="built_in">replace</span> <span class="keyword">view</span> 视图名 <span class="keyword">as</span> 查询语句; 或  alter  view 视图名  as  查询语句 ;</span><br><span class="line"></span><br><span class="line">#创建触发器# <span class="keyword">create</span> <span class="keyword">trigger</span> 触发器名 before或after 触发条件(<span class="keyword">delete</span>、<span class="keyword">insert</span>、<span class="keyword">update</span>) <span class="keyword">on</span>  触发条件的操作表表名  <span class="keyword">for</span> <span class="keyword">each</span> row  触发语句;</span><br><span class="line"></span><br><span class="line">#创建含多条语句的触发器# delimiter $$ <span class="keyword">create</span> <span class="keyword">trigger</span> 触发器名 before或after 触发条件(<span class="keyword">delete</span>、<span class="keyword">insert</span>、<span class="keyword">update</span>) <span class="keyword">on</span>  触发条件的操作表表名  <span class="keyword">for</span> <span class="keyword">each</span> row  <span class="keyword">begin</span> 触发语句<span class="number">1</span>; 触发语句2;......;end $$  delimiter;</span><br><span class="line"></span><br><span class="line">#查看触发器#  show triggers\G</span><br><span class="line"></span><br><span class="line">#通过查看系统表查看触发器信息# use information_schema;  <span class="keyword">select</span> * <span class="keyword">from</span> triggers\G</span><br><span class="line"></span><br><span class="line">#删除触发器# <span class="keyword">drop</span> <span class="keyword">trigger</span> 触发器名字</span><br><span class="line"></span><br><span class="line">#查看错误信息# <span class="keyword">show</span> warnings;</span><br><span class="line"></span><br><span class="line">#查看支持的存储引擎# show engines; 或 show  variables like 'have%';</span><br><span class="line"></span><br><span class="line">#查看默认存储引擎#  show  variables  like 'storage_engine% ';</span><br><span class="line"></span><br><span class="line">#查看MySQL的帮助文档目录列表# help  contents; </span><br><span class="line"> </span><br><span class="line">#查看数据类型# help data  types;</span><br><span class="line"></span><br><span class="line">#显示当前年月日# <span class="keyword">select</span> curdate(); </span><br><span class="line"></span><br><span class="line">#显示当前年月日和时间#  <span class="keyword">select</span> now();</span><br><span class="line"></span><br><span class="line">#显示当前时间# <span class="keyword">select</span> time(now());</span><br><span class="line"></span><br><span class="line">#显示当前年月日#  <span class="keyword">select</span> year (now());</span><br><span class="line"></span><br><span class="line">#创建存储过程#  <span class="keyword">create</span> <span class="keyword">procedure</span> 存储过程名字  (存储过程参数：输入/输出类型,参数名,参数类型)  存储过程特性或不写   存储过程的语句;</span><br><span class="line"></span><br><span class="line">#创建函数过程# <span class="keyword">create</span> <span class="keyword">function</span> 函数名字 (函数的参数：参数名,参数类型) 函数特性或不写 函数过程语句;</span><br><span class="line"></span><br><span class="line">#查看存储过程#  show procedure status like '存储过程名' \G 或  use information_schema;  <span class="keyword">select</span> * <span class="keyword">from</span> routines <span class="keyword">where</span> specific_name=<span class="string">'存储过程名'</span>\G</span><br><span class="line"></span><br><span class="line">#查看函数过程#  <span class="keyword">show</span> <span class="keyword">function</span> status <span class="keyword">like</span> <span class="string">'函数过程'</span> \G或  <span class="keyword">use</span> information_schema;  <span class="keyword">select</span> * <span class="keyword">from</span> routines <span class="keyword">where</span> specific_name=<span class="string">'函数过程名'</span>\G</span><br><span class="line"></span><br><span class="line">#查看存储过程定义信息#  <span class="keyword">show</span> <span class="keyword">create</span>  <span class="keyword">procedure</span>  存储过程名\G</span><br><span class="line"></span><br><span class="line">#查看函数过程定义信息# <span class="keyword">show</span> crate  <span class="keyword">function</span>  函数名\G</span><br><span class="line"></span><br><span class="line">#删除存储过程# <span class="keyword">drop</span>  <span class="keyword">procedure</span>  存储过程名\G</span><br><span class="line"></span><br><span class="line"># 删除函数# <span class="keyword">drop</span> <span class="keyword">function</span>  函数名\G</span><br><span class="line"></span><br><span class="line">#创建普通用户账户#  <span class="keyword">create</span> <span class="keyword">user</span> 用户名 identified  <span class="keyword">by</span>  ‘密码’;</span><br><span class="line"></span><br><span class="line">#创建带权限的普通用户账户# grant  权限参数：<span class="keyword">select</span>、<span class="keyword">create</span>、<span class="keyword">drop</span>等  <span class="keyword">on</span>  库.表(权限范围) <span class="keyword">to</span>  用户名 identified  <span class="keyword">by</span>  ‘密码’;</span><br><span class="line"></span><br><span class="line">#更改超级用户root的密码#  set  password=password(“新密码”);</span><br><span class="line"></span><br><span class="line">#利用root用户修改带权限的普通用户密码# grant  权限参数：<span class="keyword">select</span>、<span class="keyword">create</span>、<span class="keyword">drop</span>等  <span class="keyword">on</span>  库.表(权限范围) <span class="keyword">to</span>  用户名 identified  <span class="keyword">by</span>  ‘新密码’;</span><br><span class="line"></span><br><span class="line">#利用root用户修改普通用户密码#set  password  for 用户名=password(“新密码”);</span><br><span class="line"></span><br><span class="line">#普通用户更改自身密码#set  password=password(“新密码”);</span><br><span class="line"></span><br><span class="line">#删除普通用户# <span class="keyword">drop</span>  <span class="keyword">user</span> 用户名;  或  <span class="keyword">delete</span> <span class="keyword">from</span>  <span class="keyword">user</span> <span class="keyword">where</span>  <span class="keyword">user</span>=</span><br><span class="line"></span><br><span class="line">#对普通用户进行授权#  <span class="keyword">grant</span>  权限参数：<span class="keyword">select</span>、<span class="keyword">create</span>、<span class="keyword">drop</span>等  <span class="keyword">on</span>  库.表(权限范围) <span class="keyword">to</span>  用户名;</span><br><span class="line"></span><br><span class="line">#收回权限# revoke  权限参数：<span class="keyword">select</span>、<span class="keyword">create</span>、<span class="keyword">drop</span>等  <span class="keyword">on</span>  库.表(权限范围) <span class="keyword">from</span>  用户名;</span><br><span class="line"></span><br><span class="line">#收回所有权限# revoke all privileges,grant option from  用户名;</span><br></pre></td></tr></table></figure>


    </div>

    
    
    
      
  <div class="popular-posts-header">相关文章推荐</div>
  <ul class="popular-posts">
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\2008\01\04\python\2008-01-04-python-draft\" rel="bookmark">python-draft</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\2008\01\05\python\2008-01-04-python-ruan\" rel="bookmark">python-ruan</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\2021\11\24\python\python_基础篇\第11篇：高级数据类型之集合\" rel="bookmark">第11篇：高级数据类型之集合</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\2021\11\25\python\python_基础篇\基础篇-目录\" rel="bookmark">基础篇</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\2021\11\24\python\python_基础篇\第12篇：高级数据类型之字典\" rel="bookmark">第12篇：高级数据类型之字典</a></div>
    </li>
  </ul>

        <div class="reward-container">
  <div>赞赏一下吧～</div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    打赏
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/images/alipay.png" alt="tongsiying 支付宝">
        <p>支付宝</p>
      </div>

  </div>
</div>

        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>tongsiying
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://tongsiying.github.io/2022/01/18/python/python_%E5%9F%BA%E7%A1%80%E7%AF%87/%E7%AC%AC35%E7%AF%87%EF%BC%9AMySQL%E5%9F%BA%E7%A1%80/" title="第35篇：MySQL基础">https://tongsiying.github.io/2022/01/18/python/python_基础篇/第35篇：MySQL基础/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener external nofollow noreferrer" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/python/" rel="tag"># python</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/01/18/python/python_%E5%9F%BA%E7%A1%80%E7%AF%87/%E7%AC%AC34%E7%AF%87%EF%BC%9APython%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" rel="prev" title="第34篇：Python正则表达式">
      <i class="fa fa-chevron-left"></i> 第34篇：Python正则表达式
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/01/18/python/python_%E5%9F%BA%E7%A1%80%E7%AF%87/%E7%AC%AC36%E7%AF%87%EF%BC%9AMySQL%E8%BF%9B%E9%98%B6/" rel="next" title="第36篇：MySQL进阶">
      第36篇：MySQL进阶 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#一、数据库简介"><span class="nav-text">一、数据库简介</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-sql及其规范"><span class="nav-text">1. sql及其规范</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-MYSQL常用命令"><span class="nav-text">2. MYSQL常用命令</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#二、数据库操作（DDL）"><span class="nav-text">二、数据库操作（DDL）</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#三、数据表操作"><span class="nav-text">三、数据表操作</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-数值类型"><span class="nav-text">1. 数值类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-日期和时间类型"><span class="nav-text">2. 日期和时间类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-字符串类型"><span class="nav-text">3. 字符串类型</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#四、表记录操作"><span class="nav-text">四、表记录操作</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#五、外键约束"><span class="nav-text">五、外键约束</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#六、连表查询"><span class="nav-text">六、连表查询</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#七、联合查询"><span class="nav-text">七、联合查询</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-UNION和UNION-ALL的作用和语法"><span class="nav-text">1. UNION和UNION ALL的作用和语法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-union的用法及注意事项"><span class="nav-text">2. union的用法及注意事项</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-学习例子"><span class="nav-text">3. 学习例子</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#八、limit分页"><span class="nav-text">八、limit分页</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#九、数据库引擎"><span class="nav-text">九、数据库引擎</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="tongsiying"
      src="/images/gutianle.gif">
  <p class="site-author-name" itemprop="name">tongsiying</p>
  <div class="site-description" itemprop="description">问渠那得清如许？为有源头活水来。</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">432</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">21</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">48</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/tongsiying" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;tongsiying" rel="noopener external nofollow noreferrer" target="_blank"><i class="github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:wxtlucky1015@163.com" title="E-Mail → mailto:wxtlucky1015@163.com" rel="noopener external nofollow noreferrer" target="_blank"><i class="envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/u/2964109344" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;u&#x2F;2964109344" rel="noopener external nofollow noreferrer" target="_blank"><i class="weibo fa-fw"></i>Weibo</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/" title="tongsiying → https:&#x2F;&#x2F;tongsiying.github.io"><i class="wrench fa-fw"></i>tongsiying</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/ReadingNotes/" title="ReadingNotes → https:&#x2F;&#x2F;tongsiying.github.io&#x2F;ReadingNotes&#x2F;"><i class="book fa-fw"></i>ReadingNotes</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/blog/" title="blog → https:&#x2F;&#x2F;tongsiying.github.io&#x2F;blog&#x2F;"><i class="book fa-fw"></i>blog</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/blog/tools/" title="tools → https:&#x2F;&#x2F;tongsiying.github.io&#x2F;blog&#x2F;tools&#x2F;"><i class="wrench fa-fw"></i>tools</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/lanlan/" title="lanlan → https:&#x2F;&#x2F;tongsiying.github.io&#x2F;lanlan&#x2F;"><i class="wrench fa-fw"></i>lanlan</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/Music/" title="note → https:&#x2F;&#x2F;tongsiying.github.io&#x2F;Music&#x2F;"><i class="wrench fa-fw"></i>note</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/sound/" title="Music → https:&#x2F;&#x2F;tongsiying.github.io&#x2F;sound&#x2F;"><i class="wrench fa-fw"></i>Music</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/JSONFormat/" title="JSONFormat → https:&#x2F;&#x2F;tongsiying.github.io&#x2F;JSONFormat&#x2F;"><i class="wrench fa-fw"></i>JSONFormat</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/HTML5-Canvas/" title="Canvas → https:&#x2F;&#x2F;tongsiying.github.io&#x2F;HTML5-Canvas&#x2F;"><i class="wrench fa-fw"></i>Canvas</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/games/" title="games → https:&#x2F;&#x2F;tongsiying.github.io&#x2F;games&#x2F;"><i class="wrench fa-fw"></i>games</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/love/" title="love → https:&#x2F;&#x2F;tongsiying.github.io&#x2F;love&#x2F;"><i class="wrench fa-fw"></i>love</a>
      </span>
  </div>



		<div style="">
  <canvas id="canvas" style="width:60%;">��ǰ�������֧��canvas������������������</canvas>
</div>
<script>
(function(){

   var digit=
    [
        [
            [0,0,1,1,1,0,0],
            [0,1,1,0,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,0,1,1,0],
            [0,0,1,1,1,0,0]
        ],//0
        [
            [0,0,0,1,1,0,0],
            [0,1,1,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [1,1,1,1,1,1,1]
        ],//1
        [
            [0,1,1,1,1,1,0],
            [1,1,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,0,0],
            [0,0,1,1,0,0,0],
            [0,1,1,0,0,0,0],
            [1,1,0,0,0,0,0],
            [1,1,0,0,0,1,1],
            [1,1,1,1,1,1,1]
        ],//2
        [
            [1,1,1,1,1,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,0,0,1,1,0],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0]
        ],//3
        [
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,1,0],
            [0,0,1,1,1,1,0],
            [0,1,1,0,1,1,0],
            [1,1,0,0,1,1,0],
            [1,1,1,1,1,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,0,1,1,0],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,1,1]
        ],//4
        [
            [1,1,1,1,1,1,1],
            [1,1,0,0,0,0,0],
            [1,1,0,0,0,0,0],
            [1,1,1,1,1,1,0],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0]
        ],//5
        [
            [0,0,0,0,1,1,0],
            [0,0,1,1,0,0,0],
            [0,1,1,0,0,0,0],
            [1,1,0,0,0,0,0],
            [1,1,0,1,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0]
        ],//6
        [
            [1,1,1,1,1,1,1],
            [1,1,0,0,0,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,1,1,0,0,0],
            [0,0,1,1,0,0,0],
            [0,0,1,1,0,0,0],
            [0,0,1,1,0,0,0]
        ],//7
        [
            [0,1,1,1,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0]
        ],//8
        [
            [0,1,1,1,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,0,0],
            [0,1,1,0,0,0,0]
        ],//9
        [
            [0,0,0,0,0,0,0],
            [0,0,1,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0],
            [0,0,1,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,0,0,0,0,0]
        ]//:
    ];

var canvas = document.getElementById('canvas');

if(canvas.getContext){
    var cxt = canvas.getContext('2d');
    //����canvas�Ŀ���
    var H = 100,W = 700;
    canvas.height = H;
    canvas.width = W;
    cxt.fillStyle = '#f00';
    cxt.fillRect(10,10,50,50);

    //�洢ʱ������
    var data = [];
    //�洢�˶���С��
    var balls = [];
    //�������Ӱ뾶
    var R = canvas.height/20-1;
    (function(){
        var temp = /(\d)(\d):(\d)(\d):(\d)(\d)/.exec(new Date());
        //�洢ʱ�����֣���ʮλСʱ����λСʱ��ð�š�ʮλ���ӡ���λ���ӡ�ð�š�ʮλ���ӡ���λ������7���������
        data.push(temp[1],temp[2],10,temp[3],temp[4],10,temp[5],temp[6]);
    })();

    /*���ɵ�������*/
    function renderDigit(index,num){
        for(var i = 0; i < digit[num].length; i++){
            for(var j = 0; j < digit[num][i].length; j++){
                if(digit[num][i][j] == 1){
                    cxt.beginPath();
                    cxt.arc(14*(R+2)*index + j*2*(R+1)+(R+1),i*2*(R+1)+(R+1),R,0,2*Math.PI);
                    cxt.closePath();
                    cxt.fill();
                }
            }
        }
    }

    /*����ʱ��*/
    function updateDigitTime(){
        var changeNumArray = [];
        var temp = /(\d)(\d):(\d)(\d):(\d)(\d)/.exec(new Date());
        var NewData = [];
        NewData.push(temp[1],temp[2],10,temp[3],temp[4],10,temp[5],temp[6]);
        for(var i = data.length-1; i >=0 ; i--){
            //ʱ�䷢���仯
            if(NewData[i] !== data[i]){
                //���仯������ֵ����data�����е������洢��changeNumArray������
                changeNumArray.push(i+'_'+(Number(data[i])+1)%10);
            }
        }
        //����С��
        for(var i = 0; i< changeNumArray.length; i++){
            addBalls.apply(this,changeNumArray[i].split('_'));
        }
        data = NewData.concat();
    }

    /*����С��״̬*/
    function updateBalls(){
        for(var i = 0; i < balls.length; i++){
            balls[i].stepY += balls[i].disY;
            balls[i].x += balls[i].stepX;
            balls[i].y += balls[i].stepY;
            if(balls[i].x > W + R || balls[i].y > H + R){
                balls.splice(i,1);
                i--;
            }
        }
    }

    /*����Ҫ�˶���С��*/
    function addBalls(index,num){
        var numArray = [1,2,3];
        var colorArray =  ["#3BE","#09C","#A6C","#93C","#9C0","#690","#FB3","#F80","#F44","#C00"];
        for(var i = 0; i < digit[num].length; i++){
            for(var j = 0; j < digit[num][i].length; j++){
                if(digit[num][i][j] == 1){
                    var ball = {
                        x:14*(R+2)*index + j*2*(R+1)+(R+1),
                        y:i*2*(R+1)+(R+1),
                        stepX:Math.floor(Math.random() * 4 -2),
                        stepY:-2*numArray[Math.floor(Math.random()*numArray.length)],
                        color:colorArray[Math.floor(Math.random()*colorArray.length)],
                        disY:1
                    };
                    balls.push(ball);
                }
            }
        }
    }

    /*��Ⱦ*/
    function render(){
        //���û������ȣ��ﵽ��ջ�����Ч��
        canvas.height = 100;
        //��Ⱦʱ��
        for(var i = 0; i < data.length; i++){
            renderDigit(i,data[i]);
        }
        //��ȾС��
        for(var i = 0; i < balls.length; i++){
            cxt.beginPath();
            cxt.arc(balls[i].x,balls[i].y,R,0,2*Math.PI);
            cxt.fillStyle = balls[i].color;
            cxt.closePath();
            cxt.fill();
        }
    }

    clearInterval(oTimer);
    var oTimer = setInterval(function(){
        //����ʱ��
        updateDigitTime();
        //����С��״̬
        updateBalls();
        //��Ⱦ
        render();
    },50);
}

})();
</script>
      </div>
    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; Weeny – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">tongsiying</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">7.6m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">114:48</span>
</div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
