<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/hedgehog.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/hedgehog.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"tongsiying.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"hide","b2t":true,"scrollpercent":true,"padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="article">
<meta property="og:title" content="BlockStorage-cosbeach">
<meta property="og:url" content="https://tongsiying.github.io/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/index.html">
<meta property="og:site_name" content="tongsiying">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://tongsiying.github.io/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/70.png">
<meta property="og:image" content="https://tongsiying.github.io/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/2352.png">
<meta property="og:image" content="https://tongsiying.github.io/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/2019082520185115.png">
<meta property="og:image" content="https://tongsiying.github.io/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/164794872765816.png">
<meta property="og:image" content="https://tongsiying.github.io/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825202036952.png">
<meta property="og:image" content="https://tongsiying.github.io/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825202146993.png">
<meta property="og:image" content="https://tongsiying.github.io/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825202305281.png">
<meta property="og:image" content="https://tongsiying.github.io/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825202348409.png">
<meta property="og:image" content="https://tongsiying.github.io/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825202509667.png">
<meta property="og:image" content="https://tongsiying.github.io/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825202625125.png">
<meta property="og:image" content="https://tongsiying.github.io/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825202722897.png">
<meta property="og:image" content="https://tongsiying.github.io/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825202930751.png">
<meta property="og:image" content="https://tongsiying.github.io/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825203028853.png">
<meta property="og:image" content="https://tongsiying.github.io/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825203202369.png">
<meta property="og:image" content="https://tongsiying.github.io/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825203247912.png">
<meta property="og:image" content="https://tongsiying.github.io/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825203336225.png">
<meta property="og:image" content="https://tongsiying.github.io/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825203418454.png">
<meta property="og:image" content="https://tongsiying.github.io/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825203515134.png">
<meta property="og:image" content="https://tongsiying.github.io/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825203803526.png">
<meta property="og:image" content="https://tongsiying.github.io/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825204144112.png">
<meta property="og:image" content="https://tongsiying.github.io/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825204228974.png">
<meta property="og:image" content="https://tongsiying.github.io/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825204347272.png">
<meta property="og:image" content="https://tongsiying.github.io/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825204905240-164794962533932.png">
<meta property="og:image" content="https://tongsiying.github.io/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825204952433.png">
<meta property="og:image" content="https://tongsiying.github.io/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825205044428.png">
<meta property="og:image" content="https://tongsiying.github.io/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825205127829.png">
<meta property="og:image" content="https://tongsiying.github.io/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825205209328.png">
<meta property="og:image" content="https://tongsiying.github.io/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/2019082520525519.png">
<meta property="og:image" content="https://tongsiying.github.io/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825205358420.png">
<meta property="og:image" content="https://tongsiying.github.io/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825205442241.png">
<meta property="og:image" content="https://tongsiying.github.io/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825205530801.png">
<meta property="article:published_time" content="2008-01-04T10:37:19.000Z">
<meta property="article:modified_time" content="2022-03-22T11:53:36.074Z">
<meta property="article:author" content="tongsiying">
<meta property="article:tag" content="BlockStorage-tools">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://tongsiying.github.io/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/70.png">

<link rel="canonical" href="https://tongsiying.github.io/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>BlockStorage-cosbeach | tongsiying</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
<!-- 加入APlayer音乐播放器 -->
<link rel="stylesheet" href="/dist/APlayer.min.css">
<div id="aplayer"></div>
<script type="text/javascript" src="/dist/APlayer.min.js"></script>
<script type="text/javascript" src="/dist/music.js"></script>
  <div class="container use-motion">
    <div class="headband"></div>
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

	<!-- catalog/ -->
	<!--     <a href="/" class="brand" rel="start"> -->
	
    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">tongsiying</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">阅读|运动|自律</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://tongsiying.github.io/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/gutianle.gif">
      <meta itemprop="name" content="tongsiying">
      <meta itemprop="description" content="问渠那得清如许？为有源头活水来。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tongsiying">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          BlockStorage-cosbeach
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2008-01-04 18:37:19" itemprop="dateCreated datePublished" datetime="2008-01-04T18:37:19+08:00">2008-01-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-03-22 19:53:36" itemprop="dateModified" datetime="2022-03-22T19:53:36+08:00">2022-03-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/BlockStorage/" itemprop="url" rel="index"><span itemprop="name">BlockStorage</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>28k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>26 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p class="description"></p>
<a id="more"></a>

<p><a href="https://blog.csdn.net/QTM_Gitee/article/details/100067724?utm_medium=distribute.pc_aggpage_search_result.none-task-blog-2~aggregatepage~first_rank_ecpm_v1~rank_v31_ecpm-1-100067724.pc_agg_new_rank&amp;utm_term=cosbench%E6%89%8B%E5%86%8C&amp;spm=1000.2123.3001.4430" target="_blank" rel="noopener external nofollow noreferrer">https://blog.csdn.net/QTM_Gitee/article/details/100067724?utm_medium=distribute.pc_aggpage_search_result.none-task-blog-2~aggregatepage~first_rank_ecpm_v1~rank_v31_ecpm-1-100067724.pc_agg_new_rank&amp;utm_term=cosbench%E6%89%8B%E5%86%8C&amp;spm=1000.2123.3001.4430</a></p>
<h1 id="COSBench用户指南"><a href="#COSBench用户指南" class="headerlink" title="COSBench用户指南"></a><strong>COSBench用户指南</strong></h1><p>Version 2.8.5</p>
<p>时间：2014年11月</p>
<p>作者：Wang, Yaguang</p>
<p>本文档介绍如何逐步安装，配置和运行COSBench（<a href="https://so.csdn.net/so/search?q=云存储&spm=1001.2101.3001.7020" target="_blank" rel="noopener external nofollow noreferrer">云存储</a>基准测试工具），解释如何使用配置文件定义工作负载，并提供参考示例。</p>
<p>文档编号: 328791-001US</p>
<h1 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h1><p>COSBench是一个用于测试云<a href="https://so.csdn.net/so/search?q=对象存储&spm=1001.2101.3001.7020" target="_blank" rel="noopener external nofollow noreferrer">对象存储</a>系统的分布式基准测试工具，它目前支持一些云对象存储系统（参见1.3”支持的云对象存储系统”）。<br>COSBench还允许用户为其他存储系统创建适配器。<br>有关详细信息，请参阅“COSBench适配器开发指南”。</p>
<p><img src="/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/70.png" alt></p>
<p>COSbench包含两个关键组件：</p>
<ul>
<li>Driver（也称为COSBench驱动或负载生成器）:</li>
<li>负责工作负载生成，向目标云对象存储下发操作，收集性能统计数据。</li>
<li>可以通过访问。</li>
<li>Controller (也称为COSBench控制器):<ul>
<li>负责协调drivers集体执行工作负载，收集和汇总来自driver实例的运行时状态或基准测试结果，并接受工作负载提交。</li>
<li>可以通过 访问。</li>
</ul>
</li>
</ul>
<p>Controller和Driver可以部署在相同的节点上，也可以部署在不同的节点上，节点可以是物理机或虚拟机(VM)实例。</p>
<p>英特尔COSBench源代码将在Apache<br>2.0许可下发布，托管地址为<a href="http://github.com/intel-cloud/cosbench/。" target="_blank" rel="noopener external nofollow noreferrer">http://github.com/intel-cloud/cosbench/。</a></p>
<p>已在以下位置为COSBench建立了邮件列表：<a href="http://cosbench.1094679.n5.nabble.com/。" target="_blank" rel="noopener external nofollow noreferrer">http://cosbench.1094679.n5.nabble.com/。</a></p>
<h2 id="参考硬件配置"><a href="#参考硬件配置" class="headerlink" title="参考硬件配置"></a>参考硬件配置</h2><p>英特尔实验室中用于验证目的的硬件配置如下所示。提供此信息仅供参考，因为适用于各种实现的系统高度依赖于各个使用场景。还要注意，网络资源在COSBench实现中起着至关重要的作用。</p>
<table>
<thead>
<tr>
<th><strong>硬件</strong></th>
<th><strong>配置</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>Controller</strong></td>
<td></td>
</tr>
<tr>
<td>处理器</td>
<td>2x Intel® Xeon® processors X5570 @ 2.93 GHz</td>
</tr>
<tr>
<td>内存</td>
<td>12 GB</td>
</tr>
<tr>
<td>存储</td>
<td>1x 120 GB+ disk drive</td>
</tr>
<tr>
<td>网络</td>
<td>Intel® 82574 Gigabit Ethernet Controller</td>
</tr>
<tr>
<td><strong>Driver</strong></td>
<td></td>
</tr>
<tr>
<td>处理器</td>
<td>2x Intel Xeon processors X5570 @ 2.93 GHz</td>
</tr>
<tr>
<td>内存</td>
<td>12 GB</td>
</tr>
<tr>
<td>存储</td>
<td>1x 50 GB+ disk drive</td>
</tr>
<tr>
<td>网络</td>
<td>Intel® 82599 10 Gigabit Ethernet Controller</td>
</tr>
</tbody></table>
<h2 id="系统要求"><a href="#系统要求" class="headerlink" title="系统要求"></a>系统要求</h2><p><em>注意：</em>COSBench的当前版本具有Ubuntu 12.04.1 LTS<br>桌面版，但COSBench开发团队假定组织将使用各种操作系统进行安装并向社区提供相关反馈.</p>
<ul>
<li>Ubuntu 12.04.1 LTS Desktop</li>
<li>Java* Runtime Environment 1.6+</li>
<li>Curl 7.22.0+</li>
<li>如果需要处理生成的csv文件，则使用Csvtool。</li>
<li>空闲的TCP端口(确保这些端口可以非本地访问)：<ul>
<li>COSBench controller机器: 19088</li>
<li>COSBench driver 机器: 18088</li>
</ul>
</li>
</ul>
<p><em>注意:</em> 在整个文档中，命令行以<strong>粗体</strong>和<em>斜体</em>显示;<br>黄色文本用于强调，以引起对特定信息的注意。支持的云对象存储系统矩阵。</p>
<h2 id="支持的云对象存储系统"><a href="#支持的云对象存储系统" class="headerlink" title="支持的云对象存储系统"></a>支持的云对象存储系统</h2><p>通常，访问每个云对象存储系统将涉及两个部分，它们是认证机制和对象访问语义。<br>为了满足不同系统的复杂性，COSBench将它们分开处理，并封装到两个API（AuthAPI和StorageAPI）中。</p>
<p>开发人员可以在不同的包中实现它们，或者将它们合并为一个，用户可以将一个Auth<br>API实现与多个存储API实现相结合，或者将多个Auth API实现与一个存储API实现相关联。<br>有关详细信息，请参阅“COSBench适配器开发指南”。</p>
<p>下表列出了到目前为止不同的AuthAPI和StorageAPI组合的状态，它可能会不时更新：</p>
<p><img src="/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/2352.png" alt="在这里插入图片描述"></p>
<p>注意:</p>
<p>* librados由niklas goerke-niklas974@gitHub贡献，</p>
<p>* sproxyd由Scality的Christophe Vedel贡献</p>
<h2 id="本指南其余部分的内容"><a href="#本指南其余部分的内容" class="headerlink" title="本指南其余部分的内容"></a>本指南其余部分的内容</h2><p>本文档介绍如何安装、配置和使用云存储基准工具COSBench。</p>
<ul>
<li>第2节介绍COSBench的初始安装和测试。</li>
<li>第3节介绍了如何配置和运行该工具。</li>
<li>第4节指导用户如何定义工作负载。</li>
<li>第5节解释了COSBench提供的结果以及如何解释它们。</li>
<li>第6节回答常见问题。</li>
<li>附录A提供了不同存储系统的示例配置。</li>
</ul>
<h1 id="安装COSBench"><a href="#安装COSBench" class="headerlink" title="安装COSBench"></a>安装COSBench</h1><h2 id="安装操作系统"><a href="#安装操作系统" class="headerlink" title="安装操作系统"></a>安装操作系统</h2><ol>
<li>下载 <a href="http://www.ubuntu.com/download/desktop" target="_blank" rel="noopener external nofollow noreferrer">Ubuntu Desktop 12.04.1 LTS</a>。</li>
<li>按照 <a href="http://www.ubuntu.com/download/help/install-desktop-long-term-support" target="_blank" rel="noopener external nofollow noreferrer">Ubuntu installation<br>guide</a>中的说明进行操作。</li>
<li>以下是安装过程中主要步骤的截图，其中包括创建一个名为“cosbench”的用户;<br>所有其他设置可以保留默认值或由用户自行决定修改。</li>
</ol>
<p><img src="/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/2019082520185115.png" alt></p>
<p><img src="/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/164794872765816.png" alt></p>
<p><img src="/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825202036952.png" alt="11e"></p>
<ol>
<li>安装后的最终包列表可以在github站点上的文件“pkg.lst”中找到。</li>
</ol>
<h3 id="安装JRE"><a href="#安装JRE" class="headerlink" title="安装JRE"></a>安装JRE</h3><ul>
<li>OpenJDK是默认的JRE; Oracle JRE也应该可行。</li>
<li>如果可以联网，则可以通过apt-get安装软件包，如下所示：</li>
</ul>
<blockquote>
<p><em>cosbench@cosbox:~$ sudo apt-get update</em></p>
</blockquote>
<blockquote>
<p><em>cosbench@cosbox:~$ sudo apt-get install openjdk-7-jre</em></p>
</blockquote>
<ul>
<li>如果不可以联网，可以使用Debian *软件包安装JRE; 两个包是必不可少的：<br><a href="http://packages.ubuntu.com/precise/java/openjdk-7-jre-lib" target="_blank" rel="noopener external nofollow noreferrer">JRE-LIB</a> 和<br><a href="http://packages.ubuntu.com/precise/java/openjdk-7-jre-headless" target="_blank" rel="noopener external nofollow noreferrer">JRE-HEADLESS</a>。</li>
<li>这些软件包可以按如下方式安装(此过程使用“/tmp”作为示例；用户可以自行决定使用不同的文件夹)：</li>
</ul>
<blockquote>
<p><em>cosbench@cosbox:/tmp$ sudo dpkg –i –force depends<br>openjdk-7-jre-lib_7u7-2.3.2a-0ubuntu0.12.04.1_all.deb</em></p>
</blockquote>
<blockquote>
<p><em>(Reading database …</em></p>
</blockquote>
<blockquote>
<p><em>cosbench@cosbox:/tmp$ sudo dpkg –i –force depends<br>openjdk-7-jre-headless_7u7-2.3.2a-0ubuntu0.12.04.1_amd64.deb</em></p>
</blockquote>
<blockquote>
<p><em>Selecting previously unselected package openjdk-7-jre-headless …</em></p>
</blockquote>
<blockquote>
<p><em>cosbench@cosbox:/tmp$ java –showversion</em></p>
</blockquote>
<blockquote>
<p><em>java version “1.7.0_07”</em></p>
</blockquote>
<blockquote>
<p><em>…</em></p>
</blockquote>
<h3 id="安装Curl"><a href="#安装Curl" class="headerlink" title="安装Curl"></a>安装Curl</h3><ul>
<li>如果可以联网，可以按如下方式安装Curl：</li>
</ul>
<blockquote>
<p><em>cosbench@cosbox:~$</em> <strong>sudo apt-get update</strong></p>
</blockquote>
<blockquote>
<p><em>cosbench@cosbox:~$</em> <strong>sudo apt-get install curl</strong></p>
</blockquote>
<ul>
<li>如果不可以联网，请使用Debian软件包安装<a href="http://packages.ubuntu.com/precise/web/curl" target="_blank" rel="noopener external nofollow noreferrer">Curl</a>:</li>
</ul>
<blockquote>
<p><em>cosbench@cosbox:/tmp$ sudo dpkg –i curl_7.22.0-3ubuntu4_amd64.deb</em></p>
</blockquote>
<blockquote>
<p><em>cosbench@cosbox:/tmp$ curl –V</em></p>
</blockquote>
<blockquote>
<p><em>curl 7.22.0 (x86_64-pc-linux-gnu) …</em></p>
</blockquote>
<h2 id="安装COSBench-1"><a href="#安装COSBench-1" class="headerlink" title="安装COSBench"></a>安装COSBench</h2><h3 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h3><p>在当前版本中，COSBench<br>controller和driver是组合在一起的；它们并不各自具有单独的软件包。</p>
<p>从<a href="https://github.com/intel-cloud/cosbench*/releases*获取安装包" target="_blank" rel="noopener external nofollow noreferrer">https://github.com/intel-cloud/cosbench*/releases*获取安装包</a><strong><version>.zip</version></strong>（例如，2.1.0.GA.zip），并将其放在控制器节点上home目录下的COSBench包中。</p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>按照以下命令完成安装，将COSBench软件包解压缩到一个文件夹中，为其创建一个名为“cos”的符号链接，并使所有bash脚本可执行：</p>
<blockquote>
<p><em>cosbench@cosbox:/tmp$ cd ~</em></p>
</blockquote>
<blockquote>
<p><em>cosbench@cosbox:~$ unzip 2.1.0.GA.zip</em></p>
</blockquote>
<blockquote>
<p><em>cosbench@cosbox:~$ rm cos</em></p>
</blockquote>
<blockquote>
<p><em>cosbench@cosbox:~$ ln –s 2.1.0.GA/ cos</em></p>
</blockquote>
<blockquote>
<p><em>cosbench@cosbox:~$ cd cos</em></p>
</blockquote>
<blockquote>
<p><em>cosbench@cosbox:~$ chmod +x \</em>.sh*</p>
</blockquote>
<h2 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h2><p><img src="/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825202146993.png" alt></p>
<h3 id="脚本"><a href="#脚本" class="headerlink" title="脚本"></a>脚本</h3><table>
<thead>
<tr>
<th><strong>脚本</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td>start-all.sh stop-all.sh</td>
<td>在当前节点上启动/停止controller和driver</td>
</tr>
<tr>
<td>start-controller.sh stop-controller.sh</td>
<td>仅在当前节点上启动/停止controller</td>
</tr>
<tr>
<td>start-driver.sh stop-driver.sh</td>
<td>仅在当前节点上启动/停止driver</td>
</tr>
<tr>
<td>cosbench-start.sh cosbench-stop.sh</td>
<td>上述脚本调用的内部脚本</td>
</tr>
<tr>
<td>cli.sh</td>
<td>通过命令行操作工作负载</td>
</tr>
</tbody></table>
<p>还包括一些Windows *批处理脚本，仅用于演示目的。</p>
<table>
<thead>
<tr>
<th><strong>脚本</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td>start-all.bat</td>
<td>在当前节点上启动controller和driver</td>
</tr>
<tr>
<td>start-controller.bat</td>
<td>仅在当前节点上启动controller</td>
</tr>
<tr>
<td>start-driver.bat</td>
<td>仅在当前节点上启动driver</td>
</tr>
<tr>
<td>Web.bat</td>
<td>通过本地安装的浏览器打开controller Web控制台</td>
</tr>
</tbody></table>
<h3 id="子目录"><a href="#子目录" class="headerlink" title="子目录"></a>子目录</h3><table>
<thead>
<tr>
<th><strong>子目录</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td>archive</td>
<td>存储所有生成的结果；请参阅本文档的“结果”部分</td>
</tr>
<tr>
<td>conf</td>
<td>配置文件，包括COSBench配置和工作负载配置</td>
</tr>
<tr>
<td>log</td>
<td>运行时日志文件; 重要的是system.log</td>
</tr>
<tr>
<td>osgi</td>
<td>包含COSBench库和第三方库</td>
</tr>
<tr>
<td>main</td>
<td>包含OSGi启动器</td>
</tr>
</tbody></table>
<h2 id="验证安装"><a href="#验证安装" class="headerlink" title="验证安装"></a>验证安装</h2><p>以下步骤在当前节点上启动controller和driver并进行测试以确保安装正确。</p>
<h3 id="启动COSBench"><a href="#启动COSBench" class="headerlink" title="启动COSBench"></a>启动COSBench</h3><p>HTTP代理打破了controller和driver之间的交互。<br>要避免HTTP请求路由，需要<strong>绕过</strong>代理设置：</p>
<blockquote>
<p><em>cosbench@cosbox:~$ unset http_proxy</em></p>
</blockquote>
<p>在当前节点上启动COSBench driver和controller。 默认情况下，COSBench<br>driver侦听端口18088，COSBench controller侦听端口19088。</p>
<blockquote>
<p><em>cosbench@cosbox:~$ sh start-all.sh</em></p>
</blockquote>
<p><img src="/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825202305281.png" alt></p>
<p><img src="/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825202348409.png" alt></p>
<h3 id="检查Controllers-and-Drivers"><a href="#检查Controllers-and-Drivers" class="headerlink" title="检查Controllers and Drivers"></a>检查Controllers and Drivers</h3><blockquote>
<p><em>cosbench@cosbox:~$ netstat –an |grep LISTEN |grep 19088</em> #<br>检查controller.</p>
</blockquote>
<blockquote>
<p>tcp 0 0 :::19088 ::? LISTEN</p>
</blockquote>
<blockquote>
<p><em>Cosbench@cosbox:~$ netstat –an |grep LISTEN |grep 18088</em> # 检查<br>driver</p>
</blockquote>
<blockquote>
<p>tcp 0 0 :::18088 ::? LISTEN</p>
</blockquote>
<h3 id="测试安装"><a href="#测试安装" class="headerlink" title="测试安装"></a>测试安装</h3><blockquote>
<p><em>Cosbench@cosbox:~$ sh cli.sh submit conf/workload-config.xml # run mock<br>test.</em></p>
</blockquote>
<blockquote>
<p>Accepted with ID: w1</p>
</blockquote>
<blockquote>
<p><em>cosbench@cosbox:~$ sh cli.sh info</em></p>
</blockquote>
<blockquote>
<p>Drivers:</p>
</blockquote>
<blockquote>
<p>driver1 <a href="http://127.0.0.1:18088/driver" target="_blank" rel="noopener external nofollow noreferrer">http://127.0.0.1:18088/driver</a></p>
</blockquote>
<blockquote>
<p>Total: 1 drivers</p>
</blockquote>
<blockquote>
<p>Active Workloads:</p>
</blockquote>
<blockquote>
<p>W1 Thu Jul 12 04:37:31 MST 2012 PROCESSING</p>
</blockquote>
<p>在浏览器中打开<br><a href="http://127.0.0.1:19088/controller/index.html以监控状态。在下面的示例中，“活动工作负载”部分中列出了一个“正在处理”的工作负载。" target="_blank" rel="noopener external nofollow noreferrer">http://127.0.0.1:19088/controller/index.html以监控状态。在下面的示例中，“活动工作负载”部分中列出了一个“正在处理”的工作负载。</a></p>
<p><img src="/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825202509667.png" alt></p>
<p>COSBench现在已成功安装在当前节点上。可选地，可以取消工作负载并停止COSBench，如下所示:</p>
<blockquote>
<p><em>cosbench@cosbox:~$ sh cli.sh cancel w1</em></p>
</blockquote>
<blockquote>
<p>W1 Thu Jul 12 23:34:14 MST 2012 CANCELLED</p>
</blockquote>
<blockquote>
<p><em>cosbench@cosbox:~$ sh stop-all.sh</em></p>
</blockquote>
<blockquote>
<p>Stopping cosbench controller …</p>
</blockquote>
<blockquote>
<p>Successfully stopped cosbench controller.</p>
</blockquote>
<blockquote>
<p>==================================================</p>
</blockquote>
<blockquote>
<p>Stopping cosbench driver …</p>
</blockquote>
<blockquote>
<p>Successfully stopped cosbench driver.</p>
</blockquote>
<h2 id="部署COSBench"><a href="#部署COSBench" class="headerlink" title="部署COSBench"></a>部署COSBench</h2><ul>
<li>通过scp或共享文件夹等方法将<version> .zip复制到剩余的COSBench节点。</version></li>
<li>重复上面列出的过程以安装COSBench并验证每个节点上的安装。</li>
</ul>
<h1 id="配置和运行"><a href="#配置和运行" class="headerlink" title="配置和运行"></a>配置和运行</h1><h2 id="全局"><a href="#全局" class="headerlink" title="全局"></a>全局</h2><p>COSBench<br>controller和driver依赖于不同的系统配置文件来启动，这些配置文件仅适用于COSBench本身，而不是工作负载配置。</p>
<p>下表概述了COSBench期望的所有配置。</p>
<table>
<thead>
<tr>
<th><strong>配置</strong></th>
<th><strong>描述</strong></th>
<th><strong>文件路径</strong></th>
</tr>
</thead>
<tbody><tr>
<td>controller</td>
<td>controller的配置; 在初始化期间由controller读取</td>
<td>conf/controller.conf</td>
</tr>
<tr>
<td>driver</td>
<td>driver的配置; 在初始化期间由driver读取</td>
<td>conf/driver.conf</td>
</tr>
<tr>
<td>workload</td>
<td>正在提交的工作负载的配置</td>
<td>通过controller的Web界面提交</td>
</tr>
</tbody></table>
<h2 id="配置Controller"><a href="#配置Controller" class="headerlink" title="配置Controller"></a>配置Controller</h2><h3 id="Conf-controller-conf"><a href="#Conf-controller-conf" class="headerlink" title="Conf/controller.conf"></a>Conf/controller.conf</h3><p>COSBench controller的配置<em>需要</em>INI格式文件，如下例所示：</p>
<blockquote>
<p>[controller]</p>
</blockquote>
<blockquote>
<p>concurrency=1</p>
</blockquote>
<blockquote>
<p>drivers=3</p>
</blockquote>
<blockquote>
<p>log_level = INFO</p>
</blockquote>
<blockquote>
<p>log_file = log/system.log</p>
</blockquote>
<blockquote>
<p>archive_dir = archive</p>
</blockquote>
<blockquote>
<p>[driver1]</p>
</blockquote>
<blockquote>
<p>name=driver1</p>
</blockquote>
<blockquote>
<p>url=<a href="http://192.168.10.1:18088/driver" target="_blank" rel="noopener external nofollow noreferrer">http://192.168.10.1:18088/driver</a></p>
</blockquote>
<blockquote>
<p>[driver2]</p>
</blockquote>
<blockquote>
<p>name=driver2</p>
</blockquote>
<blockquote>
<p>url=<a href="http://192.168.10.2:18088/driver" target="_blank" rel="noopener external nofollow noreferrer">http://192.168.10.2:18088/driver</a></p>
</blockquote>
<blockquote>
<p>[driver3]</p>
</blockquote>
<blockquote>
<p>name=driver3</p>
</blockquote>
<blockquote>
<p>url=<a href="http://192.168.10.3:18088/driver" target="_blank" rel="noopener external nofollow noreferrer">http://192.168.10.3:18088/driver</a></p>
</blockquote>
<blockquote>
<p><strong>[controller]</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th><strong>参数</strong></th>
<th><strong>类型</strong></th>
<th><strong>默认值</strong></th>
<th><strong>注释</strong></th>
</tr>
</thead>
<tbody><tr>
<td>drivers</td>
<td>整型</td>
<td>1</td>
<td>此controller控制的driver数量</td>
</tr>
<tr>
<td>concurrency</td>
<td>整型</td>
<td>1</td>
<td>可以同时执行的工作负载数量</td>
</tr>
<tr>
<td>log_level</td>
<td>字符串</td>
<td>“INFO”</td>
<td>“TRACE”, “DEBUG”, “INFO”, “WARN”, “ERROR”</td>
</tr>
<tr>
<td>log_file</td>
<td>字符串</td>
<td>“log/system.log”</td>
<td>存储日志文件的位置</td>
</tr>
<tr>
<td>archive_dir</td>
<td>字符串</td>
<td>“archive”</td>
<td>存储归档工作负载结果的位置</td>
</tr>
</tbody></table>
<p>第n个driver的driver节应命名为<strong>driver <n></n></strong>以便识别。</p>
<blockquote>
<p><strong>[driver<n>]</n></strong></p>
</blockquote>
<table>
<thead>
<tr>
<th><strong>参数</strong></th>
<th><strong>类型</strong></th>
<th><strong>默认值</strong></th>
<th><strong>注释</strong></th>
</tr>
</thead>
<tbody><tr>
<td>name</td>
<td>字符串</td>
<td></td>
<td>用于标识driver节点的标签。 请注意，driver名称不一定是节点的主机名</td>
</tr>
<tr>
<td>url</td>
<td>字符串</td>
<td></td>
<td>访问driver节点的地址</td>
</tr>
</tbody></table>
<h2 id="配置Driver"><a href="#配置Driver" class="headerlink" title="配置Driver"></a>配置Driver</h2><h3 id="Conf-driver-conf"><a href="#Conf-driver-conf" class="headerlink" title="Conf/driver.conf"></a>Conf/driver.conf</h3><p>该文件是可选的; 虽然Web控制台无法正确标记driver节点，但COSBench<br>driver可以在没有此配置文件的情况下启动。 配置是INI格式文件，如以下示例所示：:</p>
<blockquote>
<p>[driver]</p>
</blockquote>
<blockquote>
<p>name=driver1</p>
</blockquote>
<blockquote>
<p>url=<a href="http://192.168.0.11:18088/driver" target="_blank" rel="noopener external nofollow noreferrer">http://192.168.0.11:18088/driver</a></p>
</blockquote>
<blockquote>
<p><strong>[driver]</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th><strong>参数</strong></th>
<th><strong>类型</strong></th>
<th><strong>默认值</strong></th>
<th><strong>注释</strong></th>
</tr>
</thead>
<tbody><tr>
<td>name</td>
<td>字符串</td>
<td></td>
<td>用于标识driver节点的标签。 请注意，driver名称不一定是节点的主机名</td>
</tr>
<tr>
<td>url</td>
<td>字符串</td>
<td></td>
<td>访问driver节点的地址</td>
</tr>
</tbody></table>
<h2 id="启动Drivers"><a href="#启动Drivers" class="headerlink" title="启动Drivers"></a>启动Drivers</h2><ul>
<li>如果需要，在driver节点上编辑conf / driver.conf。</li>
<li>默认情况下，COSBenchdriver侦听端口 18088<strong>。</strong></li>
<li>在所有driver节点上启动driver。</li>
</ul>
<blockquote>
<p><em>sh start-driver.sh</em></p>
</blockquote>
<p><img src="/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825202625125.png" alt></p>
<ul>
<li>确保可使用HTTP连接从controller访问所有driver。</li>
<li>通过使用Curl连接，控制台中应该有一个有效的HTML文件：</li>
</ul>
<blockquote>
<p><em>curl</em></p>
</blockquote>
<ul>
<li>在Web浏览器中打开 <em>http://<driver-host>:18088/driver/index.html</driver-host></em> 时,<br>将显示以下Web页面：</li>
</ul>
<p><img src="/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825202722897.png" alt></p>
<p><em>注意：</em>如果出现任何错误或意外结果，请检查系统配置;<br>常见问题包括防火墙过滤或http代理路由。</p>
<h2 id="启动Controllers"><a href="#启动Controllers" class="headerlink" title="启动Controllers"></a>启动Controllers</h2><ul>
<li>在COSBench controller机器上编辑conf/controller.conf。</li>
<li>默认情况下，COSBench controller侦听端口 19088<strong>.</strong></li>
<li>在controller节点上启动Controller。</li>
</ul>
<blockquote>
<p><em>sh start-controller.sh</em></p>
</blockquote>
<p><img src="/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825202930751.png" alt></p>
<ul>
<li>确保controller已成功启动。<ul>
<li>通过使用Curl连接，控制台中应该有一个有效的HTML文件:</li>
</ul>
</li>
</ul>
<blockquote>
<p><em>curl</em></p>
</blockquote>
<ul>
<li>在Web浏览器中打开<br>时，将显示以下网页（请注意，将以下屏幕截图中显示的<controller-host><br>IP地址192.168.250.36 替换为控制器节点的实际IP地址）:</controller-host></li>
</ul>
<p><img src="/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825203028853.png" alt></p>
<h2 id="提交工作负载"><a href="#提交工作负载" class="headerlink" title="提交工作负载"></a>提交工作负载</h2><p>conf/目录中提供了几个模板供参考：</p>
<ul>
<li><strong>workload-config.xml</strong><br>是一个带有注释的模板，用于描述如何针对不同的存储类型进行配置。<br>它将访问模拟存储以帮助验证。</li>
<li><strong>swift-config-sample.xml</strong> 是OpenStack Swift存储系统的模板。</li>
<li><strong>ampli-config-sample.xml</strong> 是AmpliData AmpliStor<br>v2.3和v2.5存储系统的模板。有关特定于版本的配置信息，请参阅附录A。</li>
<li><strong>s3-config-sample.xml</strong> 适用于Amazon S3兼容存储系统的模板。</li>
<li><a href="https://github.com/kun95/cosbench/blob/master/release/conf/aliyun-config-sample.xml" target="_blank" rel="noopener external nofollow noreferrer">aliyun-config-sample.xml</a><br>是Aliyun OSS存储系统的模板。</li>
</ul>
<h3 id="定义工作负载"><a href="#定义工作负载" class="headerlink" title="定义工作负载"></a>定义工作负载</h3><p>有关如何为用户定义的工作负载创建工作负载配置文件的详细信息，请参阅本文档的“<strong>工作负载配置</strong>”部分。</p>
<p>基本工作负载配置选项也可从controller Web控制台上的工作负载配置页面获得;<br>请参阅本文档的“<strong>工作负载配置</strong>”部分以自定义XML文件以获得最大的灵活性。<br>（请注意，下面屏幕截图中显示的<controller-host><br>IP地址192.168.250.36应替换为controller节点的实际IP地址。）</controller-host></p>
<p>工作负载配置页面支持定义多个相同的阶段，还允许在阶段之间插入延迟以帮助确定边界。</p>
<p><img src="/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825203202369.png" alt></p>
<p><img src="/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825203247912.png" alt></p>
<p>要定义批量工作负载，我们可以在控制器Web控制台上使用“高级配置工作负载”超链接。<br>高级配置UI有助于自动生成各种输入参数的大量不同组合，例如对象大小，每个容器的对象，容器数量，并发数（works），读-写-删除比率。</p>
<p>单击“工作负载的高级配置”超链接后，将转到高级配置屏幕。从这里，可以生成工作负载文件或直接提交工作负载。</p>
<p>在本节中，我们将研究如何生成工作负载文件。无论在“工作负载矩阵名称”中输入什么值，都将在安装controller的机器上的COSBench安装目录下的“workloads”目录中生成一个具有该名称的目录。</p>
<p>对于在此屏幕中定义的每个工作负载，将创建一个名称等于在“Workload<br>Name”字段中输入的字符串的文件，并将其放置在上一步创建的工作负载矩阵目录下。可以在“Workload<br>Matrix Name”和“Workload<br>Name”字段中输入的名称有一些限制。应该使用字母或数字，允许使用特殊字符包括_ -<br>#. ( ) / %<br>&amp;。输入的字符串长度应介于3到50个字符之间。高级配置UI页面上的所有工作负载都将使用身份验证和存储配置。类似的属性，如Runtime，Rampup，Delay和Number<br>of Drivers将对此网页上定义的所有工作负载通用。定义每个工作负载需要以下输入参数：</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>默认值</th>
<th>注释</th>
</tr>
</thead>
<tbody><tr>
<td>Object sizes</td>
<td>字符串</td>
<td>4,128,512</td>
<td>可以用逗号分隔，也可以是一个范围</td>
</tr>
<tr>
<td>Object size unit</td>
<td>字符串</td>
<td>KB</td>
<td>下拉框由Byte, KB, MB, GB等值组成</td>
</tr>
<tr>
<td>Objects per container</td>
<td>字符串</td>
<td>1000</td>
<td>逗号分隔的字符串</td>
</tr>
<tr>
<td>Containers</td>
<td>字符串</td>
<td>1,1000</td>
<td>逗号分隔的字符串</td>
</tr>
<tr>
<td>Workers</td>
<td>字符串</td>
<td>1,2,4,8,16,32,64</td>
<td>逗号分隔的字符串</td>
</tr>
</tbody></table>
<p><img src="/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825203336225.png" alt></p>
<p>除了这些参数之外，还可以在“’Add RWD<br>ratio”按钮的帮助下，根据需要为任何工作负载添加任意数量的读-写-删除组合。<br>还可以在“Add Workload”按钮的帮助下添加任意数量的工作负载。</p>
<p>完成用适当的值填充所有这些字段后，可以单击“Generate Workload<br>File/s”按钮。这将在已经提到的位置生成所有配置文件。可以根据需要编辑这些配置文件，然后通过工作负载提交UI屏幕提交它们。我们还可以选择直接通过此页面提交工作负载。我们将在下一个小节中研究这种方法。</p>
<p><img src="/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825203418454.png" alt></p>
<h3 id="提交工作负载-1"><a href="#提交工作负载-1" class="headerlink" title="提交工作负载"></a>提交工作负载</h3><p>有两种方法可以向COSBench提交工作负载。</p>
<ul>
<li>使用命令行接口：</li>
</ul>
<blockquote>
<p><em>sh cli.sh submit conf/config.xml</em></p>
</blockquote>
<ul>
<li>使用web 控制台:</li>
</ul>
<blockquote>
<p>在浏览器中打开 以监控运行状态。<br>（请注意，下面屏幕截图中显示的<controller-host><br>IP地址192.168.250.36应替换为控制器节点的实际IP地址。）</controller-host></p>
</blockquote>
<p><img src="/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825203515134.png" alt></p>
<p><img src="/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825203803526.png" alt="cd5d"></p>
<h3 id="检查负载状态"><a href="#检查负载状态" class="headerlink" title="检查负载状态"></a>检查负载状态</h3><p>还有两种检查工作负载状态的方法。</p>
<ul>
<li>使用命令行接口：</li>
</ul>
<blockquote>
<p><em>sh cli.sh info</em></p>
</blockquote>
<ul>
<li>使用Web控制台：</li>
</ul>
<blockquote>
<p>在浏览器中打开 以监控运行状态。<br>（请注意，下面屏幕截图中显示的<controller-host><br>IP地址192.168.250.36应替换为控制器节点的实际IP地址。）</controller-host></p>
</blockquote>
<blockquote>
<p>也可以通过高级配置UI页面直接提交工作负载。但是，此页面提交通过此页面本身定义的生成的工作负载。可以使用“Submit<br>Workload/s”按钮进行同样的操作。要了解如何通过高级配置UI定义工作负载，请参阅上一小节。</p>
</blockquote>
<p><img src="/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825204144112.png" alt></p>
<p>单击该界面屏幕的Active Workload部分中的<strong>view<br>details</strong>将显示运行时性能数据，如下所示：</p>
<h2 id="停止Drivers和Controllers"><a href="#停止Drivers和Controllers" class="headerlink" title=" 停止Drivers和Controllers"></a><img src="/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825204228974.png" alt> 停止Drivers和Controllers</h2><blockquote>
<p><em>ps |grep java # 应该在这里看到java。</em></p>
</blockquote>
<blockquote>
<p><em>sh stop-driver.sh</em></p>
</blockquote>
<blockquote>
<p><em>ps |grep java # 应该没有java运行。</em></p>
</blockquote>
<blockquote>
<p><em>ps |grep java</em></p>
</blockquote>
<blockquote>
<p><em>sh stop-controller.sh</em></p>
</blockquote>
<blockquote>
<p><em>ps |grep java</em></p>
</blockquote>
<p>“ps”命令用于帮助确认driver或controller进程是否已停止。<br>如果Java进程未按预期停止，则用户可以通过终止进程来强制停止它。</p>
<h2 id="配置Tomcat"><a href="#配置Tomcat" class="headerlink" title="配置Tomcat"></a>配置Tomcat</h2><p>COSBench controller和 driver使用Apache<br>Tomcat作为Web服务器,下表概述了与Tomcat相关的所有配置。</p>
<table>
<thead>
<tr>
<th><strong>配置</strong></th>
<th><strong>描述</strong></th>
<th><strong>文件路径</strong></th>
</tr>
</thead>
<tbody><tr>
<td>Tomcat for controller</td>
<td>controller上Web服务器的配置</td>
<td>conf/ controller-tomcat-server.xml</td>
</tr>
<tr>
<td>Tomcat for driver</td>
<td>driver上Web服务器的配置</td>
<td>conf/ driver-tomcat-server.xml</td>
</tr>
<tr>
<td>Tomcat Web身份验证</td>
<td>配置Web身份验证，默认情况下配置了默认的用户名/密码对，用户可以在访问Web控制台时更改配置文件中的“password”以强制进行用户名/密码身份验证。</td>
<td>conf/cosbench-users.xml</td>
</tr>
</tbody></table>
<h2 id="工作负载管理"><a href="#工作负载管理" class="headerlink" title="工作负载管理"></a>工作负载管理</h2><p>COSBench可以接受多个工作负载提交，它为这些工作负载维护一个作业队列，并逐个执行。</p>
<p>在controller Web控制台上，工作负载分为三个部分：</p>
<ul>
<li><strong>Active workloads</strong>: 刚刚提交但尚未完成的归置负载，包括处理中的和排队中的。</li>
<li><strong>Historical workloads</strong>: 这些是已经完成的工作负载。</li>
<li><strong>Archived workloads</strong>: 这些是在之前的cosbench重启中完成的工作负载。<br>COSBench可以识别由先前实例生成的工作负载结果，并可以按需加载或卸载它们。</li>
</ul>
<blockquote>
<p>COSBench支持通过以下方法管理这些工作负载：</p>
</blockquote>
<ul>
<li><strong>Reorder</strong> 活动列表中的工作负载</li>
<li><strong>Load/unload</strong> 归档的工作负载</li>
<li><strong>Re-submit</strong> 历史的或归档的工作负载</li>
</ul>
<p><img src="/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825204347272.png" alt></p>
<h1 id="配置工作负载"><a href="#配置工作负载" class="headerlink" title="配置工作负载"></a>配置工作负载</h1><h2 id="引言-1"><a href="#引言-1" class="headerlink" title="引言"></a>引言</h2><blockquote>
<p><strong>workload</strong></p>
</blockquote>
<blockquote>
<p>auth</p>
</blockquote>
<blockquote>
<p>storage</p>
</blockquote>
<blockquote>
<p>workflow</p>
</blockquote>
<blockquote>
<p><strong>workstage</strong></p>
</blockquote>
<blockquote>
<p>auth</p>
</blockquote>
<blockquote>
<p>storage</p>
</blockquote>
<blockquote>
<p><strong>work</strong></p>
</blockquote>
<blockquote>
<p>auth</p>
</blockquote>
<blockquote>
<p>storage</p>
</blockquote>
<blockquote>
<p><strong>operation</strong></p>
</blockquote>
<p>工作负载表示为具有以下结构的XML文件：</p>
<ul>
<li>Workload→ work stage→ work → operation</li>
<li>如果需要，一个工作负载可以定义一个或多个work stages。</li>
<li>多个work stages的执行是顺序的，而同一work stage的work执行是并行的。</li>
<li>对于每一个work，使用“workers”来调整负载。</li>
<li>身份验证定义（auth）和存储定义（存储）可以在多个级别定义，而较低级别的定义会覆盖较高级别的定义。<br>例如，operations在其work中使用auth和storage的定义，以覆盖工作负载级别的定义。</li>
</ul>
<h2 id="选择表达式-也称为选择器"><a href="#选择表达式-也称为选择器" class="headerlink" title="选择表达式(也称为选择器)"></a>选择表达式(也称为选择器)</h2><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><ul>
<li>在工作负载配置中，下面的元素支持一个“config”属性 (<strong>auth</strong>, <strong>storage</strong>,<br><strong>work</strong>, <strong>operation</strong>); 该属性包含一个可选参数列表，其中键值对使用格式“a =<br>a_val; b = b_val”。.</li>
</ul>
<p>&lt;work <em>name</em>=“read” <em>workers</em>=“100”<br><em>config</em>=“<em>containers</em>=u(1,32);<em>objects</em>=u(1,100)” /&gt;</p>
<ul>
<li>在参数列表中，常用的键包括 “<strong>containers</strong>”, “<strong>objects</strong>”, 和“<strong>sizes</strong>”,<br>它们用于指定如何选择容器，对象和大小。一个表达式用于帮助定义选择。</li>
<li>表达式中的数字对于对象大小与对象或容器具有不同的含义。对于对象大小，数字表示数量，而对于对象或容器，数字表示编号或标签。</li>
</ul>
<h3 id="选择器"><a href="#选择器" class="headerlink" title="选择器"></a>选择器</h3><table>
<thead>
<tr>
<th><strong>表达式</strong></th>
<th><strong>格式</strong></th>
<th><strong>注释</strong></th>
</tr>
</thead>
<tbody><tr>
<td>constant</td>
<td>c(number)</td>
<td>仅使用指定数字</td>
</tr>
<tr>
<td>uniform</td>
<td>u(min, max)</td>
<td>从[min，max]中均匀选择</td>
</tr>
<tr>
<td>range</td>
<td>r(min,max)</td>
<td>从[min，max]递增选择</td>
</tr>
<tr>
<td>sequential</td>
<td>s(min,max)</td>
<td>从[min，max]递增选择</td>
</tr>
<tr>
<td>histogram</td>
<td>h(min1|max1|weight1,…)</td>
<td>它提供了一个加权直方图生成器，要配置它，需要指定一个逗号分隔的桶列表，其中每个桶由一个范围和一个整数权重定义。例如: h(1|64|10,64|512|20,512|2048|30)KB 其中定义了一个配置文件，其中（1,64）KB被加权为10，（64,512）KB被加权为20，并且（512,2048）KB被加权为30.权重之和不一定是100。</td>
</tr>
</tbody></table>
<blockquote>
<p>例如，c(1)表示元素数量将固定在一个固定数字中</p>
</blockquote>
<blockquote>
<p>例如，u(1,100)表示从100个元素中均匀地选择元素编号;<br>选择是随机的，一些数字可能被选择不止一次，而一些数字可能永远不会被选中</p>
</blockquote>
<blockquote>
<p>例如，r(1,100)表示元素编号从min到max逐渐增加，每个数字只选择一次;<br>这通常用于特殊阶段（init, prepare, cleanup,<br>dispose），如果在正常阶段使用，请确保您了解如何正确使用它（详见FAQ<br>6.1.17）。</p>
</blockquote>
<blockquote>
<p>例如，s(1100)表示元素编号从min递增到max，每个数字只选择一次。这是线程安全的。</p>
</blockquote>
<h3 id="允许的组合"><a href="#允许的组合" class="headerlink" title="允许的组合"></a>允许的组合</h3><p>基于元素类型和work type，选择器还有其他约束; 以下两个表列出了允许的组合。</p>
<p><strong>选择器 v 元素类型:</strong></p>
<table>
<thead>
<tr>
<th>Key</th>
<th>constant (c(num))</th>
<th>uniform (u(min,max))</th>
<th>range (r(min,max))</th>
<th>sequential (s(min,max))</th>
<th>histogram (h(min|max|ratio))</th>
</tr>
</thead>
<tbody><tr>
<td>containers</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td></td>
</tr>
<tr>
<td>objects</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td></td>
</tr>
<tr>
<td>sizes</td>
<td>✔</td>
<td>✔</td>
<td></td>
<td>✔</td>
<td>✔</td>
</tr>
</tbody></table>
<p><strong>选择器v Work 类型:</strong></p>
<table>
<thead>
<tr>
<th>Key</th>
<th>init</th>
<th>prepare</th>
<th>normal (read)</th>
<th>normal (write)</th>
<th>normal (delete)</th>
<th>cleanup</th>
<th>dispose</th>
</tr>
</thead>
<tbody><tr>
<td>containers</td>
<td>r(), s()</td>
<td>r(), s()</td>
<td>c(), u(), r(), s()</td>
<td>c(), u(), r(), s()</td>
<td>c(), u(), r(), s()</td>
<td>r(), s()</td>
<td>r(), s()</td>
</tr>
<tr>
<td>objects</td>
<td></td>
<td>r(), s()</td>
<td>c(), u(), r(), s()</td>
<td>c(), u(), r()</td>
<td>c(), u(), r(), s()</td>
<td>r(), s()</td>
<td></td>
</tr>
<tr>
<td>sizes</td>
<td></td>
<td>c(), u(), h()</td>
<td></td>
<td>c(), u(), h()</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id="工作负载"><a href="#工作负载" class="headerlink" title="工作负载"></a>工作负载</h2><h3 id="通用格式"><a href="#通用格式" class="headerlink" title="通用格式"></a>通用格式</h3><blockquote>
<p>&lt;workload name=”demo” description=”demo benchmark with mock storage” /&gt;</p>
</blockquote>
<h3 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h3><table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>默认值</th>
<th>注释</th>
</tr>
</thead>
<tbody><tr>
<td>name</td>
<td>字符串</td>
<td></td>
<td>工作负载的一个名称</td>
</tr>
<tr>
<td>description</td>
<td>字符串</td>
<td></td>
<td>一些附加信息</td>
</tr>
</tbody></table>
<h2 id="认证"><a href="#认证" class="headerlink" title="认证"></a>认证</h2><h3 id="通用格式-1"><a href="#通用格式-1" class="headerlink" title="通用格式"></a>通用格式</h3><blockquote>
<p>&lt;auth type=“none|mock|swauth|keystone”</p>
</blockquote>
<blockquote>
<p>config=”<key>=<value>;<key>=<value>“ /&gt;</value></key></value></key></p>
</blockquote>
<h3 id="属性-1"><a href="#属性-1" class="headerlink" title="属性"></a>属性</h3><table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>默认值</th>
<th>注释</th>
</tr>
</thead>
<tbody><tr>
<td>type</td>
<td>字符串</td>
<td>none</td>
<td>认证类型</td>
</tr>
<tr>
<td>config</td>
<td>字符串</td>
<td></td>
<td>参数列表[可选]</td>
</tr>
</tbody></table>
<h3 id="认证机制"><a href="#认证机制" class="headerlink" title="认证机制"></a>认证机制</h3><h4 id="none-不执行任何操作，默认值"><a href="#none-不执行任何操作，默认值" class="headerlink" title="none (不执行任何操作，默认值)"></a>none (不执行任何操作，默认值)</h4><blockquote>
<auth type="“none”" config>
</auth></blockquote>
<blockquote>
<p><strong>参数列表:</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>默认值</th>
<th>注释</th>
</tr>
</thead>
<tbody><tr>
<td>logging</td>
<td>布尔型</td>
<td>false</td>
<td>将信息打印到日志</td>
</tr>
<tr>
<td>retry</td>
<td>整型</td>
<td>0</td>
<td>指定认证失败时的重试次数</td>
</tr>
<tr>
<td>Caching</td>
<td>布尔型</td>
<td>false</td>
<td>是否缓存认证信息</td>
</tr>
</tbody></table>
<h4 id="mock-延迟指定的时间"><a href="#mock-延迟指定的时间" class="headerlink" title="mock (延迟指定的时间)"></a>mock (延迟指定的时间)</h4><blockquote>
<auth type="“mock”" config>
</auth></blockquote>
<blockquote>
<p><strong>参数列表:</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>默认值</th>
<th>注释</th>
</tr>
</thead>
<tbody><tr>
<td>token</td>
<td>字符串</td>
<td>“token”</td>
<td>Token字符串</td>
</tr>
<tr>
<td>delay</td>
<td>长整型</td>
<td>20</td>
<td>延迟时间（以毫秒为单位）</td>
</tr>
<tr>
<td>retry</td>
<td>整型</td>
<td>0</td>
<td>指定认证失败时的重试次数</td>
</tr>
</tbody></table>
<h4 id="swauth-适用于OpenStack-Swift"><a href="#swauth-适用于OpenStack-Swift" class="headerlink" title="swauth (适用于OpenStack Swift)"></a>swauth (适用于OpenStack Swift)</h4><blockquote>
<p>&lt;auth type=“swauth”<br>config=“username=test:tester;password=testing;url=<a href="http://192.168.250.36:8080/auth/v1.0”" target="_blank" rel="noopener external nofollow noreferrer">http://192.168.250.36:8080/auth/v1.0”</a><br>/&gt;</p>
</blockquote>
<blockquote>
<p>请注意，IP地址192.168.250.36应替换为controller节点的实际IP地址。</p>
</blockquote>
<blockquote>
<p><strong>参数列表:</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>默认值</th>
<th>注释</th>
</tr>
</thead>
<tbody><tr>
<td>auth_url</td>
<td>字符串</td>
<td>“http:/192.168.250.36:8080/auth/v1.0”</td>
<td>auth节点的URL</td>
</tr>
<tr>
<td>username</td>
<td>字符串</td>
<td></td>
<td>用于认证的用户名。 语法account:user</td>
</tr>
<tr>
<td>password</td>
<td>字符串</td>
<td></td>
<td>用于认证的密码</td>
</tr>
<tr>
<td>timeout</td>
<td>整型</td>
<td>30,000</td>
<td>连接超时值(以毫秒为单位)</td>
</tr>
<tr>
<td>retry</td>
<td>整型</td>
<td>0</td>
<td>指定认证失败时的重试次数</td>
</tr>
</tbody></table>
<h4 id="keystone-适用于OpenStack-Swift"><a href="#keystone-适用于OpenStack-Swift" class="headerlink" title="keystone (适用于OpenStack Swift)"></a>keystone (适用于OpenStack Swift)</h4><blockquote>
<p>&lt;auth type=“keystone”<br>config=“username=tester;password=testing;tenant_name=test;url=<a href="http://192.168.250.36:5000/v2.0;service=swift”" target="_blank" rel="noopener external nofollow noreferrer">http://192.168.250.36:5000/v2.0;service=swift”</a><br>/&gt;</p>
</blockquote>
<blockquote>
<p>请注意，IP地址192.168.250.36应替换为controller节点的实际IP地址。</p>
</blockquote>
<blockquote>
<p><strong>参数列表:</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>默认值</th>
<th>注释</th>
</tr>
</thead>
<tbody><tr>
<td>auth_url</td>
<td>字符串</td>
<td>“<a href="http://192.168.250.36:8080/auth/v2.0”" target="_blank" rel="noopener external nofollow noreferrer">http://192.168.250.36:8080/auth/v2.0”</a></td>
<td>auth节点的URL</td>
</tr>
<tr>
<td>username</td>
<td>字符串</td>
<td></td>
<td>用于认证的用户名。 语法account:user</td>
</tr>
<tr>
<td>password</td>
<td>字符串</td>
<td></td>
<td>用于认证的密码</td>
</tr>
<tr>
<td>tenant_name</td>
<td>字符串</td>
<td></td>
<td>用户所属的租户名称</td>
</tr>
<tr>
<td>service</td>
<td>字符串</td>
<td>“swift”</td>
<td>请求的服务</td>
</tr>
<tr>
<td>timeout</td>
<td>整型</td>
<td>30,000</td>
<td>连接超时值(毫秒)</td>
</tr>
<tr>
<td>retry</td>
<td>整型</td>
<td>0</td>
<td>指定认证失败时的重试次数</td>
</tr>
</tbody></table>
<h4 id="httpauth-Http-BASIC-DIGEST"><a href="#httpauth-Http-BASIC-DIGEST" class="headerlink" title="httpauth (Http BASIC/DIGEST)"></a>httpauth (Http BASIC/DIGEST)</h4><blockquote>
<p>&lt;auth type=“httpauth”<br>config=“username=test;password=testing;auth_url=<a href="http://192.168.250.36:8080/”" target="_blank" rel="noopener external nofollow noreferrer">http://192.168.250.36:8080/”</a><br>/&gt;</p>
</blockquote>
<blockquote>
<p>请注意，IP地址192.168.250.36应替换为controller节点的实际IP地址。</p>
</blockquote>
<blockquote>
<p><strong>参数列表</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>默认值</th>
<th>注释</th>
</tr>
</thead>
<tbody><tr>
<td>auth_url</td>
<td>字符串</td>
<td>“<a href="http://192.168.250.36:8080/”" target="_blank" rel="noopener external nofollow noreferrer">http://192.168.250.36:8080/”</a></td>
<td>auth节点的URL</td>
</tr>
<tr>
<td>username</td>
<td>字符串</td>
<td></td>
<td>用于认证的用户名。</td>
</tr>
<tr>
<td>password</td>
<td>字符串</td>
<td></td>
<td>用于认证的密码</td>
</tr>
<tr>
<td>timeout</td>
<td>整型</td>
<td>30,000</td>
<td>连接超时值(毫秒)</td>
</tr>
<tr>
<td>retry</td>
<td>整型</td>
<td>0</td>
<td>指定认证失败时的重试次数</td>
</tr>
</tbody></table>
<h2 id="存储"><a href="#存储" class="headerlink" title="存储"></a>存储</h2><h3 id="通用格式-2"><a href="#通用格式-2" class="headerlink" title="通用格式"></a>通用格式</h3><p><storage type="“none|mock|swift|ampli|s3|sproxyd|oss|…”" config="<key>=<value>;<key>=<value>"></storage></p>
<h3 id="属性-2"><a href="#属性-2" class="headerlink" title="属性"></a>属性</h3><table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>默认值</th>
<th>注释</th>
</tr>
</thead>
<tbody><tr>
<td>type</td>
<td>字符串</td>
<td>“none”</td>
<td>存储类型</td>
</tr>
<tr>
<td>config</td>
<td>字符串</td>
<td></td>
<td>参数列表[可选]</td>
</tr>
</tbody></table>
<h3 id="存储系统"><a href="#存储系统" class="headerlink" title="存储系统"></a>存储系统</h3><h4 id="none-不执行任何操作，默认值-1"><a href="#none-不执行任何操作，默认值-1" class="headerlink" title="none (不执行任何操作，默认值)"></a>none (不执行任何操作，默认值)</h4><blockquote>
<storage type="“none”" config>
</storage></blockquote>
<blockquote>
<p><strong>参数列表:</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>默认值</th>
<th>注释</th>
</tr>
</thead>
<tbody><tr>
<td>logging</td>
<td>布尔型</td>
<td>false</td>
<td>将信息打印到日志</td>
</tr>
</tbody></table>
<h4 id="mock-延迟指定的时间-1"><a href="#mock-延迟指定的时间-1" class="headerlink" title="mock (延迟指定的时间)"></a>mock (延迟指定的时间)</h4><blockquote>
<storage type="“mock”" config>
</storage></blockquote>
<blockquote>
<p><strong>参数列表:</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>默认值</th>
<th>注释</th>
</tr>
</thead>
<tbody><tr>
<td>logging</td>
<td>布尔型</td>
<td>false</td>
<td>将信息打印到日志</td>
</tr>
<tr>
<td>size</td>
<td>整型</td>
<td>1024</td>
<td>对象大小(字节)</td>
</tr>
<tr>
<td>delay</td>
<td>整型</td>
<td>10</td>
<td>延迟时间(毫秒)</td>
</tr>
<tr>
<td>errors</td>
<td>整型</td>
<td>0</td>
<td>设置错误限制以模拟失败</td>
</tr>
<tr>
<td>printing</td>
<td>布尔型</td>
<td>False</td>
<td>是否打印出数据内容</td>
</tr>
</tbody></table>
<h4 id="Swift-OpenStack-Swift"><a href="#Swift-OpenStack-Swift" class="headerlink" title="Swift (OpenStack Swift)"></a>Swift (OpenStack Swift)</h4><blockquote>
<storage type="“swift”" config>
</storage></blockquote>
<blockquote>
<p><strong>参数列表:</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>默认值</th>
<th>注释</th>
</tr>
</thead>
<tbody><tr>
<td>timeout</td>
<td>整型</td>
<td>30,000</td>
<td>连接超时值(毫秒)</td>
</tr>
<tr>
<td>token</td>
<td>字符串</td>
<td>AUTH_xxx</td>
<td>认证令牌，只有在用户希望绕过认证时才需要此参数。</td>
</tr>
<tr>
<td>storage_url</td>
<td>字符串</td>
<td><a href="http://127.0.0.1:8080/auth/v1.0" target="_blank" rel="noopener external nofollow noreferrer">http://127.0.0.1:8080/auth/v1.0</a></td>
<td>存储URL，只有在用户希望绕过认证时才需要此参数。</td>
</tr>
<tr>
<td>policy</td>
<td>字符串</td>
<td></td>
<td>存储策略是Swift 2.0中引入的一项功能，允许应用程序在每个容器的基础上为其存储选择一组不同的特征。 有关完整信息，请参阅最新的Swift文档：http：<a href="http://docs.openstack.org/developer/swift/overview_architecture.html" target="_blank" rel="noopener external nofollow noreferrer">http://docs.openstack.org/developer/swift/overview_architecture.html</a>. 只有当用户希望利用不同的存储策略而不是默认存储策略时，才需要它。</td>
</tr>
</tbody></table>
<h4 id="Ampli-Amplidata"><a href="#Ampli-Amplidata" class="headerlink" title="Ampli (Amplidata)"></a>Ampli (Amplidata)</h4><blockquote>
<p>&lt;storage<br>type=”ampli”config=“host=192.168.10.1;port=8080;nsroot=/namespace;policy=14195ca863764fd48c281cb95c9bd555”<br>/&gt;</p>
</blockquote>
<blockquote>
<p><strong>参数列表:</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>默认值</th>
<th>注释</th>
</tr>
</thead>
<tbody><tr>
<td>timeout</td>
<td>整型</td>
<td>30,000</td>
<td>连接超时值(毫秒)</td>
</tr>
<tr>
<td>host</td>
<td>字符串</td>
<td></td>
<td>要连接的controller节点IP</td>
</tr>
<tr>
<td>port</td>
<td>整型</td>
<td></td>
<td>端口</td>
</tr>
<tr>
<td>nsroot</td>
<td>字符串</td>
<td>“/namespace”</td>
<td>命名空间root</td>
</tr>
<tr>
<td>policy</td>
<td>字符串</td>
<td></td>
<td>命名空间将访问的策略ID</td>
</tr>
</tbody></table>
<h4 id="S3-Amazon-S3"><a href="#S3-Amazon-S3" class="headerlink" title="S3 (Amazon S3)"></a>S3 (Amazon S3)</h4><blockquote>
<p>&lt;storage type=“s3” config=“accesskey=<accesskey>;secretkey=<scretkey>;<br>endpoint=<endpoint>; proxyhost=<proxyhost>;proxyport=<proxyport>” /&gt;</proxyport></proxyhost></endpoint></scretkey></accesskey></p>
</blockquote>
<blockquote>
<p><strong>参数列表:</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>默认值</th>
<th>注释</th>
</tr>
</thead>
<tbody><tr>
<td>timeout</td>
<td>整型</td>
<td>30,000</td>
<td>连接超时值(毫秒)</td>
</tr>
<tr>
<td>accesskey</td>
<td>字符串</td>
<td></td>
<td>base64编码的用户名</td>
</tr>
<tr>
<td>secretkey</td>
<td>字符串</td>
<td></td>
<td>base64编码的密码</td>
</tr>
<tr>
<td>endpoint</td>
<td>字符串</td>
<td><a href="http://s3.amazonaws.com" target="_blank" rel="noopener external nofollow noreferrer">http://s3.amazonaws.com</a></td>
<td>端点url(s3存储公开以供外部访问的url).</td>
</tr>
<tr>
<td>proxyhost</td>
<td>字符串</td>
<td></td>
<td>http代理主机名或IP地址(如果需要)。</td>
</tr>
<tr>
<td>proxyport</td>
<td>整型</td>
<td></td>
<td>http代理端口(如果需要)。</td>
</tr>
</tbody></table>
<h4 id="Sproxyd-Scality"><a href="#Sproxyd-Scality" class="headerlink" title="Sproxyd (Scality)"></a>Sproxyd (Scality)</h4><blockquote>
<p>&lt;storage type=“sproxyd” config=“hosts=&lt;host1,host2,…&gt;;port=<port>;<br>base_path=<path></path>;pool_size=&lt;maxTotal,maxPerRoute&gt;” /&gt;</port></p>
</blockquote>
<blockquote>
<p><strong>参数列表:</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>默认值</th>
<th>注释</th>
</tr>
</thead>
<tbody><tr>
<td>hosts</td>
<td>字符串</td>
<td>127.0.0.1</td>
<td>以逗号分隔的主机名/IP地址列表。 使用简单的循环算法在所有主机上实现请求的负载平衡</td>
</tr>
<tr>
<td>port</td>
<td>整型</td>
<td>81</td>
<td>connector使用的端口</td>
</tr>
<tr>
<td>base_path</td>
<td>字符串</td>
<td>/proxy/chord</td>
<td>sproxyd配置文件的路径(此配置文件必须具有by_path_enabled=1)</td>
</tr>
<tr>
<td>pool_size</td>
<td>整型或逗号分隔的整数对</td>
<td>60,10</td>
<td>第一个值是连接池的大小。 第二个值（如果提供）是给定HTTP路由的最大连接数。</td>
</tr>
</tbody></table>
<h4 id="Cdmi-SNIA-CDMI"><a href="#Cdmi-SNIA-CDMI" class="headerlink" title="Cdmi (SNIA CDMI)"></a>Cdmi (SNIA CDMI)</h4><blockquote>
<p>&lt;storage type=“cdmi” config=“type=&lt;cdmi|non-cdmi;<br>custom_headers=<a href="header:value_reference" rel="external nofollow noreferrer">header:value_reference</a>” /&gt;</p>
</blockquote>
<blockquote>
<p><strong>参数列表:</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>默认值</th>
<th>注释</th>
</tr>
</thead>
<tbody><tr>
<td>type</td>
<td>字符串</td>
<td>“cdmi”</td>
<td>选项：“cdmi”或“non-cdmi”，它表示要使用的内容类型，“cdmi”表示存储访问将遵循cdmi内容类型，“non-cdmi”表示存储访问将遵循非cdmi内容类型.</td>
</tr>
<tr>
<td>Customer_headers</td>
<td>字符串</td>
<td></td>
<td>这是一个实验参数，用于查看是否可能支持cdmi衍生物，这可能需要额外的标头。 可以在不通知的情况下移除该参数。</td>
</tr>
</tbody></table>
<h4 id="Cdmi-swift-SNIA-CDMI-for-swift"><a href="#Cdmi-swift-SNIA-CDMI-for-swift" class="headerlink" title="Cdmi_swift (SNIA CDMI for swift)"></a>Cdmi_swift (SNIA CDMI for swift)</h4><blockquote>
<storage type="“cdmi_swift”" config>
</storage></blockquote>
<p><strong>参数列表:</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>默认值</th>
<th>注释</th>
</tr>
</thead>
<tbody><tr>
<td>timeout</td>
<td>整型</td>
<td>30,000</td>
<td>连接超时值(毫秒)</td>
</tr>
</tbody></table>
<h4 id="librados-用于Ceph"><a href="#librados-用于Ceph" class="headerlink" title="librados (用于Ceph)"></a>librados (用于Ceph)</h4><blockquote>
<p>&lt;storage type=“librados”<br>config=“endpoint=<endpoint>;accesskey=<accesskey>;secretkey=<secretkey>”<br>/&gt;</secretkey></accesskey></endpoint></p>
</blockquote>
<blockquote>
<p><strong>参数列表:</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>默认值</th>
<th>注释</th>
</tr>
</thead>
<tbody><tr>
<td>endpoint</td>
<td>字符串</td>
<td>127.0.0.1</td>
<td>端点可以是例如监视器节点。</td>
</tr>
<tr>
<td>accesskey</td>
<td>字符串</td>
<td></td>
<td>用户名如“admin”。</td>
</tr>
<tr>
<td>secretkey</td>
<td>字符串</td>
<td></td>
<td>secretkey是admin keyring的key。</td>
</tr>
</tbody></table>
<blockquote>
<p><strong>注意:</strong></p>
</blockquote>
<ul>
<li>不要使用librados来创建容器（池），它们默认只有64<br>pgs，这使得它们相当无用，请参阅<br><a href="http://ceph.com/docs/master/rados/operations/pools/" target="_blank" rel="noopener external nofollow noreferrer">http://ceph.com/docs/master/rados/operations/pools/</a></li>
</ul>
<h4 id="OSS-Aliyun-OSS"><a href="#OSS-Aliyun-OSS" class="headerlink" title="OSS (Aliyun OSS)"></a>OSS (Aliyun OSS)</h4><blockquote>
<p>&lt;storage type=”oss “ config=“accesskey=<Access key id>;secretkey=&lt;<br>Access Key Secret&gt;; endpoint=<endpoint>;<br>proxyhost=<proxyhost>;proxyport=<proxyport>” /&gt;</proxyport></proxyhost></endpoint></Access></p>
</blockquote>
<blockquote>
<p><strong>参数列表:</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>默认值</th>
<th>注释</th>
</tr>
</thead>
<tbody><tr>
<td>timeout</td>
<td>整型</td>
<td>50,000</td>
<td>连接超时值(毫秒)</td>
</tr>
<tr>
<td>accesskey</td>
<td>字符串</td>
<td></td>
<td>是使用Aliyun API的标识</td>
</tr>
<tr>
<td>secretkey</td>
<td>字符串</td>
<td></td>
<td>用于对访问参数进行签名，以防止篡改</td>
</tr>
<tr>
<td>endpoint</td>
<td>字符串</td>
<td>oss-cn-hangzhou.aliyuncs.com</td>
<td>端点url（oss存储公开以供外部访问的url ）。</td>
</tr>
<tr>
<td>proxyhost</td>
<td>字符串</td>
<td></td>
<td>http代理主机名或IP地址(如果需要)。</td>
</tr>
<tr>
<td>proxyport</td>
<td>整型</td>
<td></td>
<td>http代理端口(如果需要)。</td>
</tr>
</tbody></table>
<h2 id="Work-Stage"><a href="#Work-Stage" class="headerlink" title="Work Stage"></a>Work Stage</h2><h3 id="通用格式-3"><a href="#通用格式-3" class="headerlink" title="通用格式"></a>通用格式</h3><workstage name="<name>">

</workstage>

<h3 id="属性-3"><a href="#属性-3" class="headerlink" title="属性"></a>属性</h3><table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>默认值</th>
<th>注释</th>
</tr>
</thead>
<tbody><tr>
<td>name</td>
<td>字符串</td>
<td></td>
<td>阶段的一个名字</td>
</tr>
</tbody></table>
<h2 id="Work"><a href="#Work" class="headerlink" title="Work"></a>Work</h2><h3 id="通用格式-4"><a href="#通用格式-4" class="headerlink" title="通用格式"></a>通用格式</h3><p><work name="“main”" type="“normal”" workers="“128”" interval="“5”" division="“none”" runtime="“60”" rampup="“0”" rampdown="“0”" totalops="“0”" totalbytes="“0”" afr="”200000”" config> . . . </work></p>
<blockquote>
<p>有一种普通work和四种特殊类型的work((init, prepare,<br>cleanup和dispose)。第4.7节侧重于正常work，而第4.8节涵盖了特殊类型的work。上面给出的表格是一套完整的表格-不同的work类型将有不同的有效表格。一般规则如下：</p>
</blockquote>
<ul>
<li><em>workers</em> 是一个关键属性，通常用于控制负载。</li>
<li><em>runtime*<em>(</em>包括 ==*rampup</em>==和 <em>rampdown</em>), <em>totalOps</em> 和 <em>totalBytes</em><br>是控制如何结束工作的属性，称为结束选项。 一个work中只能设置一个。</li>
</ul>
<h3 id="属性-4"><a href="#属性-4" class="headerlink" title="属性"></a>属性</h3><table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>默认值</th>
<th>注释</th>
</tr>
</thead>
<tbody><tr>
<td>name</td>
<td>字符串</td>
<td></td>
<td>work的一个名称</td>
</tr>
<tr>
<td>type</td>
<td>字符串</td>
<td>“normal”</td>
<td>work的类型</td>
</tr>
<tr>
<td>workers</td>
<td>整型</td>
<td></td>
<td>并行进行work的workers数量</td>
</tr>
<tr>
<td>interval</td>
<td>整型</td>
<td>5</td>
<td>性能快照之间的间隔</td>
</tr>
<tr>
<td>division</td>
<td>字符串</td>
<td>“none”</td>
<td>[“none”| “container”| “object”], 控制workers之间的work分配方式</td>
</tr>
<tr>
<td>runtime</td>
<td>整型</td>
<td>0</td>
<td>work将执行多少秒</td>
</tr>
<tr>
<td>rampup</td>
<td>整型</td>
<td>0</td>
<td>加速工作负载的秒数；此时间不包括在runtime中</td>
</tr>
<tr>
<td>rampdown</td>
<td>整型</td>
<td>0</td>
<td>减速工作负载的秒数；此时间不包括在runtime中</td>
</tr>
<tr>
<td>totalOps</td>
<td>整型</td>
<td>0</td>
<td>将执行多少个操作；应该是workers的倍数</td>
</tr>
<tr>
<td>totalBytes</td>
<td>整型</td>
<td>0</td>
<td>要传输多少字节，应该是workers和size的乘积的倍数。</td>
</tr>
<tr>
<td>driver</td>
<td>字符串</td>
<td></td>
<td>将执行此work的driver，默认情况下，所有driver都将参与执行。</td>
</tr>
<tr>
<td>afr</td>
<td>整型</td>
<td>200000 – normal 0 – special work</td>
<td>可接受的失败率，是百万分之一。</td>
</tr>
</tbody></table>
<h2 id="特殊-Work"><a href="#特殊-Work" class="headerlink" title="特殊 Work"></a>特殊 Work</h2><h3 id="通用格式-5"><a href="#通用格式-5" class="headerlink" title="通用格式"></a>通用格式</h3><p><work type="“init|prepare|cleanup|dispose|delay”" workers="<number>" config="<key>=<value>;<key>=<value>"></work></p>
<p>特殊work与普通work的不同之处在于:</p>
<ul>
<li>它内部采用并计算“totalOps”，因此配置中==<em>不需要</em>==显式<em>包含结束选项</em>。</li>
<li>它具有隐式定义的操作，因此<em>不需要任何operation</em>。</li>
<li>“delay”与其他不同，这会导致work只休眠指定的秒数。</li>
</ul>
<h3 id="支持的特殊Work"><a href="#支持的特殊Work" class="headerlink" title="支持的特殊Work"></a>支持的特殊Work</h3><h4 id="init-批量创建特定-containers"><a href="#init-批量创建特定-containers" class="headerlink" title="init (批量创建特定==containers== )"></a>init (批量创建特定==<em>containers</em>== )</h4><blockquote>
<p>&lt;work type=“init” workers=“4” config=“containers=r(1,100)” /&gt;</p>
</blockquote>
<blockquote>
<p><strong>参数列表:</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>默认值</th>
<th>注释</th>
</tr>
</thead>
<tbody><tr>
<td>containers</td>
<td>字符串</td>
<td></td>
<td>容器选择表达式；例如： c(1), r(1,100)</td>
</tr>
<tr>
<td>cprefix</td>
<td>字符串</td>
<td>mycontainers_</td>
<td>容器前缀</td>
</tr>
<tr>
<td>csuffix</td>
<td>字符串</td>
<td><null></null></td>
<td>容器后缀</td>
</tr>
</tbody></table>
<h4 id="prepare-批量插入指定-objects"><a href="#prepare-批量插入指定-objects" class="headerlink" title="prepare (批量插入指定==objects== )"></a>prepare (批量插入指定==<em>objects</em>== )</h4><blockquote>
<p>&lt;work type=“prepare” workers=“4”<br>config=“containers=r(1,10);objects=r(1,100);sizes=c(64)KB” /&gt;</p>
</blockquote>
<blockquote>
<p><strong>参数列表:</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>默认值</th>
<th>注释</th>
</tr>
</thead>
<tbody><tr>
<td>containers</td>
<td>字符串</td>
<td></td>
<td>容器选择表达式；例如： c(1), u(1,100)</td>
</tr>
<tr>
<td>cprefix</td>
<td>字符串</td>
<td>mycontainers_</td>
<td>容器前缀</td>
</tr>
<tr>
<td>csuffix</td>
<td>字符串</td>
<td><null></null></td>
<td>容器后缀</td>
</tr>
<tr>
<td>objects</td>
<td>字符串</td>
<td></td>
<td>对象选择表达式；例如 c(1), u(1,100)</td>
</tr>
<tr>
<td>oprefix</td>
<td>字符串</td>
<td>myobjects_</td>
<td>对象前缀</td>
</tr>
<tr>
<td>osuffix</td>
<td>字符串</td>
<td><null></null></td>
<td>对象后缀</td>
</tr>
<tr>
<td>sizes</td>
<td>字符串</td>
<td></td>
<td>带单位(B/KB/MB/GB)的大小选择表达式；例如: c(128)KB, u(2,10)MB</td>
</tr>
<tr>
<td>chunked</td>
<td>布尔型</td>
<td>False</td>
<td>是否以chunked模式上传数据</td>
</tr>
<tr>
<td>content</td>
<td>字符串</td>
<td>“random”(default) ”zero”</td>
<td>使用随机数据或全零填充对象内容</td>
</tr>
<tr>
<td>createContainer</td>
<td>布尔型</td>
<td>False</td>
<td>创建相关容器(如果不存在)</td>
</tr>
<tr>
<td>hashCheck</td>
<td>布尔型</td>
<td>False</td>
<td>做与对象完整性检查相关的工作</td>
</tr>
</tbody></table>
<h4 id="cleanup-批量删除指定-objects"><a href="#cleanup-批量删除指定-objects" class="headerlink" title="cleanup (批量删除指定==objects==)"></a>cleanup (批量删除指定==<em>objects</em>==)</h4><blockquote>
<p>&lt;work type=“cleanup” workers=“4”<br>config=“containers=r(1,10);objects=r(1,100)” /&gt;</p>
</blockquote>
<blockquote>
<p><strong>参数列表:</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>默认值</th>
<th>注释</th>
</tr>
</thead>
<tbody><tr>
<td>containers</td>
<td>字符串</td>
<td></td>
<td>容器选择表达式；例如 c(1), u(1,100)</td>
</tr>
<tr>
<td>cprefix</td>
<td>字符串</td>
<td>mycontainers_</td>
<td>容器前缀</td>
</tr>
<tr>
<td>csuffix</td>
<td>字符串</td>
<td><null></null></td>
<td>容器后缀</td>
</tr>
<tr>
<td>objects</td>
<td>字符串</td>
<td></td>
<td>对象选择表达式；例如 c(1), u(1,100)</td>
</tr>
<tr>
<td>oprefix</td>
<td>字符串</td>
<td>myobjects_</td>
<td>对象前缀</td>
</tr>
<tr>
<td>osuffix</td>
<td>字符串</td>
<td><null></null></td>
<td>对象后缀</td>
</tr>
<tr>
<td>deleteContainer</td>
<td>布尔型</td>
<td>False</td>
<td>删除相关容器(如果存在)</td>
</tr>
</tbody></table>
<h4 id="dispose-批量删除指定-containers"><a href="#dispose-批量删除指定-containers" class="headerlink" title="dispose (批量删除指定==containers==)"></a>dispose (批量删除指定==<em>containers</em>==)</h4><blockquote>
<p>&lt;work type=“dispose” workers=“4” config=“containers=r(1,100)” /&gt;</p>
</blockquote>
<blockquote>
<p><strong>参数列表:</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>默认值</th>
<th>注释</th>
</tr>
</thead>
<tbody><tr>
<td>containers</td>
<td>字符串</td>
<td></td>
<td>容器选择表达式；例如 c(1), u(1,100)</td>
</tr>
<tr>
<td>cprefix</td>
<td>字符串</td>
<td>mycontainers_</td>
<td>容器前缀</td>
</tr>
<tr>
<td>csuffix</td>
<td>字符串</td>
<td><null></null></td>
<td>容器后缀</td>
</tr>
</tbody></table>
<h4 id="delay-插入几秒的延迟"><a href="#delay-插入几秒的延迟" class="headerlink" title="delay (插入几秒的延迟)"></a>delay (插入几秒的延迟)</h4><blockquote>
<workstage name="”delay”" closuredelay="”60”">
</workstage></blockquote>
<blockquote>
<work type="“delay”" workers="“1”">
</work></blockquote>
<blockquote>

</blockquote>
<blockquote>
<p><strong>参数列表:</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>默认值</th>
<th>注释</th>
</tr>
</thead>
<tbody><tr>
<td>closuredelay</td>
<td>整型</td>
<td></td>
<td>延迟时间（以秒为单位）。</td>
</tr>
</tbody></table>
<h2 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h2><h3 id="通用格式-6"><a href="#通用格式-6" class="headerlink" title="通用格式"></a>通用格式</h3><blockquote>
<p><operation type="“read|write|delete”" ratio="<1-100>" config="<key>=<value>;<key>=<value>"></operation></p>
</blockquote>
<h3 id="属性-5"><a href="#属性-5" class="headerlink" title="属性"></a>属性</h3><table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>默认值</th>
<th>注释</th>
</tr>
</thead>
<tbody><tr>
<td>type</td>
<td>字符串</td>
<td></td>
<td>操作类型</td>
</tr>
<tr>
<td>ratio</td>
<td>整型</td>
<td></td>
<td></td>
</tr>
<tr>
<td>division</td>
<td>整型</td>
<td></td>
<td>该操作的分割策略</td>
</tr>
<tr>
<td>config</td>
<td>字符串</td>
<td></td>
<td>参数列表</td>
</tr>
</tbody></table>
<h3 id="支持的操作"><a href="#支持的操作" class="headerlink" title="支持的操作"></a>支持的操作</h3><h4 id="容器-对象命名约定"><a href="#容器-对象命名约定" class="headerlink" title="容器/对象命名约定:"></a>容器/对象命名约定:</h4><ul>
<li>默认情况下，使用“<strong>mycontainers</strong>_<br><n>”格式命名容器，并使用“<strong>myobjects</strong>_<br><n>”格式命名对象，其中<n>是由参数列表中的一个选择表达式定义的数字。</n></n></n></li>
<li>可以通过cprefix/csuffix或oprefix /osuffix修改容器/对象命名。</li>
</ul>
<h4 id="read"><a href="#read" class="headerlink" title="read"></a>read</h4><blockquote>
<p>&lt;operation type=“read” ratio=“70” config=“containers=c(1);objects=u(1,100)”<br>/&gt;</p>
</blockquote>
<blockquote>
<p><strong>参数列表:</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>默认值</th>
<th>注释</th>
</tr>
</thead>
<tbody><tr>
<td>containers</td>
<td>字符串</td>
<td></td>
<td>容器选择表达式；例如 c(1), u(1,100)</td>
</tr>
<tr>
<td>cprefix</td>
<td>字符串</td>
<td>mycontainers_</td>
<td>容器前缀</td>
</tr>
<tr>
<td>csuffix</td>
<td>字符串</td>
<td><null></null></td>
<td>容器后缀</td>
</tr>
<tr>
<td>objects</td>
<td>字符串</td>
<td></td>
<td>对象选择表达式；例如 c(1), u(1,100)</td>
</tr>
<tr>
<td>oprefix</td>
<td>字符串</td>
<td>myobjects_</td>
<td>对象前缀</td>
</tr>
<tr>
<td>osuffix</td>
<td>字符串</td>
<td><null></null></td>
<td>对象后缀</td>
</tr>
<tr>
<td>hashCheck</td>
<td>布尔型</td>
<td>False</td>
<td>做与对象完整性检查相关的工作</td>
</tr>
</tbody></table>
<h4 id="write"><a href="#write" class="headerlink" title="write"></a>write</h4><blockquote>
<p>&lt;operation type=“write” ratio=“20”<br>config=“containers=c(2);objects=u(1,1000);sizes=c(2)MB” /&gt;</p>
</blockquote>
<blockquote>
<p><strong>参数列表:</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>默认值</th>
<th>注释</th>
</tr>
</thead>
<tbody><tr>
<td>containers</td>
<td>字符串</td>
<td></td>
<td>容器选择表达式；例如 c(1), u(1,100)</td>
</tr>
<tr>
<td>cprefix</td>
<td>字符串</td>
<td>mycontainers_</td>
<td>容器前缀</td>
</tr>
<tr>
<td>csuffix</td>
<td>字符串</td>
<td><null></null></td>
<td>容器后缀</td>
</tr>
<tr>
<td>objects</td>
<td>字符串</td>
<td></td>
<td>对象选择表达式；例如 c(1), u(1,100)</td>
</tr>
<tr>
<td>oprefix</td>
<td>字符串</td>
<td>myobjects_</td>
<td>对象前缀</td>
</tr>
<tr>
<td>osuffix</td>
<td>字符串</td>
<td><null></null></td>
<td>对象后缀</td>
</tr>
<tr>
<td>sizes</td>
<td>字符串</td>
<td></td>
<td>带单位(B/KB/MB/GB)的大小选择表达式；例如: c(128)KB, u(2,10)MB</td>
</tr>
<tr>
<td>chunked</td>
<td>布尔型</td>
<td>False</td>
<td>是否以chunked模式上传数据</td>
</tr>
<tr>
<td>content</td>
<td>字符串</td>
<td>“random”(default) “zero”</td>
<td>使用随机数据或全零填充对象内容</td>
</tr>
<tr>
<td>hashCheck</td>
<td>Boolean</td>
<td>False</td>
<td>做与对象完整性检查相关的工作</td>
</tr>
</tbody></table>
<h4 id="filewrite"><a href="#filewrite" class="headerlink" title="filewrite"></a>filewrite</h4><blockquote>
<p>&lt;operation type=“filewrite” ratio=“20”<br>config=“containers=c(2);fileselection=s;files=/tmp/testfiles” /&gt;</p>
</blockquote>
<blockquote>
<p><strong>参数列表:</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>默认值</th>
<th>注释</th>
</tr>
</thead>
<tbody><tr>
<td>containers</td>
<td>字符串</td>
<td></td>
<td>容器选择表达式；例如 c(1), u(1,100)</td>
</tr>
<tr>
<td>cprefix</td>
<td>字符串</td>
<td>mycontainers_</td>
<td>容器前缀</td>
</tr>
<tr>
<td>csuffix</td>
<td>字符串</td>
<td><null></null></td>
<td>容器后缀</td>
</tr>
<tr>
<td>fileselection</td>
<td>字符串</td>
<td></td>
<td>哪种选择器应该只使用put选择器标识符(例如，s代表顺序)。*</td>
</tr>
<tr>
<td>files</td>
<td>字符串</td>
<td></td>
<td>包含要上载的文件的文件夹的路径。 路径必须存在</td>
</tr>
<tr>
<td>chunked</td>
<td>布尔型</td>
<td>False</td>
<td>是否以chunked模式上传数据</td>
</tr>
<tr>
<td>hashCheck</td>
<td>布尔型</td>
<td>False</td>
<td>做与对象完整性检查相关的工作</td>
</tr>
</tbody></table>
<p>*)<br>对象不按文件名读取。Java以随机方式读取文件夹中的文件。在第一个对象第二次被选中之前，使用“Sequential选择”确保每个对象将被选中一次。在工作定义中使用totalOps或runtime限制对象的数量。</p>
<h4 id="delete"><a href="#delete" class="headerlink" title="delete"></a>delete</h4><blockquote>
<p>&lt;operation type=“delete” ratio=“10”<br>config=“containers=c(2);objects=u(1,1000)” /&gt;</p>
</blockquote>
<blockquote>
<p><strong>参数列表:</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>默认值</th>
<th>注释</th>
</tr>
</thead>
<tbody><tr>
<td>containers</td>
<td>字符串</td>
<td></td>
<td>容器选择表达式；例如 c(1), u(1,100)</td>
</tr>
<tr>
<td>cprefix</td>
<td>字符串</td>
<td>mycontainers_</td>
<td>容器前缀</td>
</tr>
<tr>
<td>csuffix</td>
<td>字符串</td>
<td><null></null></td>
<td>容器后缀</td>
</tr>
<tr>
<td>objects</td>
<td>字符串</td>
<td></td>
<td>对象选择表达式；例如 c(1), u(1,100)</td>
</tr>
<tr>
<td>oprefix</td>
<td>字符串</td>
<td>myobjects_</td>
<td>对象前缀</td>
</tr>
<tr>
<td>osuffix</td>
<td>字符串</td>
<td><null></null></td>
<td>对象后缀</td>
</tr>
</tbody></table>
<h4 id="list"><a href="#list" class="headerlink" title="list"></a>list</h4><blockquote>
<p>&lt;operation type=“list” ratio=“10”<br>config=“containers=c(2);objects=u(1,1000)” /&gt;</p>
</blockquote>
<blockquote>
<p><strong>参数列表:</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>默认值</th>
<th>注释</th>
</tr>
</thead>
<tbody><tr>
<td>containers</td>
<td>字符串</td>
<td></td>
<td>容器选择表达式；例如 c(1), u(1,100)</td>
</tr>
<tr>
<td>cprefix</td>
<td>字符串</td>
<td>mycontainers_</td>
<td>容器前缀</td>
</tr>
<tr>
<td>csuffix</td>
<td>字符串</td>
<td><null></null></td>
<td>容器后缀</td>
</tr>
<tr>
<td>objects</td>
<td>字符串</td>
<td></td>
<td>对象选择表达式；例如 c(1), u(1,100)</td>
</tr>
<tr>
<td>oprefix</td>
<td>字符串</td>
<td>myobjects_</td>
<td>对象前缀</td>
</tr>
<tr>
<td>osuffix</td>
<td>字符串</td>
<td><null></null></td>
<td>对象后缀</td>
</tr>
</tbody></table>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><h4 id="pure-read"><a href="#pure-read" class="headerlink" title="pure read"></a>pure read</h4><blockquote>
<p>e.g: 100% read, 16 users, 300 seconds</p>
</blockquote>
<blockquote>
<work name="“100r16c300s”" workers="“16”" runtime="“300”">
</work></blockquote>
<blockquote>
<operation type="“read”" ratio="“100”" config="…">
</operation></blockquote>
<blockquote>

</blockquote>
<h4 id="pure-write"><a href="#pure-write" class="headerlink" title="pure write"></a>pure write</h4><blockquote>
<p>e.g.: 100% write, 8 clients, 600 seconds</p>
</blockquote>
<blockquote>
<work name="“100w8c600s”" workers="“8”" runtime="“600”">
</work></blockquote>
<blockquote>
<operation type="“write”" ratio="“100”" config="…">
</operation></blockquote>
<blockquote>

</blockquote>
<h4 id="mixed-operations"><a href="#mixed-operations" class="headerlink" title="mixed operations"></a>mixed operations</h4><blockquote>
<p>e.g.: 80% read, 20% write, 32 clients, 300 seconds</p>
</blockquote>
<blockquote>
<work name="“80r20w32c300s”" workers="“32”" runtime="“300”">
</work></blockquote>
<blockquote>
<operation type="“read”" ratio="“80”" config="…">
</operation></blockquote>
<blockquote>
<operation type="“write”" ratio="“20”" config="…">
</operation></blockquote>
<blockquote>

</blockquote>
<h2 id="附件注释"><a href="#附件注释" class="headerlink" title="附件注释"></a>附件注释</h2><h3 id="概要"><a href="#概要" class="headerlink" title="概要"></a>概要</h3><blockquote>
<p>一些参数需要额外强调才能让用户定义准确的工作负载，本节将介绍它们。</p>
</blockquote>
<h3 id="划分策略"><a href="#划分策略" class="headerlink" title="划分策略"></a>划分策略</h3><blockquote>
<p>划分策略用于将一个work划分为多个不重叠的分区，这些分区具有较小的容器或对象范围，支持的策略有:<br><strong>container</strong> (based), <strong>object</strong> (based), 或 <strong>none</strong>。</p>
</blockquote>
<blockquote>
<p>不同的stage类型有不同的默认划分策略，对于init/dispose，默认为“container”，对于prepare<br>/cleanup，默认为“object”，对于normal，默认为“none”。</p>
</blockquote>
<blockquote>
<p>我们将用一个示例来说明不同的划分策略之间的差异，下面是一个work：:</p>
</blockquote>
<blockquote>
<work name="“main”" workers="“4”" runtime="“300”" division="”?”">
</work></blockquote>
<blockquote>
<p>&lt;operation type=“read” ratio=“100”<br>config=“containers=u(1,8);objects=u(1,1000)” /&gt;</p>
</blockquote>
<blockquote>

</blockquote>
<blockquote>
<p>如果“division = container”，则表示数据范围将按容器分区，访问模式如下所示：</p>
</blockquote>
<table>
<thead>
<tr>
<th>Worker</th>
<th>Container Range</th>
<th>Object Range</th>
</tr>
</thead>
<tbody><tr>
<td>#1</td>
<td>1-2</td>
<td>1-1000</td>
</tr>
<tr>
<td>#2</td>
<td>3-4</td>
<td>1-1000</td>
</tr>
<tr>
<td>#3</td>
<td>5-6</td>
<td>1-1000</td>
</tr>
<tr>
<td>#4</td>
<td>7-8</td>
<td>1-1000</td>
</tr>
</tbody></table>
<blockquote>
<p>(注意：如果workers的数量大于containers的数量，则不支持。)</p>
</blockquote>
<blockquote>
<p>如果“division = object”，则表示数据范围将按对象分区，访问模式如下所示：</p>
</blockquote>
<table>
<thead>
<tr>
<th>Worker</th>
<th>Container Range</th>
<th>Object Range</th>
</tr>
</thead>
<tbody><tr>
<td>#1</td>
<td>1-8</td>
<td>1-250</td>
</tr>
<tr>
<td>#2</td>
<td>1-8</td>
<td>251-500</td>
</tr>
<tr>
<td>#3</td>
<td>1-8</td>
<td>501-750</td>
</tr>
<tr>
<td>#4</td>
<td>1-8</td>
<td>751-1000</td>
</tr>
</tbody></table>
<blockquote>
<p>(注意：如果workers的数量大于objects的数量，则不支持。)</p>
</blockquote>
<p>如果“division = none”，它用于关闭划分，以便每个worker完全按照work指定的那样 -<br>没有work的分区，因此每个worker可以触摸所有容器或对象。</p>
<h1 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h1><p>所有结果都存储在“archive”目录中。</p>
<p><img src="/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825204905240-164794962533932.png" alt></p>
<h2 id="结构"><a href="#结构" class="headerlink" title="结构"></a>结构</h2><ul>
<li>.meta<ul>
<li>起始运行ID</li>
</ul>
</li>
<li>run-history.csv<ul>
<li>记录所有历史工作负载运行，包括时间和主要阶段</li>
</ul>
</li>
<li>workload.csv<ul>
<li>记录所有历史工作负载运行的总体性能数据</li>
</ul>
</li>
<li>子目录<ul>
<li>以“w <runid> - ”为前缀，为每个工作负载运行存储数据</runid></li>
</ul>
</li>
</ul>
<h2 id="每个运行数据"><a href="#每个运行数据" class="headerlink" title="每个运行数据"></a>每个运行数据</h2><p>以下是每个运行数据列表的示例：</p>
<p><img src="/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825204952433.png" alt></p>
<h3 id="整体性能数据-即w1-demo-csv"><a href="#整体性能数据-即w1-demo-csv" class="headerlink" title="整体性能数据 (即w1-demo.csv)"></a>整体性能数据 (即w1-demo.csv)</h3><p>每个阶段一行:</p>
<p><img src="/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825205044428.png" alt></p>
<h3 id="时间线数据-即s3-main-csv"><a href="#时间线数据-即s3-main-csv" class="headerlink" title="时间线数据 (即s3-main.csv)"></a>时间线数据 (即s3-main.csv)</h3><p>每个阶段一个文件; 可以导入电子表格程序以绘制时间线图表，或使用csvtool处理:</p>
<p><img src="/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825205127829.png" alt></p>
<h3 id="响应时间直方图数据-即w1-demo-rt-histogram-csv"><a href="#响应时间直方图数据-即w1-demo-rt-histogram-csv" class="headerlink" title="响应时间直方图数据(即w1-demo-rt-histogram.csv)"></a>响应时间直方图数据(即w1-demo-rt-histogram.csv)</h3><p>响应时间的分配是了解服务质量的重要指标; 为此目的生成直方图数据。<br>数据分组从0到500,000 ms，步进10 ms。</p>
<p>在直方图中，条形表示每个分组中的样本数。<br>曲线是累积分布函数（CDF），它可以揭示有关主题的见解，例如第90百分位的响应时间。.</p>
<p><img src="/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825205209328.png" alt></p>
<h3 id="响应时间分解-即s3-main-csv"><a href="#响应时间分解-即s3-main-csv" class="headerlink" title="响应时间分解 (即s3-main.csv)"></a>响应时间分解 (即s3-main.csv)</h3><p>除了平均响应时间，平均处理时间也将在数据文件中报告，它将有助于通过时间分解来理解性能瓶颈。</p>
<p><img src="/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/2019082520525519.png" alt></p>
<h3 id="Workload-config-xml"><a href="#Workload-config-xml" class="headerlink" title="Workload-config.xml"></a>Workload-config.xml</h3><ul>
<li>此次运行中使用的工作负载配置文件</li>
</ul>
<h3 id="Workload-log"><a href="#Workload-log" class="headerlink" title="Workload.log"></a>Workload.log</h3><ul>
<li>运行时间日志，这有助于进行故障排除</li>
</ul>
<h2 id="指标"><a href="#指标" class="headerlink" title="指标"></a>指标</h2><h3 id="吞吐量-Operations-s-or-Op-s"><a href="#吞吐量-Operations-s-or-Op-s" class="headerlink" title="吞吐量 (Operations/s or Op/s)"></a>吞吐量 (Operations/s or Op/s)</h3><ul>
<li>在一秒钟内完成的操作</li>
<li>报告的吞吐量是通过将总成功请求除以总运行时间来计算的</li>
</ul>
<h3 id="响应时间-ms"><a href="#响应时间-ms" class="headerlink" title="响应时间 (ms)"></a>响应时间 (ms)</h3><ul>
<li>操作开始到完成之间的持续时间</li>
<li>报告的响应时间是每个成功请求的平均响应时间</li>
<li>已经报告了一个额外的处理时间，以帮助分解响应时间。</li>
</ul>
<h3 id="带宽-MB-s"><a href="#带宽-MB-s" class="headerlink" title="带宽 (MB/s)"></a>带宽 (MB/s)</h3><ul>
<li>每秒传输的总数据(以MB为单位)</li>
<li>报告的带宽是通过将传输的总字节除以总运行时间来计算的</li>
<li>1 MB = 1000*1000 bytes</li>
</ul>
<h3 id="成功率"><a href="#成功率" class="headerlink" title="成功率 (%)"></a>成功率 (%)</h3><ul>
<li>成功操作的比率</li>
<li>报告的成功率是通过将成功请求的数量除以请求的总数来计算的</li>
</ul>
<h3 id="其它指标"><a href="#其它指标" class="headerlink" title="其它指标"></a>其它指标</h3><ul>
<li>Op-count: 操作的总数</li>
<li>Byte-count: 传输的总数据</li>
</ul>
<h1 id="常见问题解答"><a href="#常见问题解答" class="headerlink" title="常见问题解答"></a>常见问题解答</h1><h2 id="常规"><a href="#常规" class="headerlink" title="常规"></a>常规</h2><ol>
<li><strong>监听端口19088/18088是否可配置，如果可以，如何配置?</strong></li>
</ol>
<p>可以配置; conf /<br>controller-tomcat-server.xml指定用于controller的端口，driver-tomcat-server.xml指定用于driver的端口。</p>
<ol>
<li><strong>“cancelled”和“terminated”的区别是什么?</strong></li>
</ol>
<p>“Cancelled”表示用户在运行时取消工作负载，而“terminated”表示运行时期间出现错误，这通常需要用户采取措施进行解决。</p>
<ol>
<li><strong>可以提交多个工作负载以便按顺序运行吗?</strong></li>
</ol>
<p>可以; COSBench可以同时接受多个工作负载并逐个运行。</p>
<ol>
<li><strong>是否可以取消排队的工作负载?</strong></li>
</ol>
<p>不可以;取消只针对正在运行的工作负载。</p>
<ol>
<li><strong>COSBench可以安装在其他Linux*发行版上吗，比如Red Hat Enterprise Linux?</strong></li>
</ol>
<p>可以,v2.1之前的版本默认支持Red Hat Enterprise Linux 6, v2.1之后的版本采用Ubuntu<br>12.04.1 LTS作为默认操作系统。</p>
<ol>
<li><strong>是否有可能在不删除或清理旧文件的情况下重用以前测试中的文件?</strong></li>
</ol>
<p>可以;<br>init，prepare，cleanup和dispose等特殊阶段都是可选的，即使在main阶段，用户也可以选择适合其测试要求的阶段序列。<br>要重用数据，用户需要在cleanup和dispose阶段之前填充所有数据并执行所有测试（例如，在序列init，prepare，test1，test2，…<br>cleanup，dispose中）。 相关的示例工作负载配置文件包含在conf / reusedata.xml中。</p>
<ol>
<li><strong>是否可以定义多个main阶段或其它阶段？</strong></li>
</ol>
<p>可以; 为避免名称混淆，应使用不同的标签命名。<br>例如，用户可以定义多个init阶段以创建不同的容器集，或定义多个main阶段以在一个工作负载中执行不同的测试。</p>
<ol>
<li><strong>如果运行的工作负载出现错误，用户可以在哪里查看更多详细信息?</strong></li>
</ol>
<p>该工作负载的相应文件夹下有一个workload.log（archive&lt;workload<br>id&gt;\workload.log）; 检查此文件有助于确定错误原因。</p>
<ol>
<li><strong>应该采取什么步骤来解决在init阶段卡住的测试?</strong></li>
</ol>
<p>使用Curl验证是否可通过HTTP连接访问所有COSBench计算机（“curl http：//<br><controller-host>：19088 / controller / index.html”或“curl http：//<br><driver-host>：18088 / driver/index.htm”明明）。<br>如果防火墙阻止了HTTP连接，则用户必须打开防火墙上的相应端口。<br>对于controller节点，端口是19088和19089; 对于driver节点，端口为18088和18089。</driver-host></controller-host></p>
<ol>
<li><strong>是否有工具将COSBench分发在多个节点上?</strong></li>
</ol>
<p>尽管COSBench本身不提供用于这种类型的包分发的工具，但有许多外部解决方案用于此目的，例如scp和共享文件夹(samba)。</p>
<ol>
<li><strong>为什么即使workload.log中报告了错误,COSBench仍将工作负载测试显示为“complete”?</strong></li>
</ol>
<p>尽管normal work的日志中记录了错误，只要特殊work成功完成,<br>测试可能反映为“complete”状态。</p>
<p>COSBench将“init”、“prepare”、“cleanup”和“dispose”操作视为必须无错误地完成才能引起“completed”状态的特殊work;特殊work中的错误将终止测试。</p>
<p>另一方面，与性能测量相关的normal work可以容忍故障，这些故障由“成功率”跟踪。</p>
<ol>
<li><strong>对于“init”、“prepare”、“cleanup”和“dispose”阶段中的workers数量有什么建议吗?</strong></li>
</ol>
<p>在“init”和“dispose”阶段执行的工作创建和删除容器。在我们使用Keystone plus<br>Swift进行的测试中，这些任务可以在大约三分钟内完成，建议每32个容器使用一个worker，每个容器中有100个对象，对象大小为64<br>KB。通常，容器的数量应该定义为workers数量的倍数。</p>
<p>在“prepare”和“cleanup”阶段执行的工作创建或删除对象，所需的时间取决于对象的数量。通常，对象的数量应该定义为workers数量的倍数。增加workers数量可以加快这一进程。</p>
<p>在“main”中执行的工作确定瓶颈，调优worker参数控制存储系统的负载。workers的数量应该逐渐增加，直到性能下降为止。</p>
<ol>
<li><strong>长时间运行COSBench后如何防止driver出现“OutOfMemory”错误?</strong></li>
</ol>
<p>可以在“cosbench-start.sh”脚本中指定Java进程的最大堆大小，以防止耗尽内存。<br>例如，参数“-Xmx2g”会将最大堆大小限制为2 GB。</p>
<ol>
<li><strong>如何将读写拆分到不同的容器中?</strong></li>
</ol>
<p>用户可以在操作级别分配要访问的容器，将读和写拆分到不同的容器;使用“config”中的“containers”参数可以设置不同的容器范围，如下所示:</p>
<blockquote>
<p>*&lt;operation type=”read” ratio=”80”<br>config=”containers=u(1,2);objects=u(1,50)” /&gt;*</p>
</blockquote>
<blockquote>
<p>*&lt;operation type=”write” ratio=”20”<br>config=”containers=u(3,4);objects=u(51,100);sizes=c(64)KB” /&gt;*</p>
</blockquote>
<p>conf/splitrw.xml中包含一个示例工作负载配置文件。</p>
<ol>
<li><strong>如何为不同的配置指定不同的容器，例如具有不同对象大小的容器?</strong></li>
</ol>
<p>用户可以使用“cprefix”参数为不同的配置分配不同的容器集。<br>例如，用户可以通过使用“cprefix”指定对象大小（例如“64K”）来区分具有不同大小的配置，以避免混淆和意外覆盖，如下所示:</p>
<blockquote>
<p>*&lt;operation type=”read” ratio=”80”<br>config=”cprefix=100M_;containers=u(1,32);objects=u(1,50)” /&gt;*</p>
</blockquote>
<p>在这种情况下，容器名称将在目标存储系统中以“100M_”为前缀。 用户可以通过浏览位置<br><em>http://<IP of amplistor controller node>:8080/namespace</IP></em><br>来充分利用此功能，如下所示:</p>
<p><img src="/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825205358420.png" alt></p>
<ol>
<li><strong>当工作负载终止时，用户可以从哪里获取日志文件以帮助解决问题?</strong></li>
</ol>
<p>日志文件位于两个不同的位置:</p>
<ul>
<li><strong>在COSBench安装文件夹中的“log”文件夹中。</strong>此位置的“system.log”文件记录了COSBench系统活动，包括检查工作负载配置文件。如果所需参数丢失或输入错误(例如，“prepare”阶段中的“sizes”)，则此文件将包含一个条目：<br>“driver report error: no such key defined: sizes” ，如下所示:</li>
</ul>
<p><img src="/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825205442241.png" alt></p>
<blockquote>
<p>26_appendix-2.png</p>
</blockquote>
<ul>
<li><strong>在COSBench安装文件夹中“archive”文件夹中的“workload”文件夹中。</strong><br>此位置中的“workload.log”文件记录了工作负载运行时活动。<br>如果在工作负载运行时发生失败操作，则会在此文件中记录错误（通常与HTTP相关）。</li>
</ul>
<ol>
<li><strong>可以在normal阶段使用range选择器吗，怎么做?</strong></li>
</ol>
<p>可以，range选择器可以在normal阶段使用，但它是不鼓励的，因为它将涉及一些微妙的约束。首先，当枚举所有元素时，range选择器通常需要结合“totalOps”来终止执行。其次，容器的计数应该是对象计数的相对素数，否则，实际访问范围只是两个计数中最大的命令除数之一。例如，对于下面的配置，期望创建1600个唯一对象，但实际上，它只创建800(=32*50/2)个唯一对象。</p>
<blockquote>
<p>&lt;work name=“main” workers=“8” <em>totalOps</em>=“1600”&gt;</p>
</blockquote>
<blockquote>
<p>&lt;operation type=“read” ratio=“100”<br>config=“containers=u(1,32);objects=u(51,100);sizes=c(64)KB” /&gt;</p>
</blockquote>
<blockquote>

</blockquote>
<ol>
<li><strong>可以在同一个节点上运行多个driver吗，怎么做?</strong></li>
</ol>
<figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">可以，COSBench没有限制在同一个节点上可以运行多少<span class="built_in">driver</span>，但是由于默认情况下<span class="built_in">driver</span>将监听端口<span class="number">18088</span>，为了避免端口冲突，用户需要将不同的<span class="built_in">driver</span>进程设置为不同的监听端口。</span><br><span class="line"></span><br><span class="line">要更改监听端口，用户需要编辑conf/<span class="built_in">driver</span>-tomcat-server.xml，并将下面的“port”值更改为不同<span class="built_in">driver</span>的可分辨编号</span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>

<blockquote>
<Connector port="“18088”" protocol="“HTTP/1.1”">
</Connector></blockquote>
<ol>
<li><strong>是否有任何方法从COSBench方面识别哪个对象被创建失败 ?</strong></li>
</ol>
<p>有，可以打印出对象名称，但需要更改COSBench<br>driver进程的日志记录级别。一般步骤如下:</p>
<ol>
<li>在每个driver节点上，在conf/文件夹中创建一个driver.conf文件，如果不存在，则使用以下行:</li>
</ol>
<blockquote>
<p>[driver]</p>
</blockquote>
<blockquote>
<p>Log_level = DEBUG</p>
</blockquote>
<ol>
<li>重启所有driver进程</li>
</ol>
<h2 id="Swift"><a href="#Swift" class="headerlink" title="Swift"></a>Swift</h2><ol>
<li><strong>如何避免与大对象大小（例如1 GB）相关的长准备时间?</strong></li>
</ol>
<p>大量大对象可能会使网络带宽饱和，从而导致性能降低。<br>如果网络带宽未饱和，则可以增加“workers”参数，以更好地利用带宽。</p>
<ol>
<li><strong>对于大对象大小（例如1 GB）进行操作是否有任何特殊更改?</strong></li>
</ol>
<p>有; 要使用大对象大小进行测试，请考虑以下事项:</p>
<ul>
<li>较长的加速时间（使用参数“rampup”指定）可以帮助提高性能，而较长的运行时间（使用参数“runtime”指定）可以帮助提高结果的一致性。<br>这些参数的最佳设置组合取决于个人使用情况。<br>要帮助确定适当的设置，请运行测试用例，将运行时间设置为长时间运行（例如30分钟），而不设置“rampup”参数。<br>查询生成的时间轴曲线，确定在这种情况下需要多少秒才能增加;<br>然后可以将“runtime”参数设置为“rampup”值的10倍。</li>
<li>随着每个操作完成的时间增加，更有可能发生超时错误;<br>可以使用“config”中的“timeout”参数来缓解此影响，该参数使用毫秒作为单位。<br>对于Swift，典型语法如下:</li>
</ul>
<blockquote>
<p>&lt;storage type=“swift” config=“timeout=100000” /&gt;</p>
</blockquote>
<ul>
<li>用户还应在COSBench本身范围之外验证被测系统的正确设置;<br>例如，由于后端存储设置不当，可能会出现错误或性能不足。</li>
</ul>
<ol>
<li><strong>当使用Keystone配置大量workers(例如1024)，为成功完成测试，如何克服认证阶段工作负载的终止?</strong></li>
</ol>
<p>为工作负载配置文件中的“auth”部分引入了新参数“retry”，以帮助克服认证阶段的故障。<br>以下是示例配置:</p>
<blockquote>
<p>&lt;auth type=“keystone”<br>config=“username=operator;password=intel2012;tenant_name=cosbench;auth_url=<a href="http://10.10.9.100:5000/v2.0;service=swift" target="_blank" rel="noopener external nofollow noreferrer">http://10.10.9.100:5000/v2.0;service=swift</a>; <strong>retry=10</strong>”/&gt;</p>
</blockquote>
<ol>
<li><p>如何用tempauth测试?</p>
<p>Tempauth实际上遵循与swauth相同的过程，因此只需对tempauth使用swauth认证机制。</p>
</li>
<li><p>是否支持存储策略，如何使其正常工作?</p>
<p>支持，从v0.4.0.0版本开始支持存储策略(<a href="http://docs.openstack.org/developer/swift/overview_architecture.html" target="_blank" rel="noopener external nofollow noreferrer">http://docs.openstack.org/developer/swift/overview_architecture.html</a>)<br>。</p>
<p>支持涉及一个新的“policy”参数，如下所示:</p>
</li>
</ol>
<blockquote>
<storage type="“swift”" config="policy=gold ">
</storage></blockquote>
<p>此处的“gold”可以替换为用户在“/etc/swift/swift.conf”中定义的任何策略名称，如：</p>
<blockquote>
<p>[storage-policy:0]</p>
</blockquote>
<blockquote>
<p>name = gold</p>
</blockquote>
<blockquote>
<p>default = yes</p>
</blockquote>
<blockquote>
<p>[storage-policy:1]</p>
</blockquote>
<blockquote>
<p>name = silver</p>
</blockquote>
<p>在本例中，策略名称可以是“gold”或“silver”，这将在COSBench工作负载配置文件中使用。</p>
<p>对于那些不关心存储策略的人，只需删除swift工作负载配置文件中的“policy”参数。</p>
<h2 id="AmpliStor"><a href="#AmpliStor" class="headerlink" title="AmpliStor"></a>AmpliStor</h2><ol>
<li>系统从哪里获得.xml文件中策略的字符串?</li>
</ol>
<p>用户可以访问Amplidata控制器节点并通过浏览位置<em>http://<IP of amplistor controller node>:8080/manage/policy</IP></em> 来管理可用策略，如下所示：</p>
<p><img src="/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/20190825205530801.png" alt></p>
<ol>
<li>对象范围如何影响性能?</li>
</ol>
<p>扩展对象范围可以通过减少写入冲突来提高写入性能。<br>例如，将“u（1,100）”更改为“u（1,10000）”会将对象范围从100个对象扩展到10,000个对象。</p>
<ol>
<li>如何简化策略UID设置?</li>
</ol>
<p>只有“init”阶段需要策略UID;<br>其他阶段（如prepare，main，cleanup和dispose）不需要设置策略UID。<br>如果工作负载中没有“init”阶段，则不需要策略UID。</p>
<ol>
<li>如何在不同阶段使用“nsroot”参数?</li>
</ol>
<p>引入“nsroot”参数是为了支持AmpliStor<br>v2.5和Plus，其中访问命名空间需要与对象分开的根路径。因此，只有涉及名称空间访问的工作(如init/dispose阶段)才需要此参数。对于prepare，main，cleanup等其它阶段，有两个选项，一个是只删除“nsroot”参数，另一个是将“nsroot”设置为“<strong>/namespace</strong>”<br>而不是 “<strong>/manage/namespace</strong>”。</p>
<p>如果在main阶段设置“nsroot=/manage/namespace”，通常会出现一些类似的异常，如下图所示:</p>
<blockquote>
<p>2013-11-20 10:45:33,764 [ERROR] [Writer] - fail to perform write operation</p>
</blockquote>
<blockquote>
<p>com.intel.cosbench.api.storage.StorageException:<br>org.apache.http.client.ClientProtocolException</p>
</blockquote>
<blockquote>
<p>…</p>
</blockquote>
<blockquote>
<p>Caused by: org.apache.http.client.NonRepeatableRequestException: Cannot<br>retry request with a non-repeatable request entity. The cause lists the<br>reason the original request failed.</p>
</blockquote>
<blockquote>
<p>…</p>
</blockquote>
<blockquote>
<p>Caused by: java.net.SocketException: Broken pipe</p>
</blockquote>
<blockquote>
<p>…</p>
</blockquote>
<h2 id="S3"><a href="#S3" class="headerlink" title="S3"></a>S3</h2><ol>
<li>参数“proxyhost”和“proxyport”的用法是什么?</li>
</ol>
<p>在某些情况下(例如在企业网络中)，用户需要通过一个http代理才能访问Amazon<br>S3服务，“proxyhost”和“proxyport”用于配置http代理设置。</p>
<ol>
<li>可以将请求路由到Amazon S3中的指定region吗?</li>
</ol>
<p>S3适配器支持一个名为“endpoint”的参数，该参数能够支持到不同区域的路由请求。<br>例如，设置<br>“==<strong>endpoint=[<a href="https://s3-us-west-1.amazonaws.com" target="_blank" rel="noopener external nofollow noreferrer">https://s3-us-west-1.amazonaws.com</a></strong>==](<a href="https://s3-us-west-1.amazonaws.com/)”" target="_blank" rel="noopener external nofollow noreferrer">https://s3-us-west-1.amazonaws.com/)”</a><br>将在俄勒冈州地区创建桶。有关详细的s3 region，请访问:<br><a href="http://docs.aws.amazon.com/general/latest/gr/rande.html#s3_region" target="_blank" rel="noopener external nofollow noreferrer">http://docs.aws.amazon.com/general/latest/gr/rande.html#s3_region</a></p>
<h2 id="Ceph"><a href="#Ceph" class="headerlink" title="Ceph"></a>Ceph</h2><ol>
<li>支持哪些方法来访问Ceph对象存储?</li>
</ol>
<p>COSBench支持通过Rados网关访问Ceph对象存储，在这种情况下，公开的访问协议可以是S3或Swift，这取决于Rados网关配置。从用户的角度来看，Ceph集群是S3或Swift兼容的对象存储，工作负载配置遵循S3或Swift的配置规则。</p>
<p>此外，COSBench还可以通过librados通过Rados协议与Ceph对象存储交互。在这种情况下，存储适配器应该是“librados”。一个警告是ceph<br>librados包应该安装在COSBench driver节点上。</p>
<h2 id="CDMI"><a href="#CDMI" class="headerlink" title="CDMI"></a>CDMI</h2><ol>
<li>如何通过cdmi协议测试swift ?</li>
</ol>
<p>存储类型“cdmi_swift”用于swift，一个示例工作负载文件conf/cdmi-swift-config-sample.xml可以帮助参考。</p>
<ol>
<li>为什么使用两种不同的cdmi存储类型?</li>
</ol>
<p>COSBench包括两个与cdmi相关的适配器：cdmi和cdmi-swift，主要区别在于认证。<br>CDMI标准采用HTTP标准认证机制，而swift使用基于令牌的认证。<br>CDMI是一种通用协议，可以帮助在一个标准中容纳不同的配置文件，它可以用于扩展，并且可以看到更多cdmi风格的适配器。</p>
<h1 id="附录A-示例配置"><a href="#附录A-示例配置" class="headerlink" title="附录A. 示例配置"></a>附录A. 示例配置</h1><h2 id="Swift-1"><a href="#Swift-1" class="headerlink" title="Swift"></a>Swift</h2><p>示例工作负载配置描述了以下测试场景:</p>
<ul>
<li>测试包括五个阶段: init, prepare, main, cleanup和dispose。</li>
<li>测试创建32个容器，每个容器包含50个大小为64 KB的对象。.</li>
<li>操作请求被发送到三个controller节点。</li>
<li>这些请求包括80％的GET(读)操作和20％的PUT(写)操作;<br>读取操作从＃1到＃50的50个对象中随机请求一个对象，而写入操作随机创建对象编号从＃51到＃100的对象。</li>
<li>完成后，测试将清理所有对象并销毁所有容器。</li>
</ul>
<p>要使用keystone认证，请使用注释的keystone认证行作为示例（请注意，IP地址192.168.250.36应替换为controller节点的实际IP地址）。</p>
<?xml version=“1.0” encoding=“UTF-8” ?>

<p>&lt;workload name=“swift-sample” description=“sample benchmark for swift”&gt;</p>
<storage type="“swift”">

<!-- MODIFY ME -->

<p>&lt;auth type=“swauth”<br>config=“username=test:tester;password=testing;auth_url=<a href="http://192.168.10.1:8080/auth/v1.0”" target="_blank" rel="noopener external nofollow noreferrer">http://192.168.10.1:8080/auth/v1.0”</a><br>/&gt;</p>
<!-- Keystone Authentication

<auth type=“keystone”
config=“username=tester;password=testing;tenant_name=test;auth_url=http://192.168.250.36:5000/v2.0;service=swift”
/>

–>

<workflow>

<workstage name=“init”>

<work type=“init” workers=“1” config=“containers=r(1,32)” />

</workstage>

<workstage name=“prepare”>

<work type=“prepare” workers=“1”
config=“containers=r(1,32);objects=r(1,50);sizes=c(64)KB” />

</workstage>

<workstage name=“main”>

<work name=“main” workers=“8” rampup=“100” runtime=“300”>

<operation type=“read” ratio=“80” config=“containers=u(1,32);objects=u(1,50)”
/>

<operation type=“write” ratio=“20”
config=“containers=u(1,32);objects=u(51,100);sizes=c(64)KB” />

</work>

</workstage>

<workstage name=“cleanup”>

<work type=“cleanup” workers=“1” config=“containers=r(1,32);objects=r(1,100)”
/>

</workstage>

<workstage name=“dispose”>

<work type=“dispose” workers=“1” config=“containers=r(1,32)” />

</workstage>

</workflow>

</workload>

## AmpliStor

工作负载配置描述了以下测试场景:

- 测试包括五个阶段: init, prepare, main, cleanup和dispose。
- 该测试创建了32个容器（名称空间），每个容器包含50个大小为64 KB的对象。
- 操作请求被发送给三个controller节点，每个controller节点承载两个客户端守护进程。
- 请求包括80%的GET(读)操作和20%的PUT(写)操作;读操作随机地从编号为#1到#50的50个对象中请求对象，而写操作随机地创建编号为#51到#100的对象。
- 完成后，测试将清理所有对象并销毁所有容器 (namespaces)。

对于AmpliStor v2.5版本，所有与命名空间相关的work (init/dispose)
都需要“*nsroot=/manage/namespace*” , 对于v2.5之前的版本，只需删除“nsroot = /
manage / namespace”片段下面的内容。

<?xml version=“1.0” encoding=“UTF-8” ?>

<workload name=“ampli-sample” description=“sample benchmark for amplistor”>

<storage type=“ampli”
config=“host=192.168.10.1;port=8080;policy=14195ca863764fd48c281cb95c9bd555” />

<workflow>

<workstage name=“init”>

<storage type=“ampli”
config=“host=192.168.10.1;port=8080;nsroot=/manage/namespace;policy=14195ca863764fd48c281cb95c9bd555”
/>

<work type=“init” workers=“1” config=“containers=r(1,32)” />

</workstage>

<workstage name=“prepare”>

<work type=“prepare” workers=“1”
config=“containers=r(1,32);objects=r(1,50);sizes=c(64)KB” />

</workstage>

<workstage name=“main”>

<work name=“c1p0” workers=“16” rampup=“100” runtime=“300”>

<storage type=“ampli” config=“host=192.168.10.1;port=8080” />

<operation type=“read” ratio=“80” config=“containers=u(1,32);objects=u(1,50)”
/>

<operation type=“write” ratio=“20”
config=“containers=u(1,32);objects=u(51,100);sizes=c(64)KB” />

</work>

<work name=“c1p1” workers=“16” rampup=“100” runtime=“300”>

<storage type=“ampli” config=“host=192.168.10.1;port=8081” />

<operation type=“read” ratio=“80” config=“containers=u(1,32);objects=u(1,50)”
/>

<operation type=“write” ratio=“20”
config=“containers=u(1,32);objects=u(51,100);sizes=c(64)KB” />

</work>

<work name=“c2p0” workers=“16” rampup=“100” runtime=“300”>

<storage type=“ampli” config=“host=192.168.10.2;port=8080” />

<operation type=“read” ratio=“80” config=“containers=u(1,32);objects=u(1,50)”
/>

<operation type=“write” ratio=“20”
config=“containers=u(1,32);objects=u(51,100);sizes=c(64)KB” />

</work>

<work name=“c2p1” workers=“16” rampup=“100” runtime=“300”>

<storage type=“ampli” config=“host=192.168.10.2;port=8081” />

<operation type=“read” ratio=“80” config=“containers=u(1,32);objects=u(1,50)”
/>

<operation type=“write” ratio=“20”
config=“containers=u(1,32);objects=u(51,100);sizes=c(64)KB” />

</work>

<work name=“c3p0” workers=“16” rampup=“100” runtime=“300”>

<storage type=“ampli” config=“host=192.168.10.3;port=8080” />

<operation type=“read” ratio=“80” config=“containers=u(1,32);objects=u(1,50)”
/>

<operation type=“write” ratio=“20”
config=“containers=u(1,32);objects=u(51,100);sizes=c(64)KB” />

</work>

<work name=“c3p1” workers=“16” rampup=“100” runtime=“300”>

<storage type=“ampli” config=“host=192.168.10.3;port=8081” />

<operation type=“read” ratio=“80” config=“containers=u(1,32);objects=u(1,50)”
/>

<operation type=“write” ratio=“20”
config=“containers=u(1,32);objects=u(51,100);sizes=c(64)KB” />

</work>

</workstage>

<workstage name=“cleanup”>

<work type=“cleanup” workers=“1” config=“containers=r(1,32);objects=r(1,100)”
/>

</workstage>

<workstage name=“dispose”>

<storage type=“ampli”
config=“host=192.168.10.1;port=8080;nsroot=/manage/namespace” />

<work type=“dispose” workers=“1” config=“containers=r(1,32)” />

</workstage>

</workflow>

</workload>

如本指南开头所述，COSBench还允许用户为其它存储系统创建适配器。
有关详细信息，请参阅“COSBench适配器开发指南”。.
ion type=“read” ratio=“80” config=“containers=u(1,32);objects=u(1,50)”
/>

<operation type=“write” ratio=“20”
config=“containers=u(1,32);objects=u(51,100);sizes=c(64)KB” />

</work>

<work name=“c2p0” workers=“16” rampup=“100” runtime=“300”>

<storage type=“ampli” config=“host=192.168.10.2;port=8080” />

<operation type=“read” ratio=“80” config=“containers=u(1,32);objects=u(1,50)”
/>

<operation type=“write” ratio=“20”
config=“containers=u(1,32);objects=u(51,100);sizes=c(64)KB” />

</work>

<work name=“c2p1” workers=“16” rampup=“100” runtime=“300”>

<storage type=“ampli” config=“host=192.168.10.2;port=8081” />

<operation type=“read” ratio=“80” config=“containers=u(1,32);objects=u(1,50)”
/>

<operation type=“write” ratio=“20”
config=“containers=u(1,32);objects=u(51,100);sizes=c(64)KB” />

</work>

<work name=“c3p0” workers=“16” rampup=“100” runtime=“300”>

<storage type=“ampli” config=“host=192.168.10.3;port=8080” />

<operation type=“read” ratio=“80” config=“containers=u(1,32);objects=u(1,50)”
/>

<operation type=“write” ratio=“20”
config=“containers=u(1,32);objects=u(51,100);sizes=c(64)KB” />

</work>

<work name=“c3p1” workers=“16” rampup=“100” runtime=“300”>

<storage type=“ampli” config=“host=192.168.10.3;port=8081” />

<operation type=“read” ratio=“80” config=“containers=u(1,32);objects=u(1,50)”
/>

<operation type=“write” ratio=“20”
config=“containers=u(1,32);objects=u(51,100);sizes=c(64)KB” />

</work>

</workstage>

<workstage name=“cleanup”>

<work type=“cleanup” workers=“1” config=“containers=r(1,32);objects=r(1,100)”
/>

</workstage>

<workstage name=“dispose”>

<storage type=“ampli”
config=“host=192.168.10.1;port=8080;nsroot=/manage/namespace” />

<work type=“dispose” workers=“1” config=“containers=r(1,32)” />

</workstage>

</workflow>

</workload>

如本指南开头所述，COSBench还允许用户为其它存储系统创建适配器。
有关详细信息，请参阅“COSBench适配器开发指南”。.



# 001-部署

<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建s3用户key</span></span><br><span class="line">radosgw-admin key create <span class="attribute">--uid</span>=<span class="string">'user_id'</span> <span class="attribute">--key-type</span>=s3 --gen-secret  --gen-access-key</span><br><span class="line"><span class="comment"># 创建swift用户key</span></span><br><span class="line">radosgw-admin key create <span class="attribute">--subuser</span>=testuser:swift <span class="attribute">--key-type</span>=swift --gen-secret</span><br><span class="line"><span class="comment"># 删除s3用户key</span></span><br><span class="line">radosgw-admin key rm <span class="attribute">--uid</span>=<span class="string">'testuser'</span>  <span class="attribute">--access-key</span>=9JEB64N3OFDODAZAIZ8H</span><br><span class="line"><span class="comment"># 删除swift用户key</span></span><br><span class="line">radosgw-admin key rm <span class="attribute">--subuser</span>=testuser:swift <span class="attribute">--key-type</span>=swift</span><br><span class="line"><span class="comment"># 列出所有的用户</span></span><br><span class="line">radosgw-admin meatadata list user</span><br><span class="line"></span><br><span class="line">操作：</span><br><span class="line">创建admin用户：</span><br><span class="line"> radosgw-admin<span class="built_in"> user </span>create --uid admin --display_name admin</span><br><span class="line">创建测试用户：</span><br><span class="line">radosgw-admin<span class="built_in"> user </span>create --uid testuser --display_name testuser</span><br><span class="line">创建swift用户：</span><br><span class="line">radosgw-admin subuser create <span class="attribute">--uid</span>=registry <span class="attribute">--subuser</span>=registry:swift <span class="attribute">--access</span>=full </span><br><span class="line">radosgw-admin subuser create --uid =testuser <span class="attribute">--subuser</span>=testuser:swift <span class="attribute">--access</span>=full</span><br><span class="line">创建s3用户key：</span><br><span class="line">radosgw-admin key create <span class="attribute">--uid</span>=testuser <span class="attribute">--key-type</span>=s3 --gen-secret --gen-access-key</span><br><span class="line">创建swift用户key：</span><br><span class="line">radosgw-admin key create <span class="attribute">--subuser</span>=testuser:swift <span class="attribute">--key-type</span>=swift --gen-secret</span><br><span class="line">查看用户信息：</span><br><span class="line">radosgw-admin<span class="built_in"> user </span><span class="builtin-name">info</span> <span class="attribute">--uid</span>=testuser</span><br><span class="line">    <span class="string">"swift_keys"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"user"</span>: <span class="string">"testuser:swift"</span>,</span><br><span class="line">            <span class="string">"secret_key"</span>: <span class="string">"Z4zn2G4ZElnRYwduB8wtKYAgmEmJW7Sg3tCpTVgT"</span></span><br><span class="line">l、swauth配置：</span><br><span class="line"><span class="attribute">username</span>=testuser:swift;password=Z4zn2G4ZElnRYwduB8wtKYAgmEmJW7Sg3tCpTVgT;</span><br><span class="line"><span class="attribute">url</span>=http://10.47.223.6:7480/auth/1.0</span><br><span class="line">2、swift配置：</span><br><span class="line"><span class="attribute">storage_url</span>=http://10.47.223.6:7480/auth/1.0</span><br></pre></td></tr></table></figure>

<h1 id="002-创建admin用户"><a href="#002-创建admin用户" class="headerlink" title="002-创建admin用户"></a>002-创建admin用户</h1><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line">1. 创建admin用户，得到AK/SK。</span><br><span class="line">[root@ceph1 ceph]# radosgw-admin<span class="built_in"> user </span>create --uid admin --display_name admin</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">"user_id"</span>: <span class="string">"admin"</span>,</span><br><span class="line">    <span class="string">"display_name"</span>: <span class="string">"admin"</span>,</span><br><span class="line">    <span class="string">"email"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="string">"suspended"</span>: 0,</span><br><span class="line">    <span class="string">"max_buckets"</span>: 1000,</span><br><span class="line">    <span class="string">"auid"</span>: 0,</span><br><span class="line">    <span class="string">"subusers"</span>: [],</span><br><span class="line">    <span class="string">"keys"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"user"</span>: <span class="string">"admin"</span>,</span><br><span class="line">            <span class="string">"access_key"</span>: <span class="string">"O92SI1UZPGBNX6WRFQAO"</span>,</span><br><span class="line">            <span class="string">"secret_key"</span>: <span class="string">"ONDqFrHCDqjktnVBw5DOLWY6a6WMikU7wCTBLXtJ"</span></span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"swift_keys"</span>: [],</span><br><span class="line">    <span class="string">"caps"</span>: [],</span><br><span class="line">    <span class="string">"op_mask"</span>: <span class="string">"read, write, delete"</span>,</span><br><span class="line">    <span class="string">"default_placement"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="string">"placement_tags"</span>: [],</span><br><span class="line">    <span class="string">"bucket_quota"</span>: &#123;</span><br><span class="line">        <span class="string">"enabled"</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="string">"max_size_kb"</span>: -1,</span><br><span class="line">        <span class="string">"max_objects"</span>: -1</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"user_quota"</span>: &#123;</span><br><span class="line">        <span class="string">"enabled"</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="string">"max_size_kb"</span>: -1,</span><br><span class="line">        <span class="string">"max_objects"</span>: -1</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"temp_url_keys"</span>: []</span><br><span class="line">&#125;</span><br><span class="line">2. 赋予admin用户<span class="built_in"> user </span>usage bucket 读写权限，这样就可以</span><br><span class="line">[root@ceph1 ceph]# radosgw-admin caps <span class="builtin-name">add</span> <span class="attribute">--uid</span>=admin <span class="attribute">--caps</span>=<span class="string">"users=read, write; usage=read,write;buckets=read, write"</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">"user_id"</span>: <span class="string">"admin"</span>,</span><br><span class="line">    <span class="string">"display_name"</span>: <span class="string">"admin"</span>,</span><br><span class="line">    <span class="string">"email"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="string">"suspended"</span>: 0,</span><br><span class="line">    <span class="string">"max_buckets"</span>: 1000,</span><br><span class="line">    <span class="string">"auid"</span>: 0,</span><br><span class="line">    <span class="string">"subusers"</span>: [],</span><br><span class="line">    <span class="string">"keys"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"user"</span>: <span class="string">"admin"</span>,</span><br><span class="line">            <span class="string">"access_key"</span>: <span class="string">"O92SI1UZPGBNX6WRFQAO"</span>,</span><br><span class="line">            <span class="string">"secret_key"</span>: <span class="string">"ONDqFrHCDqjktnVBw5DOLWY6a6WMikU7wCTBLXtJ"</span></span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"swift_keys"</span>: [],</span><br><span class="line">    <span class="string">"caps"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"type"</span>: <span class="string">"buckets"</span>,</span><br><span class="line">            <span class="string">"perm"</span>: <span class="string">"*"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"type"</span>: <span class="string">"usage"</span>,</span><br><span class="line">            <span class="string">"perm"</span>: <span class="string">"*"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"type"</span>: <span class="string">"users"</span>,</span><br><span class="line">            <span class="string">"perm"</span>: <span class="string">"*"</span></span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"op_mask"</span>: <span class="string">"read, write, delete"</span>,</span><br><span class="line">    <span class="string">"default_placement"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="string">"placement_tags"</span>: [],</span><br><span class="line">    <span class="string">"bucket_quota"</span>: &#123;</span><br><span class="line">        <span class="string">"enabled"</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="string">"max_size_kb"</span>: -1,</span><br><span class="line">        <span class="string">"max_objects"</span>: -1</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"user_quota"</span>: &#123;</span><br><span class="line">        <span class="string">"enabled"</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="string">"max_size_kb"</span>: -1,</span><br><span class="line">        <span class="string">"max_objects"</span>: -1</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"temp_url_keys"</span>: []</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">选择swift测试，认证方式使用swauth，对应的配置信息使用radosgw-admin创建的用户信息，如下：</span><br><span class="line">[root@ceph1 ceph]# radosgw-admin<span class="built_in"> user </span><span class="builtin-name">info</span> <span class="attribute">--uid</span>=admin</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">"user_id"</span>: <span class="string">"admin"</span>,</span><br><span class="line">    <span class="string">"display_name"</span>: <span class="string">"admin"</span>,</span><br><span class="line">    <span class="string">"email"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="string">"suspended"</span>: 0,</span><br><span class="line">    <span class="string">"max_buckets"</span>: 1000,</span><br><span class="line">    <span class="string">"auid"</span>: 0,</span><br><span class="line">    <span class="string">"subusers"</span>: [],</span><br><span class="line">    <span class="string">"keys"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"user"</span>: <span class="string">"admin"</span>,</span><br><span class="line">            <span class="string">"access_key"</span>: <span class="string">"O92SI1UZPGBNX6WRFQAO"</span>,</span><br><span class="line">            <span class="string">"secret_key"</span>: <span class="string">"ONDqFrHCDqjktnVBw5DOLWY6a6WMikU7wCTBLXtJ"</span></span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"swift_keys"</span>: [],</span><br><span class="line">    <span class="string">"caps"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"type"</span>: <span class="string">"buckets"</span>,</span><br><span class="line">            <span class="string">"perm"</span>: <span class="string">"*"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"type"</span>: <span class="string">"usage"</span>,</span><br><span class="line">            <span class="string">"perm"</span>: <span class="string">"*"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"type"</span>: <span class="string">"users"</span>,</span><br><span class="line">            <span class="string">"perm"</span>: <span class="string">"*"</span></span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"op_mask"</span>: <span class="string">"read, write, delete"</span>,</span><br><span class="line">    <span class="string">"default_placement"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="string">"placement_tags"</span>: [],</span><br><span class="line">    <span class="string">"bucket_quota"</span>: &#123;</span><br><span class="line">        <span class="string">"enabled"</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="string">"max_size_kb"</span>: -1,</span><br><span class="line">        <span class="string">"max_objects"</span>: -1</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"user_quota"</span>: &#123;</span><br><span class="line">        <span class="string">"enabled"</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="string">"max_size_kb"</span>: -1,</span><br><span class="line">        <span class="string">"max_objects"</span>: -1</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"temp_url_keys"</span>: []</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

--></storage>
    </div>

    
    
    
      
  <div class="popular-posts-header">相关文章推荐</div>
  <ul class="popular-posts">
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\2008\01\04\project\project_BlockStorage\2008-01-04-BlockStorage-filebench\" rel="bookmark">BlockStorage-filebench</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\2008\01\04\project\project_BlockStorage\2008-01-04-BlockStorage-fio\" rel="bookmark">BlockStorage-fio</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\2008\01\04\project\project_BlockStorage\2008-01-04-BlockStorage-ftest\" rel="bookmark">BlockStorage-ftest</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\2008\01\04\project\project_BlockStorage\2008-01-04-BlockStorage-vdbench\" rel="bookmark">BlockStorage-vdbench</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\2008\01\04\project\project_BlockStorage\2008-01-04-BlockStorage-iozone\" rel="bookmark">BlockStorage-iozone</a></div>
    </li>
  </ul>

        <div class="reward-container">
  <div>赞赏一下吧～</div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    打赏
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/images/alipay.png" alt="tongsiying 支付宝">
        <p>支付宝</p>
      </div>

  </div>
</div>

        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>tongsiying
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://tongsiying.github.io/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/" title="BlockStorage-cosbeach">https://tongsiying.github.io/2008/01/04/project/project_BlockStorage/2008-01-04-BlockStorage-cosbeach/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener external nofollow noreferrer" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/BlockStorage-tools/" rel="tag"># BlockStorage-tools</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2008/01/04/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_%E6%97%A5%E5%BF%97%E6%94%B6%E9%9B%86%E7%B3%BB%E7%BB%9F/%E6%97%A5%E5%BF%97%E6%94%B6%E9%9B%86%E7%B3%BB%E7%BB%9F/" rel="prev" title="日志收集系统">
      <i class="fa fa-chevron-left"></i> 日志收集系统
    </a></div>
      <div class="post-nav-item">
    <a href="/2008/01/04/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2007-01-17-mysql-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/" rel="next" title="存储过程">
      存储过程 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#COSBench用户指南"><span class="nav-text">COSBench用户指南</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#引言"><span class="nav-text">引言</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#参考硬件配置"><span class="nav-text">参考硬件配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#系统要求"><span class="nav-text">系统要求</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#支持的云对象存储系统"><span class="nav-text">支持的云对象存储系统</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#本指南其余部分的内容"><span class="nav-text">本指南其余部分的内容</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#安装COSBench"><span class="nav-text">安装COSBench</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#安装操作系统"><span class="nav-text">安装操作系统</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#安装JRE"><span class="nav-text">安装JRE</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#安装Curl"><span class="nav-text">安装Curl</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安装COSBench-1"><span class="nav-text">安装COSBench</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#准备"><span class="nav-text">准备</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#安装"><span class="nav-text">安装</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#目录结构"><span class="nav-text">目录结构</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#脚本"><span class="nav-text">脚本</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#子目录"><span class="nav-text">子目录</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#验证安装"><span class="nav-text">验证安装</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#启动COSBench"><span class="nav-text">启动COSBench</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#检查Controllers-and-Drivers"><span class="nav-text">检查Controllers and Drivers</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#测试安装"><span class="nav-text">测试安装</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#部署COSBench"><span class="nav-text">部署COSBench</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#配置和运行"><span class="nav-text">配置和运行</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#全局"><span class="nav-text">全局</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#配置Controller"><span class="nav-text">配置Controller</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Conf-controller-conf"><span class="nav-text">Conf&#x2F;controller.conf</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#配置Driver"><span class="nav-text">配置Driver</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Conf-driver-conf"><span class="nav-text">Conf&#x2F;driver.conf</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#启动Drivers"><span class="nav-text">启动Drivers</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#启动Controllers"><span class="nav-text">启动Controllers</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#提交工作负载"><span class="nav-text">提交工作负载</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#定义工作负载"><span class="nav-text">定义工作负载</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#提交工作负载-1"><span class="nav-text">提交工作负载</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#检查负载状态"><span class="nav-text">检查负载状态</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#停止Drivers和Controllers"><span class="nav-text"> 停止Drivers和Controllers</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#配置Tomcat"><span class="nav-text">配置Tomcat</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#工作负载管理"><span class="nav-text">工作负载管理</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#配置工作负载"><span class="nav-text">配置工作负载</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#引言-1"><span class="nav-text">引言</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#选择表达式-也称为选择器"><span class="nav-text">选择表达式(也称为选择器)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#概述"><span class="nav-text">概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#选择器"><span class="nav-text">选择器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#允许的组合"><span class="nav-text">允许的组合</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#工作负载"><span class="nav-text">工作负载</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#通用格式"><span class="nav-text">通用格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#属性"><span class="nav-text">属性</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#认证"><span class="nav-text">认证</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#通用格式-1"><span class="nav-text">通用格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#属性-1"><span class="nav-text">属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#认证机制"><span class="nav-text">认证机制</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#none-不执行任何操作，默认值"><span class="nav-text">none (不执行任何操作，默认值)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#mock-延迟指定的时间"><span class="nav-text">mock (延迟指定的时间)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#swauth-适用于OpenStack-Swift"><span class="nav-text">swauth (适用于OpenStack Swift)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#keystone-适用于OpenStack-Swift"><span class="nav-text">keystone (适用于OpenStack Swift)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#httpauth-Http-BASIC-DIGEST"><span class="nav-text">httpauth (Http BASIC&#x2F;DIGEST)</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#存储"><span class="nav-text">存储</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#通用格式-2"><span class="nav-text">通用格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#属性-2"><span class="nav-text">属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#存储系统"><span class="nav-text">存储系统</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#none-不执行任何操作，默认值-1"><span class="nav-text">none (不执行任何操作，默认值)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#mock-延迟指定的时间-1"><span class="nav-text">mock (延迟指定的时间)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Swift-OpenStack-Swift"><span class="nav-text">Swift (OpenStack Swift)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Ampli-Amplidata"><span class="nav-text">Ampli (Amplidata)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#S3-Amazon-S3"><span class="nav-text">S3 (Amazon S3)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Sproxyd-Scality"><span class="nav-text">Sproxyd (Scality)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Cdmi-SNIA-CDMI"><span class="nav-text">Cdmi (SNIA CDMI)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Cdmi-swift-SNIA-CDMI-for-swift"><span class="nav-text">Cdmi_swift (SNIA CDMI for swift)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#librados-用于Ceph"><span class="nav-text">librados (用于Ceph)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#OSS-Aliyun-OSS"><span class="nav-text">OSS (Aliyun OSS)</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Work-Stage"><span class="nav-text">Work Stage</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#通用格式-3"><span class="nav-text">通用格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#属性-3"><span class="nav-text">属性</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Work"><span class="nav-text">Work</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#通用格式-4"><span class="nav-text">通用格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#属性-4"><span class="nav-text">属性</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#特殊-Work"><span class="nav-text">特殊 Work</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#通用格式-5"><span class="nav-text">通用格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#支持的特殊Work"><span class="nav-text">支持的特殊Work</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#init-批量创建特定-containers"><span class="nav-text">init (批量创建特定&#x3D;&#x3D;containers&#x3D;&#x3D; )</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#prepare-批量插入指定-objects"><span class="nav-text">prepare (批量插入指定&#x3D;&#x3D;objects&#x3D;&#x3D; )</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#cleanup-批量删除指定-objects"><span class="nav-text">cleanup (批量删除指定&#x3D;&#x3D;objects&#x3D;&#x3D;)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#dispose-批量删除指定-containers"><span class="nav-text">dispose (批量删除指定&#x3D;&#x3D;containers&#x3D;&#x3D;)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#delay-插入几秒的延迟"><span class="nav-text">delay (插入几秒的延迟)</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#操作"><span class="nav-text">操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#通用格式-6"><span class="nav-text">通用格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#属性-5"><span class="nav-text">属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#支持的操作"><span class="nav-text">支持的操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#容器-对象命名约定"><span class="nav-text">容器&#x2F;对象命名约定:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#read"><span class="nav-text">read</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#write"><span class="nav-text">write</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#filewrite"><span class="nav-text">filewrite</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#delete"><span class="nav-text">delete</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#list"><span class="nav-text">list</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#示例"><span class="nav-text">示例</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#pure-read"><span class="nav-text">pure read</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#pure-write"><span class="nav-text">pure write</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#mixed-operations"><span class="nav-text">mixed operations</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#附件注释"><span class="nav-text">附件注释</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#概要"><span class="nav-text">概要</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#划分策略"><span class="nav-text">划分策略</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#结果"><span class="nav-text">结果</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#结构"><span class="nav-text">结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#每个运行数据"><span class="nav-text">每个运行数据</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#整体性能数据-即w1-demo-csv"><span class="nav-text">整体性能数据 (即w1-demo.csv)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#时间线数据-即s3-main-csv"><span class="nav-text">时间线数据 (即s3-main.csv)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#响应时间直方图数据-即w1-demo-rt-histogram-csv"><span class="nav-text">响应时间直方图数据(即w1-demo-rt-histogram.csv)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#响应时间分解-即s3-main-csv"><span class="nav-text">响应时间分解 (即s3-main.csv)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Workload-config-xml"><span class="nav-text">Workload-config.xml</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Workload-log"><span class="nav-text">Workload.log</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#指标"><span class="nav-text">指标</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#吞吐量-Operations-s-or-Op-s"><span class="nav-text">吞吐量 (Operations&#x2F;s or Op&#x2F;s)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#响应时间-ms"><span class="nav-text">响应时间 (ms)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#带宽-MB-s"><span class="nav-text">带宽 (MB&#x2F;s)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#成功率"><span class="nav-text">成功率 (%)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#其它指标"><span class="nav-text">其它指标</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#常见问题解答"><span class="nav-text">常见问题解答</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#常规"><span class="nav-text">常规</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Swift"><span class="nav-text">Swift</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#AmpliStor"><span class="nav-text">AmpliStor</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#S3"><span class="nav-text">S3</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Ceph"><span class="nav-text">Ceph</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CDMI"><span class="nav-text">CDMI</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#附录A-示例配置"><span class="nav-text">附录A. 示例配置</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Swift-1"><span class="nav-text">Swift</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="tongsiying"
      src="/images/gutianle.gif">
  <p class="site-author-name" itemprop="name">tongsiying</p>
  <div class="site-description" itemprop="description">问渠那得清如许？为有源头活水来。</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">436</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">22</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">49</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/tongsiying" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;tongsiying" rel="noopener external nofollow noreferrer" target="_blank"><i class="github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:wxtlucky1015@163.com" title="E-Mail → mailto:wxtlucky1015@163.com" rel="noopener external nofollow noreferrer" target="_blank"><i class="envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/u/2964109344" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;u&#x2F;2964109344" rel="noopener external nofollow noreferrer" target="_blank"><i class="weibo fa-fw"></i>Weibo</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/" title="tongsiying → https:&#x2F;&#x2F;tongsiying.github.io"><i class="wrench fa-fw"></i>tongsiying</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/ReadingNotes/" title="ReadingNotes → https:&#x2F;&#x2F;tongsiying.github.io&#x2F;ReadingNotes&#x2F;"><i class="book fa-fw"></i>ReadingNotes</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/blog/" title="blog → https:&#x2F;&#x2F;tongsiying.github.io&#x2F;blog&#x2F;"><i class="book fa-fw"></i>blog</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/blog/tools/" title="tools → https:&#x2F;&#x2F;tongsiying.github.io&#x2F;blog&#x2F;tools&#x2F;"><i class="wrench fa-fw"></i>tools</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/lanlan/" title="lanlan → https:&#x2F;&#x2F;tongsiying.github.io&#x2F;lanlan&#x2F;"><i class="wrench fa-fw"></i>lanlan</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/Music/" title="note → https:&#x2F;&#x2F;tongsiying.github.io&#x2F;Music&#x2F;"><i class="wrench fa-fw"></i>note</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/sound/" title="Music → https:&#x2F;&#x2F;tongsiying.github.io&#x2F;sound&#x2F;"><i class="wrench fa-fw"></i>Music</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/JSONFormat/" title="JSONFormat → https:&#x2F;&#x2F;tongsiying.github.io&#x2F;JSONFormat&#x2F;"><i class="wrench fa-fw"></i>JSONFormat</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/HTML5-Canvas/" title="Canvas → https:&#x2F;&#x2F;tongsiying.github.io&#x2F;HTML5-Canvas&#x2F;"><i class="wrench fa-fw"></i>Canvas</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/games/" title="games → https:&#x2F;&#x2F;tongsiying.github.io&#x2F;games&#x2F;"><i class="wrench fa-fw"></i>games</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/love/" title="love → https:&#x2F;&#x2F;tongsiying.github.io&#x2F;love&#x2F;"><i class="wrench fa-fw"></i>love</a>
      </span>
  </div>



		<div style="">
  <canvas id="canvas" style="width:60%;">��ǰ�������֧��canvas������������������</canvas>
</div>
<script>
(function(){

   var digit=
    [
        [
            [0,0,1,1,1,0,0],
            [0,1,1,0,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,0,1,1,0],
            [0,0,1,1,1,0,0]
        ],//0
        [
            [0,0,0,1,1,0,0],
            [0,1,1,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [1,1,1,1,1,1,1]
        ],//1
        [
            [0,1,1,1,1,1,0],
            [1,1,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,0,0],
            [0,0,1,1,0,0,0],
            [0,1,1,0,0,0,0],
            [1,1,0,0,0,0,0],
            [1,1,0,0,0,1,1],
            [1,1,1,1,1,1,1]
        ],//2
        [
            [1,1,1,1,1,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,0,0,1,1,0],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0]
        ],//3
        [
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,1,0],
            [0,0,1,1,1,1,0],
            [0,1,1,0,1,1,0],
            [1,1,0,0,1,1,0],
            [1,1,1,1,1,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,0,1,1,0],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,1,1]
        ],//4
        [
            [1,1,1,1,1,1,1],
            [1,1,0,0,0,0,0],
            [1,1,0,0,0,0,0],
            [1,1,1,1,1,1,0],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0]
        ],//5
        [
            [0,0,0,0,1,1,0],
            [0,0,1,1,0,0,0],
            [0,1,1,0,0,0,0],
            [1,1,0,0,0,0,0],
            [1,1,0,1,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0]
        ],//6
        [
            [1,1,1,1,1,1,1],
            [1,1,0,0,0,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,1,1,0,0,0],
            [0,0,1,1,0,0,0],
            [0,0,1,1,0,0,0],
            [0,0,1,1,0,0,0]
        ],//7
        [
            [0,1,1,1,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0]
        ],//8
        [
            [0,1,1,1,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,0,0],
            [0,1,1,0,0,0,0]
        ],//9
        [
            [0,0,0,0,0,0,0],
            [0,0,1,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0],
            [0,0,1,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,0,0,0,0,0]
        ]//:
    ];

var canvas = document.getElementById('canvas');

if(canvas.getContext){
    var cxt = canvas.getContext('2d');
    //����canvas�Ŀ���
    var H = 100,W = 700;
    canvas.height = H;
    canvas.width = W;
    cxt.fillStyle = '#f00';
    cxt.fillRect(10,10,50,50);

    //�洢ʱ������
    var data = [];
    //�洢�˶���С��
    var balls = [];
    //�������Ӱ뾶
    var R = canvas.height/20-1;
    (function(){
        var temp = /(\d)(\d):(\d)(\d):(\d)(\d)/.exec(new Date());
        //�洢ʱ�����֣���ʮλСʱ����λСʱ��ð�š�ʮλ���ӡ���λ���ӡ�ð�š�ʮλ���ӡ���λ������7���������
        data.push(temp[1],temp[2],10,temp[3],temp[4],10,temp[5],temp[6]);
    })();

    /*���ɵ�������*/
    function renderDigit(index,num){
        for(var i = 0; i < digit[num].length; i++){
            for(var j = 0; j < digit[num][i].length; j++){
                if(digit[num][i][j] == 1){
                    cxt.beginPath();
                    cxt.arc(14*(R+2)*index + j*2*(R+1)+(R+1),i*2*(R+1)+(R+1),R,0,2*Math.PI);
                    cxt.closePath();
                    cxt.fill();
                }
            }
        }
    }

    /*����ʱ��*/
    function updateDigitTime(){
        var changeNumArray = [];
        var temp = /(\d)(\d):(\d)(\d):(\d)(\d)/.exec(new Date());
        var NewData = [];
        NewData.push(temp[1],temp[2],10,temp[3],temp[4],10,temp[5],temp[6]);
        for(var i = data.length-1; i >=0 ; i--){
            //ʱ�䷢���仯
            if(NewData[i] !== data[i]){
                //���仯������ֵ����data�����е������洢��changeNumArray������
                changeNumArray.push(i+'_'+(Number(data[i])+1)%10);
            }
        }
        //����С��
        for(var i = 0; i< changeNumArray.length; i++){
            addBalls.apply(this,changeNumArray[i].split('_'));
        }
        data = NewData.concat();
    }

    /*����С��״̬*/
    function updateBalls(){
        for(var i = 0; i < balls.length; i++){
            balls[i].stepY += balls[i].disY;
            balls[i].x += balls[i].stepX;
            balls[i].y += balls[i].stepY;
            if(balls[i].x > W + R || balls[i].y > H + R){
                balls.splice(i,1);
                i--;
            }
        }
    }

    /*����Ҫ�˶���С��*/
    function addBalls(index,num){
        var numArray = [1,2,3];
        var colorArray =  ["#3BE","#09C","#A6C","#93C","#9C0","#690","#FB3","#F80","#F44","#C00"];
        for(var i = 0; i < digit[num].length; i++){
            for(var j = 0; j < digit[num][i].length; j++){
                if(digit[num][i][j] == 1){
                    var ball = {
                        x:14*(R+2)*index + j*2*(R+1)+(R+1),
                        y:i*2*(R+1)+(R+1),
                        stepX:Math.floor(Math.random() * 4 -2),
                        stepY:-2*numArray[Math.floor(Math.random()*numArray.length)],
                        color:colorArray[Math.floor(Math.random()*colorArray.length)],
                        disY:1
                    };
                    balls.push(ball);
                }
            }
        }
    }

    /*��Ⱦ*/
    function render(){
        //���û������ȣ��ﵽ��ջ�����Ч��
        canvas.height = 100;
        //��Ⱦʱ��
        for(var i = 0; i < data.length; i++){
            renderDigit(i,data[i]);
        }
        //��ȾС��
        for(var i = 0; i < balls.length; i++){
            cxt.beginPath();
            cxt.arc(balls[i].x,balls[i].y,R,0,2*Math.PI);
            cxt.fillStyle = balls[i].color;
            cxt.closePath();
            cxt.fill();
        }
    }

    clearInterval(oTimer);
    var oTimer = setInterval(function(){
        //����ʱ��
        updateDigitTime();
        //����С��״̬
        updateBalls();
        //��Ⱦ
        render();
    },50);
}

})();
</script>
      </div>
    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; Weeny – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">tongsiying</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">7.7m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">116:27</span>
</div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
