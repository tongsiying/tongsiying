<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/hedgehog.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/hedgehog.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"tongsiying.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"hide","b2t":true,"scrollpercent":true,"padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="article">
<meta property="og:title" content="第20篇：文件操作">
<meta property="og:url" content="https://tongsiying.github.io/2021/11/24/python/python_%E5%9F%BA%E7%A1%80%E7%AF%87/%E7%AC%AC20%E7%AF%87%EF%BC%9A%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/index.html">
<meta property="og:site_name" content="tongsiying">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://tongsiying.github.io/2021/11/24/python/python_%E5%9F%BA%E7%A1%80%E7%AF%87/%E7%AC%AC20%E7%AF%87%EF%BC%9A%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/file-open-mode.png">
<meta property="article:published_time" content="2021-11-24T11:37:35.507Z">
<meta property="article:modified_time" content="2022-01-15T14:44:33.713Z">
<meta property="article:author" content="tongsiying">
<meta property="article:tag" content="python">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://tongsiying.github.io/2021/11/24/python/python_%E5%9F%BA%E7%A1%80%E7%AF%87/%E7%AC%AC20%E7%AF%87%EF%BC%9A%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/file-open-mode.png">

<link rel="canonical" href="https://tongsiying.github.io/2021/11/24/python/python_%E5%9F%BA%E7%A1%80%E7%AF%87/%E7%AC%AC20%E7%AF%87%EF%BC%9A%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>第20篇：文件操作 | tongsiying</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
<!-- 加入APlayer音乐播放器 -->
<link rel="stylesheet" href="/dist/APlayer.min.css">
<div id="aplayer"></div>
<script type="text/javascript" src="/dist/APlayer.min.js"></script>
<script type="text/javascript" src="/dist/music.js"></script>
  <div class="container use-motion">
    <div class="headband"></div>
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">tongsiying</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">阅读|运动|自律</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/catalog/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-目录">

    <a href="/catalog/" rel="section"><i class="fa fa fa-th fa-fw"></i>目录</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-读书清单">

    <a href="/read" rel="section"><i class="fa fa-book fa-fw"></i>读书清单</a>

  </li>
        <li class="menu-item menu-item-读书笔记">

    <a href="/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" rel="section"><i class="fa fa-book fa-fw"></i>读书笔记</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://tongsiying.github.io/2021/11/24/python/python_%E5%9F%BA%E7%A1%80%E7%AF%87/%E7%AC%AC20%E7%AF%87%EF%BC%9A%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/gutianle.gif">
      <meta itemprop="name" content="tongsiying">
      <meta itemprop="description" content="问渠那得清如许？为有源头活水来。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tongsiying">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          第20篇：文件操作
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-11-24 19:37:35" itemprop="dateCreated datePublished" datetime="2021-11-24T19:37:35+08:00">2021-11-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-01-15 22:44:33" itemprop="dateModified" datetime="2022-01-15T22:44:33+08:00">2022-01-15</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>20k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>18 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p class="description"></p>
<a id="more"></a>

<h1 id="学习目标："><a href="#学习目标：" class="headerlink" title="学习目标："></a><strong>学习目标</strong>：</h1><p><strong>掌握Python中文件打开、关闭、读取和写入的具体操作方法</strong></p>
<p>实际开发中常常会遇到对数据进行持久化的场景，所谓持久化是指将数据从无法长久保存数据的存储介质（通常是内存）转移到可以长久保存数据的存储介质（通常是硬盘）中。实现数据持久化最直接简单的方式就是通过<strong>文件系统</strong>将数据保存到<strong>文件</strong>中。</p>
<p>计算机的<strong>文件系统</strong>是一种存储和组织计算机数据的方法，它使得对数据的访问和查找变得容易，文件系统使用<strong>文件</strong>和<strong>树形目录</strong>的抽象逻辑概念代替了硬盘、光盘、闪存等物理设备的数据块概念，用户使用文件系统来保存数据时，不必关心数据实际保存在硬盘的哪个数据块上，只需要记住这个文件的路径和文件名。在写入新数据之前，用户不必关心硬盘上的哪个数据块没有被使用，硬盘上的存储空间管理（分配和释放）功能由文件系统自动完成，用户只需要记住数据被写入到了哪个文件中。</p>
<p>在学习文件操作之前，先来回顾一下编码的相关以及先关数据类型的知识。</p>
<ul>
<li><p>字符串类型（<code>str</code>），在程序中用于表示文字信息，本质上是<code>unicode</code>编码中的二进制。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">"张亚飞"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>字节类型（bytes）</p>
<ul>
<li><p>可表示文字信息，本质上是utf-8/gbk等编码的二进制（对unicode进行压缩，方便文件存储和网络传输。）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">"张亚飞"</span></span><br><span class="line">data = name.encode(<span class="string">'utf-8'</span>)</span><br><span class="line">print(data) <span class="comment"># b'\xe6\xad\xa6\xe6\xb2\x9b\xe9\xbd\x90'</span></span><br><span class="line"></span><br><span class="line">result = data.decode(<span class="string">'utf-8'</span>)</span><br><span class="line">print(result) <span class="comment"># "张亚飞"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>可表示原始二进制（图片、文件等信息）</p>
</li>
</ul>
</li>
</ul>
<p>file 对象使用 open 函数来创建，下表列出了 file 对象常用的函数：</p>
<table>
<thead>
<tr>
<th align="left">号</th>
<th align="left">方法及描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><code>file.close(</code>)关闭文件。关闭后文件不能再进行读写操作。</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><code>file.flush()</code>刷新文件内部缓冲，直接把内部缓冲区的数据立刻写入文件, 而不是被动的等待输出缓冲区写入。</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><code>file.fileno()</code>返回一个整型的文件描述符(file descriptor FD 整型), 可以用在如os模块的read方法等一些底层操作上。</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"><code>file.isatty()</code>如果文件连接到一个终端设备返回 True，否则返回 False。</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left"><code>file.read([size]))</code>从文件读取指定的字节数，如果未给定或为负则读取所有。</td>
</tr>
<tr>
<td align="left">7</td>
<td align="left"><code>file.readline([size])</code>读取整行，包括 “\n” 字符。</td>
</tr>
<tr>
<td align="left">8</td>
<td align="left"><code>file.readlines([sizeint])</code>读取所有行并返回列表，若给定sizeint&gt;0，返回总和大约为sizeint字节的行, 实际读取值可能比 <code>sizeint</code> 较大, 因为需要填充缓冲区。</td>
</tr>
<tr>
<td align="left">9</td>
<td align="left"><code>file.seek(offset[, whence)</code>移动文件读取指针到指定位置</td>
</tr>
<tr>
<td align="left">10</td>
<td align="left"><code>file.tell()</code>返回文件当前位置。</td>
</tr>
<tr>
<td align="left">11</td>
<td align="left"><code>file.truncate([size])</code>从文件的首行首字符开始截断，截断文件为 size 个字符，无 size 表示从当前位置截断；截断之后后面的所有字符被删除，其中 windows 系统下的换行代表2个字符大小。</td>
</tr>
<tr>
<td align="left">12</td>
<td align="left"><code>file.write(str)</code>将字符串写入文件，返回的是写入的字符长度。</td>
</tr>
<tr>
<td align="left">13</td>
<td align="left"><code>file.writelines(sequence)</code>向文件写入一个序列字符串列表，如果需要换行则要自己加入每行的换行符。</td>
</tr>
</tbody></table>
<h1 id="一、打开文件"><a href="#一、打开文件" class="headerlink" title="一、打开文件"></a>一、打开文件</h1><p>了解了文件系统，我们可以非常方便的通过文件来读写数据；我们在使用文件之前要先将文件打开，在Python中要实现文件操作是非常简单的。我们可以使用Python内置的<code>open</code>函数来打开文件，open函数语法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">open(file, mode=<span class="string">'r'</span>, buffering=<span class="literal">None</span>, encoding=<span class="literal">None</span>, errors=<span class="literal">None</span>, newline=<span class="literal">None</span>, closefd=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>

<p>open函数中的参数有很多，这里介绍5个常用参数：</p>
<ul>
<li><p>file参数<br>file参数用于表示要打开的文件， 可以是字符串或整数。 如果file是字符串， 则表示文件名， 文件名既可以是当前目录的相对路径， 也可以是绝对路径； 如果file是整数， 则表示一个已经打开的文件 。</p>
</li>
<li><p>mode参数</p>
<p>mode参数用于设置文件操作模式， 用字符串表示， 这里所说的操作模式是指要打开什么样的文件（字符文件或二进制文件）以及做什么样的操作（读、写或追加），具体如下表所示。</p>
<table>
<thead>
<tr>
<th align="left">模式</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">t</td>
<td align="left">文本模式 (默认)。</td>
</tr>
<tr>
<td align="left">x</td>
<td align="left">写模式，新建一个文件，如果该文件已存在则会报错。</td>
</tr>
<tr>
<td align="left">b</td>
<td align="left">二进制模式。</td>
</tr>
<tr>
<td align="left">+</td>
<td align="left">打开一个文件进行更新(可读可写)。</td>
</tr>
<tr>
<td align="left">U</td>
<td align="left">通用换行模式（不推荐）。</td>
</tr>
<tr>
<td align="left">r</td>
<td align="left">以只读方式打开文件。文件的指针将会放在文件的开头。这是默认模式。</td>
</tr>
<tr>
<td align="left">rb</td>
<td align="left">以二进制格式打开一个文件用于只读。文件指针将会放在文件的开头。这是默认模式。一般用于非文本文件如图片等。</td>
</tr>
<tr>
<td align="left">r+</td>
<td align="left">打开一个文件用于读写。文件指针将会放在文件的开头。</td>
</tr>
<tr>
<td align="left">rb+</td>
<td align="left">以二进制格式打开一个文件用于读写。文件指针将会放在文件的开头。一般用于非文本文件如图片等。</td>
</tr>
<tr>
<td align="left">w</td>
<td align="left">打开一个文件只用于写入。如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被删除。如果该文件不存在，创建新文件。</td>
</tr>
<tr>
<td align="left">wb</td>
<td align="left">以二进制格式打开一个文件只用于写入。如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被删除。如果该文件不存在，创建新文件。一般用于非文本文件如图片等。</td>
</tr>
<tr>
<td align="left">w+</td>
<td align="left">打开一个文件用于读写。如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被删除。如果该文件不存在，创建新文件。</td>
</tr>
<tr>
<td align="left">wb+</td>
<td align="left">以二进制格式打开一个文件用于读写。如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被删除。如果该文件不存在，创建新文件。一般用于非文本文件如图片等。</td>
</tr>
<tr>
<td align="left">a</td>
<td align="left">打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。也就是说，新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入。</td>
</tr>
<tr>
<td align="left">ab</td>
<td align="left">以二进制格式打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。也就是说，新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入。</td>
</tr>
<tr>
<td align="left">a+</td>
<td align="left">打开一个文件用于读写。如果该文件已存在，文件指针将会放在文件的结尾。文件打开时会是追加模式。如果该文件不存在，创建新文件用于读写。</td>
</tr>
<tr>
<td align="left">ab+</td>
<td align="left">以二进制格式打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。如果该文件不存在，创建新文件用于读写。</td>
</tr>
</tbody></table>
<p>下图展示了如何根据程序的需要来设置<code>open</code>函数的操作模式。</p>
<p><img src="/2021/11/24/python/python_%E5%9F%BA%E7%A1%80%E7%AF%87/%E7%AC%AC20%E7%AF%87%EF%BC%9A%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/file-open-mode.png" alt="文件操作模式"></p>
<table>
<thead>
<tr>
<th align="center">模式</th>
<th align="center">r</th>
<th align="center">r+</th>
<th align="center">w</th>
<th align="center">w+</th>
<th align="center">a</th>
<th align="center">a+</th>
</tr>
</thead>
<tbody><tr>
<td align="center">读</td>
<td align="center">+</td>
<td align="center">+</td>
<td align="center"></td>
<td align="center">+</td>
<td align="center"></td>
<td align="center">+</td>
</tr>
<tr>
<td align="center">写</td>
<td align="center"></td>
<td align="center">+</td>
<td align="center">+</td>
<td align="center">+</td>
<td align="center">+</td>
<td align="center">+</td>
</tr>
<tr>
<td align="center">创建</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">+</td>
<td align="center">+</td>
<td align="center">+</td>
<td align="center">+</td>
</tr>
<tr>
<td align="center">覆盖</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">+</td>
<td align="center">+</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">指针在开始</td>
<td align="center">+</td>
<td align="center">+</td>
<td align="center">+</td>
<td align="center">+</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">指针在结尾</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<ul>
<li><p><code>r+</code>、<code>rt+</code>、<code>rb+</code>，默认光标位置：起始位置</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 文件内容：床前明月光</span></span><br><span class="line">file_object = open(<span class="string">'info.txt'</span>, mode=<span class="string">'r+'</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取内容</span></span><br><span class="line">data = file_object.read()</span><br><span class="line">print(data) <span class="comment"># 床前明月光</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 写入内容</span></span><br><span class="line">file_object.write(<span class="string">"你好呀"</span>)</span><br><span class="line"></span><br><span class="line">file_object.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 文件内容为 床前明月光你好呀</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 文件内容：床前明月光</span></span><br><span class="line">file_object = open(<span class="string">'info.txt'</span>, mode=<span class="string">'r+'</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 写入内容</span></span><br><span class="line">file_object.write(<span class="string">"李白"</span>)  <span class="comment"># 李白明月光</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取内容</span></span><br><span class="line">data = file_object.read()</span><br><span class="line">print(data)  <span class="comment"># 明月光</span></span><br><span class="line"></span><br><span class="line">file_object.close()</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>w+</code>、<code>wt+</code>、<code>wb+</code>，默认光标位置：起始位置（清空文件）</p>
<p><code>w+</code>如果先写入，会将原内容抹去（这其实和w一样），再读的时候要注意加个<code>f.seek()</code>。<strong>如果先读取，会读取不到内容（因为用的是w+,会先抹去文件里面的内容），直接就写入了。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">file_object = open(<span class="string">'info.txt'</span>, mode=<span class="string">'wt+'</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取内容 清空</span></span><br><span class="line">data = file_object.read()</span><br><span class="line">print(data)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 写入内容</span></span><br><span class="line">file_object.write(<span class="string">"你好呀"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将光标位置重置起始</span></span><br><span class="line">file_object.seek(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取内容</span></span><br><span class="line">data = file_object.read()</span><br><span class="line">print(data)  <span class="comment"># 你好呀</span></span><br><span class="line"></span><br><span class="line">file_object.close()</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>x+</code>、<code>xt+</code>、<code>xb+</code>，默认光标位置：起始位置（新文件）</p>
</li>
<li><p><code>a+</code>、<code>at+</code>、<code>ab+</code>，默认光标位置：末尾</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">file_object = open(<span class="string">'info.txt'</span>, mode=<span class="string">'at+'</span>)</span><br><span class="line"><span class="comment"># 写入内容</span></span><br><span class="line">file_object.write(<span class="string">"张亚飞"</span>)</span><br><span class="line"><span class="comment"># 将光标位置重置起始</span></span><br><span class="line">file_object.seek(<span class="number">0</span>)</span><br><span class="line"><span class="comment"># 读取内容</span></span><br><span class="line">data = file_object.read()</span><br><span class="line">print(data)  <span class="comment"># 床前明月光张亚飞</span></span><br><span class="line">file_object.close()</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>buffering：</p>
<p>设置缓冲。文件io操作的缓冲行为分为：<strong>全缓冲：</strong>同系统及磁盘块大小有关，n个字节后执行一次写入操作。<strong>行缓冲：</strong>遇到换行符执行一次写操作。<strong>无缓冲：</strong>立刻执行写操作。buffering默认为-1，系统默认的全缓冲，buffering可以设置为大于1的任意整数，字节数为buffering的全缓冲，buffering=1，设置为行缓冲模式，buffering=0， 设置为无缓冲模式。</p>
</li>
<li><p>encoding参数</p>
<p>encoding用来指定打开文件时的文件编码， 默认是UTF-8编码， 主要用于打开文本文件。如果需要指定字符编码，可以传入encoding参数，如果不指定，默认值是None，那么在读取文件时使用的是操作系统默认的编码。需要提醒大家，如果不能保证保存文件时使用的编码方式与encoding参数指定的编码方式是一致的，那么就可能因无法解码字符而导致读取文件失败。</p>
</li>
<li><p>errors参数</p>
<p>errors参数用来指定在文本文件发生编码错误时如何处理。 推荐errors参数的取值为’ignore’， 表示在遇到编码错误时忽略该错误， 程序会继续执行， 不会退出。  </p>
</li>
</ul>
<p>在使用<code>open</code>函数时，如果打开的文件是字符文件（文本文件），可以通过<code>encoding</code>参数来指定读写文件使用的字符编码。没有指定该参数，则使用系统默认的编码作为读写文件的编码。</p>
<p>使用示例：</p>
<ul>
<li><p>读取文本文件</p>
<p>info.txt</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">床前明月光</span><br><span class="line">疑是地上霜</span><br></pre></td></tr></table></figure>

<p>代码</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.打开文件</span></span><br><span class="line"><span class="comment">#	- 路径：</span></span><br><span class="line"><span class="comment">#		相对路径：'info.txt'</span></span><br><span class="line"><span class="comment">#		绝对路径：'G:/学习/Python学习/Python基础/code/chapter20/info.txt'</span></span><br><span class="line"><span class="comment"># 	- 模式</span></span><br><span class="line"><span class="comment"># 		rb，表示读取文件原始的二进制（r, 读 read；b, 二进制 binary；）</span></span><br><span class="line"><span class="comment"># 1.打开文件</span></span><br><span class="line">file_object = open(<span class="string">'info.txt'</span>, mode=<span class="string">'rb'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.读取文件内容，并赋值给data</span></span><br><span class="line">data = file_object.read()</span><br><span class="line">print(data)  <span class="comment"># b'\xe5\xba\x8a\xe5\x89\x8d\xe6\x98\x8e\xe6\x9c\x88\xe5\x85\x89\r\n\xe7\x96\x91\xe6\x98\xaf\xe5\x9c\xb0\xe4\xb8\x8a\xe9\x9c\x9c'</span></span><br><span class="line">text = data.decode(<span class="string">'utf-8'</span>)</span><br><span class="line">print(text)</span><br><span class="line"><span class="comment"># 床前明月光</span></span><br><span class="line"><span class="comment"># 疑是地上霜</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.关闭文件</span></span><br><span class="line">file_object.close()</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">file_object = open(<span class="string">'info.txt'</span>, mode=<span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line"><span class="comment"># 2.读取文件内容，并赋值给data</span></span><br><span class="line">data = file_object.read()</span><br><span class="line">print(data) </span><br><span class="line"><span class="comment"># 床前明月光</span></span><br><span class="line"><span class="comment"># 疑是地上霜</span></span><br><span class="line"><span class="comment"># 3.关闭文件</span></span><br><span class="line">file_object.close()</span><br></pre></td></tr></table></figure>
</li>
<li><p>读取图片等非文本内容文件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">file_object = open(<span class="string">'图片.jpg'</span>, mode=<span class="string">'rb'</span>)</span><br><span class="line">data = file_object.read()</span><br><span class="line">print(data)  <span class="comment"># b'\xff\xd8\xff\xe0\x00\x10JFIF\x00\x01\x01\x01\x00`\x00...'</span></span><br><span class="line">file_object.close()</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><strong>注意事项</strong>：</p>
<ul>
<li><p>路径</p>
<ul>
<li><p>相对路径：相对与某个基准目录的路径，默认基准目录位于运行代码所在路径。</p>
<p>例如，file_example.py和图片.jpg在同一目录下，那么file_example.py中读取图片.jpg的相对路径可以写成</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> G:\学习\Python学习\Python基础\code\chapter20 的目录</span><br><span class="line"></span><br><span class="line"><span class="number">2020</span>/<span class="number">12</span>/<span class="number">23</span>  <span class="number">16</span>:<span class="number">39</span>    &lt;DIR&gt;          .</span><br><span class="line"><span class="number">2020</span>/<span class="number">12</span>/<span class="number">23</span>  <span class="number">16</span>:<span class="number">39</span>    &lt;DIR&gt;          ..</span><br><span class="line"><span class="number">2020</span>/<span class="number">12</span>/<span class="number">23</span>  <span class="number">16</span>:<span class="number">39</span>             <span class="number">1</span>,<span class="number">332</span> file_example1.py</span><br><span class="line"><span class="number">2020</span>/<span class="number">12</span>/<span class="number">23</span>  <span class="number">16</span>:<span class="number">31</span>                <span class="number">32</span> info.txt</span><br><span class="line"><span class="number">2020</span>/<span class="number">12</span>/<span class="number">23</span>  <span class="number">16</span>:<span class="number">38</span>            <span class="number">99</span>,<span class="number">579</span> 图片.jpg</span><br><span class="line">               <span class="number">3</span> 个文件        <span class="number">100</span>,<span class="number">943</span> 字节</span><br><span class="line">               <span class="number">2</span> 个目录 <span class="number">574</span>,<span class="number">338</span>,<span class="number">805</span>,<span class="number">760</span> 可用字节</span><br><span class="line"></span><br><span class="line">G:\学习\Python学习\Python基础\code\chapter20&gt;python file_example1.py</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file_object = open(<span class="string">'图片.jpg'</span>, mode=<span class="string">'rb'</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>绝对路径：绝对路径是指文件在硬盘上存储的完整路径。</p>
<p>上例中的绝对路径为</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">file_object = open(<span class="string">'G:/学习/Python学习/Python基础/code/chapter20/图片.jpg'</span>, mode=<span class="string">'rb'</span>)</span><br><span class="line">data = file_object.read()</span><br><span class="line">print(data)  <span class="comment"># b'\xff\xd8\xff\xe0\x00\x10JFIF\x00\x01\x01\x01\x00`\x00...'</span></span><br><span class="line">file_object.close()</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>读文件时，文件不存在程序会报错。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"G:/学习/Python学习/Python基础/code/chapter20/file_example1.py"</span>, line <span class="number">36</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    file_object = open(<span class="string">'图片1.jpg'</span>, mode=<span class="string">'rb'</span>)</span><br><span class="line">FileNotFoundError: [Errno <span class="number">2</span>] No such file <span class="keyword">or</span> directory: <span class="string">'图片1.jpg'</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 判断路径是否存在？</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">file_path = <span class="string">"G:\学习\Python学习\Python基础\code\chapter20\info.txt"</span></span><br><span class="line">exists = os.path.exists(file_path)</span><br><span class="line"><span class="keyword">if</span> exists:</span><br><span class="line">    <span class="comment"># 1.打开文件</span></span><br><span class="line">    file_object = open(<span class="string">'info.txt'</span>, mode=<span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">    <span class="comment"># 2.读取文件内容，并赋值给data</span></span><br><span class="line">    data = file_object.read()</span><br><span class="line">    <span class="comment"># 3.关闭文件</span></span><br><span class="line">    file_object.close()</span><br><span class="line">    print(data)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"文件不存在"</span>)</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h1 id="二、关闭文件"><a href="#二、关闭文件" class="headerlink" title="二、关闭文件"></a>二、关闭文件</h1><p>在打开文件后， 如果不再使用该文件， 则应该将其关闭， 会用到close（） 方法。  </p>
<ul>
<li><p>在finally代码块中关闭文件<br>对文件的操作往往会抛出异常， 为了保证对文件的操作无论是正常结束还异常结束， 都能够关闭文件， 我们应该将对close（） 方法的调用放在异常处理的finally代码块中。  </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    f = open(<span class="string">'data.txt'</span>, mode=<span class="string">'r'</span>)</span><br><span class="line">    print(<span class="string">'文件打开成功'</span>)</span><br><span class="line">    print(file.read())</span><br><span class="line">    ...</span><br><span class="line"><span class="keyword">except</span> FileNotFoundError:</span><br><span class="line">    print(<span class="string">'文件不存在'</span>)</span><br><span class="line"><span class="keyword">except</span> OSError:</span><br><span class="line">    print(<span class="string">'处理OS异常'</span>)</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    <span class="keyword">if</span> f <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        f.close()</span><br><span class="line">        print(<span class="string">'文件关闭成功'</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>在with as 代码块中关闭文件（<strong>上下文语法</strong>）</p>
<p>对于<code>open</code>函数返回的文件对象，还可以使用<code>with</code>上下文语法在文件操作完成后自动执行文件对象的<code>close</code>方法，这样可以让代码变得更加简单，因为不需要再写<code>finally</code>代码块来执行关闭文件释放资源的操作。需要提醒大家的是，并不是所有的对象都可以放在<code>with</code>上下文语法中，只有符合<strong>上下文管理器协议</strong>（有<code>__enter__</code>和<code>__exit__</code>魔术方法）的对象才能使用这种语法，Python标准库中的<code>contextlib</code>模块也提供了对<code>with</code>上下文语法的支持，后面再为大家进行讲解。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'data.txt'</span>, <span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> file:</span><br><span class="line">        print(file.read())</span><br><span class="line"><span class="keyword">except</span> FileNotFoundError:</span><br><span class="line">    print(<span class="string">'无法打开指定的文件!'</span>)</span><br><span class="line"><span class="keyword">except</span> LookupError:</span><br><span class="line">    print(<span class="string">'指定了未知的编码!'</span>)</span><br><span class="line"><span class="keyword">except</span> UnicodeDecodeError:</span><br><span class="line">    print(<span class="string">'读取文件时解码错误!'</span>)</span><br></pre></td></tr></table></figure>

<p>with as提供了一个代码块， 在as后面声明一个资源变量， 在with as代码块结束之后自动释放资源。  </p>
<p>在Python 2.7 后，with又支持同时对多个文件的上下文进行管理，即：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> open(<span class="string">"xxxx.txt"</span>, mode=<span class="string">'rb'</span>) <span class="keyword">as</span> f1, open(<span class="string">"xxxx.txt"</span>, mode=<span class="string">'rb'</span>) <span class="keyword">as</span> f2:</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>



</li>
</ul>
<h1 id="三、读写文本文件"><a href="#三、读写文本文件" class="headerlink" title="三、读写文本文件"></a>三、读写文本文件</h1><ul>
<li><code>read(size)</code>：从文件中读取字符串， size限制读取的字符数， 默认size=-1，指对读取所有内容。  </li>
<li><code>readline(size)</code>：在读取到换行符或文件尾时返回单行字符串。 如果已经到文件尾， 则返回一个空字符串。 size是限制读取的字符数， size=-1表示没有限制。  </li>
<li><code>readlines()</code>: 读取文件数据到一个字符串列表中， 每一行数据都是列表的一个元素。  </li>
<li><code>write(s)</code>：将字符串s写入文件中， 并返回写入的字符数。  </li>
<li><code>writelines(lines)</code>： 向文件中写入一个字符串列表。 不添加行分隔符， 因此通常为每一行末尾都提供行分隔符  </li>
<li><code>flush()</code>：刷新写缓冲区， 在文件没有关闭的情况下将数据写入文件中。</li>
</ul>
<p><strong>示例</strong></p>
<ul>
<li><p>read()， 读</p>
<ul>
<li><p>读所有【常用】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f = open(<span class="string">'info.txt'</span>, mode=<span class="string">'r'</span>,encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">data = f.read()</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f = open(<span class="string">'info.txt'</span>, mode=<span class="string">'rb'</span>)</span><br><span class="line">data = f.read()</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>
</li>
<li><p>读n个字符（字节）【会用到】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 文件内容 张亚飞</span></span><br><span class="line">f = open(<span class="string">'info.txt'</span>, mode=<span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line"><span class="comment"># 读1个字符</span></span><br><span class="line">data = f.read(<span class="number">1</span>)</span><br><span class="line">f.close()</span><br><span class="line"></span><br><span class="line">print(data) <span class="comment"># 张</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">f = open(<span class="string">'info.txt'</span>, mode=<span class="string">'r'</span>,encoding=<span class="string">'utf-8'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读1个字符</span></span><br><span class="line">chunk1 = f.read(<span class="number">1</span>)</span><br><span class="line">chunk2 = f.read(<span class="number">2</span>)</span><br><span class="line">print(chunk1,chunk2) <span class="comment"># 张 亚飞</span></span><br><span class="line"></span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">f = open(<span class="string">'info.txt'</span>, mode=<span class="string">'rb'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读1个字节</span></span><br><span class="line">data = f.read(<span class="number">3</span>)</span><br><span class="line">f.close()</span><br><span class="line"></span><br><span class="line">print(data, type(data))  <span class="comment"># b'\xe5\xba\x8a' &lt;class 'bytes'&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">f = open(<span class="string">'info.txt'</span>, mode=<span class="string">'rb'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读1个字节</span></span><br><span class="line">chunk1 = f.read(<span class="number">3</span>)</span><br><span class="line">chunk2 = f.read(<span class="number">3</span>)</span><br><span class="line">chunk3 = f.read(<span class="number">1</span>)</span><br><span class="line">print(chunk1,chunk2,chunk3) <span class="comment"># b'\xe5\xba\x8a' b'\xe5\x89\x8d' b'\xe6'</span></span><br><span class="line"></span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>



</li>
</ul>
</li>
</ul>
<ul>
<li><p><code>readline()</code>方法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">f = open(<span class="string">'info.txt'</span>, mode=<span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line"></span><br><span class="line">v1 = f.readline()</span><br><span class="line">print(v1)  <span class="comment"># 床前明月光\n</span></span><br><span class="line"></span><br><span class="line">v2 = f.readline()</span><br><span class="line">print(v2)  <span class="comment"># 疑是地上霜\n</span></span><br><span class="line"></span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">f = open(<span class="string">'info.txt'</span>, mode=<span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">v1 = f.readline()</span><br><span class="line">print(v1)  <span class="comment"># 床前明月光\n</span></span><br><span class="line">f.close()</span><br><span class="line"></span><br><span class="line">f = open(<span class="string">'info.txt'</span>, mode=<span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">v2 = f.readline()</span><br><span class="line">print(v2)  <span class="comment"># 床前明月光\n</span></span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>



</li>
</ul>
<ul>
<li><p><code>readlines()</code>，读所有行，每行作为列表的一个元素</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">f = open(<span class="string">'info.txt'</span>, mode=<span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">data_list = f.readlines()</span><br><span class="line">f.close()</span><br><span class="line">print(data_list) <span class="comment"># ['床前明月光\n', '疑是地上霜']</span></span><br></pre></td></tr></table></figure>



</li>
</ul>
<ul>
<li><p>for in循环，读大文件（readline加强版）【常见】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">f = open(<span class="string">'info.txt'</span>, mode=<span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">    print(line.strip())</span><br><span class="line">f.close()</span><br><span class="line"><span class="comment"># 床前明月光</span></span><br><span class="line"><span class="comment"># 疑是地上霜</span></span><br></pre></td></tr></table></figure>




</li>
</ul>
<ul>
<li><p>write 写入</p>
<p>如果要向文件中写入内容，可以在打开文件时使用<code>w</code>或者<code>a</code>作为操作模式，前者会截断之前的文本内容写入新的内容，后者是在原来内容的尾部追加新的内容。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f = open(<span class="string">'info.txt'</span>, mode=<span class="string">'a'</span>,encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">f.write(<span class="string">"张亚飞"</span>)</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f = open(<span class="string">'info.txt'</span>, mode=<span class="string">'ab'</span>)</span><br><span class="line">f.write( <span class="string">"张亚飞"</span>.encode(<span class="string">"utf-8"</span>) )</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>



</li>
</ul>
<ul>
<li><p>flush，刷到硬盘</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">f = open(<span class="string">'info.txt'</span>, mode=<span class="string">'a'</span>,encoding=<span class="string">'utf-8'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="comment"># 不是写到了硬盘，而是写在缓冲区，系统会将缓冲区的内容刷到硬盘。</span></span><br><span class="line">	f.write(<span class="string">"张亚飞"</span>)</span><br><span class="line">    f.flush()</span><br><span class="line"></span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">file_object = open(<span class="string">'files/account.txt'</span>, mode=<span class="string">'a'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    user = input(<span class="string">"用户名："</span>)</span><br><span class="line">    <span class="keyword">if</span> user.upper() == <span class="string">"Q"</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    pwd = input(<span class="string">"密码："</span>)</span><br><span class="line">    data = <span class="string">"&#123;&#125;-&#123;&#125;\n"</span>.format(user, pwd)</span><br><span class="line">    file_object.write(data)</span><br><span class="line">    file_object.flush()</span><br><span class="line"></span><br><span class="line">file_object.close()</span><br></pre></td></tr></table></figure>



</li>
</ul>
<ul>
<li><p>移动光标位置（字节）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">f = open(<span class="string">'info.txt'</span>, mode=<span class="string">'r+'</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 移动到指定字节的位置</span></span><br><span class="line">f.seek(<span class="number">3</span>)</span><br><span class="line">f.write(<span class="string">"张亚飞"</span>)</span><br><span class="line"></span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>

<p>注意：在a模式下，调用write在文件中写入内容时，永远只能将内容写入到尾部，不会写到光标的位置。</p>
</li>
</ul>
<ul>
<li><p>获取当前光标位置</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">f = open(<span class="string">'info.txt'</span>, mode=<span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line"></span><br><span class="line">p1 = f.tell()</span><br><span class="line">print(p1)  <span class="comment"># 0</span></span><br><span class="line"></span><br><span class="line">f.read(<span class="number">3</span>)  <span class="comment"># 读3个字符 3*3=9字节</span></span><br><span class="line"></span><br><span class="line">p2 = f.tell()</span><br><span class="line">print(p2)  <span class="comment"># 9</span></span><br><span class="line"></span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">f = open(<span class="string">'info.txt'</span>, mode=<span class="string">'rb'</span>)</span><br><span class="line"></span><br><span class="line">p1 = f.tell()</span><br><span class="line">print(p1)  <span class="comment"># 0</span></span><br><span class="line"></span><br><span class="line">f.read(<span class="number">3</span>)  <span class="comment"># 读3个字节</span></span><br><span class="line"></span><br><span class="line">p2 = f.tell()</span><br><span class="line">print(p2)  <span class="comment"># 3</span></span><br><span class="line"></span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>



</li>
</ul>
<p><strong>基础案例</strong></p>
<ul>
<li><p>案例1：复制一个文件到另一个文件中</p>
<p>将原始文件<code>src_file.txt</code>中的内容写入到文件<code>dest.txt</code>中。注意，<code>src_file.txt</code>以<code>gbk</code>方式编码，要求用<code>utf-8</code>写入。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Beautiful <span class="keyword">is</span> better than ugly.</span><br><span class="line">Explicit <span class="keyword">is</span> better than implicit.</span><br><span class="line">Simple <span class="keyword">is</span> better than complex.</span><br><span class="line">Complex <span class="keyword">is</span> better than complicated.</span><br><span class="line">Flat <span class="keyword">is</span> better than nested.</span><br><span class="line">Sparse <span class="keyword">is</span> better than dense.</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>示例代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> open(<span class="string">'src_file.ttx'</span>, mode=<span class="string">'r'</span>, encoding=<span class="string">'gbk'</span>) <span class="keyword">as</span> f1:</span><br><span class="line">    content = f1.read()</span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'dest_file.txt'</span>, mode=<span class="string">'w'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f2:</span><br><span class="line">        f2.write(content)</span><br><span class="line">    print(<span class="string">'文件复制成功'</span>)</span><br></pre></td></tr></table></figure>



</li>
</ul>
<ul>
<li><p>案例2：用户注册，获取用户输入用户名和密码，将其写入到文件中</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">user = input(<span class="string">"请输入用户名："</span>)</span><br><span class="line">pwd = input(<span class="string">"请输入密码："</span>)</span><br><span class="line">data = <span class="string">"&#123;&#125;-&#123;&#125;"</span>.format(user, pwd)</span><br><span class="line">file_object = open(<span class="string">"files/info.txt"</span>, mode=<span class="string">'wt'</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">file_object.write(data)</span><br><span class="line">file_object.close()</span><br></pre></td></tr></table></figure>



</li>
</ul>
<ul>
<li><p>案例3：多用户注册</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># w写入文件，先清空文件；再在文件中写入内容。</span></span><br><span class="line">file_object = open(<span class="string">"files/info.txt"</span>, mode=<span class="string">'wt'</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    user = input(<span class="string">"请输入用户名："</span>)</span><br><span class="line">    <span class="keyword">if</span> user.upper() == <span class="string">"Q"</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    pwd = input(<span class="string">"请输入密码："</span>)</span><br><span class="line">    data = <span class="string">"&#123;&#125;-&#123;&#125;\n"</span>.format(user, pwd)</span><br><span class="line"></span><br><span class="line">    file_object.write(data)</span><br><span class="line">file_object.close()</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h1 id="四、读写二进制文件"><a href="#四、读写二进制文件" class="headerlink" title="四、读写二进制文件"></a>四、读写二进制文件</h1><p>读写二进制文件跟读写文本文件的操作类似，但是需要注意，在使用<code>open</code>函数打开文件时，如果要进行读操作，操作模式是<code>&#39;rb&#39;</code>，如果要进行写操作，操作模式是<code>&#39;wb&#39;</code>。还有一点，读写文本文件时，<code>read</code>方法的返回值以及<code>write</code>方法的参数是<code>str</code>对象（字符串），而读写二进制文件时，<code>read</code>方法的返回值以及<code>write</code>方法的参数是<code>bytes-like</code>对象（字节串）。下面的代码实现了将当前路径下名为<code>guido.jpg</code>的图片文件复制到<code>吉多.jpg</code>文件中的操作。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'1.jpg'</span>, <span class="string">'rb'</span>) <span class="keyword">as</span> file1:</span><br><span class="line">        data = file1.read()</span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'2.jpg'</span>, <span class="string">'wb'</span>) <span class="keyword">as</span> file2:</span><br><span class="line">        file2.write(data)</span><br><span class="line"><span class="keyword">except</span> FileNotFoundError:</span><br><span class="line">    print(<span class="string">'指定的文件无法打开.'</span>)</span><br><span class="line"><span class="keyword">except</span> IOError:</span><br><span class="line">    print(<span class="string">'读写文件时出现错误.'</span>)</span><br><span class="line">print(<span class="string">'程序执行结束.'</span>)</span><br></pre></td></tr></table></figure>

<p>如果要复制的图片文件很大，一次将文件内容直接读入内存中可能会造成非常大的内存开销，为了减少对内存的占用，可以为<code>read</code>方法传入<code>size</code>参数来指定每次读取的字节数，通过循环读取和写入的方式来完成上面的操作，代码如下所示。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'1.jpg'</span>, <span class="string">'rb'</span>) <span class="keyword">as</span> file1, \</span><br><span class="line">        open(<span class="string">'2.jpg'</span>, <span class="string">'wb'</span>) <span class="keyword">as</span> file2:</span><br><span class="line">        data = file1.read(<span class="number">512</span>)</span><br><span class="line">        <span class="keyword">while</span> data:</span><br><span class="line">            file2.write(data)</span><br><span class="line">            data = file1.read(<span class="number">512</span>)</span><br><span class="line"><span class="keyword">except</span> FileNotFoundError:</span><br><span class="line">    print(<span class="string">'指定的文件无法打开.'</span>)</span><br><span class="line"><span class="keyword">except</span> IOError:</span><br><span class="line">    print(<span class="string">'读写文件时出现错误.'</span>)</span><br><span class="line">print(<span class="string">'程序执行结束.'</span>)</span><br></pre></td></tr></table></figure>



<p><strong>小高级案例</strong>：超前</p>
<p>利用Python想某个网址发送请求并获取结果（利用第三方的模块）</p>
<ul>
<li><p>下载第三方模块<code>requests</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install requests</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">res = requests.get(url=<span class="string">"网址"</span>)</span><br><span class="line">print(res)</span><br></pre></td></tr></table></figure>
</li>
<li><p>案例1：去网上下载一点文本，文本信息写入文件。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">res = requests.get(url=<span class="string">"https://movie.douban.com/j/search_subjects?type=movie&amp;tag=%E7%83%AD%E9%97%A8&amp;sort=recommend&amp;page_limit=20&amp;page_start=20"</span>,</span><br><span class="line">    headers=&#123;<span class="string">"User-Agent"</span>: <span class="string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.111 Safari/537.36"</span>&#125;</span><br><span class="line">)</span><br><span class="line"><span class="comment"># 网络传输的原始二进制信息（bytes）</span></span><br><span class="line"><span class="comment"># res.content</span></span><br><span class="line">file_object = open(<span class="string">'movie.txt'</span>, mode=<span class="string">'wb'</span>)</span><br><span class="line">file_object.write(res.content)</span><br><span class="line">file_object.close()</span><br></pre></td></tr></table></figure>
</li>
<li><p>案例2：去网上下载一张图片，图片写入本地文件。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">res = requests.get(url=<span class="string">"https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1031041206,3898962502&amp;fm=26&amp;gp=0.jpg"</span>,headers=&#123;<span class="string">"User-Agent"</span>: <span class="string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.111 Safari/537.36"</span>&#125;</span><br><span class="line">)</span><br><span class="line"><span class="comment"># 网络传输的原始二进制信息（bytes）</span></span><br><span class="line"><span class="comment"># res.content</span></span><br><span class="line">file_object = open(<span class="string">'img1.png'</span>, mode=<span class="string">'wb'</span>)</span><br><span class="line">file_object.write(res.content)</span><br><span class="line">file_object.close()</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>注意事项：</p>
<ul>
<li>路径<ul>
<li>绝对路径</li>
<li>相对路径</li>
</ul>
</li>
<li>文件不存在时，w模式会新建然后再写入内容；文件存在时，w模式会清空文件再写入内容。</li>
</ul>
<h1 id="五、文件和文件夹操作"><a href="#五、文件和文件夹操作" class="headerlink" title="五、文件和文件夹操作"></a>五、文件和文件夹操作</h1><p>除了文件读写之外，关于文件的其他操纵可以通过<code>os</code>模块。</p>
<h2 id="1-文件删除"><a href="#1-文件删除" class="headerlink" title="1. 文件删除"></a>1. 文件删除</h2><p>语法：你可以用<code>remove()</code>方法删除文件，需要提供要删除的文件名作为参数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.remove(file_name)</span><br></pre></td></tr></table></figure>

<p>示例：下例将删除一个已经存在的文件test2.txt。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="comment"># 删除一个已经存在的文件test2.txt</span></span><br><span class="line">os.remove(<span class="string">"test2.txt"</span>)</span><br></pre></td></tr></table></figure>



<h2 id="2-文件重命名"><a href="#2-文件重命名" class="headerlink" title="2. 文件重命名"></a>2. 文件重命名</h2><p>语法：rename()方法需要两个参数，当前的文件名和新文件名。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.rename(current_file_name, new_file_name)</span><br></pre></td></tr></table></figure>

<p>例子：下例将重命名一个已经存在的文件test1.txt。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="comment"># 重命名文件test1.txt到test2.txt。</span></span><br><span class="line">os.rename( <span class="string">"test1.txt"</span>, <span class="string">"test2.txt"</span> )</span><br></pre></td></tr></table></figure>



<h2 id="3-创建和删除文件夹"><a href="#3-创建和删除文件夹" class="headerlink" title="3. 创建和删除文件夹"></a>3. 创建和删除文件夹</h2><ul>
<li><p>创建文件夹</p>
<p>语法：可以使用os模块的mkdir()方法在当前目录下创建新的目录们。你需要提供一个包含了要创建的目录名称的参数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.mkdir(newdir)</span><br></pre></td></tr></table></figure>

<p>示例：下例将在当前目录下创建一个新目录test。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="comment"># 创建目录test</span></span><br><span class="line">os.mkdir(<span class="string">"test"</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除文件夹</p>
<p>语法：<code>rmdir()</code>方法删除目录，目录名称以参数传递,在删除这个目录之前，它的所有内容应该先被清除。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.rmdir(<span class="string">'dirname'</span>)</span><br></pre></td></tr></table></figure>

<p>示例：以下是删除” /tmp/test”目录的例子。目录的完全合规的名称必须被给出，否则会在当前目录下搜索该目录。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="comment"># 删除”/tmp/test”目录</span></span><br><span class="line">os.rmdir( <span class="string">"/tmp/test"</span>  )</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h2 id="4-获取和切换目录"><a href="#4-获取和切换目录" class="headerlink" title="4. 获取和切换目录"></a>4. 获取和切换目录</h2><ul>
<li>获取当前目录</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.getcwd()</span><br></pre></td></tr></table></figure>
<ul>
<li>切换指定目录<br>语法：可以用chdir()方法来改变当前的目录。chdir()方法需要的一个参数是你想设成当前目录的目录名称。<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.chdir(<span class="string">"newdir"</span>)</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h2 id="5-获取当前目录下所有文件列表"><a href="#5-获取当前目录下所有文件列表" class="headerlink" title="5. 获取当前目录下所有文件列表"></a>5. 获取当前目录下所有文件列表</h2><p>  语法：获取当前目录下所有文件列表有两种实现方法。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">os.listdir(dir)</span><br><span class="line">os.walk(top, topdown=True, onerror=None, followlinks=False) -&gt; Directory tree generator</span><br></pre></td></tr></table></figure>



<h2 id="6-文件备份"><a href="#6-文件备份" class="headerlink" title="6. 文件备份"></a>6. 文件备份</h2><p><strong>要求</strong>：用户输入需要备份的文件名，对文件进行备份，备份文件名为原文件名后加[复件],后缀不变。如test.txt的备份文件为test[复件].txt。</p>
<p><strong>代码实现</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1.获取文件名</span></span><br><span class="line">old_file_name = input(<span class="string">"请输入要备份的文件名(需要后缀):"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#2。打开这个文件（"r")</span></span><br><span class="line">f_read = open(old_file_name,<span class="string">"r"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#new_file_name = old_file_name+"[复件]"</span></span><br><span class="line">position = old_file_name.rfind(<span class="string">"."</span>)</span><br><span class="line">new_file_name = old_file_name[<span class="number">0</span>:position]+<span class="string">"[复件]"</span>+old_file_name[position:]</span><br><span class="line"></span><br><span class="line"><span class="comment">#3.创建一个文件，xxx[复件].txt</span></span><br><span class="line">f_write = open(new_file_name,<span class="string">"w"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#4.往源文件中读取内容,写入备份的文件中</span></span><br><span class="line"><span class="comment">#content = f_read.read()</span></span><br><span class="line"><span class="comment">#f_write.write(content)</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    content = f_read.read(<span class="number">1024</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> len(content)==<span class="number">0</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    f_write.write(content)</span><br><span class="line"></span><br><span class="line"><span class="comment">#5.关闭两个文件</span></span><br><span class="line">f_read.close()</span><br><span class="line">f_write.close()</span><br></pre></td></tr></table></figure>



<h2 id="7-练习：批量文件重命名"><a href="#7-练习：批量文件重命名" class="headerlink" title="7.练习：批量文件重命名"></a>7.练习：批量文件重命名</h2><p>要求：提示用户输入重命名的文件夹名称，对文件夹中所有文件进行重命名，并写入到新文件夹，新文件夹的名称为原始文件夹名后加<code>[备份]</code>，。命名规则为在原名之前加<code>[飞凡空间]-</code>，如原始文件名为<code>图片.png</code>，新名为<code>[飞凡空间]-图片.png</code>。</p>
<h1 id="六、巩固提升"><a href="#六、巩固提升" class="headerlink" title="六、巩固提升"></a>六、巩固提升</h1><ol>
<li><p>日志分析，计算某用户<code>223.73.89.192</code>访问次数。日志文件如下：<code>access.log</code></p>
<figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">49.89.167.91</span> - - <span class="string">[17/Dec/2020:03:43:50 +0800]</span> <span class="string">"<span class="keyword">GET</span> /wiki/detail/3/40 HTTP/1.1"</span> <span class="number">301</span> <span class="number">0</span> <span class="string">"-"</span> <span class="string">"Mozilla/5.0(Linux;Android 5.1.1;OPPO A33 Build/LMY47V;wv) AppleWebKit/537.36(KHTML,link Gecko) Version/4.0 Chrome/43.0.2357.121 Mobile Safari/537.36 LieBaoFast/4.51.3"</span> <span class="string">"-"</span></span><br><span class="line"><span class="number">49.89.167.91</span> - - <span class="string">[17/Dec/2020:03:44:11 +0800]</span> <span class="string">"<span class="keyword">GET</span> /wiki/detail/3/40/ HTTP/1.1"</span> <span class="number">200</span> <span class="number">8033</span> <span class="string">"-"</span> <span class="string">"Mozilla/5.0(Linux;Android 5.1.1;OPPO A33 Build/LMY47V;wv) AppleWebKit/537.36(KHTML,link Gecko) Version/4.0 Chrome/43.0.2357.121 Mobile Safari/537.36 LieBaoFast/4.51.3"</span> <span class="string">"-"</span></span><br><span class="line"><span class="number">203.208.60.66</span> - - <span class="string">[17/Dec/2020:03:47:58 +0800]</span> <span class="string">"<span class="keyword">GET</span> /media/uploads/2019/11/17/pic/s1.png HTTP/1.1"</span> <span class="number">200</span> <span class="number">710728</span> <span class="string">"-"</span> <span class="string">"Googlebot-Image/1.0"</span> <span class="string">"-"</span></span><br><span class="line"><span class="number">223.73.89.192</span> - - <span class="string">[17/Dec/2020:03:48:26 +0800]</span> <span class="string">"<span class="keyword">GET</span> /wiki/detail/3/40/ HTTP/1.1"</span> <span class="number">200</span> <span class="number">8033</span> <span class="string">"-"</span> <span class="string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36 Edg/87.0.664.60"</span> <span class="string">"-"</span></span><br><span class="line"><span class="number">223.73.89.192</span> - - <span class="string">[17/Dec/2020:03:48:26 +0800]</span> <span class="string">"<span class="keyword">GET</span> /static/stark/plugins/font-awesome/css/font-awesome.css HTTP/1.1"</span> <span class="number">200</span> <span class="number">37414</span> <span class="string">"https://pythonav.com/wiki/detail/3/40/"</span> <span class="string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36 Edg/87.0.664.60"</span> <span class="string">"-"</span></span><br><span class="line"><span class="number">223.73.89.192</span> - - <span class="string">[17/Dec/2020:03:48:26 +0800]</span> <span class="string">"<span class="keyword">GET</span> /static/stark/plugins/bootstrap/css/bootstrap.css HTTP/1.1"</span> <span class="number">200</span> <span class="number">146010</span> <span class="string">"https://pythonav.com/wiki/detail/3/40/"</span> <span class="string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36 Edg/87.0.664.60"</span> <span class="string">"-"</span></span><br><span class="line"><span class="number">223.73.89.192</span> - - <span class="string">[17/Dec/2020:03:48:26 +0800]</span> <span class="string">"<span class="keyword">GET</span> /static/web/css/commons.css HTTP/1.1"</span> <span class="number">200</span> <span class="number">3674</span> <span class="string">"https://pythonav.com/wiki/detail/3/40/"</span> <span class="string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36 Edg/87.0.664.60"</span> <span class="string">"-"</span></span><br><span class="line"><span class="number">223.73.89.192</span> - - <span class="string">[17/Dec/2020:03:48:26 +0800]</span> <span class="string">"<span class="keyword">GET</span> /static/mdeditor/editormd/css/editormd.preview.css HTTP/1.1"</span> <span class="number">200</span> <span class="number">60230</span> <span class="string">"https://pythonav.com/wiki/detail/3/40/"</span> <span class="string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36 Edg/87.0.664.60"</span> <span class="string">"-"</span></span><br><span class="line"><span class="number">223.73.89.192</span> - - <span class="string">[17/Dec/2020:03:48:26 +0800]</span> <span class="string">"<span class="keyword">GET</span> /static/stark/js/jquery-3.3.1.min.js HTTP/1.1"</span> <span class="number">200</span> <span class="number">86927</span> <span class="string">"https://pythonav.com/wiki/detail/3/40/"</span> <span class="string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36 Edg/87.0.664.60"</span> <span class="string">"-"</span></span><br><span class="line"><span class="number">223.73.89.192</span> - - <span class="string">[17/Dec/2020:03:48:26 +0800]</span> <span class="string">"<span class="keyword">GET</span> /static/stark/plugins/bootstrap/js/bootstrap.min.js HTTP/1.1"</span> <span class="number">200</span> <span class="number">37045</span> <span class="string">"https://pythonav.com/wiki/detail/3/40/"</span> <span class="string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36 Edg/87.0.664.60"</span> <span class="string">"-"</span></span><br><span class="line"><span class="number">223.73.89.192</span> - - <span class="string">[17/Dec/2020:03:48:26 +0800]</span> <span class="string">"<span class="keyword">GET</span> /static/mdeditor/editormd/lib/marked.min.js HTTP/1.1"</span> <span class="number">200</span> <span class="number">19608</span> <span class="string">"https://pythonav.com/wiki/detail/3/40/"</span> <span class="string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36 Edg/87.0.664.60"</span> <span class="string">"-"</span></span><br><span class="line"><span class="number">223.73.89.192</span> - - <span class="string">[17/Dec/2020:03:48:27 +0800]</span> <span class="string">"<span class="keyword">GET</span> /static/mdeditor/editormd/lib/prettify.min.js HTTP/1.1"</span> <span class="number">200</span> <span class="number">17973</span> <span class="string">"https://pythonav.com/wiki/detail/3/40/"</span> <span class="string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36 Edg/87.0.664.60"</span> <span class="string">"-"</span></span><br><span class="line"><span class="number">223.73.89.192</span> - - <span class="string">[17/Dec/2020:03:48:27 +0800]</span> <span class="string">"<span class="keyword">GET</span> /static/mdeditor/editormd/fonts/fontawesome-webfont.woff2?v=4.3.0 HTTP/1.1"</span> <span class="number">200</span> <span class="number">56780</span> <span class="string">"https://pythonav.com/static/mdeditor/editormd/css/editormd.preview.css"</span> <span class="string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36 Edg/87.0.664.60"</span> <span class="string">"-"</span></span><br><span class="line"><span class="number">223.73.89.192</span> - - <span class="string">[17/Dec/2020:03:48:27 +0800]</span> <span class="string">"<span class="keyword">GET</span> /static/mdeditor/editormd/editormd.js HTTP/1.1"</span> <span class="number">200</span> <span class="number">163262</span> <span class="string">"https://pythonav.com/wiki/detail/3/40/"</span> <span class="string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36 Edg/87.0.664.60"</span> <span class="string">"-"</span></span><br><span class="line"><span class="number">223.73.89.192</span> - - <span class="string">[17/Dec/2020:03:48:28 +0800]</span> <span class="string">"<span class="keyword">GET</span> /static/mdeditor/mdeditor-preview-init.js HTTP/1.1"</span> <span class="number">200</span> <span class="number">261</span> <span class="string">"https://pythonav.com/wiki/detail/3/40/"</span> <span class="string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36 Edg/87.0.664.60"</span> <span class="string">"-"</span></span><br><span class="line"><span class="number">223.73.89.192</span> - - <span class="string">[17/Dec/2020:03:48:29 +0800]</span> <span class="string">"<span class="keyword">GET</span> /static/stark/plugins/font-awesome/fonts/fontawesome-webfont.woff2?v=4.7.0 HTTP/1.1"</span> <span class="number">200</span> <span class="number">77160</span> <span class="string">"https://pythonav.com/static/stark/plugins/font-awesome/css/font-awesome.css"</span> <span class="string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36 Edg/87.0.664.60"</span> <span class="string">"-"</span></span><br><span class="line"><span class="number">223.73.89.192</span> - - <span class="string">[17/Dec/2020:03:48:29 +0800]</span> <span class="string">"<span class="keyword">GET</span> /media/uploads/2019/02/22/Gobook/_book/ssl2.png HTTP/1.1"</span> <span class="number">200</span> <span class="number">203535</span> <span class="string">"https://pythonav.com/wiki/detail/3/40/"</span> <span class="string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36 Edg/87.0.664.60"</span> <span class="string">"-"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>日志分析升级，计算所有用户的访问次数。</p>
</li>
<li><p>筛选出股票 当前价大于 20 的所有股票数据。</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">股票代码,股票名称,当前价,涨跌额,涨跌幅,年初至今,成交量,成交额,换手率,市盈率(TTM),股息率,市值</span><br><span class="line">SH601778,N晶科,<span class="number">6.29</span>,+<span class="number">1.92</span>,+<span class="number">43.94</span>%,+<span class="number">43.94</span>%,<span class="number">259.66</span>万,<span class="number">1625.52</span>万,<span class="number">0.44</span>%,<span class="number">22.32</span>,-,<span class="number">173.95</span>亿</span><br><span class="line">SH688566,吉贝尔,<span class="number">52.66</span>,+<span class="number">6.96</span>,+<span class="number">15.23</span>%,+<span class="number">122.29</span>%,<span class="number">1626.58</span>万,<span class="number">8.09</span>亿,<span class="number">42.29</span>%,<span class="number">89.34</span>,-,<span class="number">98.44</span>亿</span><br><span class="line">SH688268,华特气体,<span class="number">88.80</span>,+<span class="number">11.72</span>,+<span class="number">15.20</span>%,+<span class="number">102.51</span>%,<span class="number">622.60</span>万,<span class="number">5.13</span>亿,<span class="number">22.87</span>%,<span class="number">150.47</span>,-,<span class="number">106.56</span>亿</span><br><span class="line">SH600734,实达集团,<span class="number">2.60</span>,+<span class="number">0.24</span>,+<span class="number">10.17</span>%,<span class="number">-61.71</span>%,<span class="number">1340.27</span>万,<span class="number">3391.14</span>万,<span class="number">2.58</span>%,亏损,<span class="number">0.00</span>%,<span class="number">16.18</span>亿</span><br><span class="line">SH900957,凌云B股,<span class="number">0.36</span>,+<span class="number">0.033</span>,+<span class="number">10.09</span>%,<span class="number">-35.25</span>%,<span class="number">119.15</span>万,<span class="number">42.10</span>万,<span class="number">0.65</span>%,<span class="number">44.65</span>,<span class="number">0.00</span>%,<span class="number">1.26</span>亿</span><br><span class="line">SZ000584,哈工智能,<span class="number">6.01</span>,+<span class="number">0.55</span>,+<span class="number">10.07</span>%,<span class="number">-4.15</span>%,<span class="number">2610.86</span>万,<span class="number">1.53</span>亿,<span class="number">4.36</span>%,<span class="number">199.33</span>,<span class="number">0.26</span>%,<span class="number">36.86</span>亿</span><br><span class="line">SH600599,熊猫金控,<span class="number">6.78</span>,+<span class="number">0.62</span>,+<span class="number">10.06</span>%,<span class="number">-35.55</span>%,<span class="number">599.64</span>万,<span class="number">3900.23</span>万,<span class="number">3.61</span>%,亏损,<span class="number">0.00</span>%,<span class="number">11.25</span>亿</span><br><span class="line">SH600520,文一科技,<span class="number">8.21</span>,+<span class="number">0.75</span>,+<span class="number">10.05</span>%,<span class="number">-24.05</span>%,<span class="number">552.34</span>万,<span class="number">4464.69</span>万,<span class="number">3.49</span>%,亏损,<span class="number">0.00</span>%,<span class="number">13.01</span>亿</span><br><span class="line">SH603682,锦和商业,<span class="number">11.73</span>,+<span class="number">1.07</span>,+<span class="number">10.04</span>%,+<span class="number">48.29</span>%,<span class="number">2746.63</span>万,<span class="number">3.15</span>亿,<span class="number">29.06</span>%,<span class="number">29.62</span>,-,<span class="number">55.42</span>亿</span><br><span class="line">SZ300831,派瑞股份,<span class="number">12.27</span>,+<span class="number">1.12</span>,+<span class="number">10.04</span>%,+<span class="number">208.29</span>%,<span class="number">25.38</span>万,<span class="number">311.41</span>万,<span class="number">0.32</span>%,<span class="number">60.59</span>,-,<span class="number">39.26</span>亿</span><br></pre></td></tr></table></figure>
</li>
<li><p>实现名片管理系统文件版。</p>
<p><strong>要求</strong>：功能包含添加、删除、修改、查询一个名片，查询所有名片，保存信息、退出系统功能。每次运行系统从文件中加载名片数据，用户选择保存信息将信息写入文件。</p>
</li>
</ol>
<h1 id="七、简单的总结"><a href="#七、简单的总结" class="headerlink" title="七、简单的总结"></a>七、简单的总结</h1><p>通过读写文件的操作，我们可以实现数据持久化。在Python中可以通过<code>open</code>函数来获得文件对象，可以通过文件对象的<code>read</code>和<code>write</code>方法实现文件读写操作。如果要对文件或文件夹进行创建、删除等操作，可以通过<code>os</code>模块来实现，当然，<code>os</code>模块的功能还有很多，之后我们还会再介绍。学了文件相关操作之后，我们的技能库又丰富了一些。</p>

    </div>

    
    
    
      
  <div class="popular-posts-header">相关文章推荐</div>
  <ul class="popular-posts">
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\2008\01\04\python\2008-01-04-python-draft\" rel="bookmark">python-draft</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\2008\01\05\python\2008-01-04-python-ruan\" rel="bookmark">python-ruan</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\2021\11\25\python\python_基础篇\基础篇-目录\" rel="bookmark">基础篇</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\2021\11\24\python\python_基础篇\第10篇：列表和元组的应用\" rel="bookmark">第10篇：列表和元组的应用</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\2021\11\24\python\python_基础篇\第11篇：高级数据类型之集合\" rel="bookmark">第11篇：高级数据类型之集合</a></div>
    </li>
  </ul>

        <div class="reward-container">
  <div>赞赏一下吧～</div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    打赏
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/images/alipay.png" alt="tongsiying 支付宝">
        <p>支付宝</p>
      </div>

  </div>
</div>

        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>tongsiying
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://tongsiying.github.io/2021/11/24/python/python_%E5%9F%BA%E7%A1%80%E7%AF%87/%E7%AC%AC20%E7%AF%87%EF%BC%9A%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/" title="第20篇：文件操作">https://tongsiying.github.io/2021/11/24/python/python_基础篇/第20篇：文件操作/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener external nofollow noreferrer" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/python/" rel="tag"># python</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/11/24/python/python_%E5%9F%BA%E7%A1%80%E7%AF%87/%E7%AC%AC19%E7%AF%87%EF%BC%9A%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/" rel="prev" title="第19篇：异常处理">
      <i class="fa fa-chevron-left"></i> 第19篇：异常处理
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/11/24/python/python_%E5%9F%BA%E7%A1%80%E7%AF%87/%E7%AC%AC21%E7%AF%87%EF%BC%9A%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E6%89%A9%E5%B1%95%E7%AF%87/" rel="next" title="第21篇：文件操作扩展篇">
      第21篇：文件操作扩展篇 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#学习目标："><span class="nav-text">学习目标：</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#一、打开文件"><span class="nav-text">一、打开文件</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#二、关闭文件"><span class="nav-text">二、关闭文件</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#三、读写文本文件"><span class="nav-text">三、读写文本文件</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#四、读写二进制文件"><span class="nav-text">四、读写二进制文件</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#五、文件和文件夹操作"><span class="nav-text">五、文件和文件夹操作</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-文件删除"><span class="nav-text">1. 文件删除</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-文件重命名"><span class="nav-text">2. 文件重命名</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-创建和删除文件夹"><span class="nav-text">3. 创建和删除文件夹</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-获取和切换目录"><span class="nav-text">4. 获取和切换目录</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-获取当前目录下所有文件列表"><span class="nav-text">5. 获取当前目录下所有文件列表</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-文件备份"><span class="nav-text">6. 文件备份</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-练习：批量文件重命名"><span class="nav-text">7.练习：批量文件重命名</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#六、巩固提升"><span class="nav-text">六、巩固提升</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#七、简单的总结"><span class="nav-text">七、简单的总结</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="tongsiying"
      src="/images/gutianle.gif">
  <p class="site-author-name" itemprop="name">tongsiying</p>
  <div class="site-description" itemprop="description">问渠那得清如许？为有源头活水来。</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">431</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">21</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">48</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/tongsiying" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;tongsiying" rel="noopener external nofollow noreferrer" target="_blank"><i class="github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:wxtlucky1015@163.com" title="E-Mail → mailto:wxtlucky1015@163.com" rel="noopener external nofollow noreferrer" target="_blank"><i class="envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/u/2964109344" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;u&#x2F;2964109344" rel="noopener external nofollow noreferrer" target="_blank"><i class="weibo fa-fw"></i>Weibo</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/" title="tongsiying → https:&#x2F;&#x2F;tongsiying.github.io"><i class="wrench fa-fw"></i>tongsiying</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/ReadingNotes/" title="ReadingNotes → https:&#x2F;&#x2F;tongsiying.github.io&#x2F;ReadingNotes&#x2F;"><i class="book fa-fw"></i>ReadingNotes</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/blog/" title="blog → https:&#x2F;&#x2F;tongsiying.github.io&#x2F;blog&#x2F;"><i class="book fa-fw"></i>blog</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/blog/tools/" title="tools → https:&#x2F;&#x2F;tongsiying.github.io&#x2F;blog&#x2F;tools&#x2F;"><i class="wrench fa-fw"></i>tools</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/lanlan/" title="lanlan → https:&#x2F;&#x2F;tongsiying.github.io&#x2F;lanlan&#x2F;"><i class="wrench fa-fw"></i>lanlan</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/Music/" title="note → https:&#x2F;&#x2F;tongsiying.github.io&#x2F;Music&#x2F;"><i class="wrench fa-fw"></i>note</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/sound/" title="Music → https:&#x2F;&#x2F;tongsiying.github.io&#x2F;sound&#x2F;"><i class="wrench fa-fw"></i>Music</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/JSONFormat/" title="JSONFormat → https:&#x2F;&#x2F;tongsiying.github.io&#x2F;JSONFormat&#x2F;"><i class="wrench fa-fw"></i>JSONFormat</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/HTML5-Canvas/" title="Canvas → https:&#x2F;&#x2F;tongsiying.github.io&#x2F;HTML5-Canvas&#x2F;"><i class="wrench fa-fw"></i>Canvas</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/games/" title="games → https:&#x2F;&#x2F;tongsiying.github.io&#x2F;games&#x2F;"><i class="wrench fa-fw"></i>games</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/love/" title="love → https:&#x2F;&#x2F;tongsiying.github.io&#x2F;love&#x2F;"><i class="wrench fa-fw"></i>love</a>
      </span>
  </div>



		<div style="">
  <canvas id="canvas" style="width:60%;">��ǰ�������֧��canvas������������������</canvas>
</div>
<script>
(function(){

   var digit=
    [
        [
            [0,0,1,1,1,0,0],
            [0,1,1,0,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,0,1,1,0],
            [0,0,1,1,1,0,0]
        ],//0
        [
            [0,0,0,1,1,0,0],
            [0,1,1,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [1,1,1,1,1,1,1]
        ],//1
        [
            [0,1,1,1,1,1,0],
            [1,1,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,0,0],
            [0,0,1,1,0,0,0],
            [0,1,1,0,0,0,0],
            [1,1,0,0,0,0,0],
            [1,1,0,0,0,1,1],
            [1,1,1,1,1,1,1]
        ],//2
        [
            [1,1,1,1,1,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,0,0,1,1,0],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0]
        ],//3
        [
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,1,0],
            [0,0,1,1,1,1,0],
            [0,1,1,0,1,1,0],
            [1,1,0,0,1,1,0],
            [1,1,1,1,1,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,0,1,1,0],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,1,1]
        ],//4
        [
            [1,1,1,1,1,1,1],
            [1,1,0,0,0,0,0],
            [1,1,0,0,0,0,0],
            [1,1,1,1,1,1,0],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0]
        ],//5
        [
            [0,0,0,0,1,1,0],
            [0,0,1,1,0,0,0],
            [0,1,1,0,0,0,0],
            [1,1,0,0,0,0,0],
            [1,1,0,1,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0]
        ],//6
        [
            [1,1,1,1,1,1,1],
            [1,1,0,0,0,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,1,1,0,0,0],
            [0,0,1,1,0,0,0],
            [0,0,1,1,0,0,0],
            [0,0,1,1,0,0,0]
        ],//7
        [
            [0,1,1,1,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0]
        ],//8
        [
            [0,1,1,1,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,0,0],
            [0,1,1,0,0,0,0]
        ],//9
        [
            [0,0,0,0,0,0,0],
            [0,0,1,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0],
            [0,0,1,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,0,0,0,0,0]
        ]//:
    ];

var canvas = document.getElementById('canvas');

if(canvas.getContext){
    var cxt = canvas.getContext('2d');
    //����canvas�Ŀ���
    var H = 100,W = 700;
    canvas.height = H;
    canvas.width = W;
    cxt.fillStyle = '#f00';
    cxt.fillRect(10,10,50,50);

    //�洢ʱ������
    var data = [];
    //�洢�˶���С��
    var balls = [];
    //�������Ӱ뾶
    var R = canvas.height/20-1;
    (function(){
        var temp = /(\d)(\d):(\d)(\d):(\d)(\d)/.exec(new Date());
        //�洢ʱ�����֣���ʮλСʱ����λСʱ��ð�š�ʮλ���ӡ���λ���ӡ�ð�š�ʮλ���ӡ���λ������7���������
        data.push(temp[1],temp[2],10,temp[3],temp[4],10,temp[5],temp[6]);
    })();

    /*���ɵ�������*/
    function renderDigit(index,num){
        for(var i = 0; i < digit[num].length; i++){
            for(var j = 0; j < digit[num][i].length; j++){
                if(digit[num][i][j] == 1){
                    cxt.beginPath();
                    cxt.arc(14*(R+2)*index + j*2*(R+1)+(R+1),i*2*(R+1)+(R+1),R,0,2*Math.PI);
                    cxt.closePath();
                    cxt.fill();
                }
            }
        }
    }

    /*����ʱ��*/
    function updateDigitTime(){
        var changeNumArray = [];
        var temp = /(\d)(\d):(\d)(\d):(\d)(\d)/.exec(new Date());
        var NewData = [];
        NewData.push(temp[1],temp[2],10,temp[3],temp[4],10,temp[5],temp[6]);
        for(var i = data.length-1; i >=0 ; i--){
            //ʱ�䷢���仯
            if(NewData[i] !== data[i]){
                //���仯������ֵ����data�����е������洢��changeNumArray������
                changeNumArray.push(i+'_'+(Number(data[i])+1)%10);
            }
        }
        //����С��
        for(var i = 0; i< changeNumArray.length; i++){
            addBalls.apply(this,changeNumArray[i].split('_'));
        }
        data = NewData.concat();
    }

    /*����С��״̬*/
    function updateBalls(){
        for(var i = 0; i < balls.length; i++){
            balls[i].stepY += balls[i].disY;
            balls[i].x += balls[i].stepX;
            balls[i].y += balls[i].stepY;
            if(balls[i].x > W + R || balls[i].y > H + R){
                balls.splice(i,1);
                i--;
            }
        }
    }

    /*����Ҫ�˶���С��*/
    function addBalls(index,num){
        var numArray = [1,2,3];
        var colorArray =  ["#3BE","#09C","#A6C","#93C","#9C0","#690","#FB3","#F80","#F44","#C00"];
        for(var i = 0; i < digit[num].length; i++){
            for(var j = 0; j < digit[num][i].length; j++){
                if(digit[num][i][j] == 1){
                    var ball = {
                        x:14*(R+2)*index + j*2*(R+1)+(R+1),
                        y:i*2*(R+1)+(R+1),
                        stepX:Math.floor(Math.random() * 4 -2),
                        stepY:-2*numArray[Math.floor(Math.random()*numArray.length)],
                        color:colorArray[Math.floor(Math.random()*colorArray.length)],
                        disY:1
                    };
                    balls.push(ball);
                }
            }
        }
    }

    /*��Ⱦ*/
    function render(){
        //���û������ȣ��ﵽ��ջ�����Ч��
        canvas.height = 100;
        //��Ⱦʱ��
        for(var i = 0; i < data.length; i++){
            renderDigit(i,data[i]);
        }
        //��ȾС��
        for(var i = 0; i < balls.length; i++){
            cxt.beginPath();
            cxt.arc(balls[i].x,balls[i].y,R,0,2*Math.PI);
            cxt.fillStyle = balls[i].color;
            cxt.closePath();
            cxt.fill();
        }
    }

    clearInterval(oTimer);
    var oTimer = setInterval(function(){
        //����ʱ��
        updateDigitTime();
        //����С��״̬
        updateBalls();
        //��Ⱦ
        render();
    },50);
}

})();
</script>
      </div>
    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; Weeny – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">tongsiying</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">7.6m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">114:28</span>
</div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
