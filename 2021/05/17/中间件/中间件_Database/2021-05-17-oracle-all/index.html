<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/hedgehog.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/hedgehog.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"tongsiying.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"hide","b2t":true,"scrollpercent":true,"padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="article">
<meta property="og:title" content="oracle-all">
<meta property="og:url" content="https://tongsiying.github.io/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/index.html">
<meta property="og:site_name" content="tongsiying">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://tongsiying.github.io/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/2021-05-17-oracle-all%5CImage.jpg">
<meta property="og:image" content="https://tongsiying.github.io/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/Image.jpg">
<meta property="og:image" content="https://tongsiying.github.io/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/2021-05-17-oracle-all%5C144825.jpg">
<meta property="og:image" content="https://tongsiying.github.io/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/144825.jpg">
<meta property="og:image" content="https://tongsiying.github.io/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/2021-05-17-oracle-all%5Cimage-20210608231722810.png">
<meta property="og:image" content="https://tongsiying.github.io/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/image-20210608231722810.png">
<meta property="og:image" content="https://tongsiying.github.io/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/2021-05-17-oracle-all%5Cimage-20210608232126752.png">
<meta property="og:image" content="https://tongsiying.github.io/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/image-20210608232126752.png">
<meta property="og:image" content="https://tongsiying.github.io/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/2021-05-17-oracle-all%5Cimage-20210608233107882.png">
<meta property="og:image" content="https://tongsiying.github.io/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/image-20210608233107882.png">
<meta property="og:image" content="https://tongsiying.github.io/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/2021-05-17-oracle-all%5Cimage-20210609200200232.png">
<meta property="og:image" content="https://tongsiying.github.io/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/image-20210609200200232.png">
<meta property="og:image" content="https://tongsiying.github.io/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/2021-05-17-oracle-all%5CImage-1623940261353.png">
<meta property="og:image" content="https://tongsiying.github.io/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/Image-1623940261353.png">
<meta property="og:image" content="https://tongsiying.github.io/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/2021-05-17-oracle-all%5CImage-1623940359769.png">
<meta property="og:image" content="https://tongsiying.github.io/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/Image-1623940359769.png">
<meta property="og:image" content="https://tongsiying.github.io/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/2021-05-17-oracle-all%5CImage-1623940420444.png">
<meta property="og:image" content="https://tongsiying.github.io/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/Image-1623940420444.png">
<meta property="og:image" content="https://tongsiying.github.io/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/2021-05-17-oracle-all%5CImage-1623940454172.jpg">
<meta property="og:image" content="https://tongsiying.github.io/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/Image-1623940454172.jpg">
<meta property="og:image" content="https://tongsiying.github.io/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/2021-05-17-oracle-all%5CImage-1623941817764.png">
<meta property="og:image" content="https://tongsiying.github.io/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/Image-1623941817764.png">
<meta property="og:image" content="https://tongsiying.github.io/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/2021-05-17-oracle-all%5CImage-1623941823317.png">
<meta property="og:image" content="https://tongsiying.github.io/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/Image-1623941823317.png">
<meta property="og:image" content="https://tongsiying.github.io/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/2021-05-17-oracle-all%5CImage-1623941835703.png">
<meta property="og:image" content="https://tongsiying.github.io/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/Image-1623941835703.png">
<meta property="article:published_time" content="2021-05-17T10:37:19.000Z">
<meta property="article:modified_time" content="2021-06-17T15:39:16.873Z">
<meta property="article:author" content="tongsiying">
<meta property="article:tag" content="印象-豪">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://tongsiying.github.io/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/2021-05-17-oracle-all%5CImage.jpg">

<link rel="canonical" href="https://tongsiying.github.io/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>oracle-all | tongsiying</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
<!-- 加入APlayer音乐播放器 -->
<link rel="stylesheet" href="/dist/APlayer.min.css">
<div id="aplayer"></div>
<script type="text/javascript" src="/dist/APlayer.min.js"></script>
<script type="text/javascript" src="/dist/music.js"></script>
  <div class="container use-motion">
    <div class="headband"></div>
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">tongsiying</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">阅读|运动|自律</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/catalog/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-目录">

    <a href="/catalog/" rel="section"><i class="fa fa fa-th fa-fw"></i>目录</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-读书清单">

    <a href="/read" rel="section"><i class="fa fa-book fa-fw"></i>读书清单</a>

  </li>
        <li class="menu-item menu-item-读书笔记">

    <a href="/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" rel="section"><i class="fa fa-book fa-fw"></i>读书笔记</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://tongsiying.github.io/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/gutianle.gif">
      <meta itemprop="name" content="tongsiying">
      <meta itemprop="description" content="问渠那得清如许？为有源头活水来。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tongsiying">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          oracle-all
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-05-17 18:37:19" itemprop="dateCreated datePublished" datetime="2021-05-17T18:37:19+08:00">2021-05-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-06-17 23:39:16" itemprop="dateModified" datetime="2021-06-17T23:39:16+08:00">2021-06-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Database/" itemprop="url" rel="index"><span itemprop="name">Database</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>62k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>56 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p class="description"></p>
<a id="more"></a>

<h1 id="数据库基础"><a href="#数据库基础" class="headerlink" title="数据库基础"></a>数据库基础</h1><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a <span class="attribute">href</span>=<span class="string">"https://lanlan2017.github.io/download/PhraseEdit.txt"</span> <span class="attribute">download</span>=<span class="string">"PhraseEdit.txt"</span>&gt;点击下载搜狗输入法自定义短语配置文件:PhraseEdit.txt&lt;/a&gt;</span><br></pre></td></tr></table></figure>

<p><a href="https://lanlan2017.github.io/sound/单田芳_乱世枭雄_001.mp3" target="_blank" rel="noopener external nofollow noreferrer" download="PhraseEdit.txt">点击下载搜狗输入法自定义短语配置文件:PhraseEdit.txt</a></p>
<p>学习目标</p>
<ol>
<li>数据库的基本概念</li>
<li>掌握0racl1,e客户端和EM的安装;</li>
<li>掌握标准sQL语句, 特别是查询语句的使用;</li>
<li>掌握网络环境的配置;</li>
<li>掌握SQL*Plus的使用;</li>
<li>熟悉常用客户端工具比如PL/SQL的使用</li>
</ol>
<p><strong>大、中、小型数据库各有哪些？一个系统如何选择使用什么的数据库？</strong></p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>小型数据库：access、foxbase对安全性要求不太高、用用户量百人以内、基本无成本。</span><br><span class="line"><span class="number">2.</span>中型数据库:Mysql,SQL Server安全级别为中间级别，用户量在<span class="number">5000</span><span class="number">-15000</span>以内，成本万元左右</span><br><span class="line"><span class="number">3.</span>大型数据库：Sybase、Oracle、Db2海量数据、海量用户、成本高</span><br></pre></td></tr></table></figure>

<p><strong>ORACLE数据库特点</strong></p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>支持多用户、 大事务量的事务处理</span><br><span class="line"><span class="number">2.</span>数据安全性和完整性控制</span><br><span class="line"><span class="number">3.</span>支持分布式数据处理</span><br><span class="line"><span class="number">4.</span>可移植性</span><br><span class="line"><span class="number">5.</span>Oracle数据库基于客户端/服务器技术</span><br></pre></td></tr></table></figure>

<p><strong>Oracle 体系结构</strong></p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">·数据库结构</span><br><span class="line"><span class="section">物理结构: Oracle数据库所使用的操作系统物理文件主要分为:数据文件、控制文件、日志文件</span></span><br><span class="line"><span class="section">逻辑结构: 数据库的逻辑结构是从逻辑的角度分析数据库的组成,Oracle的逻辑组件包括:</span></span><br><span class="line">数据库一&gt;表空间一&gt;段一&gt;区一&gt;模式</span><br><span class="line"></span><br><span class="line"><span class="section">·实例结构:        【Oracle实例是内存结构和后台进程的集合】</span></span><br></pre></td></tr></table></figure>

<p><strong>sys用户和system用户有什么区别？</strong></p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.sys用户是超级用户，具有高权限，具有sysdba角色，有<span class="keyword">create</span> <span class="keyword">database</span>的权限，该用户默认密码是change_on_install</span><br><span class="line"><span class="number">2.</span><span class="keyword">system</span>用户是管理操作员，权限也很大。具有syaoper角色，没有<span class="keyword">create</span> <span class="keyword">database</span>的权限，默认的密码是manager</span><br><span class="line"><span class="number">3.</span>一般来讲，对数据库维护，使用<span class="keyword">system</span>用户登录就可以了</span><br></pre></td></tr></table></figure>

<p><strong>ORACLE几个名词</strong></p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">·数据库名</span><br><span class="line">数据库名是用于区分不同数据库的内部标识,就像人的身份证号一样</span><br><span class="line"></span><br><span class="line">·数据库实例名                    '</span><br><span class="line">数据库实例名用于<span class="number">0</span>racle与OS之间的联系和用于Oracle <span class="built_in">Server</span>与外部连接时使用,可以和数据库名一样,也可以不一样,该参数为instancename, 若OS要与数据库取得交互,必须使用数据库实例名</span><br><span class="line"></span><br><span class="line">·数据库服务名</span><br><span class="line">参数名是SERVICE NAME,数据库服务名与数据库名相同fuw</span><br></pre></td></tr></table></figure>

<p><strong>监听</strong></p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">Oracle网络配置</span><br><span class="line">·在服务器端需要配置1istener</span><br><span class="line">1istener.ora</span><br><span class="line">[0RACLE_HOME]/networMadmin</span><br><span class="line">ora- 12541 :TNS:没有监听程序</span><br><span class="line"></span><br><span class="line">·在客户端需要配置网络服务名</span><br><span class="line">tnsnames.ora</span><br><span class="line">ora-12154:TNS:无法解析指定的连接标识符</span><br><span class="line"></span><br><span class="line">·两个配置工具</span><br><span class="line">Oracle Net Configuration Assistant</span><br><span class="line">Oracle Net Manager</span><br><span class="line"></span><br><span class="line">·listener.ora监听配置 </span><br><span class="line">LISTENER=</span><br><span class="line">    （DESCRIPTION_LIST=</span><br><span class="line">         (DESCRIPTION=</span><br><span class="line">             (ADDRESS_LIST=</span><br><span class="line">(ADDRESS=(<span class="attribute">PROTOCOL</span>=IPC)(KEY=EXTPROC)</span><br><span class="line">          )</span><br><span class="line">         (ADDRESS_LIST=</span><br><span class="line">(ADDRESS=(<span class="attribute">PROTOCOL</span>=TCP)(HOST=IP)(PORT=1521 ))</span><br><span class="line">         )</span><br><span class="line">      )</span><br><span class="line">  )     </span><br><span class="line"></span><br><span class="line">·tnsnames.ora配置 </span><br><span class="line">»ORA10G=                                                (DESCRIPTION=                                      </span><br><span class="line">   (ADDRESS=(<span class="attribute">PROTOCOL</span>=TCP)(HOST= secdB)(PORT</span><br><span class="line">=1521))                                                  (CONNECT_DATA=</span><br><span class="line">    (SERVER= DEDICATED)</span><br><span class="line">    (SERVICE_NAME= ora10g)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">·sql*plus常用命令</span><br><span class="line">conn联接 2.disc断开联接 3.passwd改密码</span><br><span class="line">show<span class="built_in"> user </span>显示当前用户 5.exit退出</span><br><span class="line"></span><br><span class="line">用户管理常用命令</span><br><span class="line">·将用户解锁的命令</span><br><span class="line">alter<span class="built_in"> user </span>scott account unlock；</span><br><span class="line">·更改用户密码</span><br><span class="line">alter<span class="built_in"> user </span>scott identified by m123；</span><br></pre></td></tr></table></figure>



<p><strong>请写出配置pl/sql develop客户端，使用pl/sql develop连接数据库的步骤</strong></p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>装oracle    </span><br><span class="line"><span class="number">2.</span>配置两个文件     </span><br><span class="line"><span class="number">3.</span>安装client客户端</span><br><span class="line"><span class="number">4.</span>用sys给普通用户解锁     </span><br><span class="line"><span class="number">5.</span>pl/sqdev(连scott）</span><br></pre></td></tr></table></figure>

<p><strong>启动、停止数据库及监听</strong></p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsnrctl <span class="built_in">stop</span>  <span class="comment">// 关闭                                          lsnrctl start  // 启动</span></span><br></pre></td></tr></table></figure>

<p><strong>老师给：</strong></p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">数据库database (DB)</span><br><span class="line">数据库的安装</span><br><span class="line">安装的路径</span><br><span class="line">        服务名service name</span><br><span class="line">        密码</span><br><span class="line"></span><br><span class="line">服务端：</span><br><span class="line">配置监听文件：</span><br><span class="line">        路径：<span class="built_in">..</span><span class="built_in">..</span>./network/admin/listener.ora</span><br><span class="line">配置HOST(ip),PORT(端口)</span><br><span class="line">LISTENER =</span><br><span class="line">(DESCRIPTION_LIST =</span><br><span class="line">    (DESCRIPTION =</span><br><span class="line">      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1))</span><br><span class="line">      (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.197.129)(PORT = 1521))</span><br><span class="line">    )</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line">客户端的配置：tnsnames.ora</span><br><span class="line">连接名，host,port,service name(服务名)</span><br><span class="line">zcw =</span><br><span class="line">  (DESCRIPTION =</span><br><span class="line">    (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.197.129)(PORT = 1521))</span><br><span class="line">    (CONNECT_DATA =</span><br><span class="line">      (SERVER = DEDICATED)</span><br><span class="line">      (SERVICE_NAME = orcl)</span><br><span class="line">    )</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line">服务端的启动</span><br><span class="line">windows:我的电脑-管理-服务管理和应用-服务 （services.msc进到服务中）</span><br><span class="line">        1.oracleservice服务名</span><br><span class="line">        2.oraclelisntener监听服务</span><br><span class="line">        3.sqlplus</span><br><span class="line">linux:</span><br><span class="line">        1.启动和关闭监听   lsnrctl start|status|stop</span><br><span class="line">        </span><br><span class="line">数据库启动和关闭：</span><br><span class="line">sqlplus sys/密码@orcl as sysdba</span><br><span class="line">sql&gt;startup ;开启</span><br><span class="line">sql&gt;shutdown immediate;关闭数据库实例</span><br><span class="line"></span><br><span class="line">连接：</span><br><span class="line"> cmd:(linux)      sqlplus 用户名/密码@连接名</span><br><span class="line">                  sqlplus / as sysdba (仅限于服务端登录，为sys用户)</span><br><span class="line">                  sqlplus sys/密码@实例名   as sysdba</span><br><span class="line">  sql&gt;            conn 用户名/密码@实例名</span><br><span class="line"></span><br><span class="line">注：登录sys 用户必须as sysdba</span><br><span class="line"></span><br><span class="line">连接过程中的报错：</span><br><span class="line">1.the account is lockede (用户锁定)</span><br><span class="line">  解锁：用sys或者system用户登录</span><br><span class="line">  alter<span class="built_in"> user </span>用户名 account unlock;</span><br><span class="line"></span><br><span class="line">修改用户密码</span><br><span class="line">password 用户名</span><br><span class="line">alter<span class="built_in"> user </span>用户名 identified by 密码；</span><br></pre></td></tr></table></figure>

<h1 id="SQL结构化查询语言"><a href="#SQL结构化查询语言" class="headerlink" title="SQL结构化查询语言"></a>SQL结构化查询语言</h1><p>学习目标</p>
<ol>
<li>掌握SELECT查询语句</li>
<li>SELECT语句中的算术表达式</li>
<li>连接运算符、文字字特串、distinct关键字的用法</li>
<li>describe命令</li>
<li>where子句=、&lt;=、between 、in、like和null</li>
<li>比较条件使用and、or和not运算符的逻辑条件</li>
<li>表达式中运算符的忧先级规则</li>
<li>使用order by子句对行进行排序             </li>
<li>替代变量&amp;</li>
</ol>
<h2 id="select语句"><a href="#select语句" class="headerlink" title="select语句"></a>select语句</h2><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">语法:</span><br><span class="line"><span class="keyword">select</span> * &#123;[<span class="keyword">DISTINCT</span>] column|expression[alias],...&#125;    <span class="keyword">from</span> table;</span><br><span class="line"><span class="keyword">select</span>    关键字接要査询的内容    <span class="keyword">from</span>    接某张表</span><br><span class="line">例如:</span><br><span class="line"><span class="keyword">select</span>    * <span class="keyword">from</span> emp;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> deptno,ename <span class="keyword">from</span> emp; </span><br><span class="line"></span><br><span class="line">【<span class="keyword">select</span>语句编写规范】</span><br><span class="line"><span class="number">1.</span>SQL语句不区分大小写</span><br><span class="line"><span class="number">2.</span>SQL语句可输入在一行或多行中</span><br><span class="line"><span class="number">3.</span>关键字不能缩写, 也不能跨行分开写</span><br><span class="line"><span class="number">4.</span>子句通常放在单独的行中</span><br><span class="line"><span class="number">5.</span>应使用缩进来提高可读性</span><br><span class="line"><span class="number">6.</span>在SQL Devebper中, 可以根据需要使用分号(;)终止SQL语句, 如果执行多条SQL语句, 则需要使用分号来分隔这些语句。                            7.在SQL*Plus中, 必须使用分号(;)结東每条SQL语句</span><br><span class="line"></span><br><span class="line">【<span class="keyword">SELECT</span>语句算术表达式】</span><br><span class="line">算术表达式:</span><br><span class="line">十  _ *  /</span><br><span class="line">例如:</span><br><span class="line"><span class="keyword">select</span> ename, sa1十<span class="number">100</span>, deptno <span class="keyword">from</span> emp;</span><br><span class="line"><span class="keyword">select</span> ename, sa1*<span class="number">12</span>   <span class="keyword">from</span>  emp;</span><br><span class="line">算术符优先级                                  </span><br><span class="line"><span class="keyword">select</span> ename, sa1*<span class="number">12</span>+<span class="number">1000</span>    <span class="keyword">from</span>    emp;    优先计算乘法</span><br><span class="line"><span class="keyword">select</span> ename, (sa1+<span class="number">100</span>)*<span class="number">12</span>    <span class="keyword">from</span>    emp;    优先计算括号</span><br><span class="line"></span><br><span class="line">【<span class="keyword">select</span>语句中定义列别名】</span><br><span class="line">列别名具有以下特征和用途:</span><br><span class="line"><span class="number">1.</span>可重命名列标题</span><br><span class="line"><span class="number">2.</span>有助于计算</span><br><span class="line"><span class="number">3.</span>紧跟在列名后 (列名和别名之间也可以加上可选关键字<span class="keyword">AS</span>)</span><br><span class="line"><span class="number">4.</span>如果别名包含空格或特殊字符，或者区分大小写，则需要使用双引号   </span><br><span class="line">定义列别名举例</span><br><span class="line">举例:</span><br><span class="line"><span class="keyword">select</span>  ename, sa1*<span class="number">12</span> <span class="keyword">as</span><span class="string">"年薪"</span> <span class="keyword">from</span> emp;</span><br><span class="line"><span class="keyword">select</span>  ename, sa1*<span class="number">12</span>+nv1(comm,<span class="number">0</span>)*<span class="number">12</span> <span class="string">"总收入"</span>  <span class="keyword">from</span> emp；</span><br><span class="line"><span class="keyword">select</span> ename<span class="string">"姓名"</span> ,sa1<span class="string">"薪资"</span> <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line">【<span class="keyword">select</span>中连接运算符】</span><br><span class="line">连接运算符具有以下特征和用途:         </span><br><span class="line"><span class="number">1.</span>将列或字符串连接到其它列</span><br><span class="line"><span class="number">2.</span>由两条竖线(||)表示</span><br><span class="line"><span class="number">3.</span>创建一个由字符表达式生成的列</span><br><span class="line">例如:</span><br><span class="line"><span class="keyword">select</span> ename ll job <span class="keyword">as</span><span class="string">"雇员信息"</span> <span class="keyword">from</span> emp;   </span><br><span class="line"></span><br><span class="line">【<span class="keyword">select</span>语句文字字符串 】</span><br><span class="line">文字是指<span class="keyword">select</span>语句中包含的字符、数字或日期</span><br><span class="line"><span class="number">1.</span>日期和字符文字值必须放在单引号内。</span><br><span class="line"><span class="number">2.</span>每个字符串在每个返回行中输出一次</span><br><span class="line">例如:</span><br><span class="line"><span class="keyword">select</span> ename ||‘<span class="keyword">is</span> a’|| job <span class="keyword">as</span><span class="string">"雇员职称"</span> <span class="keyword">from</span> emp；</span><br><span class="line">mysql：</span><br><span class="line"><span class="keyword">select</span> concat (content_id，<span class="string">' is a '</span>，create_date) <span class="keyword">as</span> info <span class="keyword">from</span> ott_content;</span><br><span class="line"></span><br><span class="line">【<span class="keyword">select</span>语句<span class="keyword">distinct</span>】     </span><br><span class="line"><span class="keyword">distinct</span>:默认情況下会显示査询返回的所有行, 包括重复行</span><br><span class="line">例如: </span><br><span class="line"><span class="keyword">select</span> deptno <span class="keyword">from</span> emp;会返回重复的行</span><br><span class="line">去重，加关键字：distinct</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> deptno <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line">【desc显示表结构的命令】</span><br><span class="line">desc emp；（到command window下执行）</span><br></pre></td></tr></table></figure>

<h2 id="where子句査询语句"><a href="#where子句査询语句" class="headerlink" title="where子句査询语句"></a>where子句査询语句</h2><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">【语法:】</span><br><span class="line"><span class="keyword">select</span> * &#123;[DISTINCT] column|expression[<span class="keyword">alias</span>],...&#125;</span><br><span class="line"><span class="keyword">from</span>  table</span><br><span class="line"><span class="function"><span class="keyword">where</span> <span class="title">condition</span>(<span class="params">s</span>)]</span>;</span><br><span class="line"><span class="number">1.</span>使用<span class="keyword">where</span>子句可以限制返回的行</span><br><span class="line"><span class="number">2.</span><span class="keyword">where</span>子句在<span class="keyword">from</span>子句之后</span><br><span class="line">例如:   </span><br><span class="line"><span class="keyword">select</span> ename,job,sal <span class="keyword">from</span> emp <span class="keyword">where</span> deptno=<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">【<span class="keyword">where</span>査询字符串和日期】</span><br><span class="line"><span class="number">1.</span>字符串和日期值应放在单引号内</span><br><span class="line"><span class="number">2.</span>字符值区分大小写, 日期值区分格式</span><br><span class="line"><span class="number">3.</span>默认的日期显示格式为DD-MON-YY</span><br><span class="line">例如:</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> ename=<span class="string">'SCOTT'</span></span><br><span class="line">其中scott为字符串类型, 不加<span class="string">' '</span>会提示标识符无效</span><br><span class="line">举例：</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> hiredate=<span class="string">'28-9月-1981'</span>;</span><br><span class="line">alter session <span class="keyword">set</span> nls_date_format=<span class="string">'yyyy-mm-dd'</span>;           【修改日期默认格式】</span><br><span class="line"></span><br><span class="line">【<span class="keyword">where</span>中比较运算符】   </span><br><span class="line"><span class="number">1.b</span>etween中...and...两值之间(包含这两个值)</span><br><span class="line"><span class="number">2.</span><span class="keyword">in</span>与任一列表值相匹配</span><br><span class="line"><span class="number">3.l</span>ike 与字符模式相匹配</span><br><span class="line"><span class="number">4.</span><span class="keyword">is</span> <span class="literal">null</span>为空值</span><br><span class="line"><span class="number">5.</span><span class="keyword">is</span> not <span class="literal">null</span>不为空值</span><br><span class="line"><span class="number">6.</span>=等于    &gt;大于 &lt;小于</span><br><span class="line"><span class="number">7.</span>&gt;=大于等于</span><br><span class="line"><span class="number">8.</span>&lt;=小于等于</span><br><span class="line"><span class="number">9.</span>&lt;&gt;不等于</span><br><span class="line"></span><br><span class="line">比较运算符举例:    </span><br><span class="line">【between······and······两值之间 (包含这两个值)】</span><br><span class="line"><span class="keyword">select</span> ename,job,sa1,deptno <span class="keyword">from</span> emp <span class="keyword">where</span> sa1  between <span class="number">1000</span> and <span class="number">1500</span>;</span><br><span class="line"></span><br><span class="line">【<span class="keyword">in</span>与任一列表值相匹配】</span><br><span class="line"><span class="keyword">select</span> ename,job,sa1,<span class="function">deptno <span class="keyword">from</span> emp <span class="keyword">where</span> deptno <span class="title">in</span>(<span class="params"><span class="number">20</span>,<span class="number">30</span></span>)</span>;</span><br><span class="line"></span><br><span class="line">【like与字符模式相匹配】</span><br><span class="line"><span class="keyword">select</span> ename,job,sal <span class="keyword">from</span> emp <span class="keyword">where</span> ename like <span class="string">'%s'</span>;</span><br><span class="line"></span><br><span class="line">【like运算符执行模式匹配】</span><br><span class="line"><span class="number">1.</span>使用like运算符可执行通配符捜索, 査找有效捜索字符串值 </span><br><span class="line"><span class="number">2.</span>捜索条件可包含文字字符或数字</span><br><span class="line"><span class="number">3.</span>%表示零个或多个字符， _表示一个字符</span><br><span class="line">例如:</span><br><span class="line"><span class="keyword">select</span> ename <span class="keyword">from</span> emp <span class="keyword">where</span> ename like <span class="string">'S%'</span>;</span><br><span class="line"><span class="keyword">select</span> ename,sa1 <span class="keyword">from</span> emp <span class="keyword">where</span> ename like <span class="string">'_LA%'</span> ;</span><br><span class="line"></span><br><span class="line">【<span class="literal">null</span>条件】                    </span><br><span class="line"><span class="number">1.</span>使用<span class="keyword">is</span> <span class="literal">null</span>运算符可测试空</span><br><span class="line"><span class="keyword">select</span> ename,sa1,comm <span class="keyword">from</span> emp <span class="keyword">where</span> comm <span class="keyword">is</span> <span class="literal">null</span>;</span><br><span class="line"><span class="number">2.</span>使用<span class="keyword">is</span> not <span class="literal">null</span>运算符可则试不为空</span><br><span class="line"><span class="keyword">select</span> ename,sal,comm <span class="keyword">from</span> emp <span class="keyword">where</span> comm <span class="keyword">is</span> not nu11;</span><br><span class="line"></span><br><span class="line">【其它运算符的举例】</span><br><span class="line"><span class="number">1.</span>&gt;大于=等于&lt;小于</span><br><span class="line"><span class="keyword">select</span> ename,sa1,comm <span class="keyword">from</span> emp <span class="keyword">where</span> sa1&gt;<span class="number">1000</span>;</span><br><span class="line"><span class="number">2.</span>&gt;=大于等于&lt;=小于等于</span><br><span class="line">selectename,sa1,comm fromemp <span class="keyword">where</span> sa1&lt;=<span class="number">1500</span>;</span><br><span class="line"><span class="number">3.</span>&lt;&gt;不等于或者！</span><br><span class="line"><span class="keyword">select</span> ename,sa1, comm <span class="keyword">from</span> emp <span class="keyword">where</span> sa1&lt;&gt;<span class="number">1500</span>;  </span><br><span class="line"><span class="keyword">select</span> ename,sa1, comm <span class="keyword">from</span> emp <span class="keyword">where</span> sa1  !<span class="number">1500</span>;  </span><br><span class="line"></span><br><span class="line">【逻辑运算符定义条件】</span><br><span class="line"><span class="number">1.</span>and如果两个条件都为真,则返回<span class="literal">true</span></span><br><span class="line"><span class="keyword">select</span> ename,job,sa1,conm <span class="keyword">from</span> emp <span class="keyword">where</span> sa1&gt;<span class="number">1500</span> and comm <span class="keyword">is</span> not nu11;</span><br><span class="line"><span class="number">2.</span>or如果其中一个条件为真,则返回<span class="literal">true</span></span><br><span class="line"><span class="keyword">select</span> ename,sa1, conm <span class="keyword">from</span> emp <span class="keyword">where</span> sal between <span class="number">2000</span> and <span class="number">2800</span> or ename like <span class="string">'%S'</span>;</span><br><span class="line"><span class="number">3.</span>not如果条件为假,则返回<span class="literal">true</span>                            </span><br><span class="line">selectename,sa1,comm,<span class="function">deptno fromemp <span class="keyword">where</span> deptno not <span class="title">in</span>(<span class="params"><span class="number">20</span>,<span class="number">30</span></span>) or comm <span class="keyword">is</span> not <span class="literal">null</span></span>;</span><br></pre></td></tr></table></figure>

<p>运算符的优先级</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>算术运算符</td>
</tr>
<tr>
<td>2</td>
<td>连接运算符</td>
</tr>
<tr>
<td>3</td>
<td>比较条件</td>
</tr>
<tr>
<td>4</td>
<td>IS [NOT] NULL、LIKE、[NOT] IN</td>
</tr>
<tr>
<td>5</td>
<td>[NOT] BETWEEN</td>
</tr>
<tr>
<td>6</td>
<td>不等于</td>
</tr>
<tr>
<td>7</td>
<td>NOT逻辑条件</td>
</tr>
<tr>
<td>8</td>
<td>AND逻辑条件</td>
</tr>
<tr>
<td>9</td>
<td>OR逻辑条件</td>
</tr>
</tbody></table>
<p>可以使用括号来改变优先级</p>
<h2 id="order-by子句"><a href="#order-by子句" class="headerlink" title="order by子句"></a>order by子句</h2><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">【使用<span class="keyword">order</span> <span class="keyword">by</span>子句可对检索行进行排序】</span><br><span class="line"><span class="number">1.</span><span class="keyword">asc</span>:升序,默认顺序</span><br><span class="line"><span class="number">2.</span><span class="keyword">desc</span>: 降序</span><br><span class="line"><span class="number">3.</span><span class="keyword">order</span> <span class="keyword">by</span>子句位于<span class="keyword">select</span>语句的最后</span><br><span class="line">例如:</span><br><span class="line"><span class="keyword">select</span> ename,sa1,hiredate <span class="keyword">from</span> emp <span class="keyword">where</span> comm <span class="keyword">is</span> <span class="keyword">null</span> <span class="keyword">order</span> <span class="keyword">by</span> hiredate;                                   </span><br><span class="line"><span class="keyword">select</span> ename,sa1*<span class="number">12</span> <span class="keyword">AS</span>"年薪"，job,hiredate <span class="keyword">from</span> emp <span class="keyword">where</span> sa1&gt;<span class="number">1500</span> <span class="keyword">order</span> <span class="keyword">by</span> "年薪" <span class="keyword">desc</span>;</span><br><span class="line"></span><br><span class="line">【使用&amp;替代变量】</span><br><span class="line">使用&amp;为前缀的变量可提示用户输入一个值:</span><br><span class="line"><span class="keyword">select</span> empno, ename, sal,job <span class="keyword">from</span> emp <span class="keyword">where</span> empno=&amp;aa;</span><br><span class="line"><span class="keyword">select</span> empno,ename,sal,job,hiredate <span class="keyword">from</span> emp <span class="keyword">where</span> deptno =&amp;bb <span class="keyword">order</span> <span class="keyword">by</span> hiredate <span class="keyword">desc</span>;</span><br><span class="line"></span><br><span class="line">【字符串类型和日期类型需要单引号<span class="string">''</span>】</span><br><span class="line"><span class="keyword">select</span> empno,ename,sal,job,hiredate <span class="keyword">from</span> emp <span class="keyword">where</span> ename=<span class="string">'&amp;cc'</span>;</span><br></pre></td></tr></table></figure>

<h1 id="SQL常用函数及分组函数"><a href="#SQL常用函数及分组函数" class="headerlink" title="SQL常用函数及分组函数"></a>SQL常用函数及分组函数</h1><p>学习目标</p>
<ol>
<li>描述SQL提供的各类函数</li>
<li>在SELECT语句中使用字符、 数字和日期函数</li>
<li>描述SQL提供的各类转换函数</li>
<li>使用to_char、to_number和to_date转换函数</li>
<li>在SELECT语句中应·用条件表达式</li>
<li>描述组函数的使用方法</li>
<li>使用 group by子句对数据进行分组</li>
<li>通过使用 having子句包括或排除分组的行</li>
</ol>
<h2 id="字符函数"><a href="#字符函数" class="headerlink" title="字符函数"></a>字符函数</h2><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">lower(<span class="type">char</span>)         将字符串转换成小写格式</span><br><span class="line">upper(<span class="type">char</span>)         将字符串转换成大写格式</span><br><span class="line">length(<span class="type">char</span>)        返回字符串长度</span><br><span class="line">substr(<span class="type">char</span>,m,n)    取字符串子串</span><br><span class="line">replace             (字段,<span class="string">'源字符串'</span>, <span class="string">'目标字符串'</span>)       </span><br><span class="line">例如:</span><br><span class="line"><span class="keyword">select</span>  replace(ename,<span class="string">'S'</span>,<span class="string">'你好'</span>),sal  <span class="keyword">from</span>  emp;</span><br><span class="line"></span><br><span class="line">字符函数举例：</span><br><span class="line"><span class="number">1.</span>lower(<span class="type">char</span>)        将与字符串转化为小写格式</span><br><span class="line"><span class="keyword">select</span>  lower(ename),sal <span class="keyword">from</span>  emp;</span><br><span class="line"><span class="number">2.</span>upper(<span class="type">char</span>)        将字符串转换成大写格式</span><br><span class="line"><span class="keyword">select</span>  upper(ename),job  <span class="keyword">from</span>  emp;</span><br><span class="line"><span class="number">3.</span>length(<span class="type">char</span>)       返回字符串长度</span><br><span class="line"><span class="keyword">select</span>  ename,job,sal  <span class="keyword">from</span>  emp    <span class="keyword">where</span> length(ename)=<span class="number">6</span>;</span><br><span class="line"><span class="number">4.</span>substr(<span class="type">char</span>,m,n)   取字符串子串</span><br><span class="line"><span class="keyword">select</span>  substr(ename,<span class="number">1</span>,<span class="number">3</span>),sa1  <span class="keyword">from</span>  emp;</span><br></pre></td></tr></table></figure>

<h2 id="数字函数"><a href="#数字函数" class="headerlink" title="数字函数"></a>数字函数</h2><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">round</span> :   将值舍入到指定的小数位</span><br><span class="line"><span class="built_in">trunc</span> :   将值截断到指定的小数位</span><br><span class="line">mod :     返回除法运算的余数</span><br><span class="line"></span><br><span class="line">数字函数举例：</span><br><span class="line"><span class="number">1.</span><span class="built_in">round</span>:将值舍入到指定的小数位</span><br><span class="line"><span class="built_in">select</span> <span class="built_in">round</span>(sal,<span class="number">1</span>),<span class="built_in">round</span>(comm,<span class="number">1</span>)<span class="built_in">from</span> emp <span class="built_in">where</span> ename='BLAKE’;</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span><span class="built_in">trunc</span>:将值截断到指定的小数位（mysql没有对应的）</span><br><span class="line"><span class="built_in">select</span> <span class="built_in">trunc</span>(sal,<span class="number">2</span>),<span class="built_in">trunc</span>(comm,<span class="number">1</span>) from emp <span class="built_in">where</span> ename='FORD';</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>mod:返回除法运算的余数串</span><br><span class="line"><span class="built_in">select</span> <span class="built_in">mod</span>(<span class="number">10</span>,<span class="number">2</span>) from dual;</span><br></pre></td></tr></table></figure>

<h2 id="日期函数"><a href="#日期函数" class="headerlink" title="日期函数"></a>日期函数</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">1.Oracle DB以内部数字格式存储日期:世纪、年、月日、小时、分钟和秒</span><br><span class="line"></span><br><span class="line">2.默认的日期显示格式为DD-MON-YY。</span><br><span class="line">例如:</span><br><span class="line"><span class="keyword">select</span>  *  <span class="keyword">from</span>  emp  <span class="keyword">where</span>  hiredate&gt;<span class="string">'01-1月-1982'</span>；</span><br><span class="line">MySQL:</span><br><span class="line"><span class="keyword">select</span>  *  <span class="keyword">from</span>  emp  <span class="keyword">where</span>  hiredate&gt;<span class="string">'2017-03-05 14:28:56'</span>；</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span><span class="keyword">sysdate</span>该函数返回系统时间（mysql：<span class="keyword">select</span></span><br><span class="line"><span class="keyword">now</span>();</span><br><span class="line">例如: <span class="keyword">select</span>  <span class="keyword">sysdate</span>  <span class="keyword">from</span>  dual;</span><br><span class="line"></span><br><span class="line">5.add_months(d,n)可以得某段时间之前或之后n个月的时间</span><br><span class="line"></span><br><span class="line">6.months_between(d,d),返回两个日期之间的月份数</span><br><span class="line"></span><br><span class="line">7.last_day(d):返回指定日期所在月份的最后一天</span><br><span class="line">例如:                                            </span><br><span class="line"><span class="keyword">select</span>  add_months(<span class="keyword">sysdate</span>,<span class="number">6</span>)  <span class="keyword">from</span>  dual;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> <span class="keyword">sysdate</span>&gt;add_months(hiredate);</span><br><span class="line"><span class="keyword">select</span> months_between(<span class="keyword">to_date</span>(<span class="string">'20100228'</span>,<span class="string">'yyyymmdd'</span><span class="keyword">to_date</span>(<span class="string">'20100128'</span>,<span class="string">'yyyymmdd'</span>)) <span class="keyword">as</span> <span class="keyword">months</span> <span class="keyword">from</span> dual;</span><br></pre></td></tr></table></figure>

<h2 id="round和trunc处理日期"><a href="#round和trunc处理日期" class="headerlink" title="round和trunc处理日期"></a>round和trunc处理日期</h2><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">例如:【使用round函数舍到月份】</span><br><span class="line"><span class="function"><span class="keyword">select</span>  <span class="title">round</span>(<span class="params">sysdate,<span class="string">'MONTH'</span></span>)  <span class="keyword">from</span>  dual</span>;</span><br><span class="line"></span><br><span class="line">例如:【使用 round函数舍到年】</span><br><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">round</span>(<span class="params">to_date(<span class="number">2013</span><span class="number">-07</span><span class="number">-22'</span>,yyyy-mm-dd<span class="string">'),'</span>year</span>) <span class="keyword">from</span> dual</span>;</span><br><span class="line"></span><br><span class="line">例如: 【trunc截取到年(本年的第一天)】                              <span class="function"><span class="keyword">select</span>  <span class="title">trunc</span>(<span class="params">sysdate,<span class="string">'YEAR'</span></span>)  <span class="keyword">from</span>  dual</span>;</span><br></pre></td></tr></table></figure>

<h2 id="隐式转换"><a href="#隐式转换" class="headerlink" title="隐式转换"></a>隐式转换</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">【隐式转换未使用到转换函数, 默认进行转换的】</span><br><span class="line">1.insert和<span class="keyword">update</span>操作, <span class="keyword">oracle</span>会把插入值或者更新值隐式转换为字段的数据类型</span><br><span class="line">例如: 【empno数据类型为<span class="built_in">number</span>,从字符串到数值的转换】</span><br><span class="line"><span class="keyword">update</span>  emp  <span class="keyword">set</span>  empno=<span class="string">'1234'</span>  <span class="keyword">where</span>  ename=<span class="string">'SCOTT'</span>;</span><br><span class="line"><span class="keyword">update</span>  emp  <span class="keyword">set</span>  empno=to_char(<span class="string">'1234'</span>)  <span class="keyword">where</span>  ename=<span class="string">'SCOTT'</span>;</span><br></pre></td></tr></table></figure>

<h2 id="显示转换"><a href="#显示转换" class="headerlink" title="显示转换"></a>显示转换</h2><p><img src="/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/2021-05-17-oracle-all%5CImage.jpg" alt></p>
<img src="/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/Image.jpg" class title="This is an example image">

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">通过转换函数将不同类型进行装换</span><br></pre></td></tr></table></figure>

<h2 id="to-char"><a href="#to-char" class="headerlink" title="to_char"></a>to_char</h2><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">【将时间或者日期装换成字符】</span><br><span class="line"><span class="number">1.</span>必须放在单引号内</span><br><span class="line"><span class="number">2.</span>区分大小写</span><br><span class="line"><span class="number">3.</span>可以包含任何有效的日期格式元素</span><br><span class="line"><span class="number">4.</span>具有一个日期元素, 用于删除填充的空格或隐藏前导零</span><br><span class="line"><span class="number">5.</span>与日期值之间用逗号分隔    </span><br><span class="line"></span><br><span class="line">举例：</span><br><span class="line">【修改默认的显示时间的格式】   </span><br><span class="line">select  ename,job,to_char （hiredate,'yyy-mm-dd')   from  emp;</span><br><span class="line">【显示时分秒】</span><br><span class="line">select ename,job,<span class="keyword">to</span><span class="constructor">_char(<span class="params">hiredate</span>,’<span class="params">yyyy</span>-<span class="params">mm</span>-<span class="params">dd</span> <span class="params">hh24</span>:<span class="params">mi</span>:<span class="params">ss</span>’)</span> from emp;</span><br><span class="line">Attachment</span><br><span class="line">举例：将数字转化成字符</span><br><span class="line">【将sal的格式转化成$格式显示】</span><br><span class="line">select  ename,<span class="keyword">to</span><span class="constructor">_char(<span class="params">sal</span>,’$99,999.99’)</span> from emp;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>元素</th>
<th>结果</th>
</tr>
</thead>
<tbody><tr>
<td>YYYY</td>
<td>用数字表示的完整年份</td>
</tr>
<tr>
<td>YEAR</td>
<td>拼写出的年份（用英文表示）</td>
</tr>
<tr>
<td>MM</td>
<td>月份的两位数值</td>
</tr>
<tr>
<td>MONTH</td>
<td>月份的完整名称</td>
</tr>
<tr>
<td>MON</td>
<td>月份的三个字母缩写</td>
</tr>
<tr>
<td>DY</td>
<td>一周中某日的三个字母缩写</td>
</tr>
<tr>
<td>DAY</td>
<td>一周中某日的完整名称</td>
</tr>
<tr>
<td>DD</td>
<td>用数字表示的月份中某日</td>
</tr>
</tbody></table>
<h2 id="to-number"><a href="#to-number" class="headerlink" title="to_number"></a><strong>to_number</strong></h2><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">【将字符串转换为数字格式】</span><br><span class="line">语法:to_number(<span class="type">char</span>[,<span class="string">'format_model'</span>])</span><br><span class="line">例如:<span class="keyword">select</span> to_number(<span class="meta">$123</span><span class="number">.23</span><span class="string">','</span><span class="meta">$999</span><span class="number">.99</span><span class="string">')  from  dual;</span></span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>元素</th>
<th>结果</th>
</tr>
</thead>
<tbody><tr>
<td>9</td>
<td>代表一个数字</td>
</tr>
<tr>
<td>0</td>
<td>强制显示零</td>
</tr>
<tr>
<td>$</td>
<td>放置一个浮动的美元符号</td>
</tr>
<tr>
<td>L</td>
<td>使用浮动的本地货币符号</td>
</tr>
<tr>
<td>.</td>
<td>显示小数点</td>
</tr>
<tr>
<td>,</td>
<td>显示作为千位指示符的逗号</td>
</tr>
</tbody></table>
<h2 id="to-date"><a href="#to-date" class="headerlink" title="to_ date"></a>to_ date</h2><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">【将字符串转换为日期格式】</span><br><span class="line">语法:</span><br><span class="line"><span class="keyword">to</span><span class="constructor">_date(<span class="params">char</span>[, '<span class="params">format_model</span>'])</span></span><br><span class="line">例如:                                                 </span><br><span class="line">select  <span class="keyword">to</span><span class="constructor">_date(‘2013-10-17 11:15:37',<span class="params">yyyy</span>-<span class="params">mm</span>-<span class="params">dd</span> <span class="params">hh24</span>:<span class="params">mi</span>:<span class="params">ss</span>')</span>  from dua1</span><br></pre></td></tr></table></figure>

<h2 id="nvl函数"><a href="#nvl函数" class="headerlink" title="nvl函数"></a>nvl函数</h2><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">【将空值转换为实际值】</span><br><span class="line"><span class="number">1.</span>可以使用的数据类型为日期、字符和数字</span><br><span class="line"><span class="number">2.</span>数据类型必须匹配</span><br><span class="line">语法:  </span><br><span class="line">nv1 (value1 ,value2)</span><br><span class="line">例如:</span><br><span class="line">【如果comm的值为<span class="literal">null</span>,那么函数返回<span class="number">0</span> ,如果comm不为空就返回comm的值】</span><br><span class="line">select ename, sa1*<span class="number">12</span>+nv1(comm,<span class="number">0</span>)*<span class="number">12</span> as<span class="string">"年收入"</span> <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<p>MySQL:</p>
<p><img src="/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/2021-05-17-oracle-all%5C144825.jpg" alt></p>
<img src="/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/144825.jpg" class title="This is an example image">

<h2 id="nvl2"><a href="#nvl2" class="headerlink" title="nvl2"></a>nvl2</h2><figure class="highlight ceylon"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nvl<span class="number">2</span>(<span class="keyword">value</span><span class="number">1</span> ,<span class="keyword">value</span><span class="number">2</span>,<span class="keyword">value</span><span class="number">3</span>)</span><br><span class="line">如果<span class="keyword">value</span><span class="number">1</span>不是空值则返回<span class="keyword">value</span><span class="number">2</span>,否则返回<span class="keyword">value</span><span class="number">3</span> 反正不会返回<span class="keyword">value</span><span class="number">1</span></span><br><span class="line">例如:</span><br><span class="line">select ename, sa<span class="number">1</span>,comm ,nv<span class="number">12</span>(comm ,<span class="string">'sa1+comm’,'</span>sa<span class="number">1</span><span class="string">') incom  from emp;</span></span><br></pre></td></tr></table></figure>

<h2 id="组函数（！！！！）"><a href="#组函数（！！！！）" class="headerlink" title="组函数（！！！！）"></a>组函数（！！！！）</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">组函数会对行集进行计算，为每个组提供一个结果。</span><br><span class="line">【分组函数类型：】</span><br><span class="line">1.avg  </span><br><span class="line">2.count  </span><br><span class="line">3.max          </span><br><span class="line">4.min   </span><br><span class="line">5.sum</span><br><span class="line"></span><br><span class="line">【分组函数语法】</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">column</span>,group_function(<span class="keyword">column</span>),.... <span class="keyword">from</span> <span class="keyword">table</span></span><br><span class="line"><span class="keyword">where</span> condition</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">column</span>;</span><br><span class="line"></span><br><span class="line">例如：<span class="keyword">select</span>  <span class="keyword">avg</span>(sal),<span class="keyword">max</span>(sal),<span class="keyword">min</span>(sal)  <span class="keyword">from</span>  emp;</span><br><span class="line"></span><br><span class="line">注意：</span><br><span class="line">1.只要有一个列是分组函数其他列都必须是分组函数</span><br><span class="line">2.分组函数不能放在where子句中</span><br><span class="line">3.分组函数只可以出现在列、having、order by的子句中</span><br><span class="line"></span><br><span class="line">【分组函数举例：】</span><br><span class="line">1.査询入职时间最早和入职时间最晚的员工入职日期</span><br><span class="line"><span class="keyword">select</span>  <span class="keyword">min</span>(hiredate),<span class="keyword">max</span>(hiredate)  <span class="keyword">from</span>  emp；</span><br><span class="line"><span class="number">2.</span>査询部门编号为<span class="number">10</span>号的部门有多少员工</span><br><span class="line"><span class="keyword">select</span>  <span class="keyword">count</span>(*)  <span class="keyword">from</span>  emp  <span class="keyword">where</span>  deptno=<span class="number">10</span>;</span><br><span class="line">3 査询emp表共有多少条数据</span><br><span class="line"><span class="keyword">select</span>  <span class="keyword">count</span>(<span class="number">1</span>)  <span class="keyword">from</span>  emp;</span><br><span class="line">4.査询emp表中不同部门值的数量</span><br><span class="line"><span class="keyword">select</span>  <span class="keyword">count</span>(<span class="keyword">distinct</span> deptno) f rom  emp;</span><br></pre></td></tr></table></figure>

<h2 id="group-by"><a href="#group-by" class="headerlink" title="group by"></a>group by</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">select column,group_function(column),<span class="built_in">..</span><span class="built_in">..</span> <span class="keyword">from</span> table</span><br><span class="line">where condition</span><br><span class="line">group by column</span><br><span class="line">order by column;</span><br><span class="line"></span><br><span class="line">select列表中未出现在组函数中的所有列都必须包含在group by子句中</span><br><span class="line">select deptno,job,sum(sal) <span class="keyword">from</span> emp where deptno&gt;10<span class="built_in"> group </span>by deptno,job order by deptno;</span><br><span class="line"></span><br><span class="line">GROUP BY子句的找错</span><br><span class="line">select department_id, count(1ast_name) <span class="keyword">from</span> emp1oyees;</span><br><span class="line">select department_id,,job_id, count(1ast_name)<span class="keyword">from</span> emp1oyees<span class="built_in"> group </span>by department_id;</span><br></pre></td></tr></table></figure>

<h2 id="having-子句限定结果"><a href="#having-子句限定结果" class="headerlink" title="having 子句限定结果"></a>having 子句限定结果</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">【语法：】</span><br><span class="line">select column,group_function(column),<span class="built_in">..</span><span class="built_in">..</span> <span class="keyword">from</span> table</span><br><span class="line">where condition</span><br><span class="line">group by column</span><br><span class="line">having condition</span><br><span class="line">order by column;</span><br><span class="line"></span><br><span class="line">1.对行进行分组</span><br><span class="line">2.应用组函数</span><br><span class="line">3.显示符合having子句的组</span><br><span class="line"></span><br><span class="line">分组查询</span><br><span class="line">group by     可多列分组，用“，”隔开</span><br><span class="line">语法：</span><br><span class="line">select       分组列，分组函数 <span class="keyword">from</span> table</span><br><span class="line">where        条件</span><br><span class="line">group by     分组列</span><br><span class="line">having       分组条件</span><br><span class="line">order by</span><br><span class="line"></span><br><span class="line">分组査询的举例 ：</span><br><span class="line">【找出1981年雇佣的各部门员工的平均工资大于2000的部门，并按照平均薪资降序排序】          </span><br><span class="line">select  avg(sa1),deptno <span class="keyword">from</span>  emp</span><br><span class="line">where to_char(hiredate,yyyy<span class="string">')=1981</span></span><br><span class="line"><span class="string">group  by  deptno</span></span><br><span class="line"><span class="string">having  avg(sa1)&gt;2000</span></span><br><span class="line"><span class="string">order  by  avg(sa1)  desc;</span></span><br></pre></td></tr></table></figure>

<h2 id="嵌套组函数"><a href="#嵌套组函数" class="headerlink" title="嵌套组函数"></a>嵌套组函数</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">【显示平均薪资最高的部门】</span><br><span class="line">select max(avg(sal)) <span class="keyword">from</span> emp<span class="built_in"> group </span>by deptno;</span><br></pre></td></tr></table></figure>

<h1 id="SQL语句多表联接"><a href="#SQL语句多表联接" class="headerlink" title="SQL语句多表联接"></a>SQL语句多表联接</h1><p>学习目标<br>1.编写select语句,以使用等值联接和非等值联接访问多个表中的数据<br>2.使用自联接将表联接到自身<br>3.使用0uTer联接査看通常不满足联接条件的数据<br>4.生成两个或多个表中所有行的笛卡尔积</p>
<h2 id="联接"><a href="#联接" class="headerlink" title="联接"></a>联接</h2><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">自然联接:</span><br><span class="line"><span class="keyword">natural</span> <span class="keyword">join</span>子句</span><br><span class="line"><span class="keyword">using</span>子句</span><br><span class="line"><span class="keyword">on</span>子句</span><br><span class="line"></span><br><span class="line"><span class="keyword">outer</span>联接:</span><br><span class="line"><span class="keyword">left outer join</span></span><br><span class="line"><span class="keyword">right outer join</span></span><br><span class="line"><span class="keyword">full</span> <span class="keyword">outer</span> <span class="keyword">join</span></span><br><span class="line"></span><br><span class="line">交叉联接（笛卡尔积）</span><br></pre></td></tr></table></figure>

<h2 id="联接的语法"><a href="#联接的语法" class="headerlink" title="联接的语法"></a><strong>联接的语法</strong></h2><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">使用联接可查询多个表中的数据；</span><br><span class="line">语法：</span><br><span class="line"><span class="keyword">SELECT</span>	table1.<span class="keyword">column</span>,table2.<span class="keyword">column</span></span><br><span class="line"><span class="keyword">FROM</span>	table1</span><br><span class="line">[<span class="keyword">NATURAL</span> <span class="keyword">JOIN</span> table2] |</span><br><span class="line">[<span class="keyword">JOIN</span> table2 <span class="keyword">USING</span> (<span class="built_in">column_name</span>)] |</span><br><span class="line">[<span class="keyword">JOIN</span> table2 <span class="keyword">ON</span> (table1.<span class="built_in">column_name</span> = table2.<span class="keyword">column</span> <span class="type">name</span>)] |</span><br><span class="line">[LEFT|RIGHT|<span class="keyword">FULL</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> table2 <span class="keyword">oN</span> (table1.<span class="built_in">column_name</span> = table2.<span class="built_in">column_name</span>)] |</span><br><span class="line">[<span class="keyword">CROSS</span> <span class="keyword">JOIN</span> table2];</span><br><span class="line"></span><br><span class="line">限定不确定的列名</span><br><span class="line"><span class="number">1.</span>使用表前缀可以限定多个表中的列名</span><br><span class="line"><span class="number">2.</span>使用表前缀可以提高性能</span><br><span class="line"><span class="number">3.</span>可以使用表别名来代替完整表名前缀</span><br><span class="line"></span><br><span class="line">表别名是表的短名称:</span><br><span class="line"><span class="number">1.</span>使<span class="keyword">SQL</span>代码变得更短, 因而占用更少的内存</span><br><span class="line"><span class="number">2.</span>使用列别名可区分具有相同名称但位于不同表中的列</span><br></pre></td></tr></table></figure>

<h2 id="natural-join创建联接"><a href="#natural-join创建联接" class="headerlink" title="natural join创建联接"></a>natural join创建联接</h2><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span><span class="keyword">natural</span> <span class="keyword">join</span>的子句以两个表中具有相同名称的所有列为基础</span><br><span class="line"><span class="number">2.</span>它从两个表中选择在所有相匹配列中具有相同值的那些行</span><br><span class="line"><span class="number">3.</span>如果名称相同的列具有不同的数据类型, 则返回一个错误</span><br><span class="line">例如:</span><br><span class="line"><span class="keyword">select</span> department_id, department_name,location_id,city </span><br><span class="line"><span class="keyword">from</span> departments</span><br><span class="line"><span class="keyword">natural</span> <span class="keyword">join</span> locations;</span><br></pre></td></tr></table></figure>

<h2 id="join-using创建联接"><a href="#join-using创建联接" class="headerlink" title="join using创建联接"></a>join using创建联接</h2><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>如果多个列具有相同的名称,但数据类型不匹配 ,请使用<span class="keyword">using</span>子句指定等值联接的列。</span><br><span class="line"><span class="number">2.</span>当有多个列相匹配时, 使用<span class="keyword">using</span>子句可仅与一列相匹配        </span><br><span class="line"><span class="number">3.</span><span class="keyword">natural</span> <span class="keyword">join</span>和<span class="keyword">join</span> <span class="keyword">using</span>关键字是互相排斥的 ,不能同时出现</span><br><span class="line">例如:</span><br><span class="line"><span class="keyword">select</span> emp1oyee_id,<span class="number">1</span>ast_name,<span class="number">1</span>ocation_id,department_id</span><br><span class="line"><span class="keyword">from</span> employees <span class="keyword">join</span> department</span><br><span class="line"><span class="keyword">using</span> (depanment_id);</span><br></pre></td></tr></table></figure>

<h2 id="主键、外键"><a href="#主键、外键" class="headerlink" title="主键、外键"></a>主键、外键</h2><p><img src="/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/2021-05-17-oracle-all%5Cimage-20210608231722810.png" alt></p>
<img src="/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/image-20210608231722810.png" class title="This is an example image">

<h2 id="在using子句中使用表别名"><a href="#在using子句中使用表别名" class="headerlink" title="在using子句中使用表别名"></a>在using子句中使用表别名</h2><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>不要对<span class="keyword">using</span>子句中使用列加以限定</span><br><span class="line"><span class="number">2.</span>如果在<span class="keyword">SQL</span>语句中的另一个位置使用了同一列，则不要对其设置别名</span><br><span class="line">例如：【其中d.location_id和a.location_id是错误的】</span><br><span class="line"><span class="keyword">select</span> a.city,d.department_name <span class="keyword">from</span> loacations a <span class="keyword">join</span> departments d <span class="keyword">using</span>(location_id) <span class="keyword">where</span> d.<span class="keyword">location</span>=<span class="number">1400</span>;</span><br><span class="line"><span class="keyword">select</span> a.city,d.department_name,a.location_id <span class="keyword">from</span> locations a <span class="keyword">join</span> departments d <span class="keyword">using</span>(location_id) <span class="keyword">where</span> location_id=<span class="number">1400</span>;</span><br></pre></td></tr></table></figure>

<h2 id="join-on-创建联接"><a href="#join-on-创建联接" class="headerlink" title="join on 创建联接"></a>join on 创建联接</h2><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1.自然联接的基本联接条件是对具有相同名称的所有列进行等值联接。</span><br><span class="line">2.使用on子句可指定任意条件或指定要联接的列。</span><br><span class="line">3.联接条件独立于其它搜索条件</span><br><span class="line">4.使用on子句可使代码易于理解</span><br><span class="line">例如：</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">e</span>.employee_id,<span class="built_in">e</span>.last_name,<span class="built_in">e</span>.department_id,d.department_id,</span><br><span class="line">d.location_id <span class="keyword">from</span> employees <span class="built_in">e</span> <span class="keyword">join</span> departments d <span class="keyword">on</span>(<span class="built_in">e</span>.department_id=d.department_id);</span><br></pre></td></tr></table></figure>

<h2 id="使用on子句创建三向联接"><a href="#使用on子句创建三向联接" class="headerlink" title="使用on子句创建三向联接"></a>使用on子句创建三向联接</h2><p><img src="/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/2021-05-17-oracle-all%5Cimage-20210608232126752.png" alt></p>
<img src="/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/image-20210608232126752.png" class title="This is an example image">

<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> employee_id,city,department_name <span class="keyword">from</span> employees <span class="built_in">e</span></span><br><span class="line"><span class="keyword">join</span> departments d</span><br><span class="line"><span class="keyword">on</span> d.department_id=<span class="built_in">e</span>.department_id</span><br><span class="line"><span class="keyword">join</span> locations a</span><br><span class="line"><span class="keyword">on</span> d.location_id=a.location_id;</span><br></pre></td></tr></table></figure>

<h2 id="对联接应用附加条件"><a href="#对联接应用附加条件" class="headerlink" title="对联接应用附加条件"></a>对联接应用附加条件</h2><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">使用and子句或where子句可应用附加条件</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">e</span>.employees_id,<span class="built_in">e</span>.last_name,<span class="built_in">e</span>.department_id,</span><br><span class="line">d.department_id,d.location_id <span class="keyword">from</span> employees <span class="built_in">e</span></span><br><span class="line"><span class="keyword">join</span> departments d</span><br><span class="line"><span class="keyword">on</span>(<span class="built_in">e</span>.department_id=d.department_id)</span><br><span class="line"><span class="keyword">and</span> <span class="built_in">e</span>.manager_id=<span class="number">149</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> last_name,department_name <span class="keyword">from</span> employees <span class="built_in">e</span> <span class="keyword">join</span> departments d <span class="keyword">on</span> <span class="built_in">e</span>.department_id=d.department_id <span class="keyword">where</span> <span class="built_in">e</span>.salary&gt;<span class="number">5000</span>;</span><br></pre></td></tr></table></figure>

<h2 id="使用on子句进行自联接"><a href="#使用on子句进行自联接" class="headerlink" title="使用on子句进行自联接"></a>使用on子句进行自联接</h2><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">将表联接到自身</span><br><span class="line">select <span class="keyword">a</span>.last_name,b.last_name <span class="built_in">from</span> employees <span class="keyword">a</span> join employees b <span class="keyword">on</span>(<span class="title">a</span>.<span class="title">employee_id</span>=<span class="title">b</span>.<span class="title">manager_id</span>);  【查询每个雇员（<span class="title">last_name</span>)的上级经理的名字（<span class="title">last_name</span>)】</span><br></pre></td></tr></table></figure>

<h2 id="非等值联接"><a href="#非等值联接" class="headerlink" title="非等值联接"></a>非等值联接</h2><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">从多张表的联接值是否相等的联接方式，分为等值连接和非等值联接</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">e</span>.ename,g.grade <span class="keyword">from</span> emp <span class="built_in">e</span></span><br><span class="line"><span class="keyword">join</span> salgrade g</span><br><span class="line"><span class="keyword">on</span> sal <span class="keyword">between</span> losal <span class="keyword">and</span> hisal;</span><br><span class="line">【查询每位雇员工资等级表（emp表 salgrade表）】</span><br></pre></td></tr></table></figure>

<h2 id="inner联接与outer联接"><a href="#inner联接与outer联接" class="headerlink" title="inner联接与outer联接"></a>inner联接与outer联接</h2><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>如果两个表的联接只返回相匹配的行, 则称该联接为<span class="keyword">inner</span> 联接</span><br><span class="line"><span class="number">2.</span>如果两个表之间的联接不仅返回<span class="keyword">inner</span>联接的结果,还返回左(或右)表中不匹配的行,则称该联接为左(或右) <span class="keyword">outer</span>联接</span><br><span class="line"><span class="number">3.</span>如果两个表之间的联接不仅返回<span class="keyword">inner</span>联接的结果,还返回左和右联接的结果,则称该联接为完全<span class="keyword">outer</span>联接.</span><br></pre></td></tr></table></figure>

<h2 id="left-outer-join-outer可以省略）"><a href="#left-outer-join-outer可以省略）" class="headerlink" title="left outer join(outer可以省略）"></a>left outer join(outer可以省略）</h2><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">左连接就是以left join前面的表为主表，即使有些记录关联不上，主表的信息能够查询出来</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">e</span>.last_name,<span class="built_in">e</span>.department_id,d.department_name</span><br><span class="line"><span class="keyword">from</span> employees <span class="built_in">e</span></span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> departments d</span><br><span class="line"><span class="keyword">on</span> (<span class="built_in">e</span>.department_id=d.derpartment_id);</span><br><span class="line">举例：</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">e</span>.ename,b.dname <span class="keyword">from</span> emp <span class="built_in">e</span> <span class="keyword">left</span> <span class="keyword">join</span> dept b <span class="keyword">on</span>( <span class="built_in">e</span>.deptno=b.deptno);</span><br><span class="line">【显示雇员所在的部门，并且没有部门的雇员也显示出来】</span><br></pre></td></tr></table></figure>

<h2 id="right-outer-join"><a href="#right-outer-join" class="headerlink" title="right outer join"></a>right outer join</h2><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">右连接就是以right  join前面的表为主表，即使有些记录关联不上，主表的信息能够查询出来</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">e</span>.last_name,d.department_id,d.department_name</span><br><span class="line"><span class="keyword">from</span> employees <span class="built_in">e</span></span><br><span class="line"><span class="keyword">right</span> <span class="keyword">join</span> departments d</span><br><span class="line"><span class="keyword">on</span>(<span class="built_in">e</span>.department_id=d.department_id);</span><br><span class="line">举例：</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">e</span>.ename,b.dname <span class="keyword">from</span> emp <span class="built_in">e</span> <span class="keyword">right</span> <span class="keyword">join</span> dept b <span class="keyword">on</span>(<span class="built_in">e</span>.deptno=b.deptno);</span><br><span class="line">【显示雇员所在的部门，并且将没有雇员的部门也显示出来】</span><br></pre></td></tr></table></figure>

<h2 id="full-outer-join"><a href="#full-outer-join" class="headerlink" title="full outer join"></a>full outer join</h2><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">全连接的查询结果是左外联接和右外联接查询结果的并集，即使有些记录关联不上，也能把部分信息查询出来</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">e</span>.last_name,d.department_id,d.department_name</span><br><span class="line"><span class="keyword">from</span> employees <span class="built_in">e</span></span><br><span class="line">full <span class="keyword">join</span> departments d</span><br><span class="line"><span class="keyword">on</span>(<span class="built_in">e</span>.department_id=d.department_id);</span><br></pre></td></tr></table></figure>

<h2 id="笛卡尔积"><a href="#笛卡尔积" class="headerlink" title="笛卡尔积"></a>笛卡尔积</h2><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">出现以下情況时将形成笛卡尔积:</span><br><span class="line"><span class="number">1.</span>联接条件被忽略</span><br><span class="line"><span class="number">2.</span>联接条件无效</span><br><span class="line"><span class="number">3.</span>第一表中的所有行被联接到第二个表中的所有行</span><br><span class="line"><span class="number">4.</span>如果要避免生成笛卡尔积, 请始终包括有效的联接条件</span><br></pre></td></tr></table></figure>

<h2 id="生成笛卡尔积（交叉联接）"><a href="#生成笛卡尔积（交叉联接）" class="headerlink" title="生成笛卡尔积（交叉联接）"></a>生成笛卡尔积（交叉联接）</h2><p><img src="/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/2021-05-17-oracle-all%5Cimage-20210608233107882.png" alt></p>
<img src="/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/image-20210608233107882.png" class title="This is an example image">


<h2 id="创建交叉联接"><a href="#创建交叉联接" class="headerlink" title="创建交叉联接"></a>创建交叉联接</h2><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cross</span> <span class="keyword">join</span> 子句可生成两个表的叉积。，这也称为两个表间的笛卡尔积。</span><br><span class="line"><span class="keyword">select</span> last_name,department-<span class="type">name</span></span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">cross</span> <span class="keyword">join</span> departments;</span><br></pre></td></tr></table></figure>

<h2 id="思考题："><a href="#思考题：" class="headerlink" title="思考题："></a>思考题：</h2><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">oracle联接语法支持下列哪些联接类型？</span><br><span class="line"><span class="number">1.</span>等值联接 </span><br><span class="line"><span class="number">2.</span>非等值联接 </span><br><span class="line"><span class="number">3.</span>left outer联接（左联接）</span><br><span class="line"><span class="number">4.</span>right outer 联接（右联接） </span><br><span class="line"><span class="number">5.f</span>ull outer联接</span><br><span class="line"><span class="number">6.</span>自联接 </span><br><span class="line"><span class="number">7.</span>自然连接  </span><br><span class="line"><span class="number">8.</span>笛卡尔积</span><br></pre></td></tr></table></figure>

<h2 id="总结1"><a href="#总结1" class="headerlink" title="总结1"></a>总结1</h2><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">在本课中, 您应该已经学会如何通过以下方式使用联接来显示多个表中的数据:</span><br><span class="line">·等值联接</span><br><span class="line">·非等值联接</span><br><span class="line">·<span class="keyword">outer</span>联接</span><br><span class="line">·自联接</span><br><span class="line">·交叉联接</span><br><span class="line">·自然联接   </span><br><span class="line">·<span class="keyword">full</span>（或双边）<span class="keyword">outer</span>联接</span><br></pre></td></tr></table></figure>

<h2 id="总结2"><a href="#总结2" class="headerlink" title="总结2:"></a>总结2:</h2><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">连接归类:</span><br><span class="line"><span class="number">1.</span>从多张表的连接值是否相等的连接方式, 分为等值连接和非等值接</span><br><span class="line"><span class="number">2.</span>从不同的表还是同一张表引用多次来完成连接査询, 分为普通连接査询和自连接査询</span><br><span class="line"><span class="number">3.</span>从结果集合对于査询的行筛选条件的满足情况:</span><br><span class="line">·完全满足连接条件的称为内连接 (交集)</span><br><span class="line">·不但显示满足连接条件的结果集合,还显示不符合条件的结果集合称为外连接</span><br></pre></td></tr></table></figure>

<h2 id="面试题："><a href="#面试题：" class="headerlink" title="面试题："></a>面试题：</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">如何实现数据库导入与导出的更新？</span><br><span class="line">如何只显示重复数据，或不显示重复数据？</span><br><span class="line">如何用储过程写分页?</span><br><span class="line">写分页有哪些方法，你一般用什么方法？用SQL语句写一个分页?</span><br><span class="line">ORACLE中左连接与右连接</span><br><span class="line">1.列举几种表连接方式</span><br><span class="line">不借助第三方工具，怎样查看sql的执行计划？</span><br><span class="line">Cost:Oracle计算出来的执行该操作的代价；</span><br><span class="line">Cardinality:表示预期从一个行源返回的记录数；</span><br><span class="line">Bytes:Oracle估算房钱操作的影响的数据量（单位byte）；</span><br><span class="line">执行计划里的各项指标都是越小越好。</span><br><span class="line">Ⅰ）使用 EXPLAIN PLAN查询PLAN_TABLE;</span><br><span class="line">EXPLAIN PLAN</span><br><span class="line"><span class="builtin-name">SET</span> <span class="attribute">STATEMENT_ID</span>=’QUERY1'</span><br><span class="line"><span class="keyword">FOR</span></span><br><span class="line">SELECT*</span><br><span class="line"><span class="keyword">FROM</span> a</span><br><span class="line">WHERE <span class="attribute">aa</span>=1;</span><br><span class="line">SELECT operation, options,object_name,object_type,ID,parent_id <span class="keyword">FROM</span> plan_table</span><br><span class="line">WHERE <span class="attribute">STATEMENT_ID</span>=<span class="string">'QUERY1'</span> ORDER BY ID;</span><br><span class="line"></span><br><span class="line">II)SQLPLUS中的<span class="builtin-name">SET</span> TRACE即可看到Execution Plan Statistics <span class="builtin-name">SET</span> AUTOTRACE ON;</span><br><span class="line"></span><br><span class="line">2.0racle虫字符串用什么符号链接?</span><br><span class="line">3.Oracle是怎样分页的?</span><br></pre></td></tr></table></figure>

<h2 id="补充："><a href="#补充：" class="headerlink" title="补充："></a>补充：</h2><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">重点：分组，多表，子查询；round,trunc,to_char,to_date</span><br><span class="line">什么是自联接？（面试要说清楚）</span><br><span class="line"><span class="keyword">natural</span> <span class="keyword">join</span>两张表名称相同，数据类型相同。</span><br><span class="line"><span class="keyword">natural</span> <span class="keyword">using</span> 两张以上表，名称相同，数据类型不同。</span><br><span class="line"><span class="keyword">natural</span> <span class="keyword">join</span> 和<span class="keyword">natural</span> <span class="keyword">using</span>互斥，不能同时出现</span><br><span class="line"><span class="keyword">join</span> <span class="keyword">on</span>（用的比较多，重点）相同名称，等值联接</span><br><span class="line"><span class="keyword">from</span> 后面接左表，<span class="keyword">join</span>后面接右表</span><br><span class="line">tomcat查看日志catalina.<span class="keyword">out</span></span><br></pre></td></tr></table></figure>

<h2 id="课上例题："><a href="#课上例题：" class="headerlink" title="课上例题："></a>课上例题：</h2><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">1.从部门表和雇员表中找出相同的部门，并显示所在的部门编号和部门名称</span><br><span class="line"><span class="keyword">select</span> a.department_id,d.department_name <span class="keyword">from</span> employees a <span class="keyword">join</span> departments d <span class="keyword">on</span> (a.department_id=d.department_id);</span><br><span class="line"><span class="keyword">select</span> a.department_id,d.department_name <span class="keyword">from</span> employees a,departments d <span class="keyword">where</span> a.department_id=d.department_id;</span><br><span class="line"></span><br><span class="line">2.找出员工对应其部门名称</span><br><span class="line"><span class="keyword">select</span> a.last_name,b.department_name <span class="keyword">from</span> employees a <span class="keyword">join</span> departments b <span class="keyword">on</span>(a.department_id=b.department_id);</span><br><span class="line"></span><br><span class="line">3.查询每个雇员(last_name)的上级经理的名字(last_name)</span><br><span class="line"><span class="keyword">select</span> a.last_name,b.last_name <span class="keyword">from</span> employees a <span class="keyword">join</span> employees b <span class="keyword">on</span>(a.employee_id=b.manager_id);</span><br><span class="line"></span><br><span class="line">4.查询出每一位雇员的姓名、职位、以及领导的姓名</span><br><span class="line"><span class="keyword">select</span> a.last_name,a.job_id,b.last_name <span class="keyword">from</span> employees a <span class="keyword">join</span> employees b <span class="keyword">on</span>(a.employee_id=b.manager_id);</span><br><span class="line"></span><br><span class="line">5.查询每位雇员工资等级(非等值联接）</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">e</span>.ename,g.grade <span class="keyword">from</span> emp <span class="built_in">e</span> <span class="keyword">join</span> salgrade g <span class="keyword">on</span> sal <span class="keyword">between</span> g.losal <span class="keyword">and</span> g.hisal;</span><br><span class="line"></span><br><span class="line">6.显示雇员所在的部门，并且没有部门的雇员也显示出来</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">e</span>.ename,b.dname <span class="keyword">from</span> emp <span class="built_in">e</span> <span class="keyword">left</span> <span class="keyword">join</span> dept b <span class="keyword">on</span>( <span class="built_in">e</span>.deptno=b.deptno);</span><br><span class="line"></span><br><span class="line">7.显示雇员所在的部门，并且将没有雇员的部门也显示出来</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">e</span>.ename,b.dname <span class="keyword">from</span> emp <span class="built_in">e</span> <span class="keyword">right</span> <span class="keyword">join</span> dept b <span class="keyword">on</span>(<span class="built_in">e</span>.deptno=b.deptno);</span><br><span class="line"></span><br><span class="line">8.显示雇员所在的部门，并且没有部门的雇员也显示出来,没有雇员的部门也显示出来(全联接）</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">e</span>.ename,b.dname <span class="keyword">from</span> emp <span class="built_in">e</span> full <span class="keyword">join</span> dept b <span class="keyword">on</span>( <span class="built_in">e</span>.deptno=b.deptno);</span><br><span class="line"></span><br><span class="line">9.笛卡尔积</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp,dept;</span><br></pre></td></tr></table></figure>

<h1 id="SQL语句子査询和集合运算符"><a href="#SQL语句子査询和集合运算符" class="headerlink" title="SQL语句子査询和集合运算符"></a>SQL语句子査询和集合运算符</h1><p>学习目标<br>1.定义子査询<br>2.描述子査询可以解决的问题类型<br>3.列出子査询自类型   编写单行和多行子查询<br>4.描述集合运算符<br>5.使用集合运算符将多个査询组成一个査询控制返回行的顺序</p>
<h2 id="子句查询"><a href="#子句查询" class="headerlink" title="子句查询"></a>子句查询</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">1.先执行子查询（内部查询），在执行主查询（外部查询）</span><br><span class="line">2.主查询会使用子查询的结果</span><br><span class="line"></span><br><span class="line">例如：</span><br><span class="line"><span class="keyword">select</span> salary <span class="keyword">from</span> employees <span class="keyword">where</span> last_name=<span class="string">'Abel'</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> employees <span class="keyword">where</span> salary&gt;( <span class="keyword">select</span> salary <span class="keyword">from</span> employees <span class="keyword">where</span> last_name=<span class="string">'Abel'</span>);</span><br><span class="line">【谁的薪金高于Abel的薪金？】</span><br><span class="line"></span><br><span class="line">使用子查询的准则</span><br><span class="line">1.将子查询放在括号中</span><br><span class="line">2.查询放在比较条件的右侧可增加可读性（但是，子查询可出现在比较运算符的任意一侧）</span><br><span class="line">3.对单行子查询使用单行运算符，对对行子查询使用多行运算符</span><br></pre></td></tr></table></figure>

<h2 id="单行子查询"><a href="#单行子查询" class="headerlink" title="单行子查询"></a>单行子查询</h2><p>1.仅返回一行<br>2.使用单行比较运算符</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>=</td>
<td>等于</td>
</tr>
<tr>
<td>&gt;</td>
<td>大于</td>
</tr>
<tr>
<td>&gt;=</td>
<td>大于或等于</td>
</tr>
<tr>
<td>&lt;</td>
<td>小于</td>
</tr>
<tr>
<td>&lt;=</td>
<td>小于或等于</td>
</tr>
<tr>
<td>&lt;&gt;</td>
<td>不等于</td>
</tr>
</tbody></table>
<p>子查询类型：</p>
<p><img src="/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/2021-05-17-oracle-all%5Cimage-20210609200200232.png" alt></p>
<img src="/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/image-20210609200200232.png" class title="This is an example image">

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">单行子查询举例：</span><br><span class="line">【找出和雇员Pat（first_name）属于同部门的员工】</span><br><span class="line"><span class="keyword">select</span> department_id <span class="keyword">from</span> employees <span class="keyword">where</span> first_name=<span class="string">'Pat'</span>;</span><br><span class="line"><span class="keyword">select</span> first_name <span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> department_id=(<span class="keyword">select</span> department_id <span class="keyword">from</span> employees <span class="keyword">where</span> first_name=<span class="string">'Pat'</span>)  <span class="keyword">and</span>  first_name&lt;&gt;<span class="string">'Pat'</span>;</span><br><span class="line"></span><br><span class="line">在子查询中使用组函数</span><br><span class="line">【查询雇员工资最低的人的姓名（last_name），工作id，薪金】</span><br><span class="line">1.子查询：最低工资</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">min</span>(salary) <span class="keyword">from</span> employees;</span><br><span class="line">2.主查询：雇员工资最低的人的姓名（last_name），工作id，薪金</span><br><span class="line"><span class="keyword">select</span> last_name,job_id,salary <span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> salary=(<span class="keyword">select</span> <span class="keyword">min</span>(salary) <span class="keyword">from</span> employees);</span><br><span class="line"></span><br><span class="line">带有子查询的having子句</span><br><span class="line">1.oracle service会先执行子查询</span><br><span class="line">2.oracle servic会将结果返回到主查询的having子句中</span><br><span class="line">【求出各个部门的最低薪水高于50这个部门的最低薪水的部门号，并显示最低薪水】</span><br><span class="line">1.子查询：50这个部门的最低薪水的部门号</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">min</span>(salary) <span class="keyword">from</span> employees <span class="keyword">where</span> department_id=<span class="number">50</span>;</span><br><span class="line">2.主查询：各个部门的最低薪水高于50这个部门的最低薪水的部门号，并显示最低薪水</span><br><span class="line"><span class="keyword">select</span> department_id,<span class="keyword">min</span>(salary) <span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> department_id <span class="keyword">having</span> <span class="keyword">min</span>(salary)&gt;(<span class="keyword">select</span> <span class="keyword">min</span>(salary) <span class="keyword">from</span> employees <span class="keyword">where</span> department_id=<span class="number">50</span>);</span><br><span class="line"></span><br><span class="line">内部查询没有返回任何行</span><br><span class="line">【查询工作id和‘Hass’相同的员工的姓名（last_name），工作id】</span><br><span class="line"><span class="keyword">select</span> last_name,job_id <span class="keyword">from</span> employees <span class="keyword">where</span> job_id=(<span class="keyword">select</span> job_id <span class="keyword">from</span> employees <span class="keyword">where</span> last_name=’Hass’);</span><br></pre></td></tr></table></figure>

<h2 id="多行子查询"><a href="#多行子查询" class="headerlink" title="多行子查询"></a>多行子查询</h2><p>1.返回多个行<br>2.使用多行比较运算符</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>IN</td>
<td>等于列表中的任意一个成员</td>
</tr>
<tr>
<td>ANY</td>
<td>前面必须是=、！=、&gt;、&lt;、&lt;=、&gt;=。将某个值与列表的每个值或查询返回的每个值进行比较。如果查询没有返回任何行，则求值结果为FALSE。</td>
</tr>
<tr>
<td>ALL</td>
<td>前面必须是=、！=、&gt;、&lt;、&lt;=、&gt;=。将某个值与列表中的每个值或查询返回的每个值进行比较。如果查询没有返回任何行，则求值结构为TRUE。</td>
</tr>
</tbody></table>
<p><strong>在多行子查询中使用any运算符</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">【比任意一个职位为（it_prog）的人工资低的员工的编号，姓名，职位，和薪水（排除职位为it_prog）】</span><br><span class="line">1.子查询：职位为（it_prog）的人工资</span><br><span class="line"><span class="keyword">select</span> salary <span class="keyword">from</span> employees <span class="keyword">where</span> job_id=<span class="string">'IT_PROG'</span>;</span><br><span class="line">2.主查询：比任意一个职位为（it_prog）的人工资低的员工的编号，姓名，职位，和薪水（排除职位为it_prog）</span><br><span class="line"><span class="keyword">select</span> employee_id,last_name,job_id,salary <span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> salary&lt;<span class="keyword">any</span> (<span class="keyword">select</span> salary <span class="keyword">from</span> employees <span class="keyword">where</span> job_id=<span class="string">'IT_PROG'</span>) <span class="keyword">and</span> job_id&lt;&gt;<span class="string">'IT_PROG'</span>;</span><br></pre></td></tr></table></figure>

<p><strong>在多行子查询中使用all运算符</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">【比职位为（it_prog）的人工资都低的员工的编号，姓名，职位，和薪水（排除职位为it_prog）】</span><br><span class="line">1.子查询：职位为（it_prog）的人工资</span><br><span class="line"><span class="keyword">select</span> salary <span class="keyword">from</span> employees <span class="keyword">where</span> job_id=<span class="string">'IT_PROG'</span>;</span><br><span class="line">2.主查询：比任意一个职位为（it_prog）的人工资低的员工的编号，姓名，职位，和薪水（排除职位为it_prog）</span><br><span class="line"><span class="keyword">select</span> employee_id,last_name,job_id,salary <span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> salary&lt;<span class="keyword">all</span>  (<span class="keyword">select</span> salary <span class="keyword">from</span> employees <span class="keyword">where</span> job_id=<span class="string">'IT_PROG'</span>) <span class="keyword">and</span> job_id&lt;&gt;<span class="string">'IT_PROG'</span>;</span><br></pre></td></tr></table></figure>

<h2 id="使用exists运算符"><a href="#使用exists运算符" class="headerlink" title="使用exists运算符"></a>使用exists运算符</h2><p>exists里的子查询结果集非空，exists()子句的值就是true。<br>exists里的子查询结果集为空，exists()子句的值就是false。</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">【如果部门下面没有员工，则查询所有部门信息】</span><br><span class="line">1.子查询：(部门下面有员工)</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> d.department_id <span class="keyword">from</span> employees <span class="built_in">e</span></span><br><span class="line"><span class="keyword">join</span> departments d <span class="keyword">on</span> (<span class="built_in">e</span>.department_id=d.department_id);</span><br><span class="line"></span><br><span class="line">2.主查询：如果部门下面没有员工，则查询所有部门信息</span><br><span class="line">ppt:<span class="keyword">select</span> * <span class="keyword">from</span> departments <span class="keyword">where</span> <span class="keyword">not</span> <span class="keyword">exists</span> (<span class="keyword">select</span> *  <span class="keyword">from</span> employees <span class="keyword">where</span> <span class="built_in">e</span>.department_id=d.department_id);</span><br><span class="line"></span><br><span class="line">我写的：</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> departments <span class="keyword">where</span> <span class="keyword">exists</span> (<span class="keyword">select</span> <span class="keyword">distinct</span> d.department_id <span class="keyword">from</span> employees <span class="built_in">e</span></span><br><span class="line"><span class="keyword">join</span> departments d <span class="keyword">on</span> (<span class="built_in">e</span>.department_id=d.department_id));</span><br></pre></td></tr></table></figure>

<h2 id="子查询中的空值"><a href="#子查询中的空值" class="headerlink" title="子查询中的空值"></a>子查询中的空值</h2><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> departments</span><br><span class="line"><span class="keyword">where</span> department_id <span class="keyword">not</span> <span class="keyword">in</span>(<span class="keyword">select</span> <span class="keyword">distinct</span> department_id <span class="keyword">from</span> employees);</span><br></pre></td></tr></table></figure>

<h2 id="rownum分页查询"><a href="#rownum分页查询" class="headerlink" title="rownum分页查询"></a>rownum分页查询</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> e.*,<span class="keyword">rownum</span> rn <span class="keyword">from</span>(<span class="keyword">select</span> * <span class="keyword">from</span> emp)e；</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> e.*,<span class="keyword">rownum</span> rn <span class="keyword">from</span>(<span class="keyword">select</span> * <span class="keyword">from</span> emp)e <span class="keyword">where</span> <span class="keyword">rownum</span>&lt;=<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> (<span class="keyword">select</span> e.*,<span class="keyword">rownum</span> rn <span class="keyword">from</span>(<span class="keyword">select</span> * <span class="keyword">from</span> emp)e <span class="keyword">where</span> <span class="keyword">rownum</span>&lt;=<span class="number">10</span>) <span class="keyword">where</span> rn&gt;=<span class="number">6</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span>(<span class="keyword">select</span> e.*,<span class="keyword">rownum</span> rn <span class="keyword">from</span>(<span class="keyword">select</span> * <span class="keyword">from</span> emp)e <span class="keyword">where</span> <span class="keyword">rownum</span>&lt;=<span class="number">10</span>) <span class="keyword">where</span> rn&gt;=<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--查询EMP表中前三条</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp;</span><br><span class="line"><span class="keyword">select</span> a.*,<span class="keyword">rownum</span> rn <span class="keyword">from</span>(<span class="keyword">select</span> * <span class="keyword">from</span> emp) a <span class="keyword">where</span> <span class="keyword">rownum</span>&lt;=<span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--查询工资从高到底的前5个</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> sal <span class="keyword">desc</span>;</span><br><span class="line"><span class="keyword">select</span> b.*,<span class="keyword">rownum</span> rn <span class="keyword">from</span>(<span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> sal <span class="keyword">desc</span>)b <span class="keyword">where</span> <span class="keyword">rownum</span>&lt;=<span class="number">5</span>;</span><br></pre></td></tr></table></figure>

<h2 id="集合运算符"><a href="#集合运算符" class="headerlink" title="集合运算符"></a>集合运算符</h2><p><img src="/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/2021-05-17-oracle-all%5CImage-1623940261353.png" alt></p>
<img src="/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/Image-1623940261353.png" class title="This is an example image">

<p><strong>集合运算符准则</strong></p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>select列表中的表达式在数量上必须匹配。</span><br><span class="line"><span class="number">2.</span>第二个査询中每一列的数据类型必须与第一个査询中对应列的数据类型相匹配 。</span><br><span class="line"><span class="number">3.</span>可以使用括号更改执行顺序 。</span><br><span class="line"><span class="number">4.</span>order by子句只能出现在语句的末尾。</span><br></pre></td></tr></table></figure>

<p><strong>oracle server和集合运算符</strong></p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>除非使用UNION ALL运算符, 否则会自动删除重复行</span><br><span class="line"><span class="number">2.</span>第一个査询中的列名将显示在结果中</span><br><span class="line"><span class="number">3.</span>除非使用UNION ALL运算符, 否则默认情况下输出按升序进行排序</span><br><span class="line">备注：</span><br><span class="line">下面使用的表包括:</span><br><span class="line"><span class="number">1.</span>EMPLOYEES: 提供有关所有当前雇员的详细信息</span><br><span class="line"><span class="number">2.</span>job_history:记录雇员更换职务时先前职务的开始日期和结束日期、职务标识及部门的详细信息</span><br></pre></td></tr></table></figure>

<p><strong>使用union运算符</strong><br><img src="/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/2021-05-17-oracle-all%5CImage-1623940359769.png" alt></p>
<img src="/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/Image-1623940359769.png" class title="This is an example image">

<figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">【显示所有雇员的当前职务和先前职务的详细信息，每位雇员只显示一次（去重）】</span><br><span class="line"><span class="keyword">select</span> employee_id,job_id from employees</span><br><span class="line"><span class="class"><span class="keyword">union</span></span></span><br><span class="line"><span class="keyword">select</span> employee_id,job_id from job_history;</span><br><span class="line"></span><br><span class="line">【查询部门<span class="number">20</span>和<span class="number">30</span>的所有职务】</span><br><span class="line"><span class="keyword">select</span> job_id from employees where department_id=<span class="number">30</span></span><br><span class="line"><span class="class"><span class="keyword">union</span></span></span><br><span class="line"><span class="keyword">select</span> job_id from employees where department_id=<span class="number">20</span>;</span><br></pre></td></tr></table></figure>

<p><strong>使用union all 运算符</strong></p>
<p><img src="/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/2021-05-17-oracle-all%5CImage-1623940420444.png" alt></p>
<img src="/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/Image-1623940420444.png" class title="This is an example image">

<figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">【显示所有雇员的当前职务和先前职务的详细信息(不去重)】</span><br><span class="line"><span class="keyword">select</span> employee_id,job_id from employees</span><br><span class="line"><span class="class"><span class="keyword">union</span> <span class="title">all</span></span></span><br><span class="line"><span class="keyword">select</span> employee_id,job_id from job_history;</span><br></pre></td></tr></table></figure>

<p><strong>intersect运算符</strong></p>
<p><img src="/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/2021-05-17-oracle-all%5CImage-1623940454172.jpg" alt></p>
<img src="/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/Image-1623940454172.jpg" class title="This is an example image">

<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">【显示符合条件的雇员的id和职务id：这些当前职务与以前职务相同】</span><br><span class="line"><span class="keyword">select</span> employee_id,job_id <span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">intersect</span></span><br><span class="line"><span class="keyword">select</span> employee_id,job_id <span class="keyword">from</span> job_history;</span><br><span class="line"></span><br><span class="line">【查询部门30和20中是否有相同的职务和工资】</span><br><span class="line"><span class="keyword">select</span> job_id,salary <span class="keyword">from</span> employees <span class="keyword">where</span> department_id=<span class="number">30</span></span><br><span class="line"><span class="keyword">intersect</span></span><br><span class="line"><span class="keyword">select</span> job_id,salary <span class="keyword">from</span> employees <span class="keyword">where</span> department_id=<span class="number">20</span>;</span><br></pre></td></tr></table></figure>

<p><strong>minus运算符</strong></p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">【显示从未更换过职务的雇员的雇员id】</span><br><span class="line"><span class="keyword">select</span> employee_id <span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">minus</span></span><br><span class="line"><span class="keyword">select</span> employee_id <span class="keyword">from</span> job_history;</span><br><span class="line"></span><br><span class="line">【查询只在部门表中出现，但没有在雇员表中出现的部门编号】</span><br><span class="line"><span class="keyword">select</span> department_id <span class="keyword">from</span> departments</span><br><span class="line"><span class="keyword">minus</span></span><br><span class="line"><span class="keyword">select</span> department_id <span class="keyword">from</span> employees;</span><br></pre></td></tr></table></figure>

<p><strong>匹配select语句</strong></p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>使用<span class="keyword">UNION</span>运算符可显示位置ID、 部门名称和所在的省/市/ 自治区。</span><br><span class="line"><span class="number">2.</span>如果某些列不存在于一个表或另一个表中, 则必须使用T0_CHAR 函数或任何其它转换函数匹配数据类型。</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">location</span> id,department <span class="type">name</span>"Department",</span><br><span class="line">to_char(<span class="keyword">null</span>) “Warehouse <span class="keyword">location</span>” <span class="keyword">from</span> departments</span><br><span class="line"><span class="keyword">union</span></span><br><span class="line"><span class="keyword">select</span> loaction_id,to_char(<span class="keyword">null</span>) “Department” state_province <span class="keyword">from</span> locations;</span><br><span class="line"></span><br><span class="line"><span class="comment">--查询只在部门表中出现，但没有在雇员表中出现的部门编号</span></span><br><span class="line"><span class="comment">--查询没有雇员的部门编号</span></span><br><span class="line"><span class="keyword">select</span> department_id <span class="keyword">from</span> departments</span><br><span class="line">minus</span><br><span class="line"><span class="keyword">select</span> department_id <span class="keyword">from</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> location_id,department_name "Department",</span><br><span class="line">TO_CHAR(<span class="keyword">NULL</span>) "Warehouse location" <span class="keyword">FROM</span> departments</span><br><span class="line"><span class="keyword">UNION</span></span><br><span class="line"><span class="keyword">SELECT</span> location_id,TO_CHAR(<span class="keyword">NULL</span>),</span><br><span class="line">state_province <span class="keyword">FROM</span> locations;</span><br></pre></td></tr></table></figure>

<p><strong>在集合运算中使用order by子句</strong></p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>.<span class="keyword">order</span> <span class="title">by</span>子句只能在复合査询的末尾出现一次 </span><br><span class="line"><span class="number">2</span>.这些査询中不能包含多个<span class="keyword">order</span> <span class="title">by</span>子句 </span><br><span class="line"><span class="number">3</span>.<span class="keyword">order</span> <span class="title">by</span>子句仅识别第一个select查询中的列</span><br><span class="line"><span class="number">4</span>.默认情況下, 使用第一个select査询中的第一列按升序对输出进行排序</span><br><span class="line">语法：</span><br><span class="line">集合查询<span class="number">1</span></span><br><span class="line">｛集合运算｝</span><br><span class="line">集合查询<span class="number">2</span></span><br><span class="line">[<span class="keyword">order</span> <span class="title">by</span>....]</span><br><span class="line"></span><br><span class="line"><span class="keyword">order</span> <span class="title">by</span> 子句举例：</span><br><span class="line">【显示雇员当前部门和先前部门的雇员id、职务id和薪金，并按职位id排序】</span><br><span class="line">select employee_id,job_id,salary from employees</span><br><span class="line">union</span><br><span class="line">select employee_id,job_id,<span class="number">0</span> from job_history</span><br><span class="line"><span class="keyword">order</span> <span class="title">by</span> <span class="number">2</span>;</span><br></pre></td></tr></table></figure>

<h2 id="子査询总结"><a href="#子査询总结" class="headerlink" title="子査询总结:"></a>子査询总结:</h2><p>子査询:类型、语法和准则</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">·单行子査询:</span><br><span class="line"><span class="number">1.</span>子査询中的组函数</span><br><span class="line"><span class="number">2.</span>带有子査询的HAVING子句</span><br><span class="line"></span><br><span class="line">·多行子査询                     </span><br><span class="line"><span class="number">1.</span>使用ALL或ANY 运算符</span><br><span class="line"><span class="number">2.</span>子査询中的空值。</span><br></pre></td></tr></table></figure>

<h2 id="集合运算符总结："><a href="#集合运算符总结：" class="headerlink" title="集合运算符总结："></a>集合运算符总结：</h2><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>集合运算符:类型和准则</span><br><span class="line"><span class="number">2.</span>UNION和UNION ALL运算符</span><br><span class="line"><span class="number">3.</span>INTERSEC11[ 运算符</span><br><span class="line"><span class="number">4.</span>MINUS运算符</span><br><span class="line"><span class="number">5.</span>在集合运算中使用 ORDER BY子句</span><br></pre></td></tr></table></figure>

<h1 id="SQL语句数据处理（DML-新增、修改、删除"><a href="#SQL语句数据处理（DML-新增、修改、删除" class="headerlink" title="SQL语句数据处理（DML)新增、修改、删除"></a>SQL语句数据处理（DML)新增、修改、删除</h1><p>学习目标<br>1.描述各个数据操纵语言(DML) 语句在表中插入行<br>2.更新表中的行<br>3.从表中删除行<br>4.控制事务处理</p>
<h2 id="几个名称解释"><a href="#几个名称解释" class="headerlink" title="几个名称解释"></a>几个名称解释</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.DML(datamanipulationlanguage) : 自动提交的数据库操作语言,它们是<span class="keyword">select</span>、 <span class="keyword">update</span>、<span class="keyword">insert</span>、<span class="keyword">delete</span></span><br><span class="line"><span class="number">2.</span><span class="keyword">DDL</span>(datadefinitionlanguage) : 自动提交的数据库定义语言,它们是<span class="keyword">create</span>、<span class="keyword">alter</span>、<span class="keyword">drop</span> 等, <span class="keyword">DDL</span>主要是用在定.义或改变表(<span class="keyword">TABLE</span>)的结构,数据类型,表之间的链接和约東等初始化工作上, 他们大多在建立表时使用</span><br><span class="line"><span class="number">3.</span>DCL(DataControlLanguage) :</span><br><span class="line">是数据库控制功能, 是用来设置或更改数据库用户或角色权限的语句,包括(<span class="keyword">grant</span>,deny,<span class="keyword">revoke</span>等)语句</span><br></pre></td></tr></table></figure>

<h2 id="数据操纵DML"><a href="#数据操纵DML" class="headerlink" title="数据操纵DML"></a>数据操纵DML</h2><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">进行以下操作时可以执行DML语句:</span><br><span class="line"><span class="number">1.</span>在表中添加新行</span><br><span class="line"><span class="number">2.</span>修改表中的现有行</span><br><span class="line"><span class="number">3.</span>从表中删除现有行</span><br><span class="line"><span class="number">4.</span>个事务处理由一组DML (新增\修改\删除)语句组成</span><br></pre></td></tr></table></figure>

<h2 id="insert"><a href="#insert" class="headerlink" title="insert"></a>insert</h2><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span>语句语法(此语法只能插入一行）</span><br><span class="line">使用<span class="keyword">insert</span>语句可在表中添加新行：</span><br><span class="line"><span class="comment">--insert into 表名 (列名,列名,……) values(值1，值2……)</span></span><br><span class="line"><span class="comment">--insert into 表名 values(值1，值2……所有的列都要插入值)</span></span><br><span class="line">【在emp表中插入雇员编号<span class="number">1029</span>  雇员名tester  job:test】</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="number">1032</span>,<span class="string">'tester1'</span>,<span class="string">'test'</span>,<span class="string">' '</span>,<span class="string">' '</span>,<span class="string">''</span>,<span class="string">' '</span>,<span class="string">' '</span>);</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line">·<span class="keyword">rollback</span>;<span class="comment">--回退</span></span><br><span class="line">·<span class="keyword">commit</span>;<span class="comment">--提交</span></span><br><span class="line"></span><br><span class="line">·插入新行</span><br><span class="line"><span class="number">1.</span>插入一个新行, 此行的每一列都含有值</span><br><span class="line"><span class="number">2.</span>按照表中列的默认顺序列出这些值</span><br><span class="line"><span class="number">3.</span>(可选)在<span class="keyword">INSERT</span>子句中列出这些列</span><br><span class="line"><span class="number">4.</span>将字符日期值放在单引号中</span><br><span class="line">例如:</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> departments(department_id, department_name, manager_id, location_id)</span><br><span class="line"><span class="keyword">values</span>(<span class="number">70</span>, <span class="string">'Public Relations'</span>, <span class="number">100</span>, <span class="number">1700</span>);</span><br><span class="line">【在emp表中插入雇员编号<span class="number">1030</span> 雇员名testuser  job:manager  mgr:<span class="number">7839</span> 入职日期：今天系统时间 sal:<span class="number">8000</span> comm:无 deptno <span class="number">40</span>】</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="number">1030</span>,<span class="string">'testuser'</span>,<span class="string">'manager'</span>,<span class="number">7839</span>,sysdate,<span class="number">8000</span>,<span class="string">' '</span>,<span class="number">40</span>);</span><br><span class="line"></span><br><span class="line">·插入带有空值的行（空也可以用‘’来表示看上面几个例题）</span><br><span class="line"><span class="number">1.</span>隐式方法: 在列表中省略该列。</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> departments(department_id,,department_name)</span><br><span class="line"><span class="keyword">values</span> (<span class="number">30</span>, <span class="string">'Purchasing'</span>);</span><br><span class="line"><span class="number">2.</span>显式方法: 在<span class="keyword">values</span>子句中指定<span class="keyword">null</span>关键字</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> departments              <span class="string">'</span></span><br><span class="line"><span class="string">values(100, '</span>Financ<span class="string">e', null，null);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">·插入特殊值</span></span><br><span class="line"><span class="string">sysdate 函数用于记录当前日期和时间</span></span><br><span class="line"><span class="string">例题上面有（没写ppt例题）</span></span><br><span class="line"><span class="string">插入特定日期和时间值</span></span><br><span class="line"><span class="string">·添加新雇员</span></span><br><span class="line"><span class="string">【在emp表中插入雇员编号1031  雇员名testuser  job:空  mgr:7839 入职日期：2016-7-10 sal:8000 comm:无 deptno 40】</span></span><br><span class="line"><span class="string">insert  into  emp values(1031,'</span>testuser<span class="string">','',7839,to_date('</span><span class="number">2016</span><span class="number">-7</span><span class="number">-10</span><span class="string">','</span>yyyy-mm-dd<span class="string">'),8000,'',40);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">·创建脚本</span></span><br><span class="line"><span class="string">1.在SQL语句中使用&amp;替代来提示用户输入值。</span></span><br><span class="line"><span class="string">2.&amp;是变量值的占符位</span></span><br><span class="line"><span class="string">【在dept表中编写一个插入脚本,deptno dname,loc可以自行输入】</span></span><br><span class="line"><span class="string">insert into dept values(&amp;deptno,'</span>&amp;dnam<span class="string">e','</span>&amp;loc<span class="string">');</span></span><br><span class="line"><span class="string">select * from dept;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">·从其他表中复制行</span></span><br><span class="line"><span class="string">1.编写带有子查询的insert</span></span><br><span class="line"><span class="string">2.请勿使用values子句</span></span><br><span class="line"><span class="string">3.使insert子句中的列数与子查询的列数匹配</span></span><br><span class="line"><span class="string">4.将子查询返回的所有行插入到表salaes_reps中</span></span><br><span class="line"><span class="string">例如：</span></span><br><span class="line"><span class="string">【创建一个测试表】</span></span><br><span class="line"><span class="string">create table test(</span></span><br><span class="line"><span class="string">id number,</span></span><br><span class="line"><span class="string">name varchar2(10),</span></span><br><span class="line"><span class="string">location varchar2(10)</span></span><br><span class="line"><span class="string">)</span></span><br><span class="line"><span class="string">select * from test;</span></span><br><span class="line"><span class="string">【将dept表中的所有数据插入test表中】</span></span><br><span class="line"><span class="string">insert into test select * from dept;</span></span><br><span class="line"><span class="string">【将emp表中的empno,ename,job字段中职位为‘CLERK’插入到 test表中】</span></span><br><span class="line"><span class="string">insert into test(id,name,location)</span></span><br><span class="line"><span class="string">select empno,ename,job from emp where job='</span>CLERK<span class="string">';</span></span><br></pre></td></tr></table></figure>

<h2 id="update"><a href="#update" class="headerlink" title="update"></a>update</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">1.使用<span class="keyword">update</span>语句修改表中的现有值</span><br><span class="line"><span class="number">2.</span>如果需要，可以一次更新多行</span><br><span class="line"><span class="comment">--update 表名 set 列名=新的值 where 条件</span></span><br><span class="line"><span class="comment">--修改emp表中工资低于1000得人，将他们的工资改为1500</span></span><br><span class="line"><span class="keyword">update</span> emp <span class="keyword">set</span> sal=<span class="number">1500</span> <span class="keyword">where</span> sal&lt;<span class="number">1000</span>;</span><br><span class="line"><span class="comment">--修改emp表中comm为空的人，给每人发100元奖金</span></span><br><span class="line"><span class="keyword">update</span> emp <span class="keyword">set</span> comm=<span class="number">100</span> <span class="keyword">where</span> comm <span class="keyword">is</span> <span class="literal">null</span> <span class="keyword">and</span> comm=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">·更新表中的行</span><br><span class="line">1.如果指定WHERE 子句, 则可以修改特定一行或多行的值:</span><br><span class="line"><span class="keyword">update</span> emp1oyees</span><br><span class="line"><span class="keyword">set</span> department_id= <span class="number">50</span></span><br><span class="line"><span class="keyword">where</span> emp1oyee_id= <span class="number">113</span>;</span><br><span class="line">2.如果省略WHERE子句, 则可以修改表中所有行的值</span><br><span class="line"><span class="keyword">update</span> copy_emp</span><br><span class="line"><span class="keyword">set</span> department_id= <span class="number">110</span>;</span><br><span class="line">3.指定<span class="keyword">SET</span> colunn _name=<span class="literal">null</span>可将列值更新为<span class="literal">null</span></span><br><span class="line"></span><br><span class="line">·使用子查询更新两列</span><br><span class="line">根据另一个表更新行</span><br><span class="line">【更新雇员<span class="number">7654</span> 的职务和薪金和奖金，使其与雇员<span class="number">7521</span> 的职务和薪金和奖金一样】</span><br><span class="line"><span class="keyword">update</span> emp <span class="keyword">set</span> job=(<span class="keyword">select</span> job <span class="keyword">from</span> emp <span class="keyword">where</span> empno=<span class="number">7521</span>),</span><br><span class="line">sal=(<span class="keyword">select</span> sal <span class="keyword">from</span> emp <span class="keyword">where</span> empno=<span class="number">7521</span>),</span><br><span class="line">comm=(<span class="keyword">select</span> comm <span class="keyword">from</span> emp <span class="keyword">where</span> empno=<span class="number">7521</span>)</span><br><span class="line"><span class="keyword">where</span> empno=<span class="number">7654</span>;</span><br><span class="line">【将与雇员号7369相同职位的人的部门编号deptno修改和BLACK在同一部门】</span><br><span class="line"><span class="keyword">update</span> emp <span class="keyword">set</span> deptno=(<span class="keyword">select</span> deptno <span class="keyword">from</span> emp <span class="keyword">where</span> ename=<span class="string">'BLACK'</span>)</span><br><span class="line"><span class="keyword">where</span> job=(<span class="keyword">select</span> job <span class="keyword">from</span> emp <span class="keyword">where</span> empno=<span class="number">7369</span>);</span><br></pre></td></tr></table></figure>

<h2 id="delete"><a href="#delete" class="headerlink" title="delete"></a>delete</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> 删除表中的数据</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span><span class="keyword">delete</span> <span class="keyword">from</span> 表名 <span class="keyword">where</span> 条件  其中<span class="keyword">from</span>可省略</span><br><span class="line"><span class="keyword">delete</span> emp <span class="keyword">where</span> empno <span class="keyword">in</span>(<span class="number">8888</span>,<span class="number">8889</span>);</span><br><span class="line"><span class="keyword">rollback</span>;</span><br><span class="line">【删除没有雇员的部门】</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> dept <span class="keyword">where</span> deptno <span class="keyword">not</span> <span class="keyword">in</span>(<span class="keyword">select</span> <span class="keyword">distinct</span> deptno <span class="keyword">from</span> emp);</span><br><span class="line"></span><br><span class="line">【查询没有雇员的部门的名称、地区、部门号】</span><br><span class="line">1.子查询（找到有人的部门）</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp</span><br><span class="line"><span class="number">2.</span>主查询</span><br><span class="line"><span class="keyword">select</span> deptno,loc,dname <span class="keyword">from</span> dept <span class="keyword">where</span> deptno <span class="keyword">not</span> <span class="keyword">in</span>(<span class="keyword">select</span> <span class="keyword">distinct</span> deptno <span class="keyword">from</span> emp);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">子查询（各个部门中超过3个人）</span><br><span class="line"><span class="keyword">select</span> deptno,<span class="keyword">count</span>(ename) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno <span class="keyword">having</span> <span class="keyword">count</span>(ename)&gt;<span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">·删除的另一种方式：<span class="keyword">truncate</span>(用来清库）</span><br><span class="line"> <span class="keyword">truncate</span> <span class="keyword">table</span> 表名（不可以回退，释放空间，<span class="keyword">table</span>不能省）</span><br><span class="line">要删除就全删，无法删除某一条，删除后无法滚回</span><br><span class="line"><span class="keyword">truncate</span>语句</span><br><span class="line"><span class="number">1.</span>从表中删除所有行，使表为空并保留表结构不变</span><br><span class="line"><span class="number">2.</span>truncat比<span class="keyword">delete</span>要快, 原因如下:</span><br><span class="line">truncat语句是数据定义语言(<span class="keyword">DDL</span>)语句, 它不会生成回退信息二者的比较</span><br><span class="line"><span class="keyword">truncate</span>：删除内容、不删除定义、释放空间、不可以回滚</span><br><span class="line"><span class="keyword">delete</span>：删除内容，不删除定义,不释放空间，可以回滚</span><br></pre></td></tr></table></figure>

<h2 id="数据库事务处理"><a href="#数据库事务处理" class="headerlink" title="数据库事务处理"></a>数据库事务处理</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">事务: 用于保证数据的一致性 ,由一组相关的DML语句组成改的DML语句要么全部成功, 要么全部失败 。</span><br><span class="line">事务和锁:</span><br><span class="line">当执行事务操作(dm1)语句,oracle会'在被作用的表上加锁, 防止其它用户修改表结构</span><br><span class="line">数据库事务处理由以下语句之一组成:</span><br><span class="line">用于对数据进行一次一致更改的DML语句</span><br><span class="line"></span><br><span class="line">·一条DDL语句                                          </span><br><span class="line">一条数据控制语言(DCL)语句         </span><br><span class="line">        </span><br><span class="line">·数据库事务处理:开始和结束</span><br><span class="line">1.在执行第一条DML SQL语句时开始</span><br><span class="line">2.在发生下列事件之一时结束</span><br><span class="line"></span><br><span class="line">·发出<span class="keyword">commit</span>或<span class="keyword">rollback</span>语句</span><br><span class="line"><span class="number">1.</span>执行<span class="keyword">DDL</span>或DCL语句 (自动提交)</span><br><span class="line"><span class="number">2.</span>用户退出<span class="keyword">SQL</span> Deve1oper或<span class="keyword">SQL</span>*Plus</span><br><span class="line"><span class="number">3.</span>系统崩溃</span><br><span class="line"></span><br><span class="line">·<span class="keyword">commit</span>和<span class="keyword">rollback</span>语句优点</span><br><span class="line">使用<span class="keyword">commit</span>和<span class="keyword">rollback</span>语句, 您可以:</span><br><span class="line"><span class="number">1.</span>确保数据的一致性</span><br><span class="line"><span class="number">2.</span>在使更改变成永久性更改之前预览数据更改</span><br><span class="line"><span class="number">3.</span>按逻辑关系对相关操作进行分组</span><br><span class="line"></span><br><span class="line">·显示事务处理控制语句</span><br></pre></td></tr></table></figure>
<p><img src="/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/2021-05-17-oracle-all%5CImage-1623941817764.png" alt></p>
<img src="/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/Image-1623941817764.png" class title="This is an example image">


<p><img src="/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/2021-05-17-oracle-all%5CImage-1623941823317.png" alt></p>
<img src="/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/Image-1623941823317.png" class title="This is an example image">


<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">·将更改回退到某个标记</span><br><span class="line"><span class="number">1.</span>使用 savepoint语句可在当前事务处理中创建一个标记</span><br><span class="line"><span class="number">2.</span>使用rollback to savepoint语句可回退到该标记</span><br><span class="line">update...</span><br><span class="line">savepoint  update_done;</span><br><span class="line">insert...</span><br><span class="line">rollback to update_done;</span><br><span class="line"></span><br><span class="line">·隐式事务处理</span><br><span class="line">在下列情况下会发生自动提交:</span><br><span class="line"><span class="number">1.</span>发出DDL语句</span><br><span class="line"><span class="number">2.</span>发出DCL语句</span><br><span class="line"><span class="number">3.</span>从SQL Deve1oper或SQL*Plus正常退出, 而没有显式发出COMMIT或ROLLBACK语句</span><br><span class="line"><span class="number">4.</span>当异常终止SQL Deve1oper或SQL*Plus或者系统出现故障时会发生自动回退。</span><br><span class="line"></span><br><span class="line">·执行COMMIT或ROLLBACK操作之前的数据状态</span><br><span class="line"><span class="number">1.</span>可以将数据还原到以前的状态</span><br><span class="line"><span class="number">2.</span>当前用户可以使用SELECT语句査看DML操作的结果</span><br><span class="line"><span class="number">3.</span>其他用户不能査看当前用户发出的DML语句的结果</span><br><span class="line"><span class="number">4.</span>受影响行已锁定,其他用户不能更改受影响行中的数据</span><br><span class="line"></span><br><span class="line">·执行COMMIT操作之后的数据状态</span><br><span class="line"><span class="number">1.</span>数据更改已保存在数据库中</span><br><span class="line"><span class="number">2.</span>已改写以前的数据状态</span><br><span class="line"><span class="number">3.</span>所有用户都可以査看结果</span><br><span class="line"><span class="number">4.</span>受影响行上的锁已被释放, 其他用户可以对这些行进行处理,,</span><br><span class="line"><span class="number">5.</span>所有保存点都已被清除</span><br><span class="line"></span><br><span class="line">·提交数据</span><br><span class="line">进行更改</span><br><span class="line">delete <span class="keyword">from</span> employees</span><br><span class="line">where employee_id= <span class="number">99999</span>;</span><br><span class="line">insert <span class="built_in">int</span>o departments</span><br><span class="line">values(<span class="number">290</span>, <span class="string">'Corporate Tax'</span>, nuLL, <span class="number">1700</span>);</span><br><span class="line">提交更改</span><br><span class="line">commit;</span><br><span class="line"></span><br><span class="line">·执行ROLLBACK操作之后的数据状态</span><br><span class="line"><span class="number">1.</span>使用ROLLBACK语句放弃所有待定更改之后会有如下结果</span><br><span class="line"><span class="number">2.</span>数据更改已取消</span><br><span class="line"><span class="number">3.</span>数据已还原到以前的状态</span><br><span class="line"><span class="number">4.</span>受影响行上的锁已被释放</span><br><span class="line">delete <span class="keyword">from</span> copy_emp;</span><br><span class="line">rollback;</span><br><span class="line"></span><br><span class="line">·读一致性</span><br><span class="line"><span class="number">1.</span>读一致性可以确保用户所看到的数据始终是一致的</span><br><span class="line"><span class="number">2.</span>一个用户进行的更改不会与另一个用户进行的更改相冲突</span><br><span class="line"><span class="number">3.</span>读一致性可以确保对于同一数据:</span><br><span class="line"><span class="number">4.</span>读取者不必等待写入者完成操作即可读取</span><br><span class="line"><span class="number">5.</span>写入者不必等待读取者完成操作即可写入</span><br><span class="line"><span class="number">6.</span>写入者必须等待其他写入者完成操作才可写入</span><br><span class="line">实施读一致性：</span><br></pre></td></tr></table></figure>
<p><img src="/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/2021-05-17-oracle-all%5CImage-1623941835703.png" alt></p>
<img src="/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/Image-1623941835703.png" class title="This is an example image">

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">·<span class="keyword">select</span>中的<span class="keyword">for</span> <span class="keyword">update</span>子句</span><br><span class="line"><span class="number">1.</span>锁定employees表中job_id为sa_rep的行</span><br><span class="line"><span class="number">2.</span>当发出<span class="keyword">rollback</span>或<span class="keyword">commit</span>语句时才</span><br><span class="line"><span class="number">3.</span>如果<span class="keyword">select</span>语句要锁定另一个用户已锁定的某一行,,数据库就会一直等待到该行可用为止, 然后返回 <span class="keyword">select</span>语句的结果</span><br><span class="line"><span class="keyword">select</span> emp1oyee_id, salaf, commission_pct, job_id</span><br><span class="line"><span class="keyword">from</span> emp1oyees <span class="keyword">where</span>  job_id= <span class="string">'SA_REP'</span></span><br><span class="line"><span class="keyword">for</span> <span class="keyword">update</span> <span class="keyword">order</span> <span class="keyword">by</span> employee_id;</span><br></pre></td></tr></table></figure>

<h1 id="作业1"><a href="#作业1" class="headerlink" title="作业1"></a>作业1</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">基础：</span><br><span class="line">1、大、中、小型数据库各有哪些？一个系统如何选择使用什么的数据库？</span><br><span class="line">小型数据库：access、foxbase对安全性要求不太高、用用户量百人以内、基本无成本。</span><br><span class="line">中型数据库:Mysql,SQL Server安全级别为中间级别，用户量在5000-15000以内，成本万元左右</span><br><span class="line">大型数据库：Sybase、Oracle、Db2海量数据、海量用户、成本高</span><br><span class="line"> </span><br><span class="line">2.sys用户和system用户有什么区别？</span><br><span class="line">(1).sys用户是超级用户，具有高权限，具有sysdba角色，有<span class="keyword">create</span> <span class="keyword">database</span>的权限，该用户默认密码是change_on_install</span><br><span class="line">(<span class="number">2</span>).system用户是管理操作员，权限也很大。具有syaoper角色，没有<span class="keyword">create</span> <span class="keyword">database</span>的权限，默认的密码是manager</span><br><span class="line">(<span class="number">3</span>).一般来讲，对数据库维护，使用<span class="keyword">system</span>用户登录就可以了</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>、如何查看数据当前连接的用户</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">user</span>;</span><br><span class="line"></span><br><span class="line">4.给hr用户进行解锁，并且设置密码hr</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">user</span> hr <span class="keyword">account</span> <span class="keyword">unlock</span>；</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">user</span> hr <span class="keyword">identified</span> <span class="keyword">by</span> hr；</span><br><span class="line"></span><br><span class="line"><span class="number">5</span>、请写出配置pl/<span class="keyword">sql</span> develop客户端，使用pl/<span class="keyword">sql</span> develop连接数据库的步骤</span><br><span class="line">(<span class="number">1</span>）.装<span class="keyword">oracle</span></span><br><span class="line">(<span class="number">2</span>）.配置两个文件</span><br><span class="line">(<span class="number">3</span>).安装<span class="keyword">client</span>客户端</span><br><span class="line">(<span class="number">4</span>).用<span class="keyword">sys</span>给普通用户解锁</span><br><span class="line">(<span class="number">5</span>).pl/sqdev(连scott）</span><br><span class="line">(<span class="number">6</span>)、通过DOS窗口用<span class="keyword">sys</span>连接数据库的命令？请附截图</span><br><span class="line"><span class="keyword">conn</span> <span class="keyword">sys</span>/hzn@orcl assysdba;</span><br><span class="line"></span><br><span class="line">提高：</span><br><span class="line">在cmd中启动、停止数据库及监听（截图）</span><br><span class="line">net <span class="keyword">start</span> OracleServerORCL</span><br><span class="line">net <span class="keyword">stop</span> OracleServerORCL</span><br><span class="line">lsnrctl <span class="keyword">start</span></span><br><span class="line">lsnrctl <span class="keyword">stop</span></span><br><span class="line">Linux下安装<span class="keyword">oracle</span>。</span><br><span class="line">Linux下启动、停止数据库及监听。</span><br><span class="line"><span class="keyword">start</span> up;</span><br><span class="line">shutdown immediate;</span><br><span class="line">   lsnrctl <span class="keyword">stop</span>   // 关闭</span><br><span class="line">lsnrctl <span class="keyword">start</span>  // 启动</span><br></pre></td></tr></table></figure>

<h1 id="作业2"><a href="#作业2" class="headerlink" title="作业2"></a>作业2</h1><p>一、部门表和员工表的表结构</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>deptno</td>
<td>部门编号</td>
</tr>
<tr>
<td>dname</td>
<td>部门名称</td>
</tr>
<tr>
<td>loc</td>
<td>部门地址</td>
</tr>
</tbody></table>
<p>员工表emp的表结构：</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>empno</td>
<td>员工编号</td>
</tr>
<tr>
<td>ename</td>
<td>员工姓名</td>
</tr>
<tr>
<td>job</td>
<td>员工工作职位</td>
</tr>
<tr>
<td>mgr</td>
<td>上司的编号</td>
</tr>
<tr>
<td>hiredate</td>
<td>录用日期</td>
</tr>
<tr>
<td>sal</td>
<td>工资</td>
</tr>
<tr>
<td>comm</td>
<td>奖金</td>
</tr>
<tr>
<td>deptno</td>
<td>部门编号</td>
</tr>
</tbody></table>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br></pre></td><td class="code"><pre><span class="line">使用sys将scott用户解锁，使用scott用户执行下列查询语句：</span><br><span class="line">基础：</span><br><span class="line">解锁用户scott，使用scott用户登录oracle数据库。</span><br><span class="line">sqlplus sys/hzn@orcl as sysdba;</span><br><span class="line">alter user scott acconunt unlock;</span><br><span class="line">conn scott/hzn@orcl;</span><br><span class="line">查询部门表中的所有数据。</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> dept;</span><br><span class="line"> </span><br><span class="line">在员工表中查询员工的姓名和员工的工作。</span><br><span class="line"><span class="keyword">select</span> ename,job <span class="keyword">from</span> emp;</span><br><span class="line">查询出员工的工资及给员工加薪200后的工资。</span><br><span class="line"><span class="keyword">select</span> sal,sal+<span class="number">200</span> <span class="keyword">from</span> emp;</span><br><span class="line">查询出每个员工的姓名，及他们的年薪，年薪的列名为Sal Of Year。（年薪=月薪*12）</span><br><span class="line"><span class="keyword">select</span> ename,sal*<span class="number">12</span>“Sal Of Year” <span class="keyword">from</span> emp;</span><br><span class="line">6.创建一个由字符表达式生成的列，取别名为“Employees”。</span><br><span class="line">查询结果如：SMITH likes CLERK （SMITH为员工姓名，CLERK为员工的工作）</span><br><span class="line"><span class="keyword">select</span> ename ||’ likes ’|| job”Employees” <span class="keyword">from</span> emp;</span><br><span class="line">查询出员工表中的部门编号，去掉重复行。</span><br><span class="line"><span class="keyword">select</span> deptno <span class="keyword">from</span> emp;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> deptno <span class="keyword">from</span> emp;</span><br><span class="line">查询出工作为CLERK且工资大于等于950的员工信息。</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> job=’CLERK’ <span class="keyword">and</span> sal&gt;=<span class="number">950</span>;</span><br><span class="line">查询出工资大于1000小于2000的员工的姓名及工资。</span><br><span class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp <span class="keyword">where</span> sal <span class="keyword">between</span> <span class="number">1000</span> <span class="keyword">and</span> <span class="number">2000</span>;</span><br><span class="line">查询出员工姓名为ALLEN，JONES，KING，ADAMS，MILLER的信息。</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="keyword">in</span>(’ALLEN’，’JONES’，’KING’，’ADAMS’，’MILLER’);</span><br><span class="line">查询姓名中第二个字母为L的员工姓名及入职日期。</span><br><span class="line"><span class="keyword">select</span> ename,hiredate <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="keyword">like</span>‘_L%’;</span><br><span class="line">找出没有奖金或奖金低于100的员工。</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> comm <span class="keyword">is</span> <span class="literal">null</span> <span class="keyword">or</span> comm&lt;<span class="number">100</span>;</span><br><span class="line">查询出SALESMAN或PRESIDENT职位中sal大于等于1500的员工信息。</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> ( job=’SALESMAN’ <span class="keyword">or</span> job=’PRESIDENT’)<span class="keyword">and</span> sal &gt;=<span class="number">1500</span>;</span><br><span class="line">按入职日期倒序排列员工信息。</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> hiredate <span class="keyword">desc</span>;</span><br><span class="line">查询出员工信息：先按部门编号顺序排列，再按员工的工资倒序排列。</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> deptno,sal <span class="keyword">desc</span>;</span><br><span class="line">查询出工作不是MANAGER的所有员工信息。</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> ename&lt;&gt;‘MANAGER’;</span><br><span class="line">显示员工的姓名和受雇日期，根据其服务年限，将最老的员工排在最前面。</span><br><span class="line"><span class="keyword">select</span> ename,hiredate <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> hiredate;</span><br><span class="line">显示不带有“R”的员工的姓名。</span><br><span class="line"><span class="keyword">select</span> ename <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="keyword">not</span> <span class="keyword">like</span> ‘%R%’;</span><br><span class="line">找出奖金高于薪金的60%的员工。</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> comm&gt;sal*<span class="number">0.6</span>;</span><br><span class="line">找出收取奖金的员工的不同工作。</span><br><span class="line"><span class="keyword">select</span> job <span class="keyword">from</span> emp;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> job <span class="keyword">from</span> emp <span class="keyword">where</span> comm <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">null</span>;</span><br><span class="line"> 21.根据输入的员工编号，展示员工的姓名、工资、入职日期、职位</span><br><span class="line"><span class="keyword">select</span> ename,sal,hiredate,job <span class="keyword">from</span> emp <span class="keyword">where</span> empno=’&amp;aa’;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">以下题目使用HR用户的employees、departments表来完成</span><br><span class="line">查看DEPARTMENT_ID为80的所有员工的薪资</span><br><span class="line"><span class="keyword">select</span> salary <span class="keyword">from</span> employees <span class="keyword">where</span> DEPARTMENT_ID=’<span class="number">80</span>’;</span><br><span class="line">查看DEPARTMENT_ID为80 的部门经理的id</span><br><span class="line"><span class="keyword">select</span> manager_id <span class="keyword">from</span> employees <span class="keyword">where</span> DEPARTMENT_ID=’<span class="number">80</span>’;</span><br><span class="line">获取下employees表的表结构</span><br><span class="line">SQL&gt; desc employees;</span><br><span class="line">查询出工种为'SA_REP'的所有员工的姓名、入职日期、薪资</span><br><span class="line"><span class="keyword">select</span> last_name ||first_name,hire_date,salary <span class="keyword">from</span> employees <span class="keyword">where</span> job_id=’SA_REP’;</span><br><span class="line">给工种为'SA_REP'的所有员工加薪500，显示出员工姓名、加薪前的薪资，加薪后的薪资</span><br><span class="line"><span class="keyword">select</span> last_name ||first_name,salary,salary+<span class="number">500</span> <span class="keyword">from</span> employees <span class="keyword">where</span> job_id=’SA_REP’;</span><br><span class="line">查询出薪资在5000--8000之前的员工信息</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> employees <span class="keyword">where</span> salary <span class="keyword">between</span> <span class="number">5000</span> <span class="keyword">and</span> <span class="number">8000</span>;</span><br><span class="line">查询薪资大于10000的员工的信息</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> employees <span class="keyword">where</span> salary &gt;<span class="number">10000</span>;</span><br><span class="line">查询员工所在部门，DEPARTMENT_ID不重复</span><br><span class="line"><span class="keyword">select</span> department_id <span class="keyword">from</span> employees;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> department_id <span class="keyword">from</span> employees;</span><br><span class="line">查询DEPARTMENT_ID为50的员工的所有信息，按照薪资降序，雇员ID升序进行显示</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> employees <span class="keyword">where</span> department_id=<span class="number">50</span> <span class="keyword">order</span> <span class="keyword">by</span> salary <span class="keyword">desc</span>, employee_id;</span><br><span class="line">10、查询员工工资大于<span class="number">10000</span>元，或者职称为AD_VP，并且入职时间在<span class="number">2000</span><span class="number">-1</span><span class="number">-1</span>之后的员工信息</span><br><span class="line"> </span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> employees <span class="keyword">where</span> (salary&gt;<span class="number">10000</span> <span class="keyword">or</span> job_id=’ad_vp’) <span class="keyword">and</span> hiredate&gt;’<span class="number">1</span><span class="number">-1</span>月<span class="number">-2000</span>’;</span><br><span class="line">8.查询出每一位雇员的姓名、职位、以及领导的姓名。</span><br><span class="line">(最高领导是没有部门的）</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">e</span>.ename,<span class="built_in">e</span>.job,m.ename <span class="keyword">from</span> emp <span class="built_in">e</span>,emp m <span class="keyword">where</span> <span class="built_in">e</span>.mgr=m.empno;</span><br><span class="line"> </span><br><span class="line">10.要求查询出每一个雇员的编号、姓名、工资、部门名称、工资在所在公司的工资等级</span><br><span class="line">(没有部门的员工也查出来)</span><br><span class="line">方法一：</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">e</span>.empno,<span class="built_in">e</span>.ename,<span class="built_in">e</span>.sal,d.dname,s.grade <span class="keyword">from</span> emp <span class="built_in">e</span>,dept d, salgrade s</span><br><span class="line"><span class="keyword">where</span> (<span class="built_in">e</span>.deptno=d.deptno <span class="keyword">or</span> <span class="built_in">e</span>.deptno <span class="keyword">is</span> <span class="literal">null</span>) <span class="keyword">and</span> (<span class="built_in">e</span>.sal <span class="keyword">between</span> losal <span class="keyword">and</span> hisal);</span><br><span class="line">方法2：</span><br><span class="line"><span class="keyword">Select</span> <span class="built_in">e</span>.empno,<span class="built_in">e</span>.ename,<span class="built_in">e</span>.sal,d.dname,sg.grade</span><br><span class="line"><span class="keyword">From</span> emp <span class="built_in">e</span></span><br><span class="line"><span class="keyword">Left</span> <span class="keyword">Join</span>  dept d <span class="keyword">on</span> <span class="built_in">e</span>.deptno=d.deptno</span><br><span class="line"><span class="keyword">Join</span>  salgrade sg <span class="keyword">on</span> <span class="built_in">e</span>.sal <span class="keyword">BETWEEN</span> sg.losal <span class="keyword">AND</span> sg.hisal;</span><br><span class="line"> </span><br><span class="line">12.查询出每个部门的名称、位置、部门人数、平均工资</span><br><span class="line">(没有认得部门）</span><br><span class="line"><span class="keyword">select</span> d.dname,d.loc,<span class="built_in">count</span>(ename),<span class="built_in">avg</span>(nvl(sal,<span class="number">0</span>)) <span class="keyword">from</span> emp <span class="built_in">e</span></span><br><span class="line"><span class="keyword">right</span> <span class="keyword">join</span> dept d</span><br><span class="line"><span class="keyword">on</span> <span class="built_in">e</span>.deptno=d.deptno</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> d.dname,d.loc;</span><br><span class="line"> </span><br><span class="line">8、列出没有对应部门表信息的所有雇员的姓名、工作。</span><br><span class="line">（有部门但不在部门表，没有部门）</span><br><span class="line"><span class="keyword">select</span> ename,job <span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">where</span> deptno <span class="keyword">not</span> <span class="keyword">in</span>(<span class="keyword">select</span> deptno <span class="keyword">from</span> dept)</span><br><span class="line"><span class="keyword">or</span> deptno <span class="keyword">is</span> <span class="literal">null</span>;</span><br><span class="line"> </span><br><span class="line">9、哪些部门的人数比90 部门的人数多？</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(ename） <span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">where</span>  deptno=<span class="number">90</span>;</span><br><span class="line"><span class="keyword">select</span> deptno <span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> deptno <span class="keyword">having</span> <span class="built_in">count</span>(ename)&gt;</span><br><span class="line">(<span class="keyword">select</span> <span class="built_in">count</span>(ename) <span class="keyword">from</span> emp <span class="keyword">where</span>  deptno=<span class="number">90</span>);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">select</span> dname <span class="keyword">from</span> dept</span><br><span class="line"><span class="keyword">where</span> deptno</span><br><span class="line"><span class="keyword">in</span>(<span class="keyword">select</span> deptno <span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> deptno <span class="keyword">having</span> <span class="built_in">count</span>(ename)&gt;</span><br><span class="line">(<span class="keyword">select</span> <span class="built_in">count</span>(ename) <span class="keyword">from</span> emp <span class="keyword">where</span>  deptno=<span class="number">90</span>));</span><br><span class="line"> </span><br><span class="line">11、列出各个部门中工资最高的员工信息：名字、部门号、薪资</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">e</span>.ename,<span class="built_in">e</span>.deptno,<span class="built_in">e</span>.sal</span><br><span class="line"><span class="keyword">from</span> emp <span class="built_in">e</span>,(<span class="keyword">select</span> <span class="built_in">max</span>(sal) sal,deptno <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno) a</span><br><span class="line"><span class="keyword">where</span> <span class="built_in">e</span>.deptno=a.deptno <span class="keyword">and</span> <span class="built_in">e</span>.sal=a.sal;</span><br><span class="line"> </span><br><span class="line">7.用一个sql语句完成在字符串”hello”左右各添加5个‘*’，使其最终返回’*****hello*****’（禁止使用 | | 或 concate）</span><br><span class="line">8.查询出每一位雇员的姓名、职位、以及领导的姓名。</span><br><span class="line">(最高领导是没有部门的）</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">e</span>.ename,<span class="built_in">e</span>.job,m.ename <span class="keyword">from</span> emp <span class="built_in">e</span>,emp m <span class="keyword">where</span> <span class="built_in">e</span>.mgr=m.empno;</span><br><span class="line"> </span><br><span class="line">10.要求查询出每一个雇员的编号、姓名、工资、部门名称、工资在所在公司的工资等级</span><br><span class="line">(没有部门的员工也查出来)</span><br><span class="line">方法一：</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">e</span>.empno,<span class="built_in">e</span>.ename,<span class="built_in">e</span>.sal,d.dname,s.grade <span class="keyword">from</span> emp <span class="built_in">e</span>,dept d, salgrade s</span><br><span class="line"><span class="keyword">where</span> (<span class="built_in">e</span>.deptno=d.deptno <span class="keyword">or</span> <span class="built_in">e</span>.deptno <span class="keyword">is</span> <span class="literal">null</span>) <span class="keyword">and</span> (<span class="built_in">e</span>.sal <span class="keyword">between</span> losal <span class="keyword">and</span> hisal);</span><br><span class="line">方法2：</span><br><span class="line"><span class="keyword">Select</span> <span class="built_in">e</span>.empno,<span class="built_in">e</span>.ename,<span class="built_in">e</span>.sal,d.dname,sg.grade</span><br><span class="line"><span class="keyword">From</span> emp <span class="built_in">e</span></span><br><span class="line"><span class="keyword">Left</span> <span class="keyword">Join</span>  dept d <span class="keyword">on</span> <span class="built_in">e</span>.deptno=d.deptno</span><br><span class="line"><span class="keyword">Join</span>  salgrade sg <span class="keyword">on</span> <span class="built_in">e</span>.sal <span class="keyword">BETWEEN</span> sg.losal <span class="keyword">AND</span> sg.hisal;</span><br><span class="line"> </span><br><span class="line">12.查询出每个部门的名称、位置、部门人数、平均工资</span><br><span class="line">(没有认得部门）</span><br><span class="line"><span class="keyword">select</span> d.dname,d.loc,<span class="built_in">count</span>(ename),<span class="built_in">avg</span>(nvl(sal,<span class="number">0</span>)) <span class="keyword">from</span> emp <span class="built_in">e</span></span><br><span class="line"><span class="keyword">right</span> <span class="keyword">join</span> dept d</span><br><span class="line"><span class="keyword">on</span> <span class="built_in">e</span>.deptno=d.deptno</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> d.dname,d.loc;</span><br><span class="line"> </span><br><span class="line">8、列出没有对应部门表信息的所有雇员的姓名、工作。</span><br><span class="line">（有部门但不在部门表，没有部门）</span><br><span class="line"><span class="keyword">select</span> ename,job <span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">where</span> deptno <span class="keyword">not</span> <span class="keyword">in</span>(<span class="keyword">select</span> deptno <span class="keyword">from</span> dept)</span><br><span class="line"><span class="keyword">or</span> deptno <span class="keyword">is</span> <span class="literal">null</span>;</span><br><span class="line"> </span><br><span class="line">9、哪些部门的人数比90 部门的人数多？</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(ename） <span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">where</span>  deptno=<span class="number">90</span>;</span><br><span class="line"><span class="keyword">select</span> deptno <span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> deptno <span class="keyword">having</span> <span class="built_in">count</span>(ename)&gt;</span><br><span class="line">(<span class="keyword">select</span> <span class="built_in">count</span>(ename) <span class="keyword">from</span> emp <span class="keyword">where</span>  deptno=<span class="number">90</span>);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">select</span> dname <span class="keyword">from</span> dept</span><br><span class="line"><span class="keyword">where</span> deptno</span><br><span class="line"><span class="keyword">in</span>(<span class="keyword">select</span> deptno <span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> deptno <span class="keyword">having</span> <span class="built_in">count</span>(ename)&gt;</span><br><span class="line">(<span class="keyword">select</span> <span class="built_in">count</span>(ename) <span class="keyword">from</span> emp <span class="keyword">where</span>  deptno=<span class="number">90</span>));</span><br><span class="line"> </span><br><span class="line">11、列出各个部门中工资最高的员工信息：名字、部门号、薪资</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">e</span>.ename,<span class="built_in">e</span>.deptno,<span class="built_in">e</span>.sal</span><br><span class="line"><span class="keyword">from</span> emp <span class="built_in">e</span>,(<span class="keyword">select</span> <span class="built_in">max</span>(sal) sal,deptno <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno) a</span><br><span class="line"><span class="keyword">where</span> <span class="built_in">e</span>.deptno=a.deptno <span class="keyword">and</span> <span class="built_in">e</span>.sal=a.sal;</span><br><span class="line"> </span><br><span class="line">7.用一个sql语句完成在字符串”hello”左右各添加5个‘*’，使其最终返回’*****hello*****’（禁止使用 | | 或 concate）</span><br></pre></td></tr></table></figure>

<h1 id="作业3"><a href="#作业3" class="headerlink" title="作业3"></a>作业3</h1><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><span class="line">以下作业使用scott.emp表，以及scott.dept表完成</span><br><span class="line">找出EMP表员工名字中含有A和N的员工姓名</span><br><span class="line"><span class="keyword">select</span> ename <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="keyword">like</span> <span class="string">'%A%'</span> <span class="keyword">and</span> ename <span class="keyword">like</span> <span class="string">'%B%'</span>;</span><br><span class="line">列出部门编号为20的所有职位</span><br><span class="line"><span class="keyword">select</span> job <span class="keyword">from</span> emp <span class="keyword">where</span> deptno=<span class="number">20</span>;</span><br><span class="line">列出各个工种的最低薪资</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">min</span>(sal),job <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> job;</span><br><span class="line">列出不属于SALES的部门</span><br><span class="line"><span class="keyword">select</span> dname <span class="keyword">from</span> dept <span class="keyword">where</span> dname&lt;&gt;<span class="string">'SALES'</span>;</span><br><span class="line">显示出员工的工资不在1000到1500之间的员工信息：名字、工资，按工资从大到小排序</span><br><span class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp <span class="keyword">where</span> sal <span class="keyword">between</span> <span class="number">1000</span> <span class="keyword">and</span> <span class="number">1500</span> <span class="keyword">order</span> <span class="keyword">by</span> sal <span class="keyword">desc</span>;</span><br><span class="line">显示职位为MANAGER和SALESMAN,年薪在15000和20000之间的员工</span><br><span class="line">的信息：名字、职位、年薪</span><br><span class="line"><span class="keyword">select</span> ename,job,sal*<span class="number">12</span> <span class="keyword">from</span> emp <span class="keyword">where</span> job <span class="keyword">in</span>(<span class="string">'MANAGER'</span>,<span class="string">'SALESMAN'</span>) <span class="keyword">and</span> sal*<span class="number">12</span> <span class="keyword">between</span> <span class="number">15000</span> <span class="keyword">and</span> <span class="number">20000</span>;</span><br><span class="line">列出至少有一个员工的所有部门</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> deptno <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">null</span>;</span><br><span class="line">列出最低薪资大于1500的各种工种</span><br><span class="line"><span class="keyword">select</span> job,<span class="built_in">min</span>(sal) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> job <span class="keyword">having</span> <span class="built_in">min</span>(sal)&gt;<span class="number">1500</span>;</span><br><span class="line">列出所有员工的年薪，并按照年薪降序排列</span><br><span class="line"><span class="keyword">select</span> sal*<span class="number">12</span> <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> sal*<span class="number">12</span> <span class="keyword">desc</span>;</span><br><span class="line">查出emp表中所有部门的最高薪水和最低薪水，部门编号为10的部门不显示</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(sal),<span class="built_in">min</span>(sal),deptno <span class="keyword">from</span> emp <span class="keyword">where</span> deptno&lt;&gt;<span class="number">10</span> <span class="keyword">group</span> <span class="keyword">by</span> deptno;</span><br><span class="line">查询emp表中的员工号以及每个人工资的80%</span><br><span class="line"><span class="keyword">select</span> empno,sal*<span class="number">0.8</span> <span class="keyword">from</span> emp;</span><br><span class="line"> 查询emp表中员工编号，姓名，要求姓名输出小写</span><br><span class="line"><span class="keyword">select</span> empno,<span class="built_in">lower</span>(ename) <span class="keyword">from</span> emp;</span><br><span class="line">查询emp表中员工姓名、工资和工种，要求将姓名列标题改为employeename，工资列标题改为salary</span><br><span class="line"><span class="keyword">select</span> ename<span class="string">"employeename"</span>,sal<span class="string">"salary"</span>,job <span class="keyword">from</span> emp;</span><br><span class="line">显示正好为5个字符的员工的姓名</span><br><span class="line"><span class="keyword">select</span> ename <span class="keyword">from</span> emp <span class="keyword">where</span> <span class="built_in">length</span>(ename)=<span class="number">5</span>;</span><br><span class="line">  15.计算工资在1000-3000之间的员工人数</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(ename) <span class="keyword">from</span> emp <span class="keyword">where</span> sal <span class="keyword">between</span> <span class="number">1000</span> <span class="keyword">and</span> <span class="number">3000</span>;</span><br><span class="line">  16.查询工作以“sales”开头的员工的平均工资,最高工资、最低工资和总工资</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(sal),<span class="built_in">max</span>(sal),<span class="built_in">min</span>(sal),<span class="built_in">sum</span>(sal) <span class="keyword">from</span> emp <span class="keyword">where</span> job <span class="keyword">like</span> <span class="string">'SALES%'</span>;</span><br><span class="line">  17.查询30号部门的员工人数</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(ename) <span class="keyword">from</span> emp <span class="keyword">where</span> deptno=<span class="number">30</span>;</span><br><span class="line">查询所有员工的平均奖金</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(sal) <span class="keyword">from</span> emp ;</span><br><span class="line">找出在（任何年份的）2月受聘的所有员工</span><br><span class="line"><span class="keyword">select</span> ename <span class="keyword">from</span> emp <span class="keyword">where</span> to_char(hiredate,<span class="string">'mm'</span>)=<span class="number">2</span>;</span><br><span class="line">请查询表DEPT中所有部门的情况</span><br><span class="line"><span class="keyword">select</span> deptno <span class="keyword">from</span> DEPT;</span><br><span class="line">请从表EMP中查找工种是职员CLERK或经理MANAGER的雇员姓名、工资</span><br><span class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp <span class="keyword">where</span> job=<span class="string">'CLERK'</span> <span class="keyword">or</span> job=<span class="string">'MANAGER'</span>;</span><br><span class="line">请从表EMP中查找姓名以J开头所有雇员的姓名、工资、职位</span><br><span class="line"><span class="keyword">select</span> ename,sal,job <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="keyword">like</span> <span class="string">'J%'</span>;</span><br><span class="line">查询所有雇员的姓名、SAL与COMM之和</span><br><span class="line"><span class="keyword">select</span> ename,sal,<span class="built_in">sum</span>(comm) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> ename,sal;</span><br><span class="line">找出平均工资最高的部门</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(<span class="built_in">avg</span>(sal)) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno;</span><br><span class="line">本题以hr用户登陆，使用员工表（employees）、部门表（departments）、区域表（regions），完成以下题目</span><br><span class="line">列出前五位员工的名字、工资、涨薪后的工资（涨幅为8%），以“元”为单位进行四舍五入</span><br><span class="line"> </span><br><span class="line">找出谁是最高领导，将名字按大写形式显示</span><br><span class="line"> </span><br><span class="line">求整个公司薪资最低与最高员工的薪资相差多少？</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(salary)-<span class="built_in">min</span>(salary) <span class="keyword">from</span> employees;</span><br><span class="line">显示整个公司的最高薪资、最低薪资、平均薪资、工资总和，并四舍五入保留到整数位</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">round</span>(<span class="built_in">max</span>(salary),<span class="number">0</span>),<span class="built_in">round</span>(<span class="built_in">min</span>(salary),<span class="number">0</span>),<span class="built_in">round</span>(<span class="built_in">avg</span>(salary),<span class="number">0</span>),<span class="built_in">round</span>(<span class="built_in">sum</span>(salary),<span class="number">0</span>) <span class="keyword">from</span> employees;</span><br><span class="line">选择部门30中的所有员工</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> employees <span class="keyword">where</span> department_id=<span class="number">30</span>;</span><br><span class="line">列出所有办事员(CLERK)的姓名，编号和部门编号</span><br><span class="line"><span class="keyword">select</span> last_name||first_name,employee_id,department_id <span class="keyword">from</span> employees <span class="keyword">where</span> job_id <span class="keyword">like</span> <span class="string">'%CLERK%'</span>;</span><br><span class="line">找出奖金高于薪金的员工</span><br><span class="line"><span class="keyword">select</span> last_name||first_name <span class="keyword">from</span> employees <span class="keyword">where</span> commission_pct*salary&gt;salary;</span><br><span class="line">找出收取奖金的员工的不同工作</span><br><span class="line"><span class="keyword">select</span> job_id <span class="keyword">from</span> employees <span class="keyword">where</span> commission_pct <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">null</span>;</span><br><span class="line">找出不收取奖金或收取的奖金低于100的员工</span><br><span class="line"><span class="keyword">select</span> first_name <span class="keyword">from</span> employees <span class="keyword">where</span> commission_pct <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">or</span> commission_pct*salary&lt;<span class="number">100</span>;</span><br><span class="line">找出早于12年前受雇的员工</span><br><span class="line"><span class="keyword">select</span> last_name||first_name <span class="keyword">from</span> employees <span class="keyword">where</span> months_between(sysdate,hire_date)&gt;<span class="number">12</span>;</span><br><span class="line">以首字母大写的方式显示所有员工的姓名(first_name)</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">upper</span>(<span class="built_in">substr</span>(first_name,<span class="number">1</span>,<span class="number">1</span>))||<span class="built_in">substr</span>(first_name,<span class="number">2</span>) <span class="keyword">from</span> employees;</span><br><span class="line">显示正好为5个字符的员工的姓名</span><br><span class="line"><span class="keyword">select</span> first_name <span class="keyword">from</span> employees <span class="keyword">where</span> <span class="built_in">length</span>(first_name)=<span class="number">5</span>;</span><br><span class="line">显示所有员工姓名(frist_name)的前三个字符</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">substr</span>(first_name,<span class="number">1</span>,<span class="number">3</span>) <span class="keyword">from</span> employees;</span><br><span class="line">显示所有员工的姓名(first_name),用hzn替换所有"A"</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">replace</span>(first_name,<span class="string">'A'</span>,<span class="string">'hzn'</span>) <span class="keyword">from</span> employees;</span><br><span class="line">显示员工的详细资料,按姓名排序</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> employees <span class="keyword">order</span> <span class="keyword">by</span> first_name ;</span><br><span class="line">显示满10年服务年限的员工的姓名和受雇日期</span><br><span class="line"><span class="keyword">select</span> last_name || first_name,hire_date <span class="keyword">from</span> employees <span class="keyword">where</span> months_between(sysdate,hire_date)&gt;=<span class="number">10</span>;</span><br><span class="line">显示员工的姓名和受雇日期,根据其服务年限,将最老的员工排在最前面</span><br><span class="line"><span class="keyword">select</span> last_name || first_name,hire_date <span class="keyword">from</span> employees <span class="keyword">order</span> <span class="keyword">by</span> months_between(sysdate,hire_date) <span class="keyword">desc</span>;</span><br><span class="line">显示所有员工的姓名、工作和薪金,按工作的降序排序,若工作相同则按薪金排序</span><br><span class="line"><span class="keyword">select</span> last_name ||first_name,job_id,salary <span class="keyword">from</span> employees <span class="keyword">order</span> <span class="keyword">by</span> job_id <span class="keyword">desc</span>,salary;</span><br><span class="line">对于每个员工,显示其加入公司的天数</span><br><span class="line"><span class="keyword">select</span> months_between(sysdate,hire_date)*<span class="number">30</span> <span class="keyword">from</span> employees;</span><br><span class="line">以年月日的方式显示所有员工的服务年限.</span><br><span class="line"><span class="keyword">select</span> months_between(sysdate,hire_date)/<span class="number">12</span> <span class="keyword">from</span> employees;</span><br><span class="line">各个部门平均、最大、最小工资、人数，按照部门号升序排序</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(salary),<span class="built_in">max</span>(salary),<span class="built_in">min</span>(salary),<span class="built_in">count</span>(<span class="number">1</span>),department_id <span class="keyword">from</span> employees <span class="keyword">group</span> <span class="keyword">by</span> department_id <span class="keyword">order</span> <span class="keyword">by</span> department_id;</span><br><span class="line">各个部门中工资大于5000的员工人数</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="number">1</span>),department_id <span class="keyword">from</span> employees <span class="keyword">where</span> salary&gt;<span class="number">5000</span> <span class="keyword">group</span> <span class="keyword">by</span> department_id;</span><br><span class="line">8.查询出每一位雇员的姓名、职位、以及领导的姓名。</span><br><span class="line">(最高领导是没有部门的）</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">e</span>.ename,<span class="built_in">e</span>.job,m.ename <span class="keyword">from</span> emp <span class="built_in">e</span>,emp m <span class="keyword">where</span> <span class="built_in">e</span>.mgr=m.empno;</span><br><span class="line"> </span><br><span class="line">10.要求查询出每一个雇员的编号、姓名、工资、部门名称、工资在所在公司的工资等级</span><br><span class="line">(没有部门的员工也查出来)</span><br><span class="line">方法一：</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">e</span>.empno,<span class="built_in">e</span>.ename,<span class="built_in">e</span>.sal,d.dname,s.grade <span class="keyword">from</span> emp <span class="built_in">e</span>,dept d, salgrade s</span><br><span class="line"><span class="keyword">where</span> (<span class="built_in">e</span>.deptno=d.deptno <span class="keyword">or</span> <span class="built_in">e</span>.deptno <span class="keyword">is</span> <span class="literal">null</span>) <span class="keyword">and</span> (<span class="built_in">e</span>.sal <span class="keyword">between</span> losal <span class="keyword">and</span> hisal);</span><br><span class="line">方法2：</span><br><span class="line"><span class="keyword">Select</span> <span class="built_in">e</span>.empno,<span class="built_in">e</span>.ename,<span class="built_in">e</span>.sal,d.dname,sg.grade</span><br><span class="line"><span class="keyword">From</span> emp <span class="built_in">e</span></span><br><span class="line"><span class="keyword">Left</span> <span class="keyword">Join</span>  dept d <span class="keyword">on</span> <span class="built_in">e</span>.deptno=d.deptno</span><br><span class="line"><span class="keyword">Join</span>  salgrade sg <span class="keyword">on</span> <span class="built_in">e</span>.sal <span class="keyword">BETWEEN</span> sg.losal <span class="keyword">AND</span> sg.hisal;</span><br><span class="line"> </span><br><span class="line">12.查询出每个部门的名称、位置、部门人数、平均工资</span><br><span class="line">(没有认得部门）</span><br><span class="line"><span class="keyword">select</span> d.dname,d.loc,<span class="built_in">count</span>(ename),<span class="built_in">avg</span>(nvl(sal,<span class="number">0</span>)) <span class="keyword">from</span> emp <span class="built_in">e</span></span><br><span class="line"><span class="keyword">right</span> <span class="keyword">join</span> dept d</span><br><span class="line"><span class="keyword">on</span> <span class="built_in">e</span>.deptno=d.deptno</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> d.dname,d.loc;</span><br><span class="line"> </span><br><span class="line">8、列出没有对应部门表信息的所有雇员的姓名、工作。</span><br><span class="line">（有部门但不在部门表，没有部门）</span><br><span class="line"><span class="keyword">select</span> ename,job <span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">where</span> deptno <span class="keyword">not</span> <span class="keyword">in</span>(<span class="keyword">select</span> deptno <span class="keyword">from</span> dept)</span><br><span class="line"><span class="keyword">or</span> deptno <span class="keyword">is</span> <span class="literal">null</span>;</span><br><span class="line"> </span><br><span class="line">9、哪些部门的人数比90 部门的人数多？</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(ename） <span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">where</span>  deptno=<span class="number">90</span>;</span><br><span class="line"><span class="keyword">select</span> deptno <span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> deptno <span class="keyword">having</span> <span class="built_in">count</span>(ename)&gt;</span><br><span class="line">(<span class="keyword">select</span> <span class="built_in">count</span>(ename) <span class="keyword">from</span> emp <span class="keyword">where</span>  deptno=<span class="number">90</span>);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">select</span> dname <span class="keyword">from</span> dept</span><br><span class="line"><span class="keyword">where</span> deptno</span><br><span class="line"><span class="keyword">in</span>(<span class="keyword">select</span> deptno <span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> deptno <span class="keyword">having</span> <span class="built_in">count</span>(ename)&gt;</span><br><span class="line">(<span class="keyword">select</span> <span class="built_in">count</span>(ename) <span class="keyword">from</span> emp <span class="keyword">where</span>  deptno=<span class="number">90</span>));</span><br><span class="line"> </span><br><span class="line">11、列出各个部门中工资最高的员工信息：名字、部门号、薪资</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">e</span>.ename,<span class="built_in">e</span>.deptno,<span class="built_in">e</span>.sal</span><br><span class="line"><span class="keyword">from</span> emp <span class="built_in">e</span>,(<span class="keyword">select</span> <span class="built_in">max</span>(sal) sal,deptno <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno) a</span><br><span class="line"><span class="keyword">where</span> <span class="built_in">e</span>.deptno=a.deptno <span class="keyword">and</span> <span class="built_in">e</span>.sal=a.sal;</span><br><span class="line"> </span><br><span class="line">7.用一个sql语句完成在字符串”hello”左右各添加5个‘*’，使其最终返回’*****hello*****’（禁止使用 | | 或 concate）</span><br></pre></td></tr></table></figure>

<h1 id="作业4"><a href="#作业4" class="headerlink" title="作业4"></a>作业4</h1><p>一、部门表和员工表的表结构</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>deptno</td>
<td>部门编号</td>
</tr>
<tr>
<td>dname</td>
<td>部门名称</td>
</tr>
<tr>
<td>loc</td>
<td>部门地址</td>
</tr>
</tbody></table>
<p>员工表emp的表结构：</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>empno</td>
<td>员工编号</td>
</tr>
<tr>
<td>ename</td>
<td>员工姓名</td>
</tr>
<tr>
<td>job</td>
<td>员工工作职位</td>
</tr>
<tr>
<td>mgr</td>
<td>上司的编号</td>
</tr>
<tr>
<td>hiredate</td>
<td>录用日期</td>
</tr>
<tr>
<td>sal</td>
<td>工资</td>
</tr>
<tr>
<td>comm</td>
<td>奖金</td>
</tr>
<tr>
<td>deptno</td>
<td>部门编号</td>
</tr>
</tbody></table>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">将scott用户解锁，使用scott用户执行下列查询语句：</span><br><span class="line">alter user scott account unlock;</span><br><span class="line">conn scott/hzn@orcl;</span><br><span class="line">Part one:</span><br><span class="line">找出没有奖金或奖金低于100的员工</span><br><span class="line"><span class="keyword">select</span> ename <span class="keyword">from</span> emp <span class="keyword">where</span> comm <span class="keyword">is</span> <span class="literal">null</span> <span class="keyword">or</span> comm&lt;<span class="number">100</span>;</span><br><span class="line">查询出工作不是MANAGER的所有员工信息</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> job&lt;&gt;<span class="string">'MANAGER'</span>;</span><br><span class="line">查询emp表中员工的员工号和姓名，要求输出格式如下：</span><br><span class="line">  7369 Name is: SMITH</span><br><span class="line"><span class="keyword">select</span> empno ||<span class="string">' name is :'</span>||ename <span class="keyword">from</span> emp;</span><br><span class="line">查询工资不在1000-2000之间的员工的编号、姓名、工资和部门号</span><br><span class="line"><span class="keyword">select</span> empno,ename,sal,deptno <span class="keyword">from</span> emp <span class="keyword">where</span> sal <span class="keyword">not</span> <span class="keyword">between</span> <span class="number">1000</span> <span class="keyword">and</span> <span class="number">2000</span>;</span><br><span class="line">查询奖金不为空且工资超过1500的员工的编号、姓名、工资、奖金和部门号</span><br><span class="line"><span class="keyword">select</span> empno,ename,sal,comm,deptno <span class="keyword">from</span> emp <span class="keyword">where</span> comm <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">and</span> sal&gt;<span class="number">1500</span>;</span><br><span class="line">查询emp表中员工姓名、工资和工种，要求将姓名列标题改为employeename，工资列标题改为salary</span><br><span class="line"><span class="keyword">select</span> ename<span class="string">"employeename"</span>,sal<span class="string">"salary"</span>,job <span class="keyword">from</span> emp;</span><br><span class="line">查询10号部门和<span class="number">30</span>号部门的所有员工的编号、姓名、工资和部门号</span><br><span class="line"><span class="keyword">select</span> empno,</span><br><span class="line"><span class="keyword">select</span> empno,ename,sal,deptno <span class="keyword">from</span> emp <span class="keyword">where</span> deptno <span class="keyword">in</span>(<span class="number">10</span>,<span class="number">30</span>);</span><br><span class="line"> </span><br><span class="line">Prat two:使用scott用户执行下列查询语句</span><br><span class="line">将员工的姓名以首字母大写，其他字母小写。</span><br><span class="line"> <span class="keyword">select</span> <span class="built_in">upper</span>(<span class="built_in">substr</span>(ename,<span class="number">1</span>,<span class="number">1</span>)) ||<span class="built_in">lower</span>(<span class="built_in">substr</span>(ename,<span class="number">2</span>),<span class="built_in">length</span>(ename)<span class="number">-1</span>)) <span class="keyword">from</span> emp;</span><br><span class="line">显示每个用户姓名的第2个和第3个字母。</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">substr</span>(ename,<span class="number">2</span>,<span class="number">2</span>) <span class="keyword">from</span> emp;</span><br><span class="line">将员工姓名中含有A的字母以0替换。</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">replace</span>(ename,<span class="string">'A'</span>,<span class="number">0</span>) <span class="keyword">from</span> emp;</span><br><span class="line">查询出用户的姓名，及用户姓名字符长度。</span><br><span class="line"><span class="keyword">select</span> ename,<span class="built_in">length</span>(ename) <span class="keyword">from</span> emp;</span><br><span class="line">计算出2096除以37的余数。</span><br><span class="line"><span class="keyword">select</span> mod(<span class="number">2096</span>,<span class="number">27</span>) <span class="keyword">from</span> dual;</span><br><span class="line">查询出当前的系统日期。</span><br><span class="line"><span class="keyword">select</span> sysdate <span class="keyword">from</span> dual;</span><br><span class="line">计算出员工入职到现在工作的星期数，以整数显示，不显示出小数位。</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">trunc</span>(months_between(sysdate,hiredate)*<span class="number">30</span>/<span class="number">7</span>,<span class="number">0</span>) <span class="keyword">from</span> emp;</span><br><span class="line">查询出两列信息，员工的姓名ename和员工工资sal，以$8,00格式显示员工的工资。</span><br><span class="line"><span class="keyword">select</span> ename,to_char(sal,<span class="string">'$9,99'</span>) <span class="keyword">from</span> emp;</span><br><span class="line">查询出员工的姓名及员工的年薪（年薪为月薪*12加上奖金）。</span><br><span class="line"><span class="keyword">select</span> ename,sal*<span class="number">12</span>+nvl2(comm,comm,<span class="number">0</span>)*<span class="number">12</span> <span class="keyword">from</span> emp;</span><br><span class="line">对于每个员工，显示其加入公司的天数。</span><br><span class="line"><span class="keyword">select</span> ename,months_between(sysdate,hiredate)*<span class="number">30</span> <span class="keyword">from</span> emp;</span><br><span class="line">找出在（任何年份的）2月受聘的所有员工。</span><br><span class="line"><span class="keyword">select</span> ename <span class="keyword">from</span> emp <span class="keyword">where</span> to_char(hiredate,<span class="string">'mm'</span>)=<span class="number">2</span>;</span><br><span class="line">找出奖金高于薪金的员工。</span><br><span class="line"><span class="keyword">select</span> ename <span class="keyword">from</span> emp <span class="keyword">where</span> comm&gt;sal;</span><br><span class="line"> 计算工资在1000-3000之间的员工人数。</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(ename) <span class="keyword">from</span> emp <span class="keyword">where</span> sal <span class="keyword">between</span> <span class="number">1000</span> <span class="keyword">and</span> <span class="number">3000</span>;</span><br><span class="line">查询工作以“sales”开头的员工的平均工资,最高工资、最低工资和总工资</span><br><span class="line"><span class="keyword">select</span> job,<span class="built_in">avg</span>(sal),<span class="built_in">max</span>(sal),<span class="built_in">min</span>(sal),<span class="built_in">sum</span>(sal) <span class="keyword">from</span> emp <span class="keyword">where</span> <span class="built_in">lower</span>(<span class="built_in">substr</span>(job,<span class="number">1</span>,<span class="number">5</span>))=<span class="string">'sales'</span> <span class="keyword">group</span> <span class="keyword">by</span> job;</span><br><span class="line">where job like “</span><br><span class="line">查询30号部门有奖金的员工人数</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(ename) <span class="keyword">from</span> emp <span class="keyword">where</span> comm <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">and</span> deptno=<span class="number">30</span>;</span><br><span class="line">查询所有员工的平均奖金</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(nvl(comm,<span class="number">0</span>)) <span class="keyword">from</span> emp;</span><br><span class="line">查询每个部门的平均工资</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(sal),deptno <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno;</span><br><span class="line">查询每个部门各工种的雇员数</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(ename),deptno,job <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno,job;</span><br><span class="line">显示在一个月为30天的情况所有员工的日薪金，忽略余数（四舍五入）</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">round</span>(sal/<span class="number">30</span>,<span class="number">0</span>) <span class="keyword">from</span> emp;</span><br><span class="line">显示所有员工的姓名、工作和薪金，按工作的降序排序，若工作相同则按薪金排序</span><br><span class="line"><span class="keyword">select</span> ename,job,sal <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> job <span class="keyword">desc</span>,sal;</span><br><span class="line">显示满33年服务年限的员工的姓名和受雇日期</span><br><span class="line"><span class="keyword">select</span> ename,hiredate <span class="keyword">from</span> emp <span class="keyword">where</span> months_between(sysdate,hiredate)/<span class="number">12</span>&gt;=<span class="number">33</span>;</span><br><span class="line">找出各月倒数第3天受雇的所有员工</span><br><span class="line"><span class="keyword">select</span> ename <span class="keyword">from</span> emp <span class="keyword">where</span> hiredate=last_day(hiredate)<span class="number">-3</span>;</span><br><span class="line">列出各个工种的最低薪资</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">min</span>(sal),job <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> job;</span><br><span class="line">查出emp表中所有部门的最高薪水和最低薪水，部门编号为10的部门不显示</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(sal),<span class="built_in">min</span>(sal),deptno <span class="keyword">from</span> emp <span class="keyword">where</span> deptno &lt;&gt; <span class="number">10</span> <span class="keyword">group</span> <span class="keyword">by</span> deptno;</span><br></pre></td></tr></table></figure>

<h1 id="作业5"><a href="#作业5" class="headerlink" title="作业5"></a>作业5</h1><p>一、部门表和员工表的表结构</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>deptno</td>
<td>部门编号</td>
</tr>
<tr>
<td>dname</td>
<td>部门名称</td>
</tr>
<tr>
<td>loc</td>
<td>部门地址</td>
</tr>
</tbody></table>
<p>员工表emp的表结构：</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>empno</td>
<td>员工编号</td>
</tr>
<tr>
<td>ename</td>
<td>员工姓名</td>
</tr>
<tr>
<td>job</td>
<td>员工工作职位</td>
</tr>
<tr>
<td>mgr</td>
<td>上司的编号</td>
</tr>
<tr>
<td>hiredate</td>
<td>录用日期</td>
</tr>
<tr>
<td>sal</td>
<td>工资</td>
</tr>
<tr>
<td>comm</td>
<td>奖金</td>
</tr>
<tr>
<td>deptno</td>
<td>部门编号</td>
</tr>
</tbody></table>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line">将scott用户解锁，使用scott用户执行下列查询语句：</span><br><span class="line">1.找出部门10中所有经理（MANAGER），部门<span class="number">20</span>中所有化验员（ANALYST），既不是经理又不是化验员员但其薪金大于或等于<span class="number">2000</span>的所有员工的详细资料</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> deptno=<span class="number">10</span> <span class="keyword">and</span> job=<span class="string">'MANAGER'</span> <span class="keyword">or</span> deptno=<span class="number">20</span> <span class="keyword">and</span> job=<span class="string">'ANALYST'</span> <span class="keyword">or</span> (job <span class="keyword">not</span> <span class="keyword">in</span>(<span class="string">'MANAGER'</span>,<span class="string">'ANALYST'</span>) <span class="keyword">and</span> sal&gt;=<span class="number">2000</span>);</span><br><span class="line"> </span><br><span class="line">请从表EMP中查找姓名以'M'开头所有雇员的姓名、工资、职位。</span><br><span class="line"><span class="keyword">select</span> ename,sal,job <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="keyword">like</span> <span class="string">'M%'</span>;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">3.请从表EMP中查找工资低于1500的雇员的姓名、工作、工资，并按工资升序排列。</span><br><span class="line"><span class="keyword">select</span> empno,job,sal <span class="keyword">from</span>  <span class="keyword">where</span> sal&lt;<span class="number">1500</span> <span class="keyword">order</span> <span class="keyword">by</span> sal;</span><br><span class="line"> </span><br><span class="line">4.查询列出各部门的部门名和部门经理名字</span><br><span class="line"><span class="keyword">select</span> d.dname,<span class="built_in">e</span>.ename <span class="keyword">from</span> emp <span class="built_in">e</span>,dept d</span><br><span class="line"><span class="keyword">where</span> emp.deptno=dept.deptno <span class="keyword">and</span> job=<span class="string">'MANAGER'</span>;</span><br><span class="line">或者</span><br><span class="line"><span class="keyword">select</span> dname,ename <span class="keyword">from</span> emp <span class="keyword">join</span> dept</span><br><span class="line"><span class="keyword">on</span>(emp.deptno=dept.deptno)</span><br><span class="line"><span class="keyword">where</span> job=<span class="string">'MANAGER'</span>;</span><br><span class="line"> </span><br><span class="line">5.查询所有81年7月1日以前来的员工姓名、工资、所属部门的名字</span><br><span class="line"><span class="keyword">select</span> ename,sal,dname <span class="keyword">from</span> emp,dept</span><br><span class="line"><span class="keyword">where</span> emp.deptno=dept.deptno</span><br><span class="line"><span class="keyword">and</span>  hiredate&lt;=<span class="number">01</span><span class="number">-7</span>月<span class="number">-1981</span>;</span><br><span class="line">或者</span><br><span class="line"><span class="keyword">select</span> ename,sal,dname <span class="keyword">from</span> emp <span class="keyword">join</span> dept</span><br><span class="line"><span class="keyword">on</span>(emp.deptno=dept.deptno)</span><br><span class="line"><span class="keyword">where</span> hiredate&lt;=to_date(<span class="string">'1981-07-01'</span>,<span class="string">'yyyy-mm-dd'</span>);</span><br><span class="line"> </span><br><span class="line">查询表EMP中所有的工资大于等于2000的雇员姓名和他的经理的名字。</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">work</span>.ename,manager.ename <span class="keyword">from</span> emp <span class="keyword">work</span>,emp manager</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">work</span>.mgr=manager.empno(+) --左外连接</span><br><span class="line"><span class="keyword">and</span> <span class="keyword">work</span>.sal&gt;=<span class="number">2000</span>;</span><br><span class="line">或者</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">work</span>.ename,manager.ename <span class="keyword">from</span> emp <span class="keyword">work</span></span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> emp manager</span><br><span class="line"><span class="keyword">on</span> <span class="keyword">work</span>.mgr=manager.empno</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">work</span>.sal&gt;=<span class="number">2000</span>;</span><br><span class="line"> </span><br><span class="line">7.请从表中查询工作是CLERK的所有人的姓名、工资、部门号、部门名称以及部门地址的信息</span><br><span class="line"> <span class="keyword">select</span> ename,sal,emp.deptno,dname,loc</span><br><span class="line"> <span class="keyword">from</span> emp,dept</span><br><span class="line"> <span class="keyword">where</span> emp.deptno=dept.deptno <span class="keyword">and</span>  job=<span class="string">'CLERK'</span></span><br><span class="line">或者</span><br><span class="line"><span class="keyword">select</span> ename,sal,emp.deptno,dname,loc <span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">join</span> dept</span><br><span class="line"><span class="keyword">on</span>(emp.deptno=dept.deptno)</span><br><span class="line"><span class="keyword">where</span> job=<span class="string">'CLERK'</span></span><br><span class="line"> </span><br><span class="line"><span class="number">8.</span>查询出每一位雇员的姓名、职位、以及领导的姓名。</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">work</span>.ename,<span class="keyword">work</span>.job,manager.ename <span class="keyword">from</span> emp <span class="keyword">work</span>,emp manager</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">work</span>.mgr = manager.empno;</span><br><span class="line">或者</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">work</span>.ename,<span class="keyword">work</span>.job,manager.ename</span><br><span class="line"><span class="keyword">from</span> emp <span class="keyword">work</span></span><br><span class="line"><span class="keyword">join</span> emp manager</span><br><span class="line"><span class="keyword">on</span>(<span class="keyword">work</span>.mgr = manager.empno);</span><br><span class="line"> </span><br><span class="line">9.查询每个雇佣的雇佣编号，姓名、基本工资、职位、领导的姓名、部门名称及位置</span><br><span class="line"><span class="keyword">Select</span> <span class="built_in">e</span>.empno,<span class="built_in">e</span>.ename,<span class="built_in">e</span>.sal,<span class="built_in">e</span>.job,m.ename,d.dname,d.loc</span><br><span class="line"><span class="keyword">From</span> emp <span class="built_in">e</span></span><br><span class="line"><span class="keyword">Left</span> <span class="keyword">JOIN</span> emp m  <span class="keyword">on</span> <span class="built_in">e</span>.mgr=m.empno</span><br><span class="line"><span class="keyword">JOIN</span> dept d <span class="keyword">on</span> d.deptno = <span class="built_in">e</span>.deptno;</span><br><span class="line"> </span><br><span class="line">或者</span><br><span class="line"><span class="keyword">Select</span> <span class="built_in">e</span>.empno,<span class="built_in">e</span>.ename,<span class="built_in">e</span>.sal,<span class="built_in">e</span>.job,m.ename,d.dname,d.loc</span><br><span class="line"><span class="keyword">From</span> emp <span class="built_in">e</span>,emp m, dept d</span><br><span class="line"><span class="keyword">Where</span> <span class="built_in">e</span>.mgr=m.empno(+) <span class="keyword">and</span> d.deptno = <span class="built_in">e</span>.deptno;</span><br><span class="line">        </span><br><span class="line">10.要求查询出每一个雇员的编号、姓名、工资、部门名称、工资在所在公司的工资等级</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">e</span>.empno,<span class="built_in">e</span>.ename,<span class="built_in">e</span>.sal,d.dname,sg.grade</span><br><span class="line"><span class="keyword">FROM</span> emp <span class="built_in">e</span>,dept d,salgrade sg</span><br><span class="line"><span class="keyword">WHERE</span> <span class="built_in">e</span>.deptno = d.deptno</span><br><span class="line"><span class="keyword">AND</span> <span class="built_in">e</span>.sal <span class="keyword">BETWEEN</span> sg.losal <span class="keyword">AND</span> sg.hisal; </span><br><span class="line">或者</span><br><span class="line"><span class="keyword">Select</span> <span class="built_in">e</span>.empno,<span class="built_in">e</span>.ename,<span class="built_in">e</span>.sal,d.dname,sg.grade</span><br><span class="line"><span class="keyword">From</span> emp <span class="built_in">e</span></span><br><span class="line"><span class="keyword">Left</span> <span class="keyword">Join</span>  dept d <span class="keyword">on</span> <span class="built_in">e</span>.deptno=d.deptno</span><br><span class="line"><span class="keyword">Join</span>  salgrade sg <span class="keyword">on</span> <span class="built_in">e</span>.sal <span class="keyword">BETWEEN</span> sg.losal <span class="keyword">AND</span> sg.hisal;</span><br><span class="line"> </span><br><span class="line">11.查询出每个部门的名称、部门人数、平均工资</span><br><span class="line"><span class="keyword">SELECT</span> d.dname,<span class="built_in">COUNT</span>(<span class="built_in">e</span>.empno),NVL(<span class="built_in">AVG</span>(<span class="built_in">e</span>.sal),<span class="number">0</span>)</span><br><span class="line"><span class="keyword">FROM</span> emp <span class="built_in">e</span> <span class="keyword">right</span> <span class="keyword">join</span> dept d</span><br><span class="line"><span class="keyword">on</span> (<span class="built_in">e</span>.deptno=d.deptno)</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> d.dname;</span><br><span class="line"> </span><br><span class="line">12.查询出每个部门的名称、位置、部门人数、平均工资</span><br><span class="line"><span class="keyword">select</span> d.dname,d.loc,<span class="built_in">count</span>(<span class="built_in">e</span>.empno),<span class="built_in">avg</span>(sal)</span><br><span class="line"><span class="keyword">from</span> emp <span class="built_in">e</span></span><br><span class="line"><span class="keyword">right</span>  <span class="keyword">join</span> dept d</span><br><span class="line"><span class="keyword">on</span>(d.deptno = <span class="built_in">e</span>.deptno)</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> d.dname,d.loc;</span><br><span class="line"> </span><br><span class="line">统计平均工资大于2000的部门的详细信息</span><br><span class="line"><span class="keyword">SELECT</span> d.*,<span class="built_in">avg</span>(<span class="built_in">e</span>.sal) </span><br><span class="line"><span class="keyword">FROM</span>  emp <span class="built_in">e</span>, dept d</span><br><span class="line"><span class="keyword">WHERE</span> d.deptno = <span class="built_in">e</span>.deptno</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> d.deptno,d.dname,d.loc</span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">AVG</span>(<span class="built_in">e</span>.sal)&gt;<span class="number">2000</span>;</span><br><span class="line">或者：</span><br><span class="line"><span class="keyword">SELECT</span> d.*,<span class="built_in">avg</span>(<span class="built_in">e</span>.sal) <span class="keyword">FROM</span> emp <span class="built_in">e</span></span><br><span class="line"><span class="keyword">join</span> dept d</span><br><span class="line"><span class="keyword">on</span> (d.deptno = <span class="built_in">e</span>.deptno)</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> d.deptno,d.dname,d.loc</span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">AVG</span>(<span class="built_in">e</span>.sal)&gt;<span class="number">2000</span>;</span><br><span class="line"> </span><br><span class="line">显示雇员姓名，根据其服务年限，将最老的雇员排在最前面</span><br><span class="line"><span class="keyword">select</span>  ename, hiredate  <span class="keyword">from</span>  emp  <span class="keyword">order</span>  <span class="keyword">by</span>  hiredate;</span><br></pre></td></tr></table></figure>

<h1 id="作业6"><a href="#作业6" class="headerlink" title="作业6"></a>作业6</h1><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br></pre></td><td class="code"><pre><span class="line">一、本习题以scott用户登陆，使用员工信息表（emp）、部门表（dept）。完成以下问题</span><br><span class="line"><span class="number">1</span>、找出emp表中的姓名（ENAME）第三个字母是A的员工姓名</span><br><span class="line">SQL&gt; <span class="keyword">select</span> ename</span><br><span class="line">  <span class="number">2</span>  <span class="keyword">from</span> emp</span><br><span class="line">  <span class="number">3</span>  <span class="keyword">where</span> ename <span class="keyword">like</span> <span class="comment">'__A%';</span></span><br><span class="line">  </span><br><span class="line"><span class="number">2</span>、找出emp表中姓名中含有A和N的员工姓名</span><br><span class="line"><span class="keyword">SELECT</span> ename</span><br><span class="line"><span class="keyword">FROM</span> emp</span><br><span class="line"><span class="keyword">WHERE</span> ename <span class="keyword">LIKE</span> <span class="comment">'%A%' and ename like '%N%’;</span></span><br><span class="line"></span><br><span class="line"><span class="number">3</span>、找出所有有佣金（COMM）的员工，列出姓名、工资、佣金，显示结果按工资从小到大，佣金从大到小排列</span><br><span class="line"><span class="keyword">SELECT</span> ename,sal,comm</span><br><span class="line"><span class="keyword">FROM</span> emp</span><br><span class="line"><span class="keyword">WHERE</span> comm <span class="keyword">is</span> <span class="keyword">not</span> null</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> sal ,comm DESC;</span><br><span class="line"></span><br><span class="line"><span class="number">4</span>、列出部门编号为<span class="number">20</span>的所有的职位</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> job</span><br><span class="line"><span class="keyword">FROM</span> emp</span><br><span class="line"><span class="keyword">WHERE</span> deptno =<span class="number">20</span>;</span><br><span class="line">列出不属于SALES的部门的员工</span><br><span class="line"><span class="keyword">SELECT</span> ename,deptno</span><br><span class="line"><span class="keyword">FROM</span> emp</span><br><span class="line"><span class="keyword">WHERE</span> deptno &lt;&gt;(<span class="keyword">SELECT</span> deptno <span class="keyword">FROM</span> dept <span class="keyword">WHERE</span> dname=<span class="comment">'SALES');</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">Select</span> ename <span class="keyword">from</span> emp,dept</span><br><span class="line"><span class="keyword">Where</span> emp.deptno=dept.deptno</span><br><span class="line"><span class="keyword">And</span> dept.dname&lt;&gt;’SALES’</span><br><span class="line"> </span><br><span class="line"><span class="keyword">Select</span> ename <span class="keyword">from</span> emp <span class="keyword">join</span> depton emp.deptno=dept.deptno</span><br><span class="line"> </span><br><span class="line"><span class="keyword">where</span> dept.dname&lt;&gt;’SALES’</span><br><span class="line"> </span><br><span class="line"><span class="number">6</span>、显示工资不在<span class="number">1000</span>~<span class="number">1500</span>之间的员工信息：名字、工资，按工资从大到小排序</span><br><span class="line"><span class="keyword">SELECT</span> ENAME,sal</span><br><span class="line"><span class="keyword">FROM</span> emp</span><br><span class="line"><span class="keyword">WHERE</span> sal <span class="keyword">NOT</span> BETWEEN <span class="number">1000</span> <span class="keyword">AND</span> <span class="number">1500</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> sal DESC;</span><br><span class="line"> </span><br><span class="line"><span class="number">7</span>、在表EMP中查询所有工资高于JONES的所有雇员姓名、工作和工资。</span><br><span class="line"><span class="keyword">SELECT</span> e.ename,e.job,e.sal</span><br><span class="line"><span class="keyword">FROM</span> emp e</span><br><span class="line"><span class="keyword">WHERE</span> e.sal &gt;(<span class="keyword">SELECT</span> sal</span><br><span class="line">                <span class="keyword">FROM</span> emp</span><br><span class="line">                <span class="keyword">WHERE</span> ename=<span class="comment">'JONES');</span></span><br><span class="line">列出没有对应部门表信息的所有雇员的姓名、工作。</span><br><span class="line"><span class="keyword">SELECT</span> e.ename,e.job</span><br><span class="line"><span class="keyword">FROM</span> emp e</span><br><span class="line"><span class="keyword">WHERE</span> e.deptno <span class="keyword">NOT</span> <span class="keyword">IN</span> (<span class="keyword">SELECT</span> deptno <span class="keyword">FROM</span> dept);</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">查找工资在<span class="number">1000</span>～<span class="number">3000</span>之间的雇员所在部门的所有人员信息</span><br><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> emp</span><br><span class="line"><span class="keyword">WHERE</span> deptno <span class="keyword">IN</span></span><br><span class="line">( <span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> deptno</span><br><span class="line">  <span class="keyword">from</span> emp</span><br><span class="line">  <span class="keyword">WHERE</span> sal BETWEEN <span class="number">1000</span> <span class="keyword">AND</span> <span class="number">3000</span>);</span><br><span class="line"> </span><br><span class="line">二、本题以hr用户登陆，使用员工表（employees）、部门表（departments）、区域表（regions），完成以下题目</span><br><span class="line"><span class="number">1</span>、列出前五位员工的名字、工资、涨薪后的工资（涨幅为<span class="number">8</span>%），以“元”为单位进行四舍五入</span><br><span class="line"><span class="keyword">SELECT</span> first_name,last_name,salary,round(salary+salary*<span class="number">0.8</span>)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> ROWNUM&lt;=<span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>、找出谁是最高领导，将名字按大写形式显示</span><br><span class="line"><span class="keyword">SELECT</span> UPPER(first_name)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> manager_id <span class="keyword">IS</span> NULL;</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>、找出first_name为David的员工的直接领导的信息</span><br><span class="line"><span class="keyword">SELECT</span> e2.*</span><br><span class="line"><span class="keyword">FROM</span> employees e1,employees e2</span><br><span class="line"><span class="keyword">WHERE</span> e1.manager_id=e2.employee_id</span><br><span class="line"><span class="keyword">AND</span> e1.first_name=<span class="comment">'David';</span></span><br><span class="line"></span><br><span class="line"><span class="number">4</span>、列出员工薪资高于他直接领导的员工的名称、工资，以及上司的名字和工资</span><br><span class="line">--e1代表员工表，e2代表直接领导表</span><br><span class="line"><span class="keyword">SELECT</span> e1.last_name,e1.salary,e2.last_name,e2.salary</span><br><span class="line"><span class="keyword">FROM</span> employees e1,employees e2</span><br><span class="line"><span class="keyword">WHERE</span> e1.manager_id=e2.employee_id</span><br><span class="line"><span class="keyword">AND</span> e1.salary&gt;e2.salary;</span><br><span class="line"></span><br><span class="line"><span class="number">5</span>、哪些员工和Chen（last_name）同一个部门</span><br><span class="line"><span class="keyword">SELECT</span> e.last_name</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">WHERE</span> e.department_id=(<span class="keyword">SELECT</span> department_id</span><br><span class="line">                       <span class="keyword">FROM</span> employees</span><br><span class="line">                       <span class="keyword">WHERE</span> last_name=<span class="comment">'Chen');</span></span><br><span class="line">                       </span><br><span class="line"><span class="number">6</span>、显示Executive部门有哪些职位？</span><br><span class="line"><span class="keyword">SELECT</span> e.job_id,d.department_name</span><br><span class="line"><span class="keyword">FROM</span> employees e,departments d</span><br><span class="line"><span class="keyword">WHERE</span> e.department_id=d.department_id</span><br><span class="line"><span class="keyword">AND</span> d.department_name=<span class="comment">'Executive';</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">Select</span> job <span class="keyword">from</span> employees <span class="keyword">where</span> department_id=</span><br><span class="line"> </span><br><span class="line">(<span class="keyword">select</span> department_id <span class="keyword">from</span> departments</span><br><span class="line"><span class="keyword">where</span> dpartment_name=’Executive’）</span><br><span class="line"></span><br><span class="line"><span class="number">7</span>、求整个公司薪资最低与最高员工的薪资相差多少？</span><br><span class="line"><span class="keyword">SELECT</span> MAX(salary)-MIN(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br><span class="line"><span class="number">8</span>、显示整个公司的最高薪资、最低薪资、平均薪资、工资总和，并四舍五入保留到整数位</span><br><span class="line"><span class="keyword">SELECT</span> ROUND(MAX(salary)),ROUND(MIN(salary)),ROUND(AVG(salary)),round(SUM(salary+nvl(comm,<span class="number">0</span>)))</span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="number">9</span>、哪些部门的人数比<span class="number">90</span> 部门的人数多？</span><br><span class="line">-<span class="number">-90</span>号部门人数</span><br><span class="line"><span class="keyword">SELECT</span> COUNT(*)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id=<span class="number">90</span></span><br><span class="line">--比<span class="number">90</span>号部门人数多的部门</span><br><span class="line"><span class="keyword">SELECT</span> department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line">HAVING COUNT(*)&gt;(<span class="keyword">SELECT</span> COUNT(*)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id=<span class="number">90</span>);</span><br><span class="line">--部门名称</span><br><span class="line"><span class="keyword">Select</span> department_name <span class="keyword">from</span> departments <span class="keyword">where</span> department_id=</span><br><span class="line"></span><br><span class="line"><span class="number">10</span>、哪些员工的工资，在<span class="number">30</span>号部门和<span class="number">80</span>号部门的平均工资之间</span><br><span class="line"><span class="keyword">SELECT</span> salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary BETWEEN (<span class="keyword">SELECT</span> MIN(nsal)<span class="keyword">FROM</span> (<span class="keyword">SELECT</span> AVG(salary)nsal <span class="keyword">FROM</span> employees</span><br><span class="line">      <span class="keyword">WHERE</span> department_id=<span class="number">30</span> UNION <span class="keyword">SELECT</span> AVG(salary)nsal <span class="keyword">FROM</span> employees</span><br><span class="line">      <span class="keyword">WHERE</span> department_id=<span class="number">80</span>))<span class="keyword">AND</span> (<span class="keyword">SELECT</span> MAX(nsal)<span class="keyword">FROM</span> (<span class="keyword">SELECT</span> AVG(salary)nsal <span class="keyword">FROM</span> employees</span><br><span class="line">      <span class="keyword">WHERE</span> department_id=<span class="number">30</span> UNION <span class="keyword">SELECT</span> AVG(salary)nsal <span class="keyword">FROM</span> employees</span><br><span class="line">      <span class="keyword">WHERE</span> department_id=<span class="number">80</span>));</span><br><span class="line">列出各个部门中工资最高的员工信息：名字、部门号、薪资</span><br><span class="line">--子查询找出工资部门中工资最高的薪水、部门号</span><br><span class="line"><span class="keyword">SELECT</span> MAX(salary) salary,department_id，ename</span><br><span class="line"><span class="keyword">FROM</span> employees <span class="keyword">where</span> department_id <span class="keyword">is</span> <span class="keyword">not</span> null</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> e1.last_name,e1.salary,e1.department_id</span><br><span class="line"><span class="keyword">FROM</span> employees e1,(<span class="keyword">SELECT</span> MAX(salary) salary,department_id</span><br><span class="line"><span class="keyword">FROM</span> employees <span class="keyword">where</span> department_id <span class="keyword">is</span> <span class="keyword">not</span> null</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id)e2</span><br><span class="line"><span class="keyword">where</span> e1.salary =e2.salary</span><br><span class="line"><span class="keyword">and</span> e1.department_id = e2.department_id</span><br><span class="line"> </span><br><span class="line">所在部门的平均工资超过<span class="number">5000</span>的员工的名字</span><br><span class="line">--子查询：部门的平均工资超过<span class="number">5000</span></span><br><span class="line"><span class="keyword">SELECT</span> department_id,avg(salary)  <span class="keyword">FROM</span> employees</span><br><span class="line">                       <span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line">                       HAVING AVG(salary)&gt;<span class="number">5000</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">SELECT</span> last_name <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="keyword">IN</span>(     </span><br><span class="line">                     <span class="keyword">SELECT</span> department_id</span><br><span class="line">                       <span class="keyword">FROM</span> employees</span><br><span class="line">                       <span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line">                       HAVING AVG(salary)&gt;<span class="number">5000</span>);</span><br></pre></td></tr></table></figure>

<h1 id="作业7"><a href="#作业7" class="headerlink" title="作业7"></a>作业7</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">基础篇(使用scott用户的emp、dept表来完成)</span><br><span class="line">查询所有员工姓名的前三个字符</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">substr</span>(ename,<span class="number">1</span>,<span class="number">3</span>) <span class="keyword">from</span> emp;</span><br><span class="line">查询所有员工的姓名，如果包含字母S，则用s替换</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">replace</span>(ename,<span class="string">'S'</span>,<span class="string">'s'</span>) <span class="keyword">from</span> emp;</span><br><span class="line">查询员工名字中不包含字母S 的员工</span><br><span class="line"><span class="keyword">select</span> ename <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="keyword">not</span> <span class="keyword">like</span> <span class="string">'%S%'</span>;</span><br><span class="line">查询员工姓名的第二个字母为M 的员工信息</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> <span class="keyword">substr</span>(ename,<span class="number">2</span>,<span class="number">1</span>)=<span class="string">'M'</span>;</span><br><span class="line">查询员工的姓名和入职日期，并按入职日期从先到后进行排序</span><br><span class="line"><span class="keyword">select</span> ename,hiredate <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> hiredate;</span><br><span class="line">显示所有员工的姓名、工种、工资，按工种降序排序，若工种相同则按工</span><br><span class="line">资升序排序</span><br><span class="line"><span class="keyword">select</span> ename,job,sal <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> job <span class="keyword">desc</span>,sal;</span><br><span class="line">查询至少有一个员工的部门信息</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> deptno <span class="keyword">from</span> emp;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> dept <span class="keyword">where</span> deptno=<span class="keyword">any</span>(<span class="keyword">select</span> <span class="keyword">distinct</span> deptno <span class="keyword">from</span> emp);</span><br><span class="line">查询工资比SMITH 员工 工资高的所有员工信息</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> sal&gt;(<span class="keyword">select</span> sal <span class="keyword">from</span> emp <span class="keyword">where</span> ename=<span class="string">'SMITH'</span>);</span><br><span class="line">查询各个部门的人数及平均工资</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(ename),<span class="keyword">avg</span>(sal),deptno <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno;</span><br><span class="line">查询工资SAL高于奖金COMM的员工信息</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> sal&gt;comm;</span><br><span class="line">查询各月倒数第八天入职的员工信息</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> hiredate=<span class="keyword">last_day</span>(hiredate)<span class="number">-8</span>;</span><br><span class="line">显示所有雇员的姓名以及满10年服务年限的日期</span><br><span class="line"><span class="keyword">select</span> ename,hiredate <span class="keyword">from</span> emp <span class="keyword">where</span> months_between(<span class="keyword">sysdate</span>,hiredate)/<span class="number">12</span>&gt;=<span class="number">10</span>;</span><br><span class="line">查询列出各部门的部门名和部门经理名字</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> e.ename,d.dname <span class="keyword">from</span> emp e <span class="keyword">join</span> emp m <span class="keyword">on</span>(e.empno=m.mgr) <span class="keyword">join</span> dept d <span class="keyword">on</span>(e.deptno=d.deptno);</span><br><span class="line">显示雇员姓名，根据其服务年限，将最老的雇员排在最前面</span><br><span class="line"><span class="keyword">select</span> ename <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> months_between(<span class="keyword">sysdate</span>,hiredate)/<span class="number">12</span> <span class="keyword">desc</span>;</span><br><span class="line">分组统计每个部门下，每种职位的平均奖金（包括没奖金的人）和总工资（包括奖金）</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">avg</span>(nvl2(comm,comm,<span class="number">0</span>)),<span class="keyword">sum</span>(nvl2(comm,comm+sal,sal)),job,deptno <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno,job;</span><br><span class="line">查询各个部门中不同工种的最高工资；</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">max</span>(sal),deptno <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno;</span><br><span class="line"> 查询10号部门员工及其领导的信息；</span><br><span class="line"><span class="keyword">select</span> e.*,m.* <span class="keyword">from</span> emp e <span class="keyword">join</span> emp m <span class="keyword">on</span>(e.mgr=m.empno) <span class="keyword">where</span> e.deptno=<span class="number">10</span> <span class="keyword">and</span> m.deptno=<span class="number">10</span>;</span><br><span class="line">找出谁是最高领导，将名字按大写形式显示</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">upper</span>(ename) <span class="keyword">from</span> emp <span class="keyword">where</span> mgr <span class="keyword">is</span> <span class="literal">null</span>;</span><br><span class="line">对23.652四舍五入到小数点前1位</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">round</span>(<span class="number">23.652</span>,<span class="number">1</span>) <span class="keyword">from</span> dual;</span><br><span class="line">在表EMP中查询所有工资高于JONES的雇员姓名、工作和工资</span><br><span class="line"><span class="keyword">select</span> ename,job,sal <span class="keyword">from</span> emp <span class="keyword">where</span> sal&gt;(<span class="keyword">select</span> sal <span class="keyword">from</span> emp <span class="keyword">where</span> ename=<span class="string">'JONES'</span>);</span><br><span class="line">更新emp表中sal列名为salary</span><br><span class="line"> </span><br><span class="line">显示所有雇员的姓名，用a替换所有'A'</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">replace</span>(ename,<span class="string">'A'</span>,<span class="string">'a'</span>) <span class="keyword">from</span> emp;</span><br><span class="line">显示只有首字母大写的所有雇员的姓名（两种方法）</span><br><span class="line"><span class="keyword">select</span> ename <span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">substr</span>(ename,<span class="number">1</span>,<span class="number">1</span>)=<span class="keyword">upper</span>( <span class="keyword">substr</span>(ename,<span class="number">1</span>,<span class="number">1</span>)) <span class="keyword">and</span> <span class="keyword">substr</span>(ename,<span class="number">2</span>)=<span class="keyword">lower</span>( <span class="keyword">substr</span>(ename,<span class="number">1</span>,<span class="number">1</span>));</span><br><span class="line">向emp 表中插入一条记录，员工名为MARY，号为8000，其他信息与SMITH员工的信息相同；</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp(ename,empno) <span class="keyword">values</span>(<span class="string">'MARY'</span>,<span class="number">8000</span>)</span><br><span class="line">求出部门平均薪水最高的部门名称</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">max</span>(<span class="keyword">avg</span>(sal)) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno;</span><br><span class="line"><span class="keyword">select</span> deptno,<span class="keyword">avg</span>(sal) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno</span><br><span class="line"><span class="keyword">having</span> <span class="keyword">avg</span>(sal)=( <span class="keyword">select</span> <span class="keyword">max</span>(<span class="keyword">avg</span>(sal)) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno);</span><br><span class="line"><span class="keyword">select</span> dname <span class="keyword">from</span> dept d <span class="keyword">join</span> (<span class="keyword">select</span> deptno,<span class="keyword">avg</span>(sal) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno</span><br><span class="line"><span class="keyword">having</span> <span class="keyword">avg</span>(sal)=( <span class="keyword">select</span> <span class="keyword">max</span>(<span class="keyword">avg</span>(sal)) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno)) a <span class="keyword">on</span>(d.deptno=a.deptno);</span><br></pre></td></tr></table></figure>

<h1 id="作业8"><a href="#作业8" class="headerlink" title="作业8"></a>作业8</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><span class="line">以scott用户登陆：</span><br><span class="line">基础：创建以下几张表，并且在表中增加相应的数据</span><br><span class="line">student学生表，表字段：</span><br><span class="line">sno  varchar2(10)  primary key  学号</span><br><span class="line">sname varchar2(20)     姓名</span><br><span class="line"> sage number(2)        年龄</span><br><span class="line">ssex varchar2(5)         性别</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student (</span><br><span class="line">sno <span class="built_in">varchar2</span>(<span class="number">10</span>) primary <span class="keyword">key</span>, </span><br><span class="line">sname <span class="built_in">varchar2</span>(<span class="number">20</span>),    </span><br><span class="line">sage <span class="built_in">number</span>(<span class="number">2</span>),       </span><br><span class="line">ssex <span class="built_in">varchar2</span>(<span class="number">5</span>)</span><br><span class="line">);</span><br><span class="line">学生表中的数据如下：</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> student <span class="keyword">for</span> <span class="keyword">update</span>;</span><br><span class="line">teacher教师表，表字段：</span><br><span class="line">tno varchar2(10) primary key    教师编号</span><br><span class="line"> tname varchar2(20)           教师姓名</span><br><span class="line">教师表中的数据如下：</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> teacher <span class="keyword">values</span>(<span class="string">'t001'</span>,<span class="string">'刘阳'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> teacher <span class="keyword">values</span>(<span class="string">'t002'</span>,<span class="string">'湛燕'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> teacher <span class="keyword">values</span>(<span class="string">'t003'</span>,<span class="string">'胡明星'</span>);</span><br><span class="line">course 课程表，表字段</span><br><span class="line">cno varchar2(10)       课程编号</span><br><span class="line"> cname varchar2(20)    课程名称</span><br><span class="line"> tno varchar2(20)       教师编号</span><br><span class="line">其中以cno为主键，tno为外键</span><br><span class="line">课程表中的数据如下</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> course(</span><br><span class="line">cno <span class="built_in">varchar2</span>(<span class="number">20</span>) primary <span class="keyword">key</span>,</span><br><span class="line">cname <span class="built_in">varchar2</span>(<span class="number">20</span>),</span><br><span class="line">tno <span class="built_in">varchar2</span>(<span class="number">20</span>) <span class="keyword">references</span> teacher(tno)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> course <span class="keyword">for</span> <span class="keyword">update</span>;</span><br><span class="line"> </span><br><span class="line">SC成绩表，表字段：</span><br><span class="line">sno varchar2(10)     学生学号</span><br><span class="line">cno varchar2(10)     课程编号</span><br><span class="line"> score number(4,2),   成绩</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> course <span class="keyword">for</span> <span class="keyword">update</span>;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> sc(</span><br><span class="line">sno <span class="built_in">varchar2</span>(<span class="number">10</span>),</span><br><span class="line">cno <span class="built_in">varchar2</span>(<span class="number">10</span>),</span><br><span class="line">score <span class="built_in">number</span>(<span class="number">4</span>,<span class="number">2</span>)</span><br><span class="line">);</span><br><span class="line">成绩表中的数据如下：</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">FROM</span> sc <span class="keyword">for</span> <span class="keyword">update</span>;</span><br><span class="line">对sc表添加两个外键。</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> sc <span class="keyword">modify</span> sno <span class="keyword">references</span> student(sno);</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> sc <span class="keyword">modify</span> cno <span class="keyword">references</span> course(cno);</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">删除没有成绩的学生。</span><br><span class="line"><span class="keyword">delete</span> student <span class="keyword">where</span> sno <span class="keyword">not</span> <span class="keyword">in</span>(<span class="keyword">select</span> <span class="keyword">distinct</span> sno <span class="keyword">from</span> sc);</span><br><span class="line">更新成绩为58一下的学生成绩为60.</span><br><span class="line"><span class="keyword">update</span> sc <span class="keyword">set</span> score=<span class="number">60</span> <span class="keyword">where</span> score&lt;<span class="number">58</span>;</span><br><span class="line">查询所有学生的成绩。</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> sc;</span><br><span class="line"><span class="keyword">select</span> sname,score <span class="keyword">from</span> student s,sc c <span class="keyword">where</span> s.sno=c.sno;</span><br><span class="line">查询每门课程的学生数量</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(sno),cno <span class="keyword">from</span> sc <span class="keyword">group</span> <span class="keyword">by</span> cno;</span><br><span class="line">对年龄加上1-150的约束。</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="keyword">modify</span> sage <span class="keyword">check</span>(sage <span class="keyword">between</span> <span class="number">1</span> <span class="keyword">and</span> <span class="number">150</span>);</span><br><span class="line">对性别加上约束。</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="keyword">modify</span> <span class="keyword">check</span>(ssex <span class="keyword">in</span>(<span class="string">'男'</span>,<span class="string">'女'</span>)));</span><br><span class="line">对学生表中其他字段设置不能为空。</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="keyword">modify</span> sno <span class="keyword">not</span> <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="keyword">modify</span> sname <span class="keyword">not</span> <span class="literal">null</span>;</span><br><span class="line">创建一张包含学生姓名、学生课程名、学生成绩的视图表</span><br><span class="line">conn system/hzn@orcl;</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">create</span> <span class="keyword">view</span> <span class="keyword">to</span> scott;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">view</span> scc(sname,cname,score)</span><br><span class="line"> <span class="keyword">as</span> <span class="keyword">select</span> sname,cname,score <span class="keyword">from</span> student s,course e,sc c</span><br><span class="line"><span class="keyword">where</span> s.sno=c.sno <span class="keyword">and</span> e.cno=c.cno;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> scc;</span><br><span class="line">conn system/hzn@orcl;</span><br><span class="line"><span class="keyword">revoke</span> <span class="keyword">create</span> <span class="keyword">view</span> <span class="keyword">from</span> scott;</span><br><span class="line"> </span><br><span class="line">10、对SC 成绩表中的学生学号创建索引sno_index</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">index</span> sno_index <span class="keyword">on</span> sc(sno);</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">提高：</span><br><span class="line">查询“c001”课程比“c002”课程成绩高的所有学生的学号；</span><br><span class="line"><span class="keyword">select</span> s.sno <span class="keyword">from</span> sc s,sc c <span class="keyword">where</span> s.sno=c.sno <span class="keyword">and</span> s.cno=<span class="string">'c001'</span> <span class="keyword">and</span> c.cno=<span class="string">'c002'</span> <span class="keyword">and</span> s.score&gt;c.score;</span><br><span class="line">查询平均成绩大于60 分的同学的学号和平均成绩；</span><br><span class="line"><span class="keyword">select</span> sno,<span class="keyword">avg</span>(score) <span class="keyword">from</span> sc <span class="keyword">group</span> <span class="keyword">by</span> sno <span class="keyword">having</span> <span class="keyword">avg</span>(score)&gt;<span class="number">60</span>;</span><br><span class="line">查询所有同学的学号、姓名、选课数、总成绩；</span><br><span class="line"><span class="keyword">select</span> s.sno,sname,<span class="keyword">count</span>(cno),<span class="keyword">sum</span>(score) <span class="keyword">from</span> sc s,student t <span class="keyword">where</span> s.sno=t.sno <span class="keyword">group</span> <span class="keyword">by</span> s.sno,sname;</span><br><span class="line">查询姓“刘”的老师的个数；</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(tname) <span class="keyword">from</span> teacher <span class="keyword">where</span> tname <span class="keyword">like</span> <span class="string">'刘%'</span></span><br><span class="line">   <span class="number">5</span>、查询没学过“谌燕”老师课的同学的学号、姓名；</span><br><span class="line">  <span class="keyword">select</span> sno,sname <span class="keyword">from</span> student <span class="keyword">where</span> sno <span class="keyword">not</span> <span class="keyword">in</span>(  <span class="keyword">select</span> <span class="keyword">distinct</span> sno <span class="keyword">from</span> sc</span><br><span class="line">   <span class="keyword">where</span> cno</span><br><span class="line">   <span class="keyword">not</span> <span class="keyword">in</span>(<span class="keyword">select</span> cno <span class="keyword">from</span> course <span class="keyword">where</span> tno=(<span class="keyword">select</span> tno <span class="keyword">from</span> teacher <span class="keyword">where</span> tname=<span class="string">'湛燕'</span>)));</span><br><span class="line"></span><br><span class="line">  6、查询学过“c001”并且也学过编号“c002”课程的同学的学号、姓名；</span><br><span class="line"><span class="keyword">select</span> t.sno,t.sname <span class="keyword">from</span> sc s,student  t <span class="keyword">where</span> s.cno=<span class="string">'c001'</span> <span class="keyword">and</span> t.sno=s.sno</span><br><span class="line">   <span class="keyword">intersect</span></span><br><span class="line"> <span class="keyword">select</span> t.sno,t.sname <span class="keyword">from</span> sc s,student  t <span class="keyword">where</span> s.cno=<span class="string">'c002'</span> <span class="keyword">and</span> t.sno=s.sno;</span><br><span class="line">  7、查询学过“谌燕”老师所教的所有课的同学的学号、姓名；</span><br><span class="line"><span class="keyword">select</span> sno,sname <span class="keyword">from</span> student <span class="keyword">where</span> sno <span class="keyword">in</span>(  <span class="keyword">select</span> <span class="keyword">distinct</span> sno <span class="keyword">from</span> sc</span><br><span class="line">   <span class="keyword">where</span> cno</span><br><span class="line">   <span class="keyword">in</span>(<span class="keyword">select</span> cno <span class="keyword">from</span> course <span class="keyword">where</span> tno=(<span class="keyword">select</span> tno <span class="keyword">from</span> teacher <span class="keyword">where</span> tname=<span class="string">'湛燕'</span>)));</span><br><span class="line">  8、查询课程编号“c002”的成绩比课程编号“c001”课程低的所有同学的学号、姓名；</span><br><span class="line">  <span class="keyword">select</span> s.sno,s.sname <span class="keyword">from</span> student s,sc c</span><br><span class="line">  <span class="keyword">where</span> c.score&lt;<span class="keyword">any</span>(<span class="keyword">select</span> score <span class="keyword">from</span> sc <span class="keyword">where</span> cno=<span class="string">'c001'</span>) <span class="keyword">and</span> c.cno=<span class="string">'c002'</span> <span class="keyword">and</span> s.sno=c.sno;</span><br><span class="line"> </span><br><span class="line">  9、查询所有课程成绩小于60 分的同学的学号、姓名；</span><br><span class="line">(没成绩的也要算0</span><br><span class="line"><span class="keyword">select</span> t.sno,t.sname <span class="keyword">from</span> student t,sc s <span class="keyword">where</span> s.score&lt;<span class="number">60</span> <span class="keyword">and</span> s.sno=t.sno;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">  10、查询没有学全所有课的同学的学号、姓名</span><br><span class="line"><span class="keyword">select</span> t.sno,t.sname <span class="keyword">from</span> sc s,student t <span class="keyword">where</span> s.cno&lt;&gt;<span class="keyword">all</span>(<span class="keyword">select</span> cno <span class="keyword">from</span> course) <span class="keyword">and</span> s.sno=t.sno;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">  11、查询任何一门课程成绩在70 分以上的姓名、课程名称和分数</span><br><span class="line"><span class="keyword">select</span> t.sname,c.cname,s.score <span class="keyword">from</span> student t,course c,sc s</span><br><span class="line">  <span class="keyword">where</span> s.score&gt;<span class="number">70</span> <span class="keyword">and</span> s.sno=t.sno <span class="keyword">and</span> s.cno=c.cno;</span><br><span class="line">  12、求选了课程的学生人数</span><br><span class="line"> <span class="keyword">select</span> <span class="keyword">count</span>(<span class="keyword">distinct</span> sno) <span class="keyword">from</span> sc;</span><br><span class="line">  13、查询全部学生都选修的课程的课程号和课程名</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(cno),cno <span class="keyword">from</span> sc <span class="keyword">group</span> <span class="keyword">by</span> cno <span class="keyword">having</span> <span class="keyword">count</span>(cno)=(<span class="keyword">select</span> <span class="keyword">count</span>(<span class="keyword">distinct</span> sno) <span class="keyword">from</span> sc);</span><br><span class="line">  <span class="keyword">select</span> c.cno,c.cname</span><br><span class="line">  <span class="keyword">from</span> course c,</span><br><span class="line">  (<span class="keyword">select</span> <span class="keyword">count</span>(cno),cno <span class="keyword">from</span> sc <span class="keyword">group</span> <span class="keyword">by</span> cno <span class="keyword">having</span> <span class="keyword">count</span>(cno)=(<span class="keyword">select</span> <span class="keyword">count</span>(<span class="keyword">distinct</span> sno) <span class="keyword">from</span> sc)) d</span><br><span class="line">  <span class="keyword">where</span> c.cno=d.cno;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">  14、统计每门课程的学生选修人数（超过10 人的课程才统计）。要求输出课程号和选修人数，查询结果按人数降序排列，若人数相同，按课程号升序排列</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(cno),cno <span class="keyword">from</span> sc <span class="keyword">group</span> <span class="keyword">by</span> cno <span class="keyword">having</span> <span class="keyword">count</span>(cno)&gt;<span class="number">10</span> <span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">count</span>(cno) <span class="keyword">desc</span>,cno;</span><br><span class="line">  15、删除“s002”同学的“c001”课程的成绩</span><br><span class="line">  <span class="keyword">delete</span> sc <span class="keyword">where</span> sno=<span class="string">'s002'</span> <span class="keyword">and</span> cno=<span class="string">'c001'</span>;</span><br></pre></td></tr></table></figure>

<h1 id="作业9"><a href="#作业9" class="headerlink" title="作业9"></a>作业9</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line">基础：</span><br><span class="line">以下题目在scott用户下做</span><br><span class="line">习题1、</span><br><span class="line">1、建立一个表（tmp_test），表结构与EMP相同，没有任何记录。</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tmp_test</span><br><span class="line"><span class="keyword">AS</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> <span class="number">1</span>=<span class="number">2</span>;</span><br><span class="line">删除部门号为30的记录，并删除该部门的所有成员。</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> emp <span class="keyword">disable</span> <span class="keyword">constraint</span> fk_deptno;//使外键失效</span><br><span class="line"><span class="keyword">DELETE</span>  dept <span class="keyword">WHERE</span> deptno=<span class="number">30</span>;</span><br><span class="line"><span class="keyword">DELETE</span> emp <span class="keyword">where</span> deptno=<span class="number">30</span>;</span><br><span class="line">3、tmp_test表中新增列性别SEX，字符型。</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tmp_test <span class="keyword">ADD</span> sex <span class="built_in">char</span>(<span class="number">2</span>);</span><br><span class="line">4、修改新雇员表中的MGR列，为字符型。该列数据不能为空</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tmp_test</span><br><span class="line"><span class="keyword">MODIFY</span> mgr <span class="built_in">VARCHAR2</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>;  </span><br><span class="line">5、将tmp_test表中的comm列删除</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tmp_test</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">COLUMN</span> comm;</span><br><span class="line">6、将tmp_test表删除</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> tmp_test;</span><br><span class="line">7、建立一个视图V_emp，视图包括EMP表的empno、ename、sal，并按sal从大到小排列。</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">create</span> <span class="keyword">view</span> <span class="keyword">to</span> scott;//给scott用户授权</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> <span class="keyword">REPLACE</span> <span class="keyword">VIEW</span> v_emp <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> empno,ename,sal</span><br><span class="line"><span class="keyword">FROM</span> emp</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> sal <span class="keyword">DESC</span>;</span><br><span class="line"> </span><br><span class="line">在myEMP表中建立ename的唯一性索引。</span><br><span class="line"><span class="keyword">Create</span> <span class="keyword">table</span> myEMP <span class="keyword">as</span> <span class="keyword">select</span> * <span class="keyword">from</span> emp;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">UNIQUE</span> <span class="keyword">INDEX</span> in_myemp_index <span class="keyword">ON</span> myemp(ename);</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">习题2、</span><br><span class="line">创建一个用户（hzn），并通过plsql工具去连接，需要写出所有的命令；且在plsql中连上hzn用户后，创建一下三张表；</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> hzn <span class="keyword">identified</span> <span class="keyword">by</span> hzn;</span><br><span class="line">conn /as sysdba; à以管理员身份登录</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">create</span> <span class="keyword">session</span> <span class="keyword">to</span> hzn;</span><br><span class="line">使用plsql工具，以test用户去连接</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">resource</span> <span class="keyword">to</span> hzn; à授予权限</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">create</span>  <span class="keyword">table</span> <span class="keyword">to</span> hzn; à授予用户创建表的权限</span><br><span class="line">conn hzn/hzn@orcl; à以test用户登录系统</span><br><span class="line">学生信息表：</span><br><span class="line">学号：sid     char (6) 主键</span><br><span class="line">姓名：sname     char/varchar2（10）</span><br><span class="line">性别：ssex        char (1) (M/F)</span><br><span class="line">年龄：sage       int</span><br><span class="line">电话：sphone       varchar2（12）</span><br><span class="line">写法一：</span><br><span class="line"><span class="keyword">Create</span> <span class="keyword">table</span> student(</span><br><span class="line"><span class="keyword">Sid</span> <span class="built_in">char</span>(<span class="number">6</span>) primary <span class="keyword">key</span>,</span><br><span class="line">Sname <span class="built_in">varchar2</span>(<span class="number">10</span>),</span><br><span class="line">Ssex <span class="built_in">char</span>(<span class="number">1</span>) <span class="keyword">check</span> (ssex <span class="keyword">in</span>(<span class="string">'M'</span>,<span class="string">'F'</span>)),</span><br><span class="line">Sage <span class="built_in">int</span>,</span><br><span class="line">Sphone <span class="built_in">varchar2</span>(<span class="number">12</span>));</span><br><span class="line"> </span><br><span class="line">写法二：</span><br><span class="line"><span class="keyword">Create</span> <span class="keyword">table</span> student(</span><br><span class="line"><span class="keyword">Sid</span> <span class="built_in">char</span>(<span class="number">6</span>),</span><br><span class="line">Sname <span class="built_in">varchar2</span>(<span class="number">10</span>),</span><br><span class="line">Ssex <span class="built_in">char</span>(<span class="number">1</span>) ,</span><br><span class="line">Sage <span class="built_in">int</span>,</span><br><span class="line">Sphone <span class="built_in">varchar2</span>(<span class="number">12</span>),</span><br><span class="line"><span class="keyword">constraint</span> pk_student_Sid primary <span class="keyword">key</span> (<span class="keyword">sid</span>),</span><br><span class="line"><span class="keyword">constraint</span> pk_student_ssex <span class="keyword">check</span> (ssex <span class="keyword">in</span>(<span class="string">'M'</span>,<span class="string">'F'</span>))</span><br><span class="line">);</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">课程信息表：</span><br><span class="line">编号：cid     char (6) 主键</span><br><span class="line">名称：cname     char/varchar2（20）</span><br><span class="line">课时：chour        int</span><br><span class="line">讲师：tname    varchar2（10）</span><br><span class="line"><span class="keyword">Create</span> <span class="keyword">table</span> <span class="keyword">class</span>(</span><br><span class="line">cid <span class="built_in">char</span>(<span class="number">6</span>) primary <span class="keyword">key</span>,</span><br><span class="line">cname <span class="built_in">varchar2</span>(<span class="number">20</span>),</span><br><span class="line">chour <span class="built_in">int</span>,</span><br><span class="line">tname <span class="built_in">varchar2</span>(<span class="number">10</span>) );</span><br><span class="line">学生成绩表：</span><br><span class="line">编号：scid     int    主键</span><br><span class="line">学号：sid     char（6）  外键</span><br><span class="line">课程：cid       char（6）  外键</span><br><span class="line">成绩：grade   int</span><br><span class="line"><span class="keyword">Create</span> <span class="keyword">table</span> score (</span><br><span class="line">Scid <span class="built_in">int</span> primary <span class="keyword">key</span>,</span><br><span class="line"><span class="keyword">Sid</span> <span class="built_in">char</span>(<span class="number">6</span>),</span><br><span class="line">Cid <span class="built_in">char</span>(<span class="number">6</span>),</span><br><span class="line">Grade <span class="built_in">int</span>,</span><br><span class="line"><span class="keyword">constraint</span> fk_score_sid <span class="keyword">foreign</span> <span class="keyword">key</span> (<span class="keyword">sid</span>) <span class="keyword">references</span> student(<span class="keyword">sid</span>),</span><br><span class="line"><span class="keyword">constraint</span> fk_score_cid <span class="keyword">foreign</span> <span class="keyword">key</span> (cid) <span class="keyword">references</span></span><br><span class="line"><span class="keyword">Class</span>(cid));</span><br><span class="line"> </span><br><span class="line">并向表中构造10个学生的信息，包括成绩信息；以及5门课程信息；</span><br><span class="line">2、再创建ora用户，可以访问学生信息表；</span><br><span class="line"><span class="keyword">Create</span> <span class="keyword">user</span> ora <span class="keyword">identified</span> <span class="keyword">by</span> ora;</span><br><span class="line">Conn  /as sysdba;</span><br><span class="line"><span class="keyword">Grant</span> <span class="keyword">connect</span>,<span class="keyword">resource</span> <span class="keyword">to</span> ora;</span><br><span class="line"><span class="keyword">Grant</span> <span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">to</span> ora;</span><br><span class="line"><span class="keyword">Grant</span> <span class="keyword">select</span> <span class="keyword">on</span> hzn.student <span class="keyword">to</span> ora;</span><br><span class="line"><span class="keyword">Grant</span> <span class="keyword">select</span> <span class="keyword">on</span> hzn.class <span class="keyword">to</span> ora;</span><br><span class="line"><span class="keyword">Grant</span> <span class="keyword">select</span> <span class="keyword">on</span> hzn.score <span class="keyword">to</span> ora;</span><br><span class="line">3、将课程信息表导入到ora用户中</span><br><span class="line">以system用户登录系统</span><br><span class="line">导出：</span><br><span class="line">exp userid=system/manager@orcl tables=(hzn.class) file=d:\class.dmp</span><br><span class="line">导入：</span><br><span class="line">Imp userid=system/manager@orcl file=d:\class.dmp fromuser=hzn touser=ora;</span><br></pre></td></tr></table></figure>

<h1 id="作业10"><a href="#作业10" class="headerlink" title="作业10"></a>作业10</h1><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"> <span class="number">1</span>、编写一个程序块，从employees表中显示last_name为“Sullivan”的雇员的薪水和职位。</span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">v_salary number(<span class="number">10</span>,<span class="number">2</span>);</span><br><span class="line">v_job_id varchar2(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">select</span> salary,job_id <span class="keyword">into</span> v_salary,v_job_id <span class="keyword">from</span> employees <span class="keyword">where</span> last_name=<span class="string">'Sullivan'</span>;</span><br><span class="line">dbms_output.put_line(<span class="string">'薪水是'</span>||v_salary||<span class="string">'职位是'</span>||v_job_id);</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"> </span><br><span class="line">编写一个程序块，接受用户输入一个部门号，从departments表中显示该部门的名称与所在位置；如果部门编号不存在，提示：您输入的部门编号不存在，请从新输入，谢谢</span><br><span class="line"> </span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">v_department_name varchar2(<span class="number">10</span>);</span><br><span class="line">v_location number(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">select</span> department_name,location_id <span class="keyword">into</span> v_department_name,v_location <span class="keyword">from</span> departments <span class="keyword">where</span> department_id=&amp;<span class="keyword">no</span>;</span><br><span class="line">dbms_output.put_line(<span class="string">'部门的名称是'</span>||v_department_name||<span class="string">' 所在位置在'</span>||v_location);</span><br><span class="line"><span class="keyword">exception</span></span><br><span class="line"><span class="keyword">when</span> <span class="built_in">no_data_found</span> <span class="keyword">then</span></span><br><span class="line">dbms_output.put_line(<span class="string">'请重新输入，谢谢'</span>);</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>

<h1 id="作业11"><a href="#作业11" class="headerlink" title="作业11"></a>作业11</h1><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><span class="line">一、用SCOTT用户emp dept等表：</span><br><span class="line"> </span><br><span class="line">查询emp表，显示薪水大于<span class="number">2000</span>，且工作类别是MANAGER的雇员信息</span><br><span class="line"> </span><br><span class="line">查询emp表，显示年薪大于<span class="number">30000</span>，工作类别不是MANAGER的雇员信息</span><br><span class="line"> </span><br><span class="line">查询emp表， 显示薪水在<span class="number">1500</span>到<span class="number">3000</span>之间，工作类别以“M”开头的雇员信息</span><br><span class="line"> </span><br><span class="line">查询emp表，显示佣金为空并且部门号为<span class="number">20</span>或<span class="number">30</span>的雇员信息(佣金=薪水SAL+津贴COMM)</span><br><span class="line"> </span><br><span class="line">查询emp表，显示佣金不为空或者部门号为<span class="number">20</span>的雇员信息，要求按照薪水降序排列 (佣金=薪水+津贴)</span><br><span class="line"> </span><br><span class="line">查询emp表，显示年薪大于<span class="number">30000</span>工作类别不是MANAGER，且部门号不是<span class="number">10</span>或<span class="number">40</span>的雇员信息，要求按照雇员姓名进行排列</span><br><span class="line"> </span><br><span class="line"><span class="number">7.</span>用一个sql语句完成在字符串”hello”左右各添加<span class="number">5</span>个‘*’，使其最终返回’*****hello*****’（禁止使用 | | 或 concate）</span><br><span class="line"> </span><br><span class="line"><span class="number">8.</span>写一条sql语句返回”abcdefg”的后三位字符“efg”</span><br><span class="line"> </span><br><span class="line"><span class="number">9.</span>在scott用户下创建表E，表字段及内容如下：</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"><span class="number">10.</span>要求写一条sql语句统计出如下图所示结果(提示：需要用到sum函数)：</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">提高：</span><br><span class="line"> </span><br><span class="line"><span class="number">11.</span>查询EMP、DEPT表，输出的列包含员工姓名、工资、部门编号、部门名称、部门地址.</span><br><span class="line"> </span><br><span class="line"><span class="number">12.</span>请从emp表中查询出所有员工的姓名及员工上司的姓名。</span><br><span class="line"> </span><br><span class="line"><span class="number">13.</span>此自连接中无法显示没有老板的员工，比如king。请修改该自连接语句，使其可以显示所有员工的姓名及其老板的姓名。</span><br><span class="line"> </span><br><span class="line"><span class="number">14.</span>查询EMP表，输出每个部门的部门编号及平均工资，并按部门编号降序排列.</span><br><span class="line"> </span><br><span class="line"><span class="number">15.</span>查询EMP表，输出每个职位的职位名称及平均工资，按平均工资升序排列.</span><br><span class="line"> </span><br><span class="line"><span class="number">16.</span>查询EMP表，输出每个部门的各个职位的平均工资，并按部门编号升序、平均工资降序排序。</span><br><span class="line"> </span><br><span class="line"><span class="number">17.</span>使用子查询，找出DEPT表中哪个部门下没有员工？</span><br><span class="line"> </span><br><span class="line"><span class="number">18.</span>使用子查询，找出那些工资低于各个部门所有员工的平均工资的员工</span><br><span class="line"> </span><br><span class="line"><span class="number">19.</span>使用子查询，找出那些工资低于其中任意一个部门的平均工资的员工</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">编写一个存储过程，显示雇员总人数</span><br><span class="line"> </span><br><span class="line"><span class="number">21.</span>编写一个函数，通过部门编号返回部门名称的函数</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">二、本题以hr用户登陆，使用员工表（employees）、部门表（departments）、区域表（regions），完成以下题目</span><br><span class="line">各个部门平均、最大、最小工资、人数，按照部门号升序排序</span><br><span class="line">各个部门中工资大于<span class="number">5000</span>的员工人数</span><br><span class="line">各个部门平均工资和人数，按照部门名字升序排序</span><br><span class="line">列出同部门中工资高于<span class="number">1000</span>的员工数量超过<span class="number">2</span>人的部门，显示部门名字、地区名字</span><br><span class="line">哪些员工的工资，高于整个公司的平均工资，列出员工的名字和工资，并按工资降序</span><br><span class="line">哪些员工的工资，介于<span class="number">50</span>号和<span class="number">80</span>号部门平均工资之间</span><br><span class="line">列出各个部门中工资最高的员工的信息：名字、部门号、工资</span><br><span class="line">薪水最高的部门的平均工资是多少？</span><br><span class="line">哪些部门的人数比<span class="number">90</span>号部门的人数多</span><br><span class="line">列出在同一部门共事，入职日期晚但工资高于其他同事的员工:名字、工资、入职日期</span><br><span class="line"><span class="number">11.</span>以首字母大写的方式显示所有员工的姓名(first_name)</span><br><span class="line"><span class="number">12.</span>显示正好为<span class="number">5</span>个字符的员工的姓名</span><br><span class="line"><span class="number">13.</span>显示所有员工姓名(frist_name)的前三个字符</span><br><span class="line"><span class="number">14.</span>显示所有员工的姓名(first_name),用hzn替换所有<span class="string">"A"</span></span><br><span class="line"><span class="number">15.</span>显示员工的详细资料,按姓名排序</span><br><span class="line"><span class="number">16.</span>显示满<span class="number">10</span>年服务年限的员工的姓名和受雇日期</span><br><span class="line"><span class="number">17.</span>显示员工的姓名和受雇日期,根据其服务年限,将最老的员工排在最前面</span><br><span class="line"><span class="number">18.</span>整个公司有多少个领导</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">三、创建以下几张表，并且在表中增加相应的数据</span><br><span class="line">student学生表，表字段：</span><br><span class="line">sno  varchar2(<span class="number">10</span>)  primary key  学号</span><br><span class="line">sname varchar2(<span class="number">20</span>)     姓名</span><br><span class="line"> sage number(<span class="number">2</span>)        年龄</span><br><span class="line">ssex varchar2(<span class="number">5</span>)         性别</span><br><span class="line">学生表中的数据如下：</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">teacher教师表，表字段：</span><br><span class="line">tno varchar2(<span class="number">10</span>) primary key    教师编号</span><br><span class="line"> tname varchar2(<span class="number">20</span>)           教师姓名</span><br><span class="line">教师表中的数据如下：</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">course 课程表，表字段</span><br><span class="line">cno varchar2(<span class="number">10</span>)       课程编号</span><br><span class="line"> cname varchar2(<span class="number">20</span>)    课程名称</span><br><span class="line"> tno varchar2(<span class="number">20</span>)       教师编号</span><br><span class="line">其中以cno、tno创建联合主键</span><br><span class="line">课程表中的数据如下</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">SC成绩表，表字段：</span><br><span class="line">sno varchar2(<span class="number">10</span>)     学生学号</span><br><span class="line">cno varchar2(<span class="number">10</span>)     课程编号</span><br><span class="line"> score number(<span class="number">4</span>,<span class="number">2</span>),   成绩</span><br><span class="line">以学号和课程编号创建联合主键</span><br><span class="line">成绩表中的数据如下：</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">向SC 表中插入一些记录，这些记录要求符合以下条件：没有上过编号“c002”课程的同学学号、“c002”号课的平均成绩；</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">查询各科成绩最高和最低的分：以如下形式显示：课程ID，最高分，最低分</span><br><span class="line"> </span><br><span class="line">查询不同老师所教不同课程平均分从高到低显示</span><br><span class="line"> </span><br><span class="line">查询每门课程被选修的学生数</span><br><span class="line"> </span><br><span class="line">查询出只选修了一门课程的全部学生的学号和姓名</span><br><span class="line"> </span><br><span class="line">查询男生、女生人数</span><br><span class="line"> </span><br><span class="line">查询姓“张”的学生名单</span><br><span class="line"> </span><br><span class="line">查询课程名称为“数据库”，且分数低于<span class="number">60</span> 的学生姓名和分数</span><br><span class="line"> </span><br><span class="line">查询所有学生的选课情况；</span><br><span class="line"> </span><br><span class="line">求选了课程的学生人数</span><br><span class="line"> </span><br><span class="line">查询任何一门课程成绩在<span class="number">70</span> 分以上的姓名、课程名称和分数；</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">SELECT last_name, job_id, salary,</span><br><span class="line">CASE sex WHEN <span class="string">'男'</span> THEN <span class="number">1</span></span><br><span class="line">           WHEN <span class="string">'女'</span> THEN <span class="number">1</span></span><br><span class="line">               ELSE <span class="number">0</span></span><br><span class="line">END</span><br><span class="line"><span class="string">"REVISED_SALARY"</span>  FROM employees;</span><br></pre></td></tr></table></figure>

<h1 id="作业12"><a href="#作业12" class="headerlink" title="作业12"></a>作业12</h1><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">8.查询出每一位雇员的姓名、职位、以及领导的姓名。</span><br><span class="line">(最高领导是没有部门的）</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">e</span>.ename,<span class="built_in">e</span>.job,m.ename <span class="keyword">from</span> emp <span class="built_in">e</span>,emp m <span class="keyword">where</span> <span class="built_in">e</span>.mgr=m.empno;</span><br><span class="line"> </span><br><span class="line">10.要求查询出每一个雇员的编号、姓名、工资、部门名称、工资在所在公司的工资等级</span><br><span class="line">(没有部门的员工也查出来)</span><br><span class="line">方法一：</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">e</span>.empno,<span class="built_in">e</span>.ename,<span class="built_in">e</span>.sal,d.dname,s.grade <span class="keyword">from</span> emp <span class="built_in">e</span>,dept d, salgrade s</span><br><span class="line"><span class="keyword">where</span> (<span class="built_in">e</span>.deptno=d.deptno <span class="keyword">or</span> <span class="built_in">e</span>.deptno <span class="keyword">is</span> <span class="literal">null</span>) <span class="keyword">and</span> (<span class="built_in">e</span>.sal <span class="keyword">between</span> losal <span class="keyword">and</span> hisal);</span><br><span class="line">方法2：</span><br><span class="line"><span class="keyword">Select</span> <span class="built_in">e</span>.empno,<span class="built_in">e</span>.ename,<span class="built_in">e</span>.sal,d.dname,sg.grade</span><br><span class="line"><span class="keyword">From</span> emp <span class="built_in">e</span></span><br><span class="line"><span class="keyword">Left</span> <span class="keyword">Join</span>  dept d <span class="keyword">on</span> <span class="built_in">e</span>.deptno=d.deptno</span><br><span class="line"><span class="keyword">Join</span>  salgrade sg <span class="keyword">on</span> <span class="built_in">e</span>.sal <span class="keyword">BETWEEN</span> sg.losal <span class="keyword">AND</span> sg.hisal;</span><br><span class="line"> </span><br><span class="line">12.查询出每个部门的名称、位置、部门人数、平均工资</span><br><span class="line">(没有认得部门）</span><br><span class="line"><span class="keyword">select</span> d.dname,d.loc,<span class="built_in">count</span>(ename),<span class="built_in">avg</span>(nvl(sal,<span class="number">0</span>)) <span class="keyword">from</span> emp <span class="built_in">e</span></span><br><span class="line"><span class="keyword">right</span> <span class="keyword">join</span> dept d</span><br><span class="line"><span class="keyword">on</span> <span class="built_in">e</span>.deptno=d.deptno</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> d.dname,d.loc;</span><br><span class="line"> </span><br><span class="line">8、列出没有对应部门表信息的所有雇员的姓名、工作。</span><br><span class="line">（有部门但不在部门表，没有部门）</span><br><span class="line"><span class="keyword">select</span> ename,job <span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">where</span> deptno <span class="keyword">not</span> <span class="keyword">in</span>(<span class="keyword">select</span> deptno <span class="keyword">from</span> dept)</span><br><span class="line"><span class="keyword">or</span> deptno <span class="keyword">is</span> <span class="literal">null</span>;</span><br><span class="line"> </span><br><span class="line">9、哪些部门的人数比90 部门的人数多？</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(ename） <span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">where</span>  deptno=<span class="number">90</span>;</span><br><span class="line"><span class="keyword">select</span> deptno <span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> deptno <span class="keyword">having</span> <span class="built_in">count</span>(ename)&gt;</span><br><span class="line">(<span class="keyword">select</span> <span class="built_in">count</span>(ename) <span class="keyword">from</span> emp <span class="keyword">where</span>  deptno=<span class="number">90</span>);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">select</span> dname <span class="keyword">from</span> dept</span><br><span class="line"><span class="keyword">where</span> deptno</span><br><span class="line"><span class="keyword">in</span>(<span class="keyword">select</span> deptno <span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> deptno <span class="keyword">having</span> <span class="built_in">count</span>(ename)&gt;</span><br><span class="line">(<span class="keyword">select</span> <span class="built_in">count</span>(ename) <span class="keyword">from</span> emp <span class="keyword">where</span>  deptno=<span class="number">90</span>));</span><br><span class="line"> </span><br><span class="line">11、列出各个部门中工资最高的员工信息：名字、部门号、薪资</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">e</span>.ename,<span class="built_in">e</span>.deptno,<span class="built_in">e</span>.sal</span><br><span class="line"><span class="keyword">from</span> emp <span class="built_in">e</span>,(<span class="keyword">select</span> <span class="built_in">max</span>(sal) sal,deptno <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno) a</span><br><span class="line"><span class="keyword">where</span> <span class="built_in">e</span>.deptno=a.deptno <span class="keyword">and</span> <span class="built_in">e</span>.sal=a.sal;</span><br><span class="line"> </span><br><span class="line">7.用一个sql语句完成在字符串”hello”左右各添加5个‘*’，使其最终返回’*****hello*****’（禁止使用 | | 或 concate）</span><br></pre></td></tr></table></figure>


    </div>

    
    
    
      
  <div class="popular-posts-header">相关文章推荐</div>
  <ul class="popular-posts">
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\2021\05\17\linux\2021-05-17-linux-all\" rel="bookmark">linux-all</a></div>
    </li>
  </ul>

        <div class="reward-container">
  <div>赞赏一下吧～</div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    打赏
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/images/alipay.png" alt="tongsiying 支付宝">
        <p>支付宝</p>
      </div>

  </div>
</div>

        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>tongsiying
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://tongsiying.github.io/2021/05/17/%E4%B8%AD%E9%97%B4%E4%BB%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6_Database/2021-05-17-oracle-all/" title="oracle-all">https://tongsiying.github.io/2021/05/17/中间件/中间件_Database/2021-05-17-oracle-all/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener external nofollow noreferrer" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E5%8D%B0%E8%B1%A1-%E8%B1%AA/" rel="tag"># 印象-豪</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2018/07/08/hexo/2007-01-02-hexo-pic/" rel="prev" title="hexo引用本地图片无法显示">
      <i class="fa fa-chevron-left"></i> hexo引用本地图片无法显示
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/05/17/collect/collect_download/2021-05-17-download-download/" rel="next" title="download">
      download <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#数据库基础"><span class="nav-text">数据库基础</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SQL结构化查询语言"><span class="nav-text">SQL结构化查询语言</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#select语句"><span class="nav-text">select语句</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#where子句査询语句"><span class="nav-text">where子句査询语句</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#order-by子句"><span class="nav-text">order by子句</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SQL常用函数及分组函数"><span class="nav-text">SQL常用函数及分组函数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#字符函数"><span class="nav-text">字符函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数字函数"><span class="nav-text">数字函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#日期函数"><span class="nav-text">日期函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#round和trunc处理日期"><span class="nav-text">round和trunc处理日期</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#隐式转换"><span class="nav-text">隐式转换</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#显示转换"><span class="nav-text">显示转换</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#to-char"><span class="nav-text">to_char</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#to-number"><span class="nav-text">to_number</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#to-date"><span class="nav-text">to_ date</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#nvl函数"><span class="nav-text">nvl函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#nvl2"><span class="nav-text">nvl2</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#组函数（！！！！）"><span class="nav-text">组函数（！！！！）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#group-by"><span class="nav-text">group by</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#having-子句限定结果"><span class="nav-text">having 子句限定结果</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#嵌套组函数"><span class="nav-text">嵌套组函数</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SQL语句多表联接"><span class="nav-text">SQL语句多表联接</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#联接"><span class="nav-text">联接</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#联接的语法"><span class="nav-text">联接的语法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#natural-join创建联接"><span class="nav-text">natural join创建联接</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#join-using创建联接"><span class="nav-text">join using创建联接</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#主键、外键"><span class="nav-text">主键、外键</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#在using子句中使用表别名"><span class="nav-text">在using子句中使用表别名</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#join-on-创建联接"><span class="nav-text">join on 创建联接</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用on子句创建三向联接"><span class="nav-text">使用on子句创建三向联接</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#对联接应用附加条件"><span class="nav-text">对联接应用附加条件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用on子句进行自联接"><span class="nav-text">使用on子句进行自联接</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#非等值联接"><span class="nav-text">非等值联接</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#inner联接与outer联接"><span class="nav-text">inner联接与outer联接</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#left-outer-join-outer可以省略）"><span class="nav-text">left outer join(outer可以省略）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#right-outer-join"><span class="nav-text">right outer join</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#full-outer-join"><span class="nav-text">full outer join</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#笛卡尔积"><span class="nav-text">笛卡尔积</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#生成笛卡尔积（交叉联接）"><span class="nav-text">生成笛卡尔积（交叉联接）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#创建交叉联接"><span class="nav-text">创建交叉联接</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#思考题："><span class="nav-text">思考题：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#总结1"><span class="nav-text">总结1</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#总结2"><span class="nav-text">总结2:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#面试题："><span class="nav-text">面试题：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#补充："><span class="nav-text">补充：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#课上例题："><span class="nav-text">课上例题：</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SQL语句子査询和集合运算符"><span class="nav-text">SQL语句子査询和集合运算符</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#子句查询"><span class="nav-text">子句查询</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#单行子查询"><span class="nav-text">单行子查询</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#多行子查询"><span class="nav-text">多行子查询</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用exists运算符"><span class="nav-text">使用exists运算符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#子查询中的空值"><span class="nav-text">子查询中的空值</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#rownum分页查询"><span class="nav-text">rownum分页查询</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#集合运算符"><span class="nav-text">集合运算符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#子査询总结"><span class="nav-text">子査询总结:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#集合运算符总结："><span class="nav-text">集合运算符总结：</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SQL语句数据处理（DML-新增、修改、删除"><span class="nav-text">SQL语句数据处理（DML)新增、修改、删除</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#几个名称解释"><span class="nav-text">几个名称解释</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数据操纵DML"><span class="nav-text">数据操纵DML</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#insert"><span class="nav-text">insert</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#update"><span class="nav-text">update</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#delete"><span class="nav-text">delete</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数据库事务处理"><span class="nav-text">数据库事务处理</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#作业1"><span class="nav-text">作业1</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#作业2"><span class="nav-text">作业2</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#作业3"><span class="nav-text">作业3</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#作业4"><span class="nav-text">作业4</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#作业5"><span class="nav-text">作业5</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#作业6"><span class="nav-text">作业6</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#作业7"><span class="nav-text">作业7</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#作业8"><span class="nav-text">作业8</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#作业9"><span class="nav-text">作业9</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#作业10"><span class="nav-text">作业10</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#作业11"><span class="nav-text">作业11</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#作业12"><span class="nav-text">作业12</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="tongsiying"
      src="/images/gutianle.gif">
  <p class="site-author-name" itemprop="name">tongsiying</p>
  <div class="site-description" itemprop="description">问渠那得清如许？为有源头活水来。</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">432</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">21</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">48</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/tongsiying" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;tongsiying" rel="noopener external nofollow noreferrer" target="_blank"><i class="github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:wxtlucky1015@163.com" title="E-Mail → mailto:wxtlucky1015@163.com" rel="noopener external nofollow noreferrer" target="_blank"><i class="envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/u/2964109344" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;u&#x2F;2964109344" rel="noopener external nofollow noreferrer" target="_blank"><i class="weibo fa-fw"></i>Weibo</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/" title="tongsiying → https:&#x2F;&#x2F;tongsiying.github.io"><i class="wrench fa-fw"></i>tongsiying</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/ReadingNotes/" title="ReadingNotes → https:&#x2F;&#x2F;tongsiying.github.io&#x2F;ReadingNotes&#x2F;"><i class="book fa-fw"></i>ReadingNotes</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/blog/" title="blog → https:&#x2F;&#x2F;tongsiying.github.io&#x2F;blog&#x2F;"><i class="book fa-fw"></i>blog</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/blog/tools/" title="tools → https:&#x2F;&#x2F;tongsiying.github.io&#x2F;blog&#x2F;tools&#x2F;"><i class="wrench fa-fw"></i>tools</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/lanlan/" title="lanlan → https:&#x2F;&#x2F;tongsiying.github.io&#x2F;lanlan&#x2F;"><i class="wrench fa-fw"></i>lanlan</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/Music/" title="note → https:&#x2F;&#x2F;tongsiying.github.io&#x2F;Music&#x2F;"><i class="wrench fa-fw"></i>note</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/sound/" title="Music → https:&#x2F;&#x2F;tongsiying.github.io&#x2F;sound&#x2F;"><i class="wrench fa-fw"></i>Music</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/JSONFormat/" title="JSONFormat → https:&#x2F;&#x2F;tongsiying.github.io&#x2F;JSONFormat&#x2F;"><i class="wrench fa-fw"></i>JSONFormat</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/HTML5-Canvas/" title="Canvas → https:&#x2F;&#x2F;tongsiying.github.io&#x2F;HTML5-Canvas&#x2F;"><i class="wrench fa-fw"></i>Canvas</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/games/" title="games → https:&#x2F;&#x2F;tongsiying.github.io&#x2F;games&#x2F;"><i class="wrench fa-fw"></i>games</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tongsiying.github.io/love/" title="love → https:&#x2F;&#x2F;tongsiying.github.io&#x2F;love&#x2F;"><i class="wrench fa-fw"></i>love</a>
      </span>
  </div>



		<div style="">
  <canvas id="canvas" style="width:60%;">��ǰ�������֧��canvas������������������</canvas>
</div>
<script>
(function(){

   var digit=
    [
        [
            [0,0,1,1,1,0,0],
            [0,1,1,0,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,0,1,1,0],
            [0,0,1,1,1,0,0]
        ],//0
        [
            [0,0,0,1,1,0,0],
            [0,1,1,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [1,1,1,1,1,1,1]
        ],//1
        [
            [0,1,1,1,1,1,0],
            [1,1,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,0,0],
            [0,0,1,1,0,0,0],
            [0,1,1,0,0,0,0],
            [1,1,0,0,0,0,0],
            [1,1,0,0,0,1,1],
            [1,1,1,1,1,1,1]
        ],//2
        [
            [1,1,1,1,1,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,0,0,1,1,0],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0]
        ],//3
        [
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,1,0],
            [0,0,1,1,1,1,0],
            [0,1,1,0,1,1,0],
            [1,1,0,0,1,1,0],
            [1,1,1,1,1,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,0,1,1,0],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,1,1]
        ],//4
        [
            [1,1,1,1,1,1,1],
            [1,1,0,0,0,0,0],
            [1,1,0,0,0,0,0],
            [1,1,1,1,1,1,0],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0]
        ],//5
        [
            [0,0,0,0,1,1,0],
            [0,0,1,1,0,0,0],
            [0,1,1,0,0,0,0],
            [1,1,0,0,0,0,0],
            [1,1,0,1,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0]
        ],//6
        [
            [1,1,1,1,1,1,1],
            [1,1,0,0,0,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,1,1,0,0,0],
            [0,0,1,1,0,0,0],
            [0,0,1,1,0,0,0],
            [0,0,1,1,0,0,0]
        ],//7
        [
            [0,1,1,1,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0]
        ],//8
        [
            [0,1,1,1,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,0,0],
            [0,1,1,0,0,0,0]
        ],//9
        [
            [0,0,0,0,0,0,0],
            [0,0,1,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0],
            [0,0,1,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,0,0,0,0,0]
        ]//:
    ];

var canvas = document.getElementById('canvas');

if(canvas.getContext){
    var cxt = canvas.getContext('2d');
    //����canvas�Ŀ���
    var H = 100,W = 700;
    canvas.height = H;
    canvas.width = W;
    cxt.fillStyle = '#f00';
    cxt.fillRect(10,10,50,50);

    //�洢ʱ������
    var data = [];
    //�洢�˶���С��
    var balls = [];
    //�������Ӱ뾶
    var R = canvas.height/20-1;
    (function(){
        var temp = /(\d)(\d):(\d)(\d):(\d)(\d)/.exec(new Date());
        //�洢ʱ�����֣���ʮλСʱ����λСʱ��ð�š�ʮλ���ӡ���λ���ӡ�ð�š�ʮλ���ӡ���λ������7���������
        data.push(temp[1],temp[2],10,temp[3],temp[4],10,temp[5],temp[6]);
    })();

    /*���ɵ�������*/
    function renderDigit(index,num){
        for(var i = 0; i < digit[num].length; i++){
            for(var j = 0; j < digit[num][i].length; j++){
                if(digit[num][i][j] == 1){
                    cxt.beginPath();
                    cxt.arc(14*(R+2)*index + j*2*(R+1)+(R+1),i*2*(R+1)+(R+1),R,0,2*Math.PI);
                    cxt.closePath();
                    cxt.fill();
                }
            }
        }
    }

    /*����ʱ��*/
    function updateDigitTime(){
        var changeNumArray = [];
        var temp = /(\d)(\d):(\d)(\d):(\d)(\d)/.exec(new Date());
        var NewData = [];
        NewData.push(temp[1],temp[2],10,temp[3],temp[4],10,temp[5],temp[6]);
        for(var i = data.length-1; i >=0 ; i--){
            //ʱ�䷢���仯
            if(NewData[i] !== data[i]){
                //���仯������ֵ����data�����е������洢��changeNumArray������
                changeNumArray.push(i+'_'+(Number(data[i])+1)%10);
            }
        }
        //����С��
        for(var i = 0; i< changeNumArray.length; i++){
            addBalls.apply(this,changeNumArray[i].split('_'));
        }
        data = NewData.concat();
    }

    /*����С��״̬*/
    function updateBalls(){
        for(var i = 0; i < balls.length; i++){
            balls[i].stepY += balls[i].disY;
            balls[i].x += balls[i].stepX;
            balls[i].y += balls[i].stepY;
            if(balls[i].x > W + R || balls[i].y > H + R){
                balls.splice(i,1);
                i--;
            }
        }
    }

    /*����Ҫ�˶���С��*/
    function addBalls(index,num){
        var numArray = [1,2,3];
        var colorArray =  ["#3BE","#09C","#A6C","#93C","#9C0","#690","#FB3","#F80","#F44","#C00"];
        for(var i = 0; i < digit[num].length; i++){
            for(var j = 0; j < digit[num][i].length; j++){
                if(digit[num][i][j] == 1){
                    var ball = {
                        x:14*(R+2)*index + j*2*(R+1)+(R+1),
                        y:i*2*(R+1)+(R+1),
                        stepX:Math.floor(Math.random() * 4 -2),
                        stepY:-2*numArray[Math.floor(Math.random()*numArray.length)],
                        color:colorArray[Math.floor(Math.random()*colorArray.length)],
                        disY:1
                    };
                    balls.push(ball);
                }
            }
        }
    }

    /*��Ⱦ*/
    function render(){
        //���û������ȣ��ﵽ��ջ�����Ч��
        canvas.height = 100;
        //��Ⱦʱ��
        for(var i = 0; i < data.length; i++){
            renderDigit(i,data[i]);
        }
        //��ȾС��
        for(var i = 0; i < balls.length; i++){
            cxt.beginPath();
            cxt.arc(balls[i].x,balls[i].y,R,0,2*Math.PI);
            cxt.fillStyle = balls[i].color;
            cxt.closePath();
            cxt.fill();
        }
    }

    clearInterval(oTimer);
    var oTimer = setInterval(function(){
        //����ʱ��
        updateDigitTime();
        //����С��״̬
        updateBalls();
        //��Ⱦ
        render();
    },50);
}

})();
</script>
      </div>
    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; Weeny – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">tongsiying</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">7.6m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">114:48</span>
</div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
